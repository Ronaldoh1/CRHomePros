=== NEXT.JS PROJECT STRUCTURE DUMP FOR GROK ===
Generated on: 2026-02-21 23:20:59
Project Root: /Users/ron/Developer/DevShop/crhomepros
====================================================================================================

HOW TO USE THIS FILE:
Just copy-paste the whole thing to Grok!
====================================================================================================

--- file: .eslintrc.json ---
{
  "extends": "next/core-web-vitals",
  "rules": {
    "react/no-unescaped-entities": "off",
    "@next/next/no-img-element": "warn"
  }
}


==========================================================================================

--- file: FIREBASE-SETUP.md ---
# üî• Firebase Setup ‚Äî 3 Steps

## Step 1: Place service account key
Put Carlos's Firebase service account JSON at:
```
scripts/firebase-service-account.json
```
(You already have this file ‚Äî it's the one that starts with `crhomepros-firebase-adminsdk...`)

## Step 2: Set Storage rules
Go to Firebase Console ‚Üí Storage ‚Üí Rules tab ‚Üí paste this and publish:
```
rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    match /{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
```

## Step 3: Run the upload
```bash
npm install
node scripts/upload-images.js
```

That's it. All 29 images upload to Firebase CDN with 1-year cache headers.

## Verify
Open any URL it prints and confirm the image loads in your browser:
```
https://crhomepros.firebasestorage.app/o/projects%2F2025-05%2Fkitchen-pg-county-01.png?alt=media
```

## After migration
1. `.env.local` already has `NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=crhomepros.firebasestorage.app`
2. The site auto-resolves all image paths to Firebase CDN URLs
3. Uncomment the image directories in `.gitignore` to drop them from git


==========================================================================================

--- file: README.md ---
# CR Home Pros ‚Äî Website

> **Your Home. Our Expertise.** ‚Äî Modern website for CR Home Pros LLC  
> Built with Next.js 14, TypeScript, Tailwind CSS

---

## Quick Start

```bash
# 1. Install dependencies
npm install

# 2. Run locally
npm run dev
# ‚Üí http://localhost:3000

# 3. Build for production
npm run build

# 4. Deploy to Vercel
npx vercel --prod --yes
```

### Environment Variables

Create `.env.local` in the project root:

```env
# Firebase (optional ‚Äî forms work without it, just won't persist)
NEXT_PUBLIC_FIREBASE_API_KEY=
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=
NEXT_PUBLIC_FIREBASE_PROJECT_ID=
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=
NEXT_PUBLIC_FIREBASE_APP_ID=
FIREBASE_ADMIN_PROJECT_ID=
FIREBASE_ADMIN_CLIENT_EMAIL=
FIREBASE_ADMIN_PRIVATE_KEY=

# Email (optional ‚Äî for contact form notifications)
SENDGRID_API_KEY=
NOTIFICATION_EMAIL=crgeneralservicesinc@gmail.com
```

---

## Architecture

```
crhomepros/
‚îú‚îÄ‚îÄ app/                          # Next.js App Router pages
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                  # Homepage
‚îÇ   ‚îú‚îÄ‚îÄ about/page.tsx            # Company story, values, FAQ
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # All 12 services grid
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [slug]/page.tsx       # Individual service detail
‚îÇ   ‚îú‚îÄ‚îÄ projects/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # Filterable gallery (accordion + lightbox)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [slug]/page.tsx       # Individual project detail
‚îÇ   ‚îú‚îÄ‚îÄ blog/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # Blog listing + category filters + featured post
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [slug]/page.tsx       # Individual blog post
‚îÇ   ‚îú‚îÄ‚îÄ reviews/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx              # Customer testimonials
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ submit/page.tsx       # Review submission form
‚îÇ   ‚îú‚îÄ‚îÄ contact/page.tsx          # Contact form + hours
‚îÇ   ‚îú‚îÄ‚îÄ referrals/page.tsx        # Referral program ($100-$750+)
‚îÇ   ‚îú‚îÄ‚îÄ get-started/page.tsx      # 5-step intake form
‚îÇ   ‚îú‚îÄ‚îÄ estimate/page.tsx         # Interactive cost calculator
‚îÇ   ‚îú‚îÄ‚îÄ admin/                    # Admin dashboard + lead hunter + field notes
‚îÇ   ‚îú‚îÄ‚îÄ layout.tsx                # Root layout (fonts, meta, structured data, PWA)
‚îÇ   ‚îú‚îÄ‚îÄ robots.ts                 # Robots.txt generation
‚îÇ   ‚îú‚îÄ‚îÄ sitemap.ts                # XML sitemap generation
‚îÇ   ‚îî‚îÄ‚îÄ api/                      # API routes for form submissions
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ layout/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navbar.tsx            # Sticky nav with scroll-shrink logo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Footer.tsx            # Footer with trust badges + service areas
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FloatingContact.tsx   # Floating phone/WhatsApp button
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ PromoBanner.tsx       # ‚≠ê Toggleable promotional banner
‚îÇ   ‚îú‚îÄ‚îÄ sections/                 # Homepage sections
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Hero.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ServicesPreview.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FeaturedProjects.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ MeetCarlos.tsx        # ‚≠ê Carlos intro + trust indicators
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ HowWeWork.tsx         # ‚≠ê 4-step process visualization
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Stats.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WhyChooseUs.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Testimonials.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ CallToAction.tsx
‚îÇ   ‚îú‚îÄ‚îÄ forms/                    # Contact, Intake, Referral forms
‚îÇ   ‚îî‚îÄ‚îÄ ui/
‚îÇ       ‚îî‚îÄ‚îÄ LogoWatermark.tsx     # ‚≠ê Logo overlay with blue-blend effect
‚îÇ
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ constants.ts              # Company info, nav links, services, SEO
‚îÇ   ‚îú‚îÄ‚îÄ blog-posts.ts             # ‚≠ê 14 blog posts with full articles
‚îÇ   ‚îú‚îÄ‚îÄ gallery-data.ts           # Project images by category
‚îÇ   ‚îú‚îÄ‚îÄ utils.ts                  # Helpers (cn, formatPhone, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ firebase.ts               # Firebase client config
‚îÇ   ‚îú‚îÄ‚îÄ firebase-admin.ts         # Firebase admin config
‚îÇ   ‚îú‚îÄ‚îÄ firebase-services.ts      # Firestore CRUD
‚îÇ   ‚îî‚îÄ‚îÄ email.ts                  # SendGrid email helper
‚îÇ
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ images/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logo.png              # ‚≠ê New CR Home Pros logo
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024-01/              # Project photos (Jan batch)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2024-06/              # Project photos (Jun batch)
‚îÇ   ‚îî‚îÄ‚îÄ manifest.json             # ‚≠ê PWA manifest (Add to Home Screen)
‚îÇ
‚îú‚îÄ‚îÄ styles/globals.css            # Tailwind + Google Fonts + custom utilities
‚îú‚îÄ‚îÄ tailwind.config.ts            # Design system (navy + gold)
‚îî‚îÄ‚îÄ package.json
```

---

## Feature Guide ‚Äî Where to Make Changes

### üîß Promotional Banner

**File:** `components/layout/PromoBanner.tsx`

```typescript
const BANNER_ENABLED = true  // ‚Üê toggle on/off

const BANNER_CONFIG = {
  text: 'Winter Prep Special: 15% off roof inspections',
  subtext: 'Beat inflation with locked-in pricing',
  href: '/get-started',
  linkText: 'Claim Offer',
  countdownEnd: '',  // ISO date for countdown, e.g. '2026-03-01T00:00:00'
  style: 'gold',     // 'gold' | 'blue' | 'gradient'
}
```

### üìù Blog Posts

**File:** `lib/blog-posts.ts`

14 posts included across categories: Team & Culture, Tips & Advice, Kitchen, Bathroom, Basement, Outdoor. Add a new post by appending to the `BLOG_POSTS` array:

```typescript
{
  slug: "your-post-slug",
  title: "Your Post Title",
  category: "Tips & Advice",
  author: "Carlos Hernandez",
  date: "2026-03-15",
  readTime: "6 min",
  image: "https://images.unsplash.com/...",
  excerpt: "Short description...",
  content: `Full article with ## headers and **bold** text`,
}
```

### üì∏ Project Gallery

**File:** `lib/gallery-data.ts`

Add images to `public/images/` in a dated folder, then add an entry to `GALLERY_PROJECTS`.
File naming: lowercase `img_` prefix, uppercase `.JPEG`/`.PNG` extension.

### üé® Colors

**File:** `tailwind.config.ts`

| Token | Hex | Usage |
|-------|-----|-------|
| `primary-900` | `#1e3554` | Main navy (logo match) |
| `primary-800` | `#243b53` | Navbar, dark sections |
| `gold-500` | `#c4a052` | CTA buttons, accents |
| `dark-900` | `#0f172a` | Text, footer |

### üåê Navigation

**File:** `lib/constants.ts` ‚Üí `NAV_LINKS` (line ~78)

### üì± PWA

**File:** `public/manifest.json` ‚Äî Works on iOS + Android for "Add to Home Screen"

### üîç SEO

Meta + JSON-LD in `app/layout.tsx`, sitemap in `app/sitemap.ts`, robots in `app/robots.ts`

### üåç Company Info

**File:** `lib/constants.ts` ‚Äî All centralized: name, phone, email, address, license, hours, service areas

---

## Deployment

```bash
# Deploy to Vercel (don't delete images!)
cd crhomepros && npm run build && npx vercel --prod --yes

# Overlay new code without deleting images:
unzip -o crhomepros.zip -d . && cd crhomepros && npm run build && npx vercel --prod --yes
```

---

## TODO Before Final Deploy

- [ ] Replace sample testimonials with real reviews
- [ ] Get Google/Yelp review links ‚Üí update Reviews page
- [ ] Record video testimonials (English + Spanish) ‚Üí embed via YouTube
- [ ] Set up Google Analytics (GA4)
- [ ] Set up Firebase for form persistence
- [ ] Configure SendGrid for email notifications
- [ ] Add Google Site Verification meta tag
- [ ] Consider Spanish language version
- [ ] Set up Mailchimp for blog newsletter
# crhomepros


==========================================================================================

--- file: middleware.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { i18n } from './lib/i18n/config'

function getLocale(request: NextRequest): string {
  // Check if locale already in URL
  const { pathname } = request.nextUrl
  for (const locale of i18n.locales) {
    if (pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`) {
      return locale
    }
  }

  // DISABLED: Auto language detection
  // Always default to English unless explicitly /es/ in URL
  // Users can manually switch using language selector
  
  return i18n.defaultLocale
}

export function middleware(request: NextRequest) {
  const { pathname } = request.nextUrl

  // Skip for API routes, static files, images, etc.
  if (
    pathname.startsWith('/api/') ||
    pathname.startsWith('/_next/') ||
    pathname.startsWith('/images/') ||
    pathname.startsWith('/favicon') ||
    pathname.startsWith('/manifest') ||
    pathname.startsWith('/robots') ||
    pathname.startsWith('/sitemap') ||
    pathname.startsWith('/admin') ||
    pathname.includes('.')
  ) {
    return NextResponse.next()
  }

  // Check if locale prefix exists
  const pathnameHasLocale = i18n.locales.some(
    (locale) => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`
  )

  if (pathnameHasLocale) {
    return NextResponse.next()
  }

  // Redirect to locale-prefixed path
  // Default: English visitors get /en/..., Spanish get /es/...
  // But for root path, default locale doesn't redirect (keeps clean URLs)
  const locale = getLocale(request)

  // For the default locale (en), rewrite instead of redirect to keep clean URLs
  if (locale === i18n.defaultLocale) {
    const url = request.nextUrl.clone()
    url.pathname = `/en${pathname}`
    return NextResponse.rewrite(url)
  }

  // For non-default locales, redirect so the URL shows /es/...
  const url = request.nextUrl.clone()
  url.pathname = `/${locale}${pathname}`
  return NextResponse.redirect(url)
}

export const config = {
  matcher: [
    // Match all paths except static files
    '/((?!_next/static|_next/image|favicon.ico|images|api).*)',
  ],
}


==========================================================================================

--- file: next-env.d.ts ---
/// <reference types="next" />
/// <reference types="next/image-types/global" />

// NOTE: This file should not be edited
// see https://nextjs.org/docs/basic-features/typescript for more information.


==========================================================================================

--- file: next.config.js ---
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    remotePatterns: [
      {
        protocol: 'https',
        hostname: 'images.unsplash.com',
      },
      {
        protocol: 'https',
        hostname: 'firebasestorage.googleapis.com',
      },
      {
        protocol: 'https',
        hostname: 'crhomepros.web.app',
      },
    ],
  },
}

module.exports = nextConfig


==========================================================================================

--- file: package.json ---
{
  "name": "crhomepros",
  "version": "1.0.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "dev:turbo": "next dev --turbo",
    "build": "next build",
    "start": "next start",
    "lint": "next lint",
    "lint:fix": "next lint --fix",
    "type-check": "tsc --noEmit",
    "test": "vitest run",
    "test:watch": "vitest",
    "setup": "chmod +x scripts/*.sh && ./scripts/setup.sh",
    "deploy:dev": "./scripts/deploy.sh dev",
    "deploy:beta": "./scripts/deploy.sh beta",
    "deploy:prod": "./scripts/deploy.sh prod"
  },
  "dependencies": {
    "@hookform/resolvers": "^3.4.2",
    "clsx": "^2.1.1",
    "docx": "^9.5.1",
    "firebase": "^10.12.0",
    "firebase-admin": "^12.7.0",
    "framer-motion": "^11.2.4",
    "googleapis": "^144.0.0",
    "lucide-react": "^0.378.0",
    "next": "14.2.3",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-hook-form": "^7.51.5",
    "resend": "^3.2.0",
    "tailwind-merge": "^2.3.0",
    "zod": "^3.23.8"
  },
  "devDependencies": {
    "@types/node": "^20.12.12",
    "@types/react": "^18.3.2",
    "@types/react-dom": "^18.3.0",
    "autoprefixer": "^10.4.19",
    "eslint": "^8.57.0",
    "eslint-config-next": "14.2.3",
    "postcss": "^8.4.38",
    "tailwindcss": "^3.4.3",
    "typescript": "^5.4.5",
    "vitest": "^2.1.0",
    "@vitejs/plugin-react": "^4.3.0"
  },
  "engines": {
    "node": ">=18.0.0"
  }
}


==========================================================================================

--- file: postcss.config.js ---
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}


==========================================================================================

--- file: tailwind.config.ts ---
import type { Config } from 'tailwindcss'

const config: Config = {
  content: [
    './pages/**/*.{js,ts,jsx,tsx,mdx}',
    './components/**/*.{js,ts,jsx,tsx,mdx}',
    './app/**/*.{js,ts,jsx,tsx,mdx}',
  ],
  theme: {
    extend: {
      colors: {
        // Primary Blue ‚Äî matches the logo's rich deep blue
        primary: {
          50: '#edf0fc',
          100: '#d5daf7',
          200: '#aeb8f0',
          300: '#8393e5',
          400: '#5c6fd8',
          500: '#3a4fc4',
          600: '#2a3aa6',
          700: '#1e2a85',
          800: '#141d6a',
          900: '#0c1355',
          950: '#060b3a',
        },
        // Gold Accent
        gold: {
          50: '#fefdf8',
          100: '#fdf9e8',
          200: '#faf1c5',
          300: '#f5e499',
          400: '#e8c84a',
          500: '#c4a052',
          600: '#a68536',
          700: '#866a2a',
          800: '#6b5423',
          900: '#5a461f',
          950: '#33260f',
        },
        // Dark backgrounds ‚Äî tuned to blend with logo's deep blue
        dark: {
          50: '#f8f9fd',
          100: '#eef0f8',
          200: '#dde0f1',
          300: '#c3c8e3',
          400: '#8188b8',
          500: '#525a8c',
          600: '#383f6a',
          700: '#232850',
          800: '#121638',
          900: '#060828',
          950: '#010012',
        },
      },
      fontFamily: {
        sans: ['"DM Sans"', 'system-ui', '-apple-system', 'sans-serif'],
        display: ['"Sora"', 'system-ui', '-apple-system', 'sans-serif'],
      },
      fontSize: {
        '2xs': ['0.625rem', { lineHeight: '0.75rem' }],
        'display-lg': ['4.5rem', { lineHeight: '1', letterSpacing: '-0.02em' }],
        'display-md': ['3.75rem', { lineHeight: '1', letterSpacing: '-0.02em' }],
        'display-sm': ['3rem', { lineHeight: '1.1', letterSpacing: '-0.02em' }],
      },
      spacing: {
        '18': '4.5rem',
        '88': '22rem',
        '128': '32rem',
      },
      borderRadius: {
        '4xl': '2rem',
        '5xl': '2.5rem',
      },
      boxShadow: {
        'glow': '0 0 40px -10px rgba(196, 160, 82, 0.3)',
        'glow-lg': '0 0 60px -15px rgba(196, 160, 82, 0.4)',
        'inner-glow': 'inset 0 2px 20px 0 rgba(255, 255, 255, 0.05)',
      },
      backgroundImage: {
        'gradient-radial': 'radial-gradient(var(--tw-gradient-stops))',
        'gradient-conic': 'conic-gradient(from 180deg at 50% 50%, var(--tw-gradient-stops))',
        'hero-pattern': 'url("/images/hero-pattern.svg")',
        'noise': 'url("/images/noise.png")',
      },
      animation: {
        'fade-in': 'fadeIn 0.5s ease-out',
        'fade-in-up': 'fadeInUp 0.6s ease-out',
        'fade-in-down': 'fadeInDown 0.6s ease-out',
        'slide-in-right': 'slideInRight 0.5s ease-out',
        'slide-in-left': 'slideInLeft 0.5s ease-out',
        'scale-in': 'scaleIn 0.4s ease-out',
        'float': 'float 6s ease-in-out infinite',
        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
        'shimmer': 'shimmer 2s linear infinite',
        'bounce-slow': 'bounce 3s ease-in-out infinite',
      },
      keyframes: {
        fadeIn: {
          '0%': { opacity: '0' },
          '100%': { opacity: '1' },
        },
        fadeInUp: {
          '0%': { opacity: '0', transform: 'translateY(20px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
        fadeInDown: {
          '0%': { opacity: '0', transform: 'translateY(-20px)' },
          '100%': { opacity: '1', transform: 'translateY(0)' },
        },
        slideInRight: {
          '0%': { opacity: '0', transform: 'translateX(20px)' },
          '100%': { opacity: '1', transform: 'translateX(0)' },
        },
        slideInLeft: {
          '0%': { opacity: '0', transform: 'translateX(-20px)' },
          '100%': { opacity: '1', transform: 'translateX(0)' },
        },
        scaleIn: {
          '0%': { opacity: '0', transform: 'scale(0.95)' },
          '100%': { opacity: '1', transform: 'scale(1)' },
        },
        float: {
          '0%, 100%': { transform: 'translateY(0)' },
          '50%': { transform: 'translateY(-10px)' },
        },
        shimmer: {
          '0%': { backgroundPosition: '-200% 0' },
          '100%': { backgroundPosition: '200% 0' },
        },
      },
      transitionTimingFunction: {
        'bounce-in': 'cubic-bezier(0.68, -0.55, 0.265, 1.55)',
        'smooth': 'cubic-bezier(0.4, 0, 0.2, 1)',
      },
    },
  },
  plugins: [],
}

export default config


==========================================================================================

--- file: tsconfig.json ---
{
  "compilerOptions": {
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules", "scripts"]
}


==========================================================================================

--- file: upload-blog-images.js ---
#!/usr/bin/env node

/**
 * Upload Blog Images to Firebase Storage
 * Uses existing Firebase configuration
 */

const { adminStorage } = require('./lib/firebase-admin');
const fs = require('fs');
const path = require('path');

const IMAGES_DIR = path.join(__dirname, 'public/images/blog');
const BLOG_POSTS_FILE = path.join(__dirname, 'lib/blog-posts.ts');

const images = [
  'living-room.png',
  'hvac-unit.png',
  'team-working.png',
  'home-exterior.png',
  'mold-damage.png',
  'basement.png',
  'deck.png',
  'consultation.png',
  'concrete-work.png',
  'painting.png',
];

async function uploadBlogImages() {
  console.log('üî• Uploading blog images to Firebase Storage...\n');

  const bucket = adminStorage.bucket();
  const urlMappings = {};

  for (const filename of images) {
    const localPath = path.join(IMAGES_DIR, filename);
    
    if (!fs.existsSync(localPath)) {
      console.log(`‚ö†Ô∏è  Skipping ${filename} (not found)`);
      continue;
    }

    console.log(`üì§ Uploading ${filename}...`);

    const destination = `blog/${filename}`;
    
    // Upload file
    await bucket.upload(localPath, {
      destination,
      metadata: {
        contentType: 'image/png',
        cacheControl: 'public, max-age=31536000',
      },
    });

    // Make public
    await bucket.file(destination).makePublic();

    // Get public URL
    const publicUrl = `https://storage.googleapis.com/${bucket.name}/${destination}`;
    urlMappings[`/images/blog/${filename}`] = publicUrl;

    console.log(`   ‚úÖ ${publicUrl}\n`);
  }

  // Update blog-posts.ts
  console.log('üìù Updating blog-posts.ts with Firebase URLs...\n');
  
  let content = fs.readFileSync(BLOG_POSTS_FILE, 'utf8');

  for (const [localPath, firebaseUrl] of Object.entries(urlMappings)) {
    content = content.replace(new RegExp(localPath, 'g'), firebaseUrl);
  }

  fs.writeFileSync(BLOG_POSTS_FILE, content);

  console.log('‚úÖ SUCCESS! All blog images uploaded to Firebase!\n');
  console.log(`üìä Uploaded ${Object.keys(urlMappings).length} images\n`);
  console.log('üöÄ Next steps:');
  console.log('   1. Test: npm run dev');
  console.log('   2. Deploy: git add . && git commit && git push');
  console.log('   3. Optional: rm -rf public/images/blog/\n');
}

uploadBlogImages().catch(console.error);


==========================================================================================

--- file: vitest.config.ts ---
import { defineConfig } from 'vitest/config'
import path from 'path'

export default defineConfig({
  test: {
    environment: 'node',
    globals: true,
    include: ['__tests__/**/*.test.ts'],
  },
  resolve: {
    alias: {
      '@': path.resolve(__dirname, '.'),
    },
  },
})


==========================================================================================

--- file: app/layout.tsx ---
import type { Metadata } from 'next'
import { Suspense } from 'react'
import '@/styles/globals.css'
import { META, COMPANY } from '@/lib/constants'
import { GoogleAnalytics } from '@/components/GoogleAnalytics'

export const metadata: Metadata = {
  title: {
    default: META.title,
    template: `%s | CR Home Pros`,
  },
  description: META.description,
  keywords: META.keywords,
  metadataBase: new URL(META.url),
  alternates: {
    canonical: META.url,
  },
  openGraph: {
    type: 'website',
    locale: 'en_US',
    url: META.url,
    title: META.title,
    description: META.description,
    siteName: 'CR Home Pros',
    images: [{ url: '/images/og-image.jpg', width: 1200, height: 630, alt: 'CR Home Pros' }],
  },
  twitter: {
    card: 'summary_large_image',
    title: META.title,
    description: META.description,
    images: ['/images/og-image.jpg'],
  },
  robots: {
    index: true,
    follow: true,
    googleBot: { index: true, follow: true, 'max-video-preview': -1, 'max-image-preview': 'large', 'max-snippet': -1 },
  },
}

// Expanded JSON-LD schema with services, reviews, and bilingual support
const jsonLd = {
  '@context': 'https://schema.org',
  '@type': 'HomeAndConstructionBusiness',
  '@id': META.url,
  name: COMPANY.name,
  alternateName: COMPANY.legalName,
  description: META.description,
  url: META.url,
  telephone: COMPANY.phoneFormatted,
  email: COMPANY.email,
  address: {
    '@type': 'PostalAddress',
    streetAddress: COMPANY.address.street,
    addressLocality: COMPANY.address.city,
    addressRegion: COMPANY.address.state,
    postalCode: COMPANY.address.zip,
    addressCountry: 'US',
  },
  geo: {
    '@type': 'GeoCoordinates',
    latitude: 38.9557,
    longitude: -76.9456,
  },
  areaServed: [
    { '@type': 'State', name: 'Maryland' },
    { '@type': 'State', name: 'Virginia' },
    { '@type': 'City', name: 'Washington, DC' },
  ],
  priceRange: '$$',
  image: META.url + '/images/logo.png',
  logo: META.url + '/images/logo.png',
  foundingDate: '2004',
  slogan: COMPANY.tagline,
  knowsLanguage: ['en', 'es'],
  paymentAccepted: 'Cash, Credit Card, Zelle, Venmo, Check, Klarna, Insurance Claims',
  currenciesAccepted: 'USD',
  openingHoursSpecification: [
    {
      '@type': 'OpeningHoursSpecification',
      dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
      opens: '07:00',
      closes: '19:00',
    },
  ],
  // Aggregate rating from Google reviews
  aggregateRating: {
    '@type': 'AggregateRating',
    ratingValue: '4.9',
    reviewCount: '50',
    bestRating: '5',
    worstRating: '1',
  },
  // Service catalog
  hasOfferCatalog: {
    '@type': 'OfferCatalog',
    name: 'Home Improvement Services',
    itemListElement: [
      {
        '@type': 'OfferCatalog',
        name: 'Remodeling',
        itemListElement: [
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Kitchen Remodeling', url: META.url + '/services/kitchen-remodeling' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Bathroom Renovation', url: META.url + '/services/bathroom-renovation' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Basement Finishing', url: META.url + '/services/basement-finishing' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Complete Renovations', url: META.url + '/services/complete-renovations' } },
        ],
      },
      {
        '@type': 'OfferCatalog',
        name: 'Exterior',
        itemListElement: [
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Roofing', url: META.url + '/services/roofing' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Concrete & Driveways', url: META.url + '/services/concrete-driveways' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Deck & Outdoor', url: META.url + '/services/deck-outdoor' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Fencing', url: META.url + '/services/fencing' } },
        ],
      },
      {
        '@type': 'OfferCatalog',
        name: 'Specialty',
        itemListElement: [
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Painting', url: META.url + '/services/painting' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Flooring', url: META.url + '/services/flooring' } },
          { '@type': 'Offer', itemOffered: { '@type': 'Service', name: 'Insurance Claims', url: META.url + '/services/insurance-claims' } },
        ],
      },
    ],
  },
}

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <head>
        <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLd) }} />
        <link rel="manifest" href="/manifest.json" />
        <meta name="theme-color" content="#060828" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
        <meta name="apple-mobile-web-app-title" content="CR Home Pros" />
        <link rel="apple-touch-icon" href="/images/logo.png" />
      </head>
      <body className="font-sans antialiased">
        <Suspense fallback={null}>
          <GoogleAnalytics />
        </Suspense>
        {children}
      </body>
    </html>
  )
}


==========================================================================================

--- file: app/robots.ts ---
import { MetadataRoute } from 'next'

export default function robots(): MetadataRoute.Robots {
  return {
    rules: [
      {
        userAgent: '*',
        allow: '/',
        disallow: ['/admin/', '/api/'],
      },
    ],
    sitemap: 'https://crhomepros.com/sitemap.xml',
  }
}


==========================================================================================

--- file: app/sitemap.ts ---
import { MetadataRoute } from 'next'
import { SERVICES } from '@/lib/constants'

export default function sitemap(): MetadataRoute.Sitemap {
  const baseUrl = 'https://crhomepros.com'
  const locales = ['', '/es']

  const staticRoutes = [
    '',
    '/about',
    '/services',
    '/projects',
    '/reviews',
    '/contact',
    '/get-started',
    '/estimate',
    '/referrals',
    '/financing',
    '/estimate-cost',
    '/pricing',
    '/blog',
  ]

  // Generate entries for both locales
  const staticPages = locales.flatMap((locale) =>
    staticRoutes.map((route) => ({
      url: `${baseUrl}${locale}${route}`,
      lastModified: new Date(),
      changeFrequency: 'weekly' as const,
      priority: route === '' ? 1 : 0.8,
    }))
  )

  // Service pages for both locales
  const servicePages = locales.flatMap((locale) =>
    SERVICES.map((service) => ({
      url: `${baseUrl}${locale}/services/${service.id}`,
      lastModified: new Date(),
      changeFrequency: 'monthly' as const,
      priority: 0.7,
    }))
  )

  return [...staticPages, ...servicePages]
}


==========================================================================================

--- file: app/[locale]/layout.tsx ---
import { i18n, isValidLocale } from '@/lib/i18n/config'
import type { Locale } from '@/lib/i18n/config'
import { LocaleProvider } from '@/lib/i18n/provider'
import { Navbar, Footer, FloatingContact } from '@/components/layout'
import { BannerProvider } from '@/components/layout/PromoBanner'

export function generateStaticParams() {
  return i18n.locales.map((locale) => ({ locale }))
}

export default function LocaleLayout({
  children,
  params,
}: {
  children: React.ReactNode
  params: { locale: string }
}) {
  const locale: Locale = isValidLocale(params.locale) ? params.locale : 'en'

  return (
    <LocaleProvider locale={locale}>
      <BannerProvider>
        <Navbar />
        <main className="min-h-screen">{children}</main>
        <Footer />
        <FloatingContact />
      </BannerProvider>
    </LocaleProvider>
  )
}


==========================================================================================

--- file: app/[locale]/page.tsx ---
import { Hero } from '@/components/sections/Hero'
import { ServicesPreview } from '@/components/sections/ServicesPreview'
import { ProjectHighlight } from '@/components/sections/ProjectHighlight'
import { FeaturedProjects } from '@/components/sections/FeaturedProjects'
import { MeetCarlos } from '@/components/sections/MeetCarlos'
import { HowWeWork } from '@/components/sections/HowWeWork'
import { Stats } from '@/components/sections/Stats'
import { WhyChooseUs } from '@/components/sections/WhyChooseUs'
import { PaymentOptions } from '@/components/sections/PaymentOptions'
import { Testimonials } from '@/components/sections/Testimonials'
import { FAQSection } from '@/components/sections/FAQSection'
import { CallToAction } from '@/components/sections/CallToAction'

export default function HomePage() {
  return (
    <>
      <Hero />
      <ServicesPreview />
      <ProjectHighlight />
      <FeaturedProjects />
      <MeetCarlos />
      <HowWeWork />
      <Stats />
      <WhyChooseUs />
      <PaymentOptions />
      <Testimonials />
      <FAQSection />
      <CallToAction />
    </>
  )
}


==========================================================================================

--- file: app/[locale]/green/page.tsx ---
'use client'

import Link from 'next/link'
import { Leaf, Zap, Droplets, Wind, Sun, ArrowRight, CheckCircle, TreePine, Recycle, ThermometerSun } from 'lucide-react'
import { useTranslation, useLocale } from '@/lib/i18n/provider'

const greenServices = [
  {
    icon: Zap,
    title: 'Energy-Efficient Upgrades',
    titleEs: 'Mejoras de Eficiencia Energ√©tica',
    description: 'LED lighting, smart thermostats, insulation upgrades, and energy-efficient windows that cut utility bills by 20-40%.',
    descriptionEs: 'Iluminaci√≥n LED, termostatos inteligentes, mejoras de aislamiento y ventanas eficientes que reducen facturas un 20-40%.',
    savings: 'Save $800-2,000/year',
  },
  {
    icon: Sun,
    title: 'Solar-Ready Designs',
    titleEs: 'Dise√±os Preparados para Solar',
    description: 'We design renovations with solar panel readiness ‚Äî pre-wired electrical, structural reinforcement, and optimal roof angles.',
    descriptionEs: 'Dise√±amos renovaciones listas para paneles solares ‚Äî cableado pre-instalado, refuerzo estructural y √°ngulos √≥ptimos.',
    savings: 'Up to 30% tax credit',
  },
  {
    icon: Droplets,
    title: 'Water Conservation',
    titleEs: 'Conservaci√≥n de Agua',
    description: 'Low-flow fixtures, greywater-ready plumbing, rain barrel systems, and drought-resistant landscaping integration.',
    descriptionEs: 'Grifer√≠as de bajo flujo, plomer√≠a lista para aguas grises, sistemas de recolecci√≥n de lluvia.',
    savings: 'Save 30-50% on water',
  },
  {
    icon: Wind,
    title: 'Indoor Air Quality',
    titleEs: 'Calidad del Aire Interior',
    description: 'VOC-free paints, formaldehyde-free materials, HEPA filtration systems, and proper ventilation design.',
    descriptionEs: 'Pinturas sin VOC, materiales sin formaldeh√≠do, sistemas de filtraci√≥n HEPA y dise√±o de ventilaci√≥n.',
    savings: 'Healthier living',
  },
  {
    icon: Recycle,
    title: 'Sustainable Materials',
    titleEs: 'Materiales Sostenibles',
    description: 'Reclaimed wood, bamboo flooring, recycled glass countertops, cork insulation, and locally-sourced materials.',
    descriptionEs: 'Madera recuperada, pisos de bamb√∫, encimeras de vidrio reciclado, aislamiento de corcho.',
    savings: 'Reduced carbon footprint',
  },
  {
    icon: ThermometerSun,
    title: 'Climate-Resilient Renovations',
    titleEs: 'Renovaciones Resistentes al Clima',
    description: 'Storm-proof roofing, impact-resistant windows, flood-resistant basement finishing, and backup power planning.',
    descriptionEs: 'Techos resistentes a tormentas, ventanas anti-impacto, s√≥tanos resistentes a inundaciones.',
    savings: 'Lower insurance premiums',
  },
]

const taxCredits = [
  { item: 'Heat pumps', credit: 'Up to $2,000', itemEs: 'Bombas de calor' },
  { item: 'Insulation & air sealing', credit: 'Up to $1,200', itemEs: 'Aislamiento' },
  { item: 'Energy-efficient windows', credit: 'Up to $600', itemEs: 'Ventanas eficientes' },
  { item: 'Solar panels', credit: '30% of cost', itemEs: 'Paneles solares' },
  { item: 'Water heaters (heat pump)', credit: 'Up to $2,000', itemEs: 'Calentadores de agua' },
  { item: 'Electric panel upgrade', credit: 'Up to $600', itemEs: 'Panel el√©ctrico' },
]

export default function GreenPage() {
  const t = useTranslation()
  const { locale } = useLocale()
  const isEs = locale === 'es'
  const lp = (path: string) => locale === 'en' ? path : `/es${path}`

  return (
    <main className="pt-24 pb-16">
      {/* Hero */}
      <section className="relative bg-gradient-to-br from-green-900 via-green-800 to-emerald-700 text-white py-20 overflow-hidden">
        <div className="absolute inset-0 opacity-10" style={{ backgroundImage: 'url("data:image/svg+xml,%3Csvg width=\'60\' height=\'60\' viewBox=\'0 0 60 60\' xmlns=\'http://www.w3.org/2000/svg\'%3E%3Cpath d=\'M30 5C15 20 5 30 15 45c10-5 20-10 30-5C55 30 45 15 30 5z\' fill=\'white\' fill-opacity=\'0.3\'/%3E%3C/svg%3E")' }} />
        <div className="container-custom relative">
          <div className="max-w-3xl">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-sm border border-white/20 mb-6">
              <Leaf className="w-4 h-4 text-green-300" />
              <span className="text-sm font-medium">
                {isEs ? 'Remodelaci√≥n Consciente' : 'Mindful Remodeling'}
              </span>
            </div>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold mb-6 leading-tight">
              {isEs ? (
                <>Renueva Tu Espacio. <span className="text-green-300">Respeta el Planeta.</span></>
              ) : (
                <>Regenerate Your Space. <span className="text-green-300">Respect the Planet.</span></>
              )}
            </h1>
            <p className="text-lg md:text-xl text-white/80 mb-8 max-w-2xl">
              {isEs
                ? 'Renovaciones inteligentes que reducen costos de energ√≠a, mejoran la calidad del aire y aumentan el valor de tu hogar ‚Äî todo mientras cuidas el medio ambiente.'
                : "Smart renovations that cut energy costs, improve air quality, and increase your home's value ‚Äî all while being kind to the earth."
              }
            </p>
            <div className="flex flex-col sm:flex-row gap-4">
              <Link href={lp('/get-started')} className="btn bg-white text-green-900 hover:bg-green-50 font-bold px-8 py-4 rounded-xl text-lg">
                {isEs ? 'Auditor√≠a Eco Gratis' : 'Free Eco Audit'}
                <ArrowRight className="w-5 h-5 ml-2 inline" />
              </Link>
              <Link href={lp('/projects')} className="btn bg-white/10 text-white border border-white/30 hover:bg-white/20 px-8 py-4 rounded-xl text-lg">
                {isEs ? 'Ver Proyectos Verdes' : 'See Green Projects'}
              </Link>
            </div>
          </div>
        </div>
      </section>

      {/* Services Grid */}
      <section className="py-16 md:py-24 bg-white">
        <div className="container-custom">
          <div className="text-center mb-12">
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900">
              {isEs ? 'Servicios de Remodelaci√≥n Verde' : 'Green Remodeling Services'}
            </h2>
            <p className="text-dark-500 mt-4 max-w-2xl mx-auto">
              {isEs
                ? 'Cada proyecto incluye opciones sostenibles que protegen tu bolsillo y el planeta.'
                : 'Every project includes sustainable options that protect your wallet and the planet.'
              }
            </p>
          </div>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {greenServices.map((service, i) => (
              <div key={i} className="group bg-white border border-dark-100 rounded-2xl p-6 hover:shadow-xl hover:border-green-200 transition-all duration-300">
                <div className="w-12 h-12 rounded-xl bg-green-100 flex items-center justify-center mb-4 group-hover:bg-green-200 transition-colors">
                  <service.icon className="w-6 h-6 text-green-700" />
                </div>
                <h3 className="text-lg font-bold text-dark-900 mb-2">
                  {isEs ? service.titleEs : service.title}
                </h3>
                <p className="text-dark-500 text-sm mb-4">
                  {isEs ? service.descriptionEs : service.description}
                </p>
                <div className="inline-flex items-center gap-1.5 px-3 py-1.5 bg-green-50 text-green-700 rounded-full text-xs font-semibold">
                  <TreePine className="w-3.5 h-3.5" />
                  {service.savings}
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Tax Credits */}
      <section className="py-16 bg-dark-50">
        <div className="container-custom">
          <div className="bg-gradient-to-br from-green-800 to-emerald-700 rounded-3xl p-8 md:p-12 text-white">
            <div className="grid md:grid-cols-2 gap-10 items-center">
              <div>
                <h2 className="text-3xl font-display font-bold mb-4">
                  {isEs ? 'üí∞ Cr√©ditos Fiscales 2025-2026' : 'üí∞ 2025-2026 Tax Credits'}
                </h2>
                <p className="text-white/80 mb-6">
                  {isEs
                    ? 'El gobierno federal ofrece cr√©ditos fiscales significativos para mejoras de eficiencia energ√©tica. Te ayudamos a maximizar tus ahorros.'
                    : 'The federal government offers significant tax credits for energy efficiency upgrades. We help you maximize your savings.'
                  }
                </p>
                <Link href={lp('/get-started')} className="inline-flex items-center gap-2 bg-white text-green-800 font-bold px-6 py-3 rounded-xl hover:bg-green-50 transition-colors">
                  {isEs ? 'Consulta Gratis' : 'Free Consultation'} <ArrowRight className="w-4 h-4" />
                </Link>
              </div>
              <div className="space-y-3">
                {taxCredits.map((credit, i) => (
                  <div key={i} className="flex items-center justify-between bg-white/10 backdrop-blur-sm rounded-lg px-4 py-3">
                    <div className="flex items-center gap-3">
                      <CheckCircle className="w-4 h-4 text-green-300 flex-shrink-0" />
                      <span className="text-sm font-medium">{isEs ? credit.itemEs : credit.item}</span>
                    </div>
                    <span className="text-green-300 font-bold text-sm whitespace-nowrap">{credit.credit}</span>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="py-16 bg-white">
        <div className="container-custom text-center">
          <Leaf className="w-12 h-12 text-green-600 mx-auto mb-4" />
          <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-4">
            {isEs ? '¬øListo para una Renovaci√≥n Consciente?' : 'Ready for a Mindful Renovation?'}
          </h2>
          <p className="text-dark-500 max-w-xl mx-auto mb-8">
            {isEs
              ? 'Cada proyecto que hacemos considera el impacto ambiental. Tu hogar puede ser hermoso Y responsable.'
              : "Every project we take on considers environmental impact. Your home can be beautiful AND responsible."
            }
          </p>
          <Link
            href={lp('/get-started')}
            className="inline-flex items-center gap-2 bg-green-700 text-white font-bold px-8 py-4 rounded-xl text-lg hover:bg-green-600 transition-colors"
          >
            {isEs ? 'Solicita Tu Auditor√≠a Eco' : 'Request Your Eco Audit'}
            <ArrowRight className="w-5 h-5" />
          </Link>
        </div>
      </section>
    </main>
  )
}


==========================================================================================

--- file: app/[locale]/estimate-cost/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { Phone, ArrowRight, Calculator, Info } from 'lucide-react'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { COMPANY } from '@/lib/constants'
import { formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'
import { SERVICE_PRICING } from '@/lib/pricing-data'
import { useLocale, useTranslation } from '@/lib/i18n/provider'

export default function EstimateCostPage() {
  const { locale } = useLocale()
  const t = useTranslation()
  const lp = (path: string) => locale === 'en' ? path : `/es${path}`
  const isEs = locale === 'es'

  const [selectedService, setSelectedService] = useState<string | null>(null)
  const [selectedTier, setSelectedTier] = useState<number | null>(null)

  const service = SERVICE_PRICING.find((s) => s.id === selectedService)
  const tier = service && selectedTier !== null ? service.tiers[selectedTier] : null

  return (
    <div className="pt-32 pb-20">
      {/* Hero */}
      <section className="container-custom text-center mb-12">
        <div className="w-14 h-14 mx-auto rounded-full bg-primary-100 flex items-center justify-center mb-4">
          <Calculator className="w-7 h-7 text-primary-600" />
        </div>
        <h1 className="text-4xl md:text-5xl font-display font-bold text-dark-900 mb-4">
          {t.quoteEstimator.title}
        </h1>
        <p className="text-xl text-dark-500 max-w-2xl mx-auto mb-4">
          {t.quoteEstimator.description}
        </p>
        <div className="flex justify-center gap-3">
          <a href="/pricing" className="inline-flex items-center gap-1.5 text-sm font-semibold text-primary-600 bg-primary-50 px-3 py-1.5 rounded-full hover:bg-primary-100 transition-colors">
            üìã Full Pricing Guide
          </a>
          <a href="/blog/green-renovations-sustainability" className="inline-flex items-center gap-1.5 text-sm font-semibold text-emerald-700 bg-emerald-50 px-3 py-1.5 rounded-full border border-emerald-200 hover:bg-emerald-100 transition-colors">
            üåø Eco-Friendly Options
          </a>
        </div>
      </section>

      {/* Service Selection */}
      <section className="container-custom mb-8">
        <h2 className="text-lg font-display font-semibold text-dark-700 mb-4">
          1. {t.quoteEstimator.selectService}
        </h2>
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3">
          {SERVICE_PRICING.map((svc) => (
            <button
              key={svc.id}
              onClick={() => { setSelectedService(svc.id); setSelectedTier(null) }}
              className={`p-4 rounded-xl border-2 text-center transition-all ${
                selectedService === svc.id
                  ? 'border-primary-500 bg-primary-50 shadow-md'
                  : 'border-dark-100 bg-white hover:border-primary-200 hover:shadow-sm'
              }`}
            >
              <span className="text-2xl block mb-2">{svc.icon}</span>
              <span className="text-sm font-medium text-dark-800">
                {isEs ? svc.nameEs : svc.name}
              </span>
            </button>
          ))}
        </div>
      </section>

      {/* Size Selection */}
      {service && (
        <section className="container-custom mb-8">
          <h2 className="text-lg font-display font-semibold text-dark-700 mb-4">
            2. {t.quoteEstimator.selectSize}
          </h2>
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
            {service.tiers.map((t2, idx) => (
              <button
                key={idx}
                onClick={() => setSelectedTier(idx)}
                className={`p-5 rounded-xl border-2 text-left transition-all ${
                  selectedTier === idx
                    ? 'border-gold-500 bg-gold-50 shadow-md'
                    : 'border-dark-100 bg-white hover:border-gold-200 hover:shadow-sm'
                }`}
              >
                <h3 className="font-display font-semibold text-dark-900 mb-1">
                  {isEs ? t2.labelEs : t2.label}
                </h3>
                <p className="text-sm text-dark-500">
                  {isEs ? t2.descriptionEs : t2.description}
                </p>
                <p className="text-lg font-bold text-primary-700 mt-3">
                  ${t2.min.toLocaleString()} ‚Äì ${t2.max.toLocaleString()}
                </p>
              </button>
            ))}
          </div>
        </section>
      )}

      {/* Result */}
      {tier && (
        <section className="container-custom mb-12">
          <div className="max-w-lg mx-auto bg-gradient-to-br from-primary-900 to-primary-800 rounded-2xl p-8 text-center text-white shadow-xl">
            <p className="text-sm text-primary-200 mb-2">{t.quoteEstimator.estimatedRange}</p>
            <p className="text-5xl font-bold mb-1">
              ${tier.min.toLocaleString()} ‚Äì ${tier.max.toLocaleString()}
            </p>
            <p className="text-primary-300 mb-6">
              {isEs ? tier.descriptionEs : tier.description} ‚Ä¢ {isEs ? service!.nameEs : service!.name}
            </p>
            <div className="flex flex-col sm:flex-row gap-3 justify-center">
              <Link
                href={lp('/get-started')}
                className="btn-gold flex items-center justify-center gap-2"
              >
                {t.quoteEstimator.getExactQuote}
                <ArrowRight className="w-4 h-4" />
              </Link>
              <a
                href={formatPhoneLink(COMPANY.phone)}
                className="flex items-center justify-center gap-2 px-5 py-3 rounded-xl bg-white/10 text-white font-medium hover:bg-white/20 transition-colors"
              >
                <Phone className="w-4 h-4" />
                {COMPANY.phoneFormatted}
              </a>
            </div>
          </div>
        </section>
      )}

      {/* Disclaimer */}
      <section className="container-custom mb-16">
        <div className="max-w-2xl mx-auto bg-dark-50 rounded-xl p-6 flex gap-4">
          <Info className="w-5 h-5 text-dark-400 mt-0.5 flex-shrink-0" />
          <p className="text-sm text-dark-500">
            {t.quoteEstimator.disclaimer}
          </p>
        </div>
      </section>

      {/* CTA */}
      <section className="container-custom">
        <div className="bg-gradient-to-br from-dark-900 to-dark-800 rounded-3xl p-10 text-center text-white">
          <h2 className="text-3xl font-display font-bold mb-4">{t.quoteEstimator.getExactQuote}</h2>
          <p className="text-dark-300 mb-8 max-w-xl mx-auto">
            {isEs
              ? 'Cada proyecto es √∫nico. Cont√°ctanos para una visita gratis a domicilio y un presupuesto detallado sin compromiso.'
              : 'Every project is unique. Contact us for a free in-home visit and a detailed quote ‚Äî no obligation.'}
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <Link href={lp('/get-started')} className="btn-gold">
              {t.nav.getEstimate}
            </Link>
            <a
              href={formatWhatsAppLink(COMPANY.phone, isEs ? '¬°Hola! Necesito un presupuesto para mi proyecto.' : 'Hi! I need a quote for my project.')}
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-[#25D366] text-white font-medium hover:bg-[#20bd5a] transition-colors"
            >
              <WhatsAppIcon className="w-5 h-5" />
              WhatsApp
            </a>
          </div>
        </div>
      </section>
    </div>
  )
}


==========================================================================================

--- file: app/[locale]/contact/page.tsx ---
import { Metadata } from 'next'
import Link from 'next/link'
import { Phone, Mail, MapPin, Clock, ArrowRight, Facebook, Instagram } from 'lucide-react'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { COMPANY, HOURS, SERVICE_AREAS, SOCIAL } from '@/lib/constants'
import { formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'

export const metadata: Metadata = {
  title: 'Contact Us',
  description: 'Get in touch with CR Home Pros for a free estimate. Serving Washington DC, Maryland and Virginia.',
}

const contactMethods = [
  {
    icon: Phone,
    label: 'Phone',
    value: COMPANY.phoneFormatted,
    href: formatPhoneLink(COMPANY.phone),
    description: 'Mon-Sat, 8am-7pm',
  },
  {
    icon: WhatsAppIcon,
    label: 'WhatsApp',
    value: 'Message Us',
    href: formatWhatsAppLink(COMPANY.phone, "Hi! I am interested in your services."),
    description: 'Quick responses',
  },
  {
    icon: Mail,
    label: 'Email',
    value: COMPANY.email,
    href: `mailto:${COMPANY.email}`,
    description: 'We reply within 24 hours',
  },
]

export default function ContactPage() {
  return (
    <>
      <section className="relative pt-32 pb-20 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
          <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent" />
        </div>
        <div className="container-custom relative z-10">
          <div className="max-w-3xl">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">Get In Touch</span>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
              {"Let's Talk About "}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">Your Project</span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed">
              {"Have questions? Ready for an estimate? We'd love to hear from you. Reach out and let's discuss how we can help transform your home."}
            </p>
          </div>
        </div>
      </section>

      <section className="py-12 bg-white border-b border-dark-100">
        <div className="container-custom">
          <div className="grid md:grid-cols-3 gap-6">
            {contactMethods.map((method) => (
              <a key={method.label} href={method.href} target={method.label === 'WhatsApp' ? '_blank' : undefined} rel={method.label === 'WhatsApp' ? 'noopener noreferrer' : undefined} className="flex items-center gap-4 p-6 bg-dark-50 rounded-2xl hover:bg-primary-50 hover:border-primary-200 border border-transparent transition-all group">
                <div className="w-14 h-14 rounded-xl bg-primary-100 flex items-center justify-center group-hover:bg-primary-600 transition-colors">
                  <method.icon className="w-6 h-6 text-primary-600 group-hover:text-white transition-colors" />
                </div>
                <div>
                  <p className="font-semibold text-dark-900">{method.value}</p>
                  <p className="text-sm text-dark-500">{method.description}</p>
                </div>
              </a>
            ))}
          </div>
        </div>
      </section>

      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="grid lg:grid-cols-2 gap-12 lg:gap-20">
            <div>
              <h2 className="text-2xl md:text-3xl font-display font-bold text-dark-900 mb-6">Request a Free Estimate</h2>
              <p className="text-dark-500 mb-6">Tell us about your project and we will provide a detailed consultation within 24 hours. Our estimate process includes an on-site visit, project planning, and transparent pricing.</p>
              <div className="bg-primary-50 border border-primary-100 rounded-2xl p-8 mb-8">
                <h3 className="text-lg font-semibold text-dark-900 mb-4">What to expect:</h3>
                <ul className="space-y-3 text-dark-600">
                  <li className="flex items-start gap-3"><span className="text-gold-500 font-bold mt-0.5">1</span><span>Fill out a quick form about your project</span></li>
                  <li className="flex items-start gap-3"><span className="text-gold-500 font-bold mt-0.5">2</span><span>We will contact you within 24 hours to schedule a visit</span></li>
                  <li className="flex items-start gap-3"><span className="text-gold-500 font-bold mt-0.5">3</span><span>Receive a detailed, no-obligation estimate</span></li>
                </ul>
              </div>
              <Link href="/get-started" className="inline-flex items-center justify-center w-full px-8 py-4 text-lg font-semibold text-white bg-gradient-to-r from-gold-500 to-gold-600 rounded-xl hover:from-gold-600 hover:to-gold-700 transition-all shadow-lg shadow-gold-500/25">
                {"Get Your Free Estimate"}
                <ArrowRight className="w-5 h-5 ml-2" />
              </Link>
              <p className="text-center text-sm text-dark-400 mt-4">
                {"Or call us directly at "}
                <a href={formatPhoneLink(COMPANY.phone)} className="text-primary-600 font-medium hover:underline">{COMPANY.phoneFormatted}</a>
              </p>
            </div>

            <div className="space-y-8">
              <div className="bg-dark-50 rounded-2xl p-8">
                <div className="flex items-center gap-3 mb-6">
                  <div className="w-10 h-10 rounded-xl bg-primary-100 flex items-center justify-center"><Clock className="w-5 h-5 text-primary-600" /></div>
                  <h3 className="text-xl font-display font-semibold text-dark-900">Business Hours</h3>
                </div>
                <div className="space-y-3 text-dark-600">
                  <div className="flex justify-between"><span>Monday - Friday</span><span className="font-medium text-dark-900">{HOURS.weekday}</span></div>
                  <div className="flex justify-between"><span>Saturday</span><span className="font-medium text-dark-900">{HOURS.saturday}</span></div>
                  <div className="flex justify-between"><span>Sunday</span><span className="font-medium text-dark-900">{HOURS.sunday}</span></div>
                  <div className="pt-3 mt-3 border-t border-dark-200"><p className="text-sm text-gold-600 font-medium">{HOURS.emergency}</p></div>
                </div>
              </div>

              <div className="bg-dark-50 rounded-2xl p-8">
                <div className="flex items-center gap-3 mb-6">
                  <div className="w-10 h-10 rounded-xl bg-primary-100 flex items-center justify-center"><MapPin className="w-5 h-5 text-primary-600" /></div>
                  <h3 className="text-xl font-display font-semibold text-dark-900">Service Area</h3>
                </div>
                <p className="text-dark-600 mb-4">We proudly serve the entire DMV area including:</p>
                <div className="flex flex-wrap gap-2">
                  {SERVICE_AREAS.slice(0, 8).map((area) => (<span key={area} className="px-3 py-1 bg-white rounded-full text-sm text-dark-600">{area}</span>))}
                  <span className="px-3 py-1 bg-primary-100 rounded-full text-sm text-primary-700 font-medium">+ more</span>
                </div>
              </div>

              <div className="bg-dark-50 rounded-2xl p-8">
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-4">Follow Us</h3>
                <p className="text-dark-500 mb-6">See our latest projects and updates on social media.</p>
                <div className="flex gap-3">
                  <a href={SOCIAL.facebook} target="_blank" rel="noopener noreferrer" className="w-12 h-12 rounded-xl bg-white flex items-center justify-center text-dark-500 hover:text-primary-600 hover:bg-primary-50 transition-colors"><Facebook className="w-5 h-5" /></a>
                  <a href={SOCIAL.instagram} target="_blank" rel="noopener noreferrer" className="w-12 h-12 rounded-xl bg-white flex items-center justify-center text-dark-500 hover:text-primary-600 hover:bg-primary-50 transition-colors"><Instagram className="w-5 h-5" /></a>
                  <a href={SOCIAL.tiktok} target="_blank" rel="noopener noreferrer" className="w-12 h-12 rounded-xl bg-white flex items-center justify-center text-dark-500 hover:text-primary-600 hover:bg-primary-50 transition-colors">
                    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-2.88 2.5 2.89 2.89 0 01-2.89-2.89 2.89 2.89 0 012.89-2.89c.28 0 .54.04.79.1v-3.5a6.37 6.37 0 00-.79-.05A6.34 6.34 0 003.15 15.2a6.34 6.34 0 006.34 6.34 6.34 6.34 0 006.34-6.34V8.73a8.19 8.19 0 004.76 1.52v-3.4a4.85 4.85 0 01-1-.16z" /></svg>
                  </a>
                </div>
              </div>

              <div className="bg-gold-50 border border-gold-200 rounded-2xl p-6 text-center">
                <p className="text-lg font-semibold text-gold-800">{"Hablamos Espanol!"}</p>
                <p className="text-gold-700 text-sm mt-1">We are happy to assist you in Spanish.</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <section className="section-padding bg-primary-800">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center text-white">
            <h2 className="text-3xl md:text-4xl font-display font-bold mb-6">Ready to Get Started?</h2>
            <p className="text-primary-200 text-lg mb-8">Request your free estimate today. No obligation, just honest pricing.</p>
            <Link href="/get-started" className="btn-gold btn-lg">
              Start Your Project
              <ArrowRight className="w-5 h-5 ml-2" />
            </Link>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/financing/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { Shield, Clock, TrendingUp, CreditCard, Calculator, Phone, CheckCircle, DollarSign, Percent, ArrowRight } from 'lucide-react'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { COMPANY } from '@/lib/constants'
import { formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'
import { useLocale, useTranslation } from '@/lib/i18n/provider'

export default function FinancingPage() {
  const { locale } = useLocale()
  const t = useTranslation()
  const lp = (path: string) => locale === 'en' ? path : `/es${path}`

  const [projectCost, setProjectCost] = useState(15000)
  const [termMonths, setTermMonths] = useState(36)
  const [apr, setApr] = useState(6.99)

  const monthlyPayment = (() => {
    const rate = apr / 100 / 12
    if (rate === 0) return projectCost / termMonths
    return (projectCost * rate * Math.pow(1 + rate, termMonths)) / (Math.pow(1 + rate, termMonths) - 1)
  })()

  const benefits = [
    { icon: Clock, title: t.financing.benefits.noWait, desc: t.financing.benefits.noWaitDesc },
    { icon: Shield, title: t.financing.benefits.preserve, desc: t.financing.benefits.preserveDesc },
    { icon: TrendingUp, title: t.financing.benefits.increase, desc: t.financing.benefits.increaseDesc },
    { icon: CreditCard, title: t.financing.benefits.flexible, desc: t.financing.benefits.flexibleDesc },
  ]

  const options = [
    { title: t.financing.options.zeroInterest, desc: t.financing.options.zeroInterestDesc, icon: Percent },
    { title: t.financing.options.lowMonthly, desc: t.financing.options.lowMonthlyDesc, icon: DollarSign },
    { title: t.financing.options.noMoney, desc: t.financing.options.noMoneyDesc, icon: CheckCircle },
    { title: t.financing.options.quickApproval, desc: t.financing.options.quickApprovalDesc, icon: ArrowRight },
  ]

  return (
    <div className="pt-32 pb-20">
      {/* Hero */}
      <section className="container-custom text-center mb-16">
        <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
          {t.financing.title}
        </span>
        <h1 className="text-4xl md:text-5xl font-display font-bold text-dark-900 mb-6">
          {t.financing.subtitle}
        </h1>
        <p className="text-xl text-dark-500 max-w-2xl mx-auto">
          {t.financing.description}
        </p>
      </section>

      {/* Why Finance */}
      <section className="container-custom mb-20">
        <h2 className="text-3xl font-display font-bold text-dark-900 text-center mb-12">
          {t.financing.whyFinance}
        </h2>
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
          {benefits.map((b) => (
            <div key={b.title} className="bg-white/80 hover:bg-white/80 hover:bg-white rounded-2xl p-6 border border-dark-100 hover:shadow-lg transition-shadow">
              <div className="w-10 h-10 md:w-12 md:h-12 rounded-xl bg-primary-100 flex items-center justify-center mb-4">
                <b.icon className="w-6 h-6 text-primary-600" />
              </div>
              <h3 className="font-display font-semibold text-dark-900 mb-2">{b.title}</h3>
              <p className="text-sm text-dark-500">{b.desc}</p>
            </div>
          ))}
        </div>
      </section>

      {/* Financing Options */}
      <section className="bg-dark-50 py-16 mb-20">
        <div className="container-custom">
          <h2 className="text-3xl font-display font-bold text-dark-900 text-center mb-12">
            {t.financing.options.title}
          </h2>
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {options.map((opt) => (
              <div key={opt.title} className="bg-white/80 hover:bg-white/80 hover:bg-white rounded-2xl p-6 text-center shadow-sm hover:shadow-md transition-shadow">
                <div className="w-14 h-14 mx-auto rounded-full bg-gold-100 flex items-center justify-center mb-4">
                  <opt.icon className="w-7 h-7 text-gold-600" />
                </div>
                <h3 className="font-display font-semibold text-dark-900 mb-2">{opt.title}</h3>
                <p className="text-sm text-dark-500">{opt.desc}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Payment Calculator */}
      <section className="container-custom mb-20">
        <div className="max-w-2xl mx-auto">
          <div className="text-center mb-10">
            <div className="w-14 h-14 mx-auto rounded-full bg-primary-100 flex items-center justify-center mb-4">
              <Calculator className="w-7 h-7 text-primary-600" />
            </div>
            <h2 className="text-3xl font-display font-bold text-dark-900 mb-3">
              {t.financing.calculator.title}
            </h2>
          </div>

          <div className="bg-white/80 hover:bg-white/80 hover:bg-white rounded-2xl border border-dark-100 p-8 shadow-lg">
            {/* Project Cost Slider */}
            <div className="mb-8">
              <div className="flex justify-between items-center mb-3">
                <label className="text-sm font-medium text-dark-700">{t.financing.calculator.projectCost}</label>
                <span className="text-2xl font-bold text-primary-700">${projectCost.toLocaleString()}</span>
              </div>
              <input
                type="range"
                min={1000}
                max={100000}
                step={500}
                value={projectCost}
                onChange={(e) => setProjectCost(Number(e.target.value))}
                className="w-full h-2 bg-dark-100 rounded-lg appearance-none cursor-pointer accent-primary-600"
              />
              <div className="flex justify-between text-xs text-dark-400 mt-1">
                <span>$1,000</span>
                <span>$100,000</span>
              </div>
            </div>

            {/* Term Slider */}
            <div className="mb-8">
              <div className="flex justify-between items-center mb-3">
                <label className="text-sm font-medium text-dark-700">{t.financing.calculator.term}</label>
                <span className="text-lg font-bold text-dark-900">{termMonths} {t.financing.calculator.months}</span>
              </div>
              <input
                type="range"
                min={6}
                max={60}
                step={6}
                value={termMonths}
                onChange={(e) => setTermMonths(Number(e.target.value))}
                className="w-full h-2 bg-dark-100 rounded-lg appearance-none cursor-pointer accent-primary-600"
              />
              <div className="flex justify-between text-xs text-dark-400 mt-1">
                <span>6 {t.financing.calculator.months}</span>
                <span>60 {t.financing.calculator.months}</span>
              </div>
            </div>

            {/* APR */}
            <div className="mb-8">
              <div className="flex justify-between items-center mb-3">
                <label className="text-sm font-medium text-dark-700">{t.financing.calculator.rate}</label>
                <span className="text-lg font-bold text-dark-900">{apr}%</span>
              </div>
              <input
                type="range"
                min={0}
                max={24.99}
                step={0.5}
                value={apr}
                onChange={(e) => setApr(Number(e.target.value))}
                className="w-full h-2 bg-dark-100 rounded-lg appearance-none cursor-pointer accent-primary-600"
              />
              <div className="flex justify-between text-xs text-dark-400 mt-1">
                <span>0%</span>
                <span>24.99%</span>
              </div>
            </div>

            {/* Result */}
            <div className="bg-gradient-to-br from-primary-900 to-primary-800 rounded-xl p-6 text-center text-white">
              <p className="text-sm text-primary-200 mb-1">{t.financing.calculator.estimated}</p>
              <p className="text-5xl font-bold mb-1">${Math.round(monthlyPayment).toLocaleString()}</p>
              <p className="text-sm text-primary-200">/{locale === 'es' ? 'mes' : 'mo'}</p>
            </div>

            <p className="text-xs text-dark-400 mt-4 text-center">
              {t.financing.calculator.disclaimer}
            </p>
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="container-custom">
        <div className="bg-gradient-to-br from-dark-900 to-dark-800 rounded-3xl p-10 text-center text-white">
          <h2 className="text-3xl font-display font-bold mb-4">{t.financing.cta}</h2>
          <p className="text-dark-300 mb-8 max-w-xl mx-auto">{t.financing.ctaDesc}</p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <a
              href={formatPhoneLink(COMPANY.phone)}
              className="btn-gold flex items-center justify-center gap-2"
            >
              <Phone className="w-5 h-5" />
              {COMPANY.phoneFormatted}
            </a>
            <a
              href={formatWhatsAppLink(COMPANY.phone, locale === 'es' ? '¬°Hola! Me interesa el financiamiento para mi proyecto.' : 'Hi! I\'m interested in financing options for my project.')}
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-[#25D366] text-white font-medium hover:bg-[#20bd5a] transition-colors"
            >
              <WhatsAppIcon className="w-5 h-5" />
              WhatsApp
            </a>
            <Link
              href={lp('/get-started')}
              className="flex items-center justify-center gap-2 px-6 py-3 rounded-xl bg-white/10 text-white font-medium hover:bg-white/20 transition-colors"
            >
              {t.nav.getEstimate}
            </Link>
          </div>
        </div>
      </section>
    </div>
  )
}


==========================================================================================

--- file: app/[locale]/privacy/page.tsx ---
import { Metadata } from 'next'
import { COMPANY } from '@/lib/constants'

export const metadata: Metadata = {
  title: 'Privacy Policy',
  description: 'CR Home Pros privacy policy. How we collect, use, and protect your personal information.',
}

export default function PrivacyPolicyPage() {
  return (
    <div className="pt-32 pb-20">
      <div className="container-custom max-w-3xl">
        <h1 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-2">Privacy Policy</h1>
        <p className="text-dark-400 mb-10">Last updated: February 12, 2026</p>

        <div className="prose prose-lg max-w-none text-dark-700 space-y-8">
          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">1. Information We Collect</h2>
            <p>When you use our website, contact us, or request a quote, we may collect the following information:</p>
            <p><strong>Contact Information:</strong> Name, email address, phone number, and mailing address that you provide when filling out forms, requesting estimates, or contacting us.</p>
            <p><strong>Project Information:</strong> Details about your home improvement project, including service type, budget range, timeline, and project description.</p>
            <p><strong>Usage Data:</strong> We use Google Analytics to collect anonymized data about how visitors interact with our website, including pages visited, time spent, and device information. This data does not personally identify you.</p>
            <p><strong>Photos:</strong> If you submit project photos through our forms or admin tools, those images are stored securely on Firebase Storage.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">2. How We Use Your Information</h2>
            <p>We use the information we collect to:</p>
            <p>Respond to your inquiries and provide estimates for home improvement projects. Schedule consultations and coordinate project details. Send project updates and communicate about ongoing work. Improve our website and services based on how visitors use the site. Process referral rewards for our referral program.</p>
            <p>We do not sell, rent, or share your personal information with third parties for marketing purposes.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">3. Data Storage and Security</h2>
            <p>Your information is stored securely using Google Firebase services (Firestore database and Firebase Storage). We implement industry-standard security measures to protect your data, including encrypted connections (HTTPS), secure authentication for admin access, and access controls on stored data.</p>
            <p>While we take reasonable precautions to protect your information, no method of transmission over the internet is completely secure.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">4. Third-Party Services</h2>
            <p>Our website uses the following third-party services:</p>
            <p><strong>Google Firebase:</strong> For data storage, image hosting, and analytics. Subject to Google&apos;s privacy policy.</p>
            <p><strong>Google Analytics:</strong> For anonymous website usage statistics.</p>
            <p><strong>Vercel:</strong> For website hosting. Subject to Vercel&apos;s privacy policy.</p>
            <p><strong>Klarna:</strong> If you choose the buy-now-pay-later option. Subject to Klarna&apos;s privacy policy.</p>
            <p>We do not integrate with advertising networks or sell data to advertisers.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">5. Cookies</h2>
            <p>Our website uses essential cookies for basic functionality and analytics cookies through Google Analytics. You can disable cookies in your browser settings, though this may affect some website features.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">6. Your Rights</h2>
            <p>You have the right to request access to the personal information we hold about you, request correction of inaccurate information, request deletion of your information, and opt out of any communications from us. To exercise these rights, contact us at {COMPANY.email} or call {COMPANY.phoneFormatted}.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">7. Children&apos;s Privacy</h2>
            <p>Our website is not directed to children under 13. We do not knowingly collect personal information from children.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">8. Changes to This Policy</h2>
            <p>We may update this privacy policy from time to time. Changes will be posted on this page with an updated revision date.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">9. Contact Us</h2>
            <p>If you have questions about this privacy policy, contact us at:</p>
            <p>
              <strong>C &amp; R General Services Inc (CR Home Pros)</strong><br />
              Email: {COMPANY.email}<br />
              Phone: {COMPANY.phoneFormatted}<br />
              Location: Hyattsville, MD
            </p>
          </section>
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: app/[locale]/referrals/page.tsx ---
import { Metadata } from 'next'
import Link from 'next/link'
import { Gift, DollarSign, Users, ArrowRight, CheckCircle, Zap, Heart, Star, Phone } from 'lucide-react'
import { COMPANY } from '@/lib/constants'
import { formatPhoneLink } from '@/lib/utils'
import { ReferralForm } from '@/components/forms/ReferralForm'

export const metadata: Metadata = {
  title: 'Referral Program',
  description: 'Earn rewards for referring friends and family to CR Home Pros. Get $75-$750+ for every successful referral. Share the quality, share the rewards.',
}

const tiers = [
  {
    project: 'Starter Projects',
    range: 'Under $2,500',
    reward: '$75',
    examples: 'Minor repairs, touch-up painting, small fixes',
    rewardType: 'Gift Card',
  },
  {
    project: 'Small Projects',
    range: '$2,500 - $5,000',
    reward: '$100',
    examples: 'Painting, tile work, minor remodeling',
  },
  {
    project: 'Medium Projects',
    range: '$5,000 - $15,000',
    reward: '$250',
    examples: 'Bathroom remodel, deck installation, flooring',
  },
  {
    project: 'Large Projects',
    range: '$15,000 - $50,000',
    reward: '$500',
    examples: 'Kitchen remodel, basement finishing',
  },
  {
    project: 'Major Projects',
    range: '$50,000+',
    reward: '$750+',
    examples: 'Full renovations, additions',
    highlight: true,
  },
]

const howItWorks = [
  {
    step: 1,
    title: 'Share Our Info',
    description: 'Tell your friends, family, or neighbors about CR Home Pros. Share your unique referral link or just give them our number.',
    icon: Users,
  },
  {
    step: 2,
    title: 'They Get a Quote',
    description: 'Your referral contacts us and mentions your name. They receive a free consultation and estimate.',
    icon: Phone,
  },
  {
    step: 3,
    title: 'Project Completed',
    description: 'Once we complete their project, you earn your referral reward. It\'s that simple!',
    icon: CheckCircle,
  },
  {
    step: 4,
    title: 'Get Paid',
    description: 'Receive your reward via check, Venmo, Zelle, gift card, or credit toward your next project.',
    icon: DollarSign,
  },
]

const faqs = [
  {
    q: 'Who can participate in the referral program?',
    a: 'Anyone! You don\'t have to be a previous customer. Friends, family, real estate agents, property managers - everyone is welcome.',
  },
  {
    q: 'Is there a limit to how many people I can refer?',
    a: 'No limit! Refer as many people as you\'d like. Some of our top referrers earn thousands of dollars per year.',
  },
  {
    q: 'When do I receive my reward?',
    a: 'Rewards are paid within 7 days of project completion and final payment.',
  },
  {
    q: 'What if I refer someone for multiple projects?',
    a: 'You earn a reward for each project! If your referral comes back for a second project, you earn again.',
  },
  {
    q: 'Can I use my reward toward my own project?',
    a: 'Absolutely! Many clients use their referral credits to fund their next home improvement project with us.',
  },
]

export default function ReferralsPage() {
  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-20 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/20 rounded-full blur-3xl" />
          <div className="absolute bottom-1/4 left-1/4 w-96 h-96 bg-primary-500/20 rounded-full blur-3xl" />
          <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent" />
        </div>
        
        <div className="container-custom relative z-10">
          <div className="max-w-3xl mx-auto text-center">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gold-500/20 border border-gold-500/30 mb-6">
              <Gift className="w-5 h-5 text-gold-400" />
              <span className="text-gold-300 font-medium">Referral Program</span>
            </div>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
              Share the Quality,{' '}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">
                Share the Rewards
              </span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed mb-8">
              Know someone who needs home improvement? Refer them to CR Home Pros and earn up to 
              <span className="text-gold-400 font-bold"> $750+ </span> 
              for every completed project!
            </p>
            <div className="flex flex-col sm:flex-row gap-4 justify-center">
              <a href="#refer-form" className="btn-gold btn-lg">
                Refer Someone Now
                <ArrowRight className="w-5 h-5 ml-2" />
              </a>
              <a href="#how-it-works" className="btn-outline-white btn-lg">
                How It Works
              </a>
            </div>
          </div>
        </div>
      </section>

      {/* Reward Tiers */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="text-center max-w-3xl mx-auto mb-16">
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
              Reward Structure
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              Earn More for Bigger Projects
            </h2>
            <p className="text-lg text-dark-500">
              The bigger the project your referral completes, the bigger your reward.
            </p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-5 gap-6">
            {tiers.map((tier) => (
              <div
                key={tier.project}
                className={`relative rounded-2xl p-6 border-2 transition-all ${
                  tier.highlight
                    ? 'bg-gradient-to-br from-gold-50 to-gold-100 border-gold-300 shadow-glow'
                    : 'bg-white border-dark-100 hover:border-primary-200 hover:shadow-lg'
                }`}
              >
                {tier.highlight && (
                  <div className="absolute -top-3 left-1/2 -translate-x-1/2 px-3 py-1 bg-gold-500 rounded-full text-xs font-bold text-dark-900">
                    BEST VALUE
                  </div>
                )}
                <div className="text-center">
                  <p className="text-sm font-medium text-dark-500 mb-1">{tier.range}</p>
                  <h3 className="text-lg font-display font-semibold text-dark-900 mb-4">
                    {tier.project}
                  </h3>
                  <div className={`text-4xl font-bold mb-1 ${tier.highlight ? 'text-gold-600' : 'text-primary-700'}`}>
                    {tier.reward}
                  </div>
                  {tier.rewardType && (
                    <p className="text-xs font-semibold text-gold-600 mb-3">{tier.rewardType}</p>
                  )}
                  {!tier.rewardType && <div className="mb-3" />}
                  <p className="text-sm text-dark-500">
                    {tier.examples}
                  </p>
                </div>
              </div>
            ))}
          </div>

          <div className="mt-8 text-center">
            <p className="text-dark-500">
              <Zap className="w-5 h-5 inline text-gold-500 mr-1" />
              <strong>Bonus:</strong> Refer 3+ people in a year and earn an extra $200!
            </p>
          </div>
        </div>
      </section>

      {/* How It Works */}
      <section id="how-it-works" className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="text-center max-w-3xl mx-auto mb-16">
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
              Simple Process
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              How It Works
            </h2>
            <p className="text-lg text-dark-500">
              Four easy steps to earning referral rewards.
            </p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
            {howItWorks.map((step) => (
              <div key={step.step} className="relative">
                {/* Connector line (desktop) */}
                {step.step < 4 && (
                  <div className="hidden lg:block absolute top-10 left-[60%] w-full h-0.5 bg-dark-200" />
                )}
                
                <div className="relative bg-white rounded-2xl p-6 border border-dark-100">
                  {/* Step number */}
                  <div className="w-12 h-12 rounded-full bg-primary-800 text-white flex items-center justify-center font-bold text-lg mb-4">
                    {step.step}
                  </div>
                  
                  <div className="w-12 h-12 rounded-xl bg-primary-50 flex items-center justify-center mb-4">
                    <step.icon className="w-6 h-6 text-primary-600" />
                  </div>
                  
                  <h3 className="text-lg font-display font-semibold text-dark-900 mb-2">
                    {step.title}
                  </h3>
                  <p className="text-dark-500 text-sm">
                    {step.description}
                  </p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Referral Form */}
      <section id="refer-form" className="section-padding bg-white">
        <div className="container-custom">
          <div className="max-w-2xl mx-auto">
            <div className="text-center mb-12">
              <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
                Submit a Referral
              </span>
              <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
                Refer Someone Now
              </h2>
              <p className="text-lg text-dark-500">
                Fill out the form below and we'll reach out to your referral within 24 hours.
              </p>
            </div>

            <div className="bg-dark-50 rounded-2xl p-8">
              <ReferralForm />
            </div>
          </div>
        </div>
      </section>

      {/* Social Proof */}
      <section className="py-16 bg-primary-800">
        <div className="container-custom">
          <div className="grid md:grid-cols-3 gap-8 text-center text-white">
            <div>
              <div className="text-4xl font-bold mb-2">$50K+</div>
              <p className="text-primary-200">Paid in referral rewards</p>
            </div>
            <div>
              <div className="text-4xl font-bold mb-2">150+</div>
              <p className="text-primary-200">Happy referrers</p>
            </div>
            <div>
              <div className="text-4xl font-bold mb-2">7 Days</div>
              <p className="text-primary-200">Average payout time</p>
            </div>
          </div>
        </div>
      </section>

      {/* FAQs */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto">
            <div className="text-center mb-12">
              <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
                Questions?
              </span>
              <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900">
                Frequently Asked Questions
              </h2>
            </div>

            <div className="space-y-4">
              {faqs.map((faq, i) => (
                <div key={i} className="bg-white rounded-xl p-6 border border-dark-100">
                  <h3 className="font-semibold text-dark-900 mb-2">{faq.q}</h3>
                  <p className="text-dark-500">{faq.a}</p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Final CTA */}
      <section className="section-padding bg-gradient-to-br from-gold-500 to-gold-600">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center">
            <Heart className="w-12 h-12 text-dark-900/20 mx-auto mb-6" />
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              Your Recommendation Matters
            </h2>
            <p className="text-lg text-dark-700 mb-8">
              When you refer someone to CR Home Pros, you're not just earning a reward‚Äîyou're 
              helping a friend or neighbor get quality work they can trust.
            </p>
            <a href="#refer-form" className="btn bg-dark-900 text-white hover:bg-dark-800 btn-lg">
              Start Earning Today
              <ArrowRight className="w-5 h-5 ml-2" />
            </a>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/projects/page.tsx ---
'use client'

import { useState, useEffect } from 'react'
import Image from 'next/image'
import { ChevronDown, ChevronUp, X, ChevronLeft, ChevronRight } from 'lucide-react'
import { cn } from '@/lib/utils'
import { GALLERY_PROJECTS as RAW_PROJECTS, GALLERY_CATEGORIES, type GalleryCategory } from '@/lib/gallery-data'
import { resolveProjectImages } from '@/lib/resolve-images'
import { BeforeAfterSlider } from '@/components/ui/BeforeAfterSlider'
import { resolveImageUrl } from '@/lib/resolve-images'

// Resolve image URLs ‚Äî uses Firebase Storage when configured, local paths otherwise
const GALLERY_PROJECTS = RAW_PROJECTS.map(resolveProjectImages)

export default function ProjectsPage() {
  const [activeCategory, setActiveCategory] = useState<GalleryCategory>('All')
  const [expandedProjects, setExpandedProjects] = useState<Set<string>>(new Set())
  const [lightboxImage, setLightboxImage] = useState<{ src: string; projectId: string; index: number } | null>(null)

  // Auto-expand projects on mount based on screen size
  useEffect(() => {
    const handleInitialExpand = () => {
      const isDesktop = window.innerWidth >= 1024
      const projectsToExpand = isDesktop 
        ? GALLERY_PROJECTS.map(p => p.id)
        : GALLERY_PROJECTS.slice(0, 3).map(p => p.id)
      setExpandedProjects(new Set(projectsToExpand))
    }
    handleInitialExpand()
    window.addEventListener('resize', handleInitialExpand)
    return () => window.removeEventListener('resize', handleInitialExpand)
  }, [])

  const filteredProjects = activeCategory === 'All' 
    ? GALLERY_PROJECTS 
    : GALLERY_PROJECTS.filter(p => p.category === activeCategory)

  const toggleProject = (projectId: string) => {
    setExpandedProjects(prev => {
      const newSet = new Set(prev)
      if (newSet.has(projectId)) {
        newSet.delete(projectId)
      } else {
        newSet.add(projectId)
      }
      return newSet
    })
  }

  const isProjectExpanded = (projectId: string) => expandedProjects.has(projectId)

  const openLightbox = (src: string, projectId: string, index: number) => {
    setLightboxImage({ src, projectId, index })
  }

  const closeLightbox = () => {
    setLightboxImage(null)
  }

  const navigateLightbox = (direction: 'prev' | 'next') => {
    if (!lightboxImage) return
    const project = GALLERY_PROJECTS.find(p => p.id === lightboxImage.projectId)
    if (!project) return
    
    let newIndex = direction === 'next' 
      ? (lightboxImage.index + 1) % project.images.length
      : (lightboxImage.index - 1 + project.images.length) % project.images.length
    
    setLightboxImage({
      src: project.images[newIndex],
      projectId: lightboxImage.projectId,
      index: newIndex
    })
  }

  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-20 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950">
        <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent" />
        <div className="container-custom relative z-10">
          <div className="max-w-3xl">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              Our Portfolio
            </span>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
              Project{' '}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-400 to-gold-300">
                Gallery
              </span>
            </h1>
            <p className="text-xl text-white/70">
              Browse our completed projects and see the quality craftsmanship we bring to every home.
            </p>
          </div>
        </div>
      </section>

      {/* Main Content */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="flex flex-col lg:flex-row gap-8">
            {/* Sidebar Categories */}
            <aside className="lg:w-64 flex-shrink-0">
              <div className="sticky top-24">
                <h3 className="text-sm font-semibold text-dark-500 uppercase tracking-wider mb-4">
                  Categories
                </h3>
                <nav className="space-y-1">
                  {GALLERY_CATEGORIES.map((cat) => (
                    <button
                      key={cat}
                      onClick={() => setActiveCategory(cat)}
                      className={cn(
                        'w-full text-left px-4 py-2.5 rounded-lg text-sm font-medium transition-all',
                        activeCategory === cat
                          ? 'bg-primary-800 text-white'
                          : 'text-dark-600 hover:bg-dark-50 hover:text-dark-900'
                      )}
                    >
                      {cat}
                    </button>
                  ))}
                </nav>
              </div>
            </aside>

            {/* Gallery Content */}
            <div className="flex-1">
              <div className="space-y-6">
                {filteredProjects.map((project) => (
                  <div 
                    key={project.id} 
                    className="border border-dark-200 rounded-xl overflow-hidden bg-white"
                  >
                    {/* Project Header (Accordion Trigger) */}
                    <button
                      onClick={() => toggleProject(project.id)}
                      className="w-full flex items-center justify-between p-4 md:p-6 hover:bg-dark-50 transition-colors"
                    >
                      <div className="text-left">
                        <h3 className="text-lg md:text-xl font-display font-semibold text-dark-900">
                          {project.title}
                        </h3>
                        <p className="text-sm text-dark-500 mt-1">
                          {project.category} ‚Ä¢ {project.images.length} photos
                        </p>
                        {project.description && (
                          <p className="text-sm text-dark-600 mt-2 leading-relaxed">
                            {project.description}
                          </p>
                        )}
                      </div>
                      {isProjectExpanded(project.id) ? (
                        <ChevronUp className="w-5 h-5 text-dark-400 flex-shrink-0 ml-4" />
                      ) : (
                        <ChevronDown className="w-5 h-5 text-dark-400 flex-shrink-0 ml-4" />
                      )}
                    </button>

                    {/* Project Images (Accordion Content) */}
                    {isProjectExpanded(project.id) && (
                      <div className="p-4 md:p-6 pt-0 border-t border-dark-100">
                        {/* Before/After Slider (if project has before images) */}
                        {project.beforeImages && project.beforeImages.length > 0 && (
                          <div className="mb-6">
                            <div className="text-sm font-semibold text-dark-500 uppercase tracking-wider mb-3">Before &amp; After</div>
                            <BeforeAfterSlider
                              beforeImage={project.beforeImages[0]}
                              afterImage={project.images[0]}
                              className="shadow-md"
                            />
                          </div>
                        )}

                        {/* Thumbnail Grid */}
                        <div className="grid grid-cols-3 md:grid-cols-4 gap-3 mb-4">
                          {project.images.map((img, idx) => (
                            <button
                              key={idx}
                              onClick={() => openLightbox(img, project.id, idx)}
                              className="aspect-square relative rounded-lg overflow-hidden group bg-dark-100"
                            >
                              <Image
                                src={resolveImageUrl(img)}
                                alt={`${project.title} - Image ${idx + 1}`}
                                fill
                                className="object-cover transition-transform duration-300 group-hover:scale-110"
                                unoptimized={img.includes('firebasestorage')}
                                onError={(e) => {
                                  const target = e.target as HTMLImageElement
                                  target.style.display = 'none'
                                  target.parentElement!.innerHTML = '<div class="flex items-center justify-center h-full text-dark-400 text-xs">Photo unavailable</div>'
                                }}
                              />
                              <div className="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors" />
                            </button>
                          ))}
                        </div>

                        {/* Featured Image (first image larger) */}
                        <div 
                          className="relative aspect-video rounded-xl overflow-hidden cursor-pointer bg-dark-100"
                          onClick={() => openLightbox(project.images[0], project.id, 0)}
                        >
                          <Image
                            src={resolveImageUrl(project.images[0])}
                            alt={`${project.title} - Featured`}
                            fill
                            className="object-cover"
                            unoptimized={project.images[0].includes('firebasestorage')}
                            onError={(e) => {
                              const target = e.target as HTMLImageElement
                              target.style.display = 'none'
                            }}
                          />
                        </div>
                      </div>
                    )}
                  </div>
                ))}
              </div>

              {filteredProjects.length === 0 && (
                <div className="text-center py-12 bg-dark-50 rounded-xl">
                  <p className="text-dark-500">No projects found in this category.</p>
                </div>
              )}
            </div>
          </div>
        </div>
      </section>

      {/* Lightbox Modal */}
      {lightboxImage && (
        <div 
          className="fixed inset-0 z-50 bg-black/95 flex items-center justify-center"
          onClick={closeLightbox}
        >
          {/* Close Button */}
          <button 
            className="absolute top-4 right-4 p-2 text-white/70 hover:text-white transition-colors z-10"
            onClick={closeLightbox}
          >
            <X className="w-8 h-8" />
          </button>

          {/* Navigation Buttons */}
          <button 
            className="absolute left-2 md:left-4 top-1/2 -translate-y-1/2 p-2 text-white/70 hover:text-white transition-colors z-10"
            onClick={(e) => { e.stopPropagation(); navigateLightbox('prev'); }}
          >
            <ChevronLeft className="w-10 h-10" />
          </button>
          <button 
            className="absolute right-2 md:right-4 top-1/2 -translate-y-1/2 p-2 text-white/70 hover:text-white transition-colors z-10"
            onClick={(e) => { e.stopPropagation(); navigateLightbox('next'); }}
          >
            <ChevronRight className="w-10 h-10" />
          </button>

          {/* Image */}
          <div 
            className="relative max-w-5xl max-h-[85vh] w-full h-full m-4"
            onClick={(e) => e.stopPropagation()}
          >
            <Image
              src={lightboxImage.src}
              alt="Gallery image"
              fill
              className="object-contain"
            />
          </div>

          {/* Image Counter */}
          <div className="absolute bottom-4 left-1/2 -translate-x-1/2 text-white/70 text-sm">
            {lightboxImage.index + 1} / {GALLERY_PROJECTS.find(p => p.id === lightboxImage.projectId)?.images.length}
          </div>
        </div>
      )}
    </>
  )
}


==========================================================================================

--- file: app/[locale]/projects/[slug]/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import Image from 'next/image'
import { ArrowRight, MapPin, Clock, Calendar, ChevronLeft, ChevronRight, Phone } from 'lucide-react'
import { cn, formatPhoneLink } from '@/lib/utils'
import { COMPANY } from '@/lib/constants'
import { resolveImageUrl } from '@/lib/resolve-images'

// Sample project data - will come from Firebase
const projectsData: Record<string, {
  title: string
  location: string
  type: string
  duration: string
  year: number
  description: string
  challenge: string
  solution: string
  images: { url: string; caption: string }[]
}> = {
  'bethesda-kitchen-2024': {
    title: 'Modern Kitchen Transformation',
    location: 'Bethesda, MD',
    type: 'Kitchen',
    duration: '6 weeks',
    year: 2024,
    description: 'Complete kitchen remodel featuring custom cabinetry, quartz countertops, and modern appliances. The homeowners wanted a bright, open space for family gatherings.',
    challenge: 'The existing kitchen had a closed layout with poor natural light and outdated fixtures.',
    solution: 'We removed a non-load-bearing wall to open the space, installed large windows, and chose light-colored cabinets and countertops to maximize brightness.',
    images: [
      { url: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=1200&q=80', caption: 'After: Open concept kitchen' },
      { url: 'https://images.unsplash.com/photo-1556909172-54557c7e4fb7?w=1200&q=80', caption: 'Custom island with seating' },
      { url: 'https://images.unsplash.com/photo-1556909212-d5b604d0c90d?w=1200&q=80', caption: 'Modern appliances' },
    ],
  },
  'silver-spring-bathroom': {
    title: 'Spa-Inspired Master Bath',
    location: 'Silver Spring, MD',
    type: 'Bathroom',
    duration: '4 weeks',
    year: 2024,
    description: 'Luxurious master bathroom renovation with walk-in shower, freestanding tub, and heated floors.',
    challenge: 'Small footprint with outdated plumbing and poor ventilation.',
    solution: 'Reconfigured the layout to maximize space, updated all plumbing, and added proper ventilation with a modern exhaust fan.',
    images: [
      { url: 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=1200&q=80', caption: 'Completed master bath' },
      { url: 'https://images.unsplash.com/photo-1620626011761-996317b8d101?w=1200&q=80', caption: 'Walk-in shower detail' },
    ],
  },
}

const defaultProject = {
  title: 'Project Details',
  location: 'DMV Area',
  type: 'Renovation',
  duration: '4 weeks',
  year: 2024,
  description: 'A beautiful home improvement project by CR Home Pros.',
  challenge: 'The client needed a fresh, modern update.',
  solution: 'We delivered quality craftsmanship on time and on budget.',
  images: [
    { url: 'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1200&q=80', caption: 'Project result' },
  ],
}

export default function ProjectPage({ params }: { params: { slug: string } }) {
  const project = projectsData[params.slug] || defaultProject
  const [currentImage, setCurrentImage] = useState(0)

  const nextImage = () => {
    setCurrentImage((prev) => (prev + 1) % project.images.length)
  }

  const prevImage = () => {
    setCurrentImage((prev) => (prev - 1 + project.images.length) % project.images.length)
  }

  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-12 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950">
        <div className="container-custom relative z-10">
          <Link href="/projects" className="inline-flex items-center text-primary-300 hover:text-white mb-6">
            ‚Üê Back to Projects
          </Link>
          <div className="flex flex-wrap items-center gap-3 mb-4">
            <span className="px-3 py-1 bg-gold-500 text-dark-900 rounded-full text-sm font-semibold">
              {project.type}
            </span>
            <span className="px-3 py-1 bg-white/10 text-white rounded-full text-sm">
              {project.year}
            </span>
          </div>
          <h1 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-white mb-4">
            {project.title}
          </h1>
          <div className="flex flex-wrap gap-6 text-white/70">
            <div className="flex items-center gap-2">
              <MapPin className="w-5 h-5" />
              {project.location}
            </div>
            <div className="flex items-center gap-2">
              <Clock className="w-5 h-5" />
              {project.duration}
            </div>
          </div>
        </div>
      </section>

      {/* Image Gallery */}
      <section className="py-8 bg-dark-900">
        <div className="container-custom">
          <div className="relative aspect-[16/9] md:aspect-[21/9] rounded-2xl overflow-hidden">
            <Image
              src={project.images[currentImage].url}
              alt={project.images[currentImage].caption}
              fill
              className="object-cover"
            />
            
            {/* Navigation */}
            {project.images.length > 1 && (
              <>
                <button
                  onClick={prevImage}
                  className="absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/90 flex items-center justify-center hover:bg-white transition-colors"
                >
                  <ChevronLeft className="w-6 h-6 text-dark-900" />
                </button>
                <button
                  onClick={nextImage}
                  className="absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/90 flex items-center justify-center hover:bg-white transition-colors"
                >
                  <ChevronRight className="w-6 h-6 text-dark-900" />
                </button>
              </>
            )}

            {/* Caption */}
            <div className="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-6">
              <p className="text-white">{project.images[currentImage].caption}</p>
            </div>
          </div>

          {/* Thumbnails */}
          {project.images.length > 1 && (
            <div className="flex gap-3 mt-4 overflow-x-auto pb-2">
              {project.images.map((img, i) => (
                <button
                  key={i}
                  onClick={() => setCurrentImage(i)}
                  className={cn(
                    'relative w-24 h-16 rounded-lg overflow-hidden flex-shrink-0 border-2 transition-all',
                    currentImage === i ? 'border-gold-500' : 'border-transparent opacity-60 hover:opacity-100'
                  )}
                >
                  <Image src={img.url} alt={img.caption} fill className="object-cover" />
                </button>
              ))}
            </div>
          )}
        </div>
      </section>

      {/* Project Details */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="max-w-4xl mx-auto">
            <div className="grid md:grid-cols-3 gap-8">
              <div className="md:col-span-2 space-y-8">
                <div>
                  <h2 className="text-2xl font-display font-bold text-dark-900 mb-4">About This Project</h2>
                  <p className="text-dark-600 leading-relaxed">{project.description}</p>
                </div>

                <div>
                  <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">The Challenge</h3>
                  <p className="text-dark-600 leading-relaxed">{project.challenge}</p>
                </div>

                <div>
                  <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">Our Solution</h3>
                  <p className="text-dark-600 leading-relaxed">{project.solution}</p>
                </div>
              </div>

              {/* Sidebar */}
              <div className="space-y-6">
                <div className="bg-dark-50 rounded-xl p-6">
                  <h3 className="font-semibold text-dark-900 mb-4">Project Details</h3>
                  <dl className="space-y-3 text-sm">
                    <div className="flex justify-between">
                      <dt className="text-dark-500">Type</dt>
                      <dd className="font-medium text-dark-900">{project.type}</dd>
                    </div>
                    <div className="flex justify-between">
                      <dt className="text-dark-500">Location</dt>
                      <dd className="font-medium text-dark-900">{project.location}</dd>
                    </div>
                    <div className="flex justify-between">
                      <dt className="text-dark-500">Duration</dt>
                      <dd className="font-medium text-dark-900">{project.duration}</dd>
                    </div>
                    <div className="flex justify-between">
                      <dt className="text-dark-500">Year</dt>
                      <dd className="font-medium text-dark-900">{project.year}</dd>
                    </div>
                  </dl>
                </div>

                <div className="bg-primary-800 rounded-xl p-6 text-white">
                  <h3 className="font-semibold mb-3">Want Similar Results?</h3>
                  <p className="text-primary-200 text-sm mb-4">
                    Let's discuss your project and bring your vision to life.
                  </p>
                  <Link href="/get-started" className="btn-gold w-full justify-center text-sm">
                    Get Free Estimate
                  </Link>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center">
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              Ready to Transform Your Space?
            </h2>
            <p className="text-lg text-dark-500 mb-8">
              Get a free consultation and see what's possible for your home.
            </p>
            <div className="flex flex-col sm:flex-row gap-4 justify-center">
              <Link href="/get-started" className="btn-gold btn-lg">
                Start Your Project <ArrowRight className="w-5 h-5 ml-2" />
              </Link>
              <a href={formatPhoneLink(COMPANY.phone)} className="btn-outline btn-lg">
                <Phone className="w-5 h-5 mr-2" /> Call Us
              </a>
            </div>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/terms/page.tsx ---
import { Metadata } from 'next'
import { COMPANY } from '@/lib/constants'

export const metadata: Metadata = {
  title: 'Terms of Service',
  description: 'CR Home Pros terms of service. Terms and conditions for using our website and services.',
}

export default function TermsPage() {
  return (
    <div className="pt-32 pb-20">
      <div className="container-custom max-w-3xl">
        <h1 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-2">Terms of Service</h1>
        <p className="text-dark-400 mb-10">Last updated: February 12, 2026</p>

        <div className="prose prose-lg max-w-none text-dark-700 space-y-8">
          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">1. About Our Services</h2>
            <p>CR Home Pros is a trade name of C &amp; R General Services Inc, a licensed home improvement contractor operating in the District of Columbia, Maryland, and Virginia (DMV) area. We hold Maryland Home Improvement Commission licenses #05-132359 and #109350.</p>
            <p>Our website provides information about our services, allows you to request estimates, submit reviews, and refer others to our services.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">2. Estimates and Pricing</h2>
            <p>All estimates provided through our website, cost estimator tool, or pricing guide are approximate ranges based on typical project scopes. Actual project costs depend on specific conditions, materials selected, project complexity, and other factors that can only be determined through an in-person consultation.</p>
            <p>Online estimates are not binding quotes. A formal written estimate will be provided after an on-site assessment. Final pricing is agreed upon in a separate contract before work begins.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">3. Project Agreements</h2>
            <p>All home improvement projects are governed by a separate written contract between C &amp; R General Services Inc and the homeowner. That contract outlines the specific scope of work, materials, timeline, payment schedule, and warranty terms. The terms on this website do not replace or modify any project contract.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">4. Reviews and User Content</h2>
            <p>Reviews submitted through our website are subject to moderation. We reserve the right to not publish reviews that contain inappropriate language, false information, or content unrelated to our services. Published reviews may be displayed on our website and marketing materials.</p>
            <p>By submitting a review, you confirm that your experience is genuine and that you give us permission to display your review with your first name and general location.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">5. Referral Program</h2>
            <p>Our referral program rewards existing customers who refer new clients. Referral rewards are paid after the referred project is completed and paid in full. Specific reward amounts and payment methods are outlined on our referrals page. CR Home Pros reserves the right to modify or discontinue the referral program at any time.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">6. Financing</h2>
            <p>Financing options mentioned on our website, including Klarna buy-now-pay-later, are provided by third-party financial services. Approval, terms, and conditions are determined by those providers. CR Home Pros does not guarantee financing approval.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">7. Insurance Claims</h2>
            <p>We work with homeowners and their insurance companies to facilitate home improvement projects covered by insurance claims. We are not an insurance company and do not make coverage determinations. The homeowner is ultimately responsible for communication with their insurer and any deductibles or uncovered costs.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">8. Website Use</h2>
            <p>This website is provided for informational purposes. We make reasonable efforts to keep information accurate and up to date, but we do not guarantee that all content is current or error-free. Photos on our website depict actual completed projects unless otherwise noted.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">9. Limitation of Liability</h2>
            <p>CR Home Pros is not liable for any damages arising from your use of this website. Our liability for any home improvement project is governed by the terms of the applicable project contract and applicable Maryland, Virginia, or DC law.</p>
          </section>

          <section>
            <h2 className="text-xl font-display font-bold text-dark-900 mt-8 mb-3">10. Contact</h2>
            <p>For questions about these terms, contact us at:</p>
            <p>
              <strong>C &amp; R General Services Inc (CR Home Pros)</strong><br />
              Email: {COMPANY.email}<br />
              Phone: {COMPANY.phoneFormatted}<br />
              Location: Hyattsville, MD
            </p>
          </section>
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: app/[locale]/about/page.tsx ---
import { Metadata } from 'next'
import Link from 'next/link'
import Image from 'next/image'
import { ArrowRight, Shield, Award, Users, Heart, CheckCircle } from 'lucide-react'
import { COMPANY, SERVICE_AREAS } from '@/lib/constants'
import { resolveImageUrl } from '@/lib/resolve-images'

export const metadata: Metadata = {
  title: 'About Us',
  description: `Learn about CR Home Pros - ${COMPANY.yearsInBusiness}+ years of trusted craftsmanship serving the DMV area. Meet our team and discover our commitment to quality.`,
}

const milestones = [
  { year: '2004', event: 'Carlos begins his journey in construction and home improvement' },
  { year: '2009', event: 'CR Home Pros officially established' },
  { year: '2012', event: 'Expanded team to handle larger renovation projects' },
  { year: '2015', event: 'Earned MHIC License #05-132359 in Maryland' },
  { year: '2018', event: 'Completed 250th project milestone' },
  { year: '2020', event: 'Adapted to serve clients safely during pandemic' },
  { year: '2024', event: '500+ projects completed, rebranded as CR Home Pros' },
]

const values = [
  {
    icon: Heart,
    title: 'Passion for Craft',
    description: 'We love what we do. Every nail, every tile, every detail matters to us.',
  },
  {
    icon: Shield,
    title: 'Integrity First',
    description: 'Honest pricing, transparent communication, and no surprises.',
  },
  {
    icon: Users,
    title: 'Client Partnership',
    description: 'Your vision drives our work. We listen, collaborate, and deliver.',
  },
  {
    icon: Award,
    title: 'Excellence Always',
    description: 'We never cut corners. Quality workmanship is our reputation.',
  },
]

export default function AboutPage() {
  return (
    <>
      {/* Hero Section */}
      <section className="relative pt-32 pb-20 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
          <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent" />
        </div>
        
        <div className="container-custom relative z-10">
          <div className="max-w-3xl">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              Our Story
            </span>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
              Building Dreams,{' '}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">
                One Home at a Time
              </span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed">
              For over {COMPANY.yearsInBusiness} years, CR Home Pros has been transforming houses into 
              dream homes across the DMV area. We're not just contractors‚Äîwe're craftsmen who take 
              pride in every project.
            </p>
          </div>
        </div>
      </section>

      {/* Carlos's Story */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="grid lg:grid-cols-2 gap-12 lg:gap-20 items-center">
            {/* Image */}
            <div className="relative">
              <div className="aspect-[4/5] rounded-2xl overflow-hidden bg-dark-100">
                <Image
                  src={resolveImageUrl("/images/team-carlos-01.jpg")}
                  alt="Carlos Hernandez - Founder"
                  fill
                  className="object-cover"
                />
              </div>
              {/* Floating card */}
              <div className="absolute -bottom-6 -right-6 bg-white rounded-2xl shadow-xl p-6 max-w-xs">
                <div className="flex items-center gap-4 mb-3">
                  <div className="w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center">
                    <Award className="w-6 h-6 text-primary-600" />
                  </div>
                  <div>
                    <p className="font-bold text-dark-900">{COMPANY.license}</p>
                    <p className="text-sm text-dark-500">Licensed Contractor/Salesman</p>
                  </div>
                </div>
              </div>
            </div>

            {/* Content */}
            <div>
              <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
                Meet the Founder
              </span>
              <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
                Carlos Hernandez
              </h2>
              <div className="space-y-4 text-dark-600 leading-relaxed">
                <p>
                  With over two decades of hands-on experience in home improvement, Carlos Hernandez 
                  has built CR Home Pros on a foundation of trust, quality, and personalized 
                  attention. What started as a passion for craftsmanship has grown into a full-service 
                  renovation company that treats every home like it's their own.
                </p>
                <p>
                  Carlos and his skilled team specialize in transforming spaces‚Äîfrom complete kitchen 
                  renovations to emergency repairs. They've earned a reputation throughout the DMV area 
                  for showing up on time, communicating clearly, and delivering results that exceed expectations.
                </p>
                <p className="italic border-l-4 border-gold-500 pl-4 py-2 bg-gold-50/50 rounded-r-lg">
                  "My team and I are dedicated to bringing your home's potential to life, one improvement 
                  at a time. With a passion for craftsmanship and a commitment to quality, we're not just 
                  renovating spaces‚Äîwe're here to help you build the dream space you've always envisioned. 
                  Let's create something beautiful together."
                </p>
              </div>
              
              {/* Quick stats */}
              <div className="grid grid-cols-3 gap-6 mt-8 pt-8 border-t border-dark-100">
                <div>
                  <p className="text-3xl font-bold text-primary-700">{COMPANY.yearsInBusiness}+</p>
                  <p className="text-sm text-dark-500">Years Experience</p>
                </div>
                <div>
                  <p className="text-3xl font-bold text-primary-700">500+</p>
                  <p className="text-sm text-dark-500">Projects Done</p>
                </div>
                <div>
                  <p className="text-3xl font-bold text-primary-700">100%</p>
                  <p className="text-sm text-dark-500">Commitment</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Our Values */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="text-center max-w-3xl mx-auto mb-16">
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
              Our Values
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              What We Stand For
            </h2>
            <p className="text-lg text-dark-500">
              These aren't just words on a wall‚Äîthey guide every decision we make and every project we take on.
            </p>
          </div>

          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {values.map((value) => (
              <div
                key={value.title}
                className="bg-white rounded-2xl p-8 border border-dark-100 hover:border-primary-200 hover:shadow-lg transition-all duration-300"
              >
                <div className="w-14 h-14 rounded-xl bg-primary-100 flex items-center justify-center mb-6">
                  <value.icon className="w-7 h-7 text-primary-600" />
                </div>
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">
                  {value.title}
                </h3>
                <p className="text-dark-500">
                  {value.description}
                </p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Timeline */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="text-center max-w-3xl mx-auto mb-16">
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
              Our Journey
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900">
              {COMPANY.yearsInBusiness}+ Years of Growth
            </h2>
          </div>

          <div className="max-w-3xl mx-auto">
            {milestones.map((milestone, index) => (
              <div key={milestone.year} className="flex gap-6 pb-8 last:pb-0">
                <div className="flex-shrink-0 w-20">
                  <span className="text-xl font-bold text-primary-700">{milestone.year}</span>
                </div>
                <div className="flex flex-col items-center">
                  <div className="w-4 h-4 rounded-full bg-gold-500" />
                  {index < milestones.length - 1 && (
                    <div className="w-0.5 flex-1 bg-dark-200 mt-2" />
                  )}
                </div>
                <div className="flex-1 pb-8">
                  <p className="text-dark-700">{milestone.event}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Service Areas */}
      <section className="section-padding bg-primary-800">
        <div className="container-custom">
          <div className="text-center mb-12">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              Where We Work
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-white mb-6">
              Proudly Serving the DMV
            </h2>
          </div>

          <div className="flex flex-wrap justify-center gap-3">
            {SERVICE_AREAS.map((area) => (
              <span
                key={area}
                className="px-4 py-2 bg-white/10 rounded-full text-white/90 text-sm"
              >
                {area}
              </span>
            ))}
          </div>
        </div>
      </section>

      {/* What to Expect - FAQ Style */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto">
            <div className="text-center mb-12">
              <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
                Working with Us
              </span>
              <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900">
                What to Expect
              </h2>
            </div>

            <div className="space-y-8">
              <div className="border-l-4 border-primary-500 pl-6 py-2">
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">
                  Do you work in occupied homes?
                </h3>
                <p className="text-dark-600 leading-relaxed">
                  Yes! We understand you have a life to live. We respect your daily routine, 
                  keep our work areas clean, and minimize disruption. Many of our clients 
                  continue living in their homes during renovations.
                </p>
              </div>

              <div className="border-l-4 border-primary-500 pl-6 py-2">
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">
                  How long do projects typically take?
                </h3>
                <p className="text-dark-600 leading-relaxed">
                  Timeline depends on the project scope. A bathroom remodel might take 2-3 weeks, 
                  while a full kitchen could be 4-6 weeks. We provide detailed timelines upfront 
                  and keep you updated on progress every step of the way.
                </p>
              </div>

              <div className="border-l-4 border-primary-500 pl-6 py-2">
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">
                  What about permits and inspections?
                </h3>
                <p className="text-dark-600 leading-relaxed">
                  We handle everything. From pulling permits to scheduling inspections, 
                  we navigate the bureaucracy so you don&apos;t have to. As a licensed Maryland 
                  contractor, we ensure all work meets code requirements.
                </p>
              </div>

              <div className="border-l-4 border-primary-500 pl-6 py-2">
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">
                  How do you handle changes during the project?
                </h3>
                <p className="text-dark-600 leading-relaxed">
                  We get it‚Äîsometimes you see the space coming together and want to adjust. 
                  We&apos;re flexible! Any changes are documented in writing with clear pricing 
                  before we proceed. No surprise charges, ever.
                </p>
              </div>

              <div className="border-l-4 border-primary-500 pl-6 py-2">
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">
                  What if I have questions during the project?
                </h3>
                <p className="text-dark-600 leading-relaxed">
                  Carlos and our project managers are just a call or text away. We provide 
                  daily updates and welcome your questions. This is your home‚Äîyou should 
                  never feel in the dark about what&apos;s happening.
                </p>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center">
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              Ready to Start Your Project?
            </h2>
            <p className="text-lg text-dark-500 mb-8">
              Let's discuss your vision. Schedule a free consultation today.
            </p>
            <div className="flex flex-col sm:flex-row gap-4 justify-center">
              <Link href="/get-started" className="btn-gold btn-lg">
                Get Free Estimate
                <ArrowRight className="w-5 h-5 ml-2" />
              </Link>
              <Link href="/projects" className="btn-outline btn-lg">
                View Our Work
              </Link>
            </div>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/blog/page.tsx ---
"use client";

import { useState } from "react";
import Link from "next/link";
import Image from "next/image";
import { ArrowRight, Calendar, Clock, User } from "lucide-react";
import { BLOG_POSTS, BLOG_CATEGORIES } from "@/lib/blog-posts";
import { cn } from "@/lib/utils";
import { resolveImageUrl } from '@/lib/resolve-images'

const categories = ["All", ...BLOG_CATEGORIES];

export default function BlogPage() {
  const [activeCategory, setActiveCategory] = useState("All");

  const featuredPost = BLOG_POSTS[0];

  // Filter posts based on active category
  const filteredPosts =
    activeCategory === "All"
      ? BLOG_POSTS.slice(1)
      : BLOG_POSTS.slice(1).filter((post) => post.category === activeCategory);

  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-16 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
        </div>

        <div className="container-custom relative z-10">
          <div className="max-w-3xl">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              Our Blog
            </span>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
              Home Improvement{" "}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">
                Tips & Insights
              </span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed">
              Expert advice, project inspiration, and practical tips from our
              experienced team.
            </p>
          </div>
        </div>
      </section>

      {/* Featured Post */}
      <section className="py-12 bg-white">
        <div className="container-custom">
          <Link href={`/blog/${featuredPost.slug}`} className="group block">
            <div className="grid md:grid-cols-2 gap-8 items-center">
              <div className="relative aspect-[4/3] rounded-2xl overflow-hidden">
                <Image
                  src={resolveImageUrl(featuredPost.image)}
                  alt={featuredPost.title}
                  fill
                  className="object-cover group-hover:scale-105 transition-transform duration-500"
                />
                <div className="absolute top-4 left-4 px-3 py-1 bg-gold-500 rounded-full text-xs font-semibold text-dark-900">
                  Featured
                </div>
              </div>
              <div>
                <span className="text-sm font-medium text-primary-600">
                  {featuredPost.category}
                </span>
                <h2 className="text-2xl md:text-3xl font-display font-bold text-dark-900 mt-2 mb-4 group-hover:text-primary-800 transition-colors">
                  {featuredPost.title}
                </h2>
                <p className="text-dark-500 mb-6">{featuredPost.excerpt}</p>
                <div className="flex items-center gap-6 text-sm text-dark-400">
                  <span className="flex items-center gap-1">
                    <User className="w-4 h-4" />
                    {featuredPost.author}
                  </span>
                  <span className="flex items-center gap-1">
                    <Calendar className="w-4 h-4" />
                    {new Date(featuredPost.date).toLocaleDateString("en-US", {
                      month: "short",
                      day: "numeric",
                      year: "numeric",
                    })}
                  </span>
                  <span className="flex items-center gap-1">
                    <Clock className="w-4 h-4" />
                    {featuredPost.readTime}
                  </span>
                </div>
              </div>
            </div>
          </Link>
        </div>
      </section>

      {/* Posts Grid */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="flex flex-col md:flex-row items-start md:items-center justify-between gap-4 mb-12">
            <h2 className="text-2xl font-display font-bold text-dark-900">
              Recent Articles
            </h2>

            {/* Category Filters */}
            <div className="flex flex-wrap gap-2">
              {categories.map((cat) => (
                <button
                  key={cat}
                  onClick={() => setActiveCategory(cat)}
                  className={cn(
                    "px-4 py-2 rounded-lg text-sm font-medium transition-colors",
                    activeCategory === cat
                      ? "bg-primary-800 text-white"
                      : "bg-white text-dark-600 hover:bg-primary-50 hover:text-primary-700",
                  )}
                >
                  {cat}
                </button>
              ))}
            </div>
          </div>

          {/* Posts Grid */}
          {filteredPosts.length > 0 ? (
            <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
              {filteredPosts.map((post) => (
                <Link
                  key={post.slug}
                  href={`/blog/${post.slug}`}
                  className="group bg-white rounded-2xl overflow-hidden border border-dark-100 hover:shadow-lg transition-shadow"
                >
                  <div className="relative aspect-[16/9] overflow-hidden">
                    <Image
                      src={resolveImageUrl(post.image)}
                      alt={post.title}
                      fill
                      className="object-cover group-hover:scale-105 transition-transform duration-500"
                    />
                    <div className="absolute top-3 left-3 px-2 py-1 bg-white/90 rounded text-xs font-medium text-dark-700">
                      {post.category}
                    </div>
                  </div>
                  <div className="p-6">
                    <h3 className="text-lg font-display font-semibold text-dark-900 mb-2 group-hover:text-primary-800 transition-colors line-clamp-2">
                      {post.title}
                    </h3>
                    <p className="text-dark-500 text-sm mb-4 line-clamp-2">
                      {post.excerpt}
                    </p>
                    <div className="flex items-center justify-between text-xs text-dark-400">
                      <span>
                        {new Date(post.date).toLocaleDateString("en-US", {
                          month: "short",
                          day: "numeric",
                        })}
                      </span>
                      <span>{post.readTime} read</span>
                    </div>
                  </div>
                </Link>
              ))}
            </div>
          ) : (
            <div className="text-center py-12 bg-white rounded-xl">
              <p className="text-dark-500">No posts found in this category.</p>
            </div>
          )}
        </div>
      </section>

      {/* Newsletter CTA */}
      <section className="section-padding bg-primary-800">
        <div className="container-custom">
          <div className="max-w-2xl mx-auto text-center text-white">
            <h2 className="text-3xl font-display font-bold mb-4">
              Get Home Improvement Tips in Your Inbox
            </h2>
            <p className="text-primary-200 mb-8">
              Subscribe for monthly tips, project ideas, and exclusive offers.
            </p>
            <form className="flex flex-col sm:flex-row gap-3 max-w-md mx-auto">
              <input
                type="email"
                placeholder="Enter your email"
                className="flex-1 px-4 py-3 rounded-xl text-dark-900 placeholder:text-dark-400 focus:outline-none focus:ring-2 focus:ring-gold-500"
              />
              <button type="submit" className="btn-gold">
                Subscribe
                <ArrowRight className="w-5 h-5 ml-2" />
              </button>
            </form>
          </div>
        </div>
      </section>
    </>
  );
}


==========================================================================================

--- file: app/[locale]/blog/[slug]/page.tsx ---
import { Metadata } from 'next'
import { notFound } from 'next/navigation'
import Image from 'next/image'
import Link from 'next/link'
import { Calendar, Clock, User, ArrowLeft, ArrowRight } from 'lucide-react'
import { BLOG_POSTS, getPostBySlug } from '@/lib/blog-posts'
import { resolveImageUrl } from '@/lib/resolve-images'

interface BlogPostPageProps {
  params: {
    slug: string
  }
}

export async function generateStaticParams() {
  return BLOG_POSTS.map((post) => ({
    slug: post.slug,
  }))
}

export async function generateMetadata({ params }: BlogPostPageProps): Promise<Metadata> {
  const post = getPostBySlug(params.slug)
  
  if (!post) {
    return {
      title: 'Post Not Found'
    }
  }

  return {
    title: `${post.title} | CR Home Pros Blog`,
    description: post.excerpt,
  }
}

export default function BlogPostPage({ params }: BlogPostPageProps) {
  const post = getPostBySlug(params.slug)

  if (!post) {
    notFound()
  }

  // Find next and previous posts
  const currentIndex = BLOG_POSTS.findIndex(p => p.slug === params.slug)
  const previousPost = currentIndex > 0 ? BLOG_POSTS[currentIndex - 1] : null
  const nextPost = currentIndex < BLOG_POSTS.length - 1 ? BLOG_POSTS[currentIndex + 1] : null

  // Format content with proper spacing
  const formattedContent = post.content
    .split('\n\n')
    .map(paragraph => paragraph.trim())
    .filter(paragraph => paragraph.length > 0)

  return (
    <>
      {/* Hero Section */}
      <section className="relative pt-32 pb-16 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950">
        <div className="container-custom">
          <Link 
            href="/blog"
            className="inline-flex items-center gap-2 text-gold-400 hover:text-gold-300 transition-colors mb-8"
          >
            <ArrowLeft className="w-4 h-4" />
            Back to Blog
          </Link>

          <div className="max-w-4xl">
            <div className="flex items-center gap-4 mb-6">
              <span className="px-3 py-1 bg-gold-500/20 border border-gold-500/30 rounded-full text-sm font-medium text-gold-400">
                {post.category}
              </span>
            </div>

            <h1 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-white mb-6">
              {post.title}
            </h1>

            <div className="flex flex-wrap items-center gap-6 text-white/70">
              <span className="flex items-center gap-2">
                <User className="w-4 h-4" />
                {post.author}
              </span>
              <span className="flex items-center gap-2">
                <Calendar className="w-4 h-4" />
                {new Date(post.date).toLocaleDateString('en-US', { 
                  month: 'long', 
                  day: 'numeric', 
                  year: 'numeric' 
                })}
              </span>
              <span className="flex items-center gap-2">
                <Clock className="w-4 h-4" />
                {post.readTime} read
              </span>
            </div>
          </div>
        </div>
      </section>

      {/* Featured Image */}
      <section className="relative -mt-8">
        <div className="container-custom">
          <div className="relative aspect-[21/9] rounded-2xl overflow-hidden shadow-2xl">
            <Image
              src={resolveImageUrl(post.image)}
              alt={post.title}
              fill
              className="object-cover"
              priority
            />
          </div>
        </div>
      </section>

      {/* Article Content */}
      <article className="section-padding bg-white">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto">
            <div className="prose prose-lg prose-primary max-w-none">
              {formattedContent.map((paragraph, index) => {
                // Check if it's a heading
                if (paragraph.startsWith('## ')) {
                  return (
                    <h2 key={index} className="text-2xl font-display font-bold text-dark-900 mt-12 mb-4">
                      {paragraph.replace('## ', '')}
                    </h2>
                  )
                }
                
                // Check if it's a bold section (starts with **)
                if (paragraph.startsWith('**') && paragraph.includes('**:')) {
                  const [boldPart, ...rest] = paragraph.split('**:')
                  const boldText = boldPart.replace('**', '')
                  return (
                    <p key={index} className="text-dark-700 leading-relaxed mb-6">
                      <strong className="text-dark-900 font-semibold">{boldText}:</strong>
                      {rest.join('**:')}
                    </p>
                  )
                }
                
                // Regular paragraph
                return (
                  <p key={index} className="text-dark-700 leading-relaxed mb-6">
                    {paragraph}
                  </p>
                )
              })}
            </div>

            {/* Author Bio */}
            <div className="mt-16 p-8 bg-dark-50 rounded-2xl border border-dark-100">
              <div className="flex items-start gap-4">
                <div className="w-16 h-16 rounded-full bg-gradient-to-br from-primary-600 to-primary-800 flex items-center justify-center text-white font-bold text-xl">
                  CH
                </div>
                <div className="flex-1">
                  <h3 className="text-xl font-display font-bold text-dark-900 mb-2">
                    {post.author}
                  </h3>
                  <p className="text-dark-600 leading-relaxed">
                    Owner and lead contractor at CR Home Pros. With over 15 years of experience in home improvement 
                    and renovation projects throughout the DMV area, Carlos is dedicated to delivering quality 
                    workmanship and exceptional customer service.
                  </p>
                </div>
              </div>
            </div>

            {/* Post Navigation */}
            <div className="mt-16 pt-8 border-t border-dark-200">
              <div className="grid md:grid-cols-2 gap-6">
                {previousPost && (
                  <Link 
                    href={`/blog/${previousPost.slug}`}
                    className="group p-6 bg-dark-50 rounded-xl border border-dark-100 hover:border-primary-300 hover:shadow-md transition-all"
                  >
                    <span className="text-sm text-dark-500 mb-2 block">Previous Post</span>
                    <h4 className="font-display font-semibold text-dark-900 group-hover:text-primary-700 transition-colors">
                      {previousPost.title}
                    </h4>
                  </Link>
                )}
                {nextPost && (
                  <Link 
                    href={`/blog/${nextPost.slug}`}
                    className="group p-6 bg-dark-50 rounded-xl border border-dark-100 hover:border-primary-300 hover:shadow-md transition-all md:text-right"
                  >
                    <span className="text-sm text-dark-500 mb-2 block">Next Post</span>
                    <h4 className="font-display font-semibold text-dark-900 group-hover:text-primary-700 transition-colors">
                      {nextPost.title}
                    </h4>
                  </Link>
                )}
              </div>
            </div>
          </div>
        </div>
      </article>

      {/* CTA Section */}
      <section className="section-padding bg-primary-800">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center text-white">
            <h2 className="text-3xl font-display font-bold mb-4">
              Ready to Start Your Project?
            </h2>
            <p className="text-primary-200 mb-8 text-lg">
              Let's discuss your home improvement goals and create a plan that works for you.
            </p>
            <Link href="/get-started" className="btn-gold inline-flex items-center gap-2">
              Get Started
              <ArrowRight className="w-5 h-5" />
            </Link>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/estimate/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { Calculator, ArrowRight, Info, Phone, CheckCircle } from 'lucide-react'
import { cn, formatCurrency, formatPhoneLink } from '@/lib/utils'
import { COMPANY } from '@/lib/constants'

// Service pricing data
const serviceData = [
  {
    id: 'kitchen',
    name: 'Kitchen Remodel',
    basePrice: 15000,
    pricePerSqFt: 150,
    description: 'Complete kitchen transformation',
  },
  {
    id: 'bathroom',
    name: 'Bathroom Renovation',
    basePrice: 8000,
    pricePerSqFt: 200,
    description: 'Full bathroom remodel',
  },
  {
    id: 'basement',
    name: 'Basement Finishing',
    basePrice: 20000,
    pricePerSqFt: 50,
    description: 'Convert unfinished basement',
  },
  {
    id: 'deck',
    name: 'Deck Installation',
    basePrice: 5000,
    pricePerSqFt: 35,
    description: 'New deck construction',
  },
  {
    id: 'roofing',
    name: 'Roofing',
    basePrice: 8000,
    pricePerSqFt: 5,
    description: 'Roof replacement',
  },
  {
    id: 'painting',
    name: 'Interior Painting',
    basePrice: 1500,
    pricePerSqFt: 3,
    description: 'Professional painting',
  },
  {
    id: 'flooring',
    name: 'Flooring',
    basePrice: 2000,
    pricePerSqFt: 12,
    description: 'New flooring installation',
  },
]

const materialLevels = [
  { id: 'budget', name: 'Budget-Friendly', multiplier: 0.8, description: 'Quality materials at value prices' },
  { id: 'mid', name: 'Mid-Range', multiplier: 1.0, description: 'Popular brands and finishes' },
  { id: 'premium', name: 'Premium', multiplier: 1.4, description: 'High-end materials and brands' },
  { id: 'luxury', name: 'Luxury', multiplier: 2.0, description: 'Top-tier, custom options' },
]

export default function EstimatePage() {
  const [selectedService, setSelectedService] = useState('')
  const [squareFootage, setSquareFootage] = useState(200)
  const [materialLevel, setMaterialLevel] = useState('mid')
  const [showResult, setShowResult] = useState(false)

  const service = serviceData.find((s) => s.id === selectedService)
  const material = materialLevels.find((m) => m.id === materialLevel)

  const calculateEstimate = () => {
    if (!service || !material) return { low: 0, high: 0 }
    
    const baseEstimate = service.basePrice + (squareFootage * service.pricePerSqFt)
    const adjustedEstimate = baseEstimate * material.multiplier
    
    return {
      low: Math.round(adjustedEstimate * 0.85),
      high: Math.round(adjustedEstimate * 1.15),
    }
  }

  const estimate = calculateEstimate()

  const handleCalculate = () => {
    if (selectedService) {
      setShowResult(true)
    }
  }

  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-12 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
        </div>
        
        <div className="container-custom relative z-10">
          <div className="max-w-3xl mx-auto text-center">
            <div className="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gold-500/20 border border-gold-500/30 mb-6">
              <Calculator className="w-5 h-5 text-gold-400" />
              <span className="text-gold-300 font-medium">Instant Estimate</span>
            </div>
            <h1 className="text-4xl md:text-5xl font-display font-bold text-white mb-6">
              Project Cost{' '}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">
                Calculator
              </span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed">
              Get a ballpark estimate for your project in seconds. For an accurate quote, 
              schedule a free consultation.
            </p>
          </div>
        </div>
      </section>

      {/* Calculator */}
      <section className="py-12 bg-white">
        <div className="container-custom">
          <div className="max-w-4xl mx-auto">
            <div className="bg-white rounded-2xl border border-dark-100 shadow-xl overflow-hidden">
              {/* Calculator Form */}
              <div className="p-6 md:p-8 space-y-8">
                {/* Step 1: Service */}
                <div>
                  <h3 className="text-lg font-semibold text-dark-900 mb-4 flex items-center gap-2">
                    <span className="w-6 h-6 rounded-full bg-primary-800 text-white text-sm flex items-center justify-center">1</span>
                    Select Your Project Type
                  </h3>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                    {serviceData.map((svc) => (
                      <button
                        key={svc.id}
                        onClick={() => {
                          setSelectedService(svc.id)
                          setShowResult(false)
                        }}
                        className={cn(
                          'p-4 rounded-xl border-2 text-left transition-all',
                          selectedService === svc.id
                            ? 'border-primary-500 bg-primary-50'
                            : 'border-dark-100 hover:border-primary-200'
                        )}
                      >
                        <p className="font-semibold text-dark-900">{svc.name}</p>
                        <p className="text-xs text-dark-500 mt-1">{svc.description}</p>
                      </button>
                    ))}
                  </div>
                </div>

                {/* Step 2: Size */}
                <div>
                  <h3 className="text-lg font-semibold text-dark-900 mb-4 flex items-center gap-2">
                    <span className="w-6 h-6 rounded-full bg-primary-800 text-white text-sm flex items-center justify-center">2</span>
                    Approximate Square Footage
                  </h3>
                  <div className="space-y-4">
                    <input
                      type="range"
                      min="50"
                      max="2000"
                      step="50"
                      value={squareFootage}
                      onChange={(e) => {
                        setSquareFootage(Number(e.target.value))
                        setShowResult(false)
                      }}
                      className="w-full h-2 bg-dark-200 rounded-lg appearance-none cursor-pointer accent-primary-600"
                    />
                    <div className="flex justify-between text-sm text-dark-500">
                      <span>50 sq ft</span>
                      <span className="text-lg font-bold text-primary-700">{squareFootage} sq ft</span>
                      <span>2000 sq ft</span>
                    </div>
                  </div>
                </div>

                {/* Step 3: Material Level */}
                <div>
                  <h3 className="text-lg font-semibold text-dark-900 mb-4 flex items-center gap-2">
                    <span className="w-6 h-6 rounded-full bg-primary-800 text-white text-sm flex items-center justify-center">3</span>
                    Material Quality Level
                  </h3>
                  <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                    {materialLevels.map((level) => (
                      <button
                        key={level.id}
                        onClick={() => {
                          setMaterialLevel(level.id)
                          setShowResult(false)
                        }}
                        className={cn(
                          'p-4 rounded-xl border-2 text-left transition-all',
                          materialLevel === level.id
                            ? 'border-gold-500 bg-gold-50'
                            : 'border-dark-100 hover:border-gold-200'
                        )}
                      >
                        <p className="font-semibold text-dark-900">{level.name}</p>
                        <p className="text-xs text-dark-500 mt-1">{level.description}</p>
                      </button>
                    ))}
                  </div>
                </div>

                {/* Calculate Button */}
                <button
                  onClick={handleCalculate}
                  disabled={!selectedService}
                  className={cn(
                    'w-full py-4 rounded-xl font-semibold text-lg transition-all',
                    selectedService
                      ? 'bg-primary-800 text-white hover:bg-primary-700'
                      : 'bg-dark-100 text-dark-400 cursor-not-allowed'
                  )}
                >
                  <Calculator className="w-5 h-5 inline mr-2" />
                  Calculate Estimate
                </button>
              </div>

              {/* Result */}
              {showResult && selectedService && (
                <div className="bg-gradient-to-r from-primary-800 to-primary-900 p-6 md:p-8 text-white">
                  <h3 className="text-xl font-semibold mb-4">Your Estimated Range</h3>
                  <div className="flex items-baseline gap-4 mb-6">
                    <span className="text-4xl md:text-5xl font-bold">
                      {formatCurrency(estimate.low)} - {formatCurrency(estimate.high)}
                    </span>
                  </div>
                  
                  <div className="flex items-start gap-2 mb-6 text-primary-200">
                    <Info className="w-5 h-5 flex-shrink-0 mt-0.5" />
                    <p className="text-sm">
                      This is a rough estimate based on average project costs. Your actual cost may vary 
                      based on specific requirements, site conditions, and material selections.
                    </p>
                  </div>

                  <div className="grid md:grid-cols-2 gap-4">
                    <Link
                      href="/get-started"
                      className="flex items-center justify-center gap-2 bg-gold-500 text-dark-900 px-6 py-3 rounded-xl font-semibold hover:bg-gold-400 transition-colors"
                    >
                      Get Accurate Quote
                      <ArrowRight className="w-5 h-5" />
                    </Link>
                    <a
                      href={formatPhoneLink(COMPANY.phone)}
                      className="flex items-center justify-center gap-2 bg-white/10 text-white px-6 py-3 rounded-xl font-semibold hover:bg-white/20 transition-colors"
                    >
                      <Phone className="w-5 h-5" />
                      Call to Discuss
                    </a>
                  </div>
                </div>
              )}
            </div>

            {/* Disclaimer */}
            <div className="mt-8 bg-dark-50 rounded-xl p-6">
              <h4 className="font-semibold text-dark-900 mb-3">How Our Estimates Work</h4>
              <ul className="space-y-2 text-dark-600">
                {[
                  'This calculator provides a general range based on average project costs in the DMV area',
                  'Final pricing depends on specific project requirements, materials, and site conditions',
                  'We always provide a detailed, written estimate after an on-site consultation',
                  'Our estimates include labor, materials, permits, and cleanup',
                ].map((item, i) => (
                  <li key={i} className="flex items-start gap-2">
                    <CheckCircle className="w-5 h-5 text-green-500 flex-shrink-0 mt-0.5" />
                    <span>{item}</span>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center">
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              Want an Accurate Quote?
            </h2>
            <p className="text-lg text-dark-500 mb-8">
              Schedule a free on-site consultation. We'll assess your project in person and provide 
              a detailed, no-obligation estimate.
            </p>
            <Link href="/get-started" className="btn-gold btn-lg">
              Schedule Free Consultation
              <ArrowRight className="w-5 h-5 ml-2" />
            </Link>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/pricing/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { Search, Phone, ArrowRight, ChevronDown, Leaf } from 'lucide-react'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { COMPANY } from '@/lib/constants'
import { SERVICE_PRICING, EMERGENCY_RATES } from '@/lib/pricing-data'
import { formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'
import { EcoBadge } from '@/components/ui/EcoBadge'

export default function PricingDictionaryPage() {
  const [searchQuery, setSearchQuery] = useState('')
  const [expandedService, setExpandedService] = useState<string | null>(null)

  const filteredServices = SERVICE_PRICING.filter(
    (svc) =>
      svc.name.toLowerCase().includes(searchQuery.toLowerCase()) ||
      svc.tiers.some(
        (t) =>
          t.label.toLowerCase().includes(searchQuery.toLowerCase()) ||
          t.description.toLowerCase().includes(searchQuery.toLowerCase())
      )
  )

  const toggleService = (id: string) =>
    setExpandedService((prev) => (prev === id ? null : id))

  return (
    <div className="pt-32 pb-20">
      {/* Hero */}
      <section className="container-custom text-center mb-12">
        <h1 className="text-4xl md:text-5xl font-display font-bold text-dark-900 mb-4">
          Pricing Guide
        </h1>
        <p className="text-xl text-dark-500 max-w-2xl mx-auto mb-6">
          Transparent pricing for every service we offer. These are typical ranges for the DMV area ‚Äî your
          actual quote depends on scope, materials, and site conditions.
        </p>

        {/* Search */}
        <div className="relative max-w-md mx-auto mb-4">
          <Search className="absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-dark-400" />
          <input
            type="text"
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
            placeholder="Search services... (e.g. kitchen, roof, deck)"
            className="w-full pl-12 pr-4 py-3 border-2 border-dark-200 rounded-xl text-dark-800 placeholder:text-dark-400 focus:border-primary-500 focus:ring-0 transition-colors"
          />
        </div>
        <EcoBadge size="md" />
      </section>

      {/* Pricing Grid */}
      <section className="container-custom">
        <div className="space-y-4 max-w-4xl mx-auto">
          {filteredServices.map((service) => {
            const isExpanded = expandedService === service.id
            const minPrice = Math.min(...service.tiers.map((t) => t.min))
            const maxPrice = Math.max(...service.tiers.map((t) => t.max))

            return (
              <div
                key={service.id}
                className="bg-white border border-dark-100 rounded-xl overflow-hidden shadow-sm hover:shadow-md transition-shadow"
              >
                {/* Service Header */}
                <button
                  onClick={() => toggleService(service.id)}
                  className="w-full px-6 py-5 flex items-center justify-between text-left"
                >
                  <div className="flex items-center gap-4">
                    <span className="text-2xl">{service.icon}</span>
                    <div>
                      <h3 className="text-lg font-display font-bold text-dark-900">
                        {service.name}
                      </h3>
                      <p className="text-sm text-dark-400">
                        ${minPrice.toLocaleString()} ‚Äì ${maxPrice.toLocaleString()}
                      </p>
                    </div>
                  </div>
                  <div className="flex items-center gap-3">
                    <span className="hidden md:inline text-sm text-dark-400">
                      {service.tiers.length} options
                    </span>
                    <ChevronDown
                      className={`w-5 h-5 text-dark-400 transition-transform ${
                        isExpanded ? 'rotate-180' : ''
                      }`}
                    />
                  </div>
                </button>

                {/* Expanded Tiers */}
                {isExpanded && (
                  <div className="px-6 pb-5 border-t border-dark-50">
                    <div className="grid gap-3 mt-4">
                      {service.tiers.map((tier, i) => (
                        <div
                          key={i}
                          className="flex items-center justify-between p-4 bg-dark-50 rounded-lg"
                        >
                          <div>
                            <div className="font-semibold text-dark-800">{tier.label}</div>
                            <div className="text-sm text-dark-500">{tier.description}</div>
                          </div>
                          <div className="text-right">
                            <div className="font-bold text-dark-900 text-lg">
                              ${tier.min.toLocaleString()}
                            </div>
                            <div className="text-sm text-dark-400">
                              to ${tier.max.toLocaleString()}
                            </div>
                          </div>
                        </div>
                      ))}
                    </div>

                    {/* Eco note for applicable services */}
                    {['kitchen', 'bathroom', 'basement', 'painting'].includes(service.id) && (
                      <div className="mt-3 flex items-center gap-2 text-sm text-emerald-600 bg-emerald-50 px-3 py-2 rounded-lg">
                        <Leaf className="w-4 h-4" />
                        Eco-friendly material options available for this service
                      </div>
                    )}
                  </div>
                )}
              </div>
            )
          })}
        </div>

        {filteredServices.length === 0 && (
          <div className="text-center py-12 text-dark-400">
            No services match &ldquo;{searchQuery}&rdquo;. Try a different search term.
          </div>
        )}
      </section>

      {/* Emergency Rates */}
      {EMERGENCY_RATES.enabled && (
        <section className="container-custom mt-16">
          <div className="max-w-4xl mx-auto">
            <div className="bg-red-50 border border-red-200 rounded-2xl p-6 md:p-8">
              <div className="flex items-center gap-3 mb-6">
                <div className="w-12 h-12 bg-red-600 rounded-xl flex items-center justify-center text-white text-xl">üö®</div>
                <div>
                  <h2 className="text-xl md:text-2xl font-display font-bold text-dark-900">24/7 Emergency Rates</h2>
                  <p className="text-sm text-dark-500">Dispatch fee: ${EMERGENCY_RATES.calloutFee.min}‚Äì${EMERGENCY_RATES.calloutFee.max} (covers first hour)</p>
                </div>
              </div>
              <div className="grid sm:grid-cols-2 gap-3">
                {EMERGENCY_RATES.categories.map((cat) => (
                  <div key={cat.name} className="flex items-center gap-3 bg-white rounded-xl px-4 py-3 border border-red-100">
                    <span className="text-2xl">{cat.icon}</span>
                    <div className="flex-1 min-w-0">
                      <p className="text-sm font-semibold text-dark-900 truncate">{cat.name}</p>
                      <p className="text-xs text-dark-500">{cat.rate}</p>
                    </div>
                  </div>
                ))}
              </div>
              <p className="text-xs text-dark-400 mt-4 text-center">
                Emergency rates apply to after-hours, weekends &amp; holidays. Call <a href={formatPhoneLink(COMPANY.phone)} className="text-red-600 font-semibold">{COMPANY.phoneFormatted}</a> now.
              </p>
            </div>
          </div>
        </section>
      )}

      {/* CTA */}
      <section className="container-custom mt-16">
        <div className="max-w-4xl mx-auto bg-gradient-to-r from-primary-800 to-primary-900 rounded-2xl p-8 md:p-12 text-center text-white">
          <h2 className="text-2xl md:text-3xl font-display font-bold mb-4">
            Ready for Your Free Estimate?
          </h2>
          <p className="text-primary-200 mb-6 max-w-lg mx-auto">
            These ranges are starting points. Contact us for a detailed, no-obligation quote tailored
            to your specific project.
          </p>
          <div className="flex flex-col sm:flex-row gap-4 justify-center">
            <a
              href={formatPhoneLink(COMPANY.phone)}
              className="btn-gold inline-flex items-center justify-center gap-2"
            >
              <Phone className="w-4 h-4" />
              Call {COMPANY.phone}
            </a>
            <Link href="/get-started" className="btn-outline-white inline-flex items-center justify-center gap-2">
              Request a Quote
              <ArrowRight className="w-4 h-4" />
            </Link>
          </div>
        </div>
      </section>

      {/* Disclaimer */}
      <section className="container-custom mt-8">
        <div className="max-w-4xl mx-auto text-center">
          <p className="text-sm text-dark-400">
            All prices are estimates for the Washington D.C., Maryland, and Virginia metro area.
            Actual costs vary based on project scope, materials, permits, site conditions, and
            complexity. Contact us for a free, detailed quote. Licensed MHIC #05-132359 &amp; #109350.
          </p>
        </div>
      </section>
    </div>
  )
}


==========================================================================================

--- file: app/[locale]/services/page.tsx ---
import { Metadata } from 'next'
import Link from 'next/link'
import { ArrowRight, ChefHat, Bath, Home, Warehouse, Hammer, Grid3X3, Paintbrush, Wrench, TreeDeciduous, Shield, Building, FileText, Phone } from 'lucide-react'
import { SERVICES, COMPANY } from '@/lib/constants'
import { formatPhoneLink } from '@/lib/utils'
import { EcoBanner } from '@/components/ui/EcoBadge'

export const metadata: Metadata = {
  title: 'Our Services',
  description: 'Complete home improvement services in DC, Maryland & Virginia. Kitchen remodeling, bathroom renovation, roofing, concrete, painting & more. Licensed & insured.',
}

const iconMap: Record<string, React.ComponentType<{ className?: string }>> = {
  ChefHat, Bath, Home, Warehouse, Hammer, Grid3X3, Paintbrush, Wrench, TreeDeciduous, Shield, Building, FileText,
}

export default function ServicesPage() {
  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-20 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
          <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent" />
        </div>
        
        <div className="container-custom relative z-10">
          <div className="max-w-3xl">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              What We Do
            </span>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
              Complete Home{' '}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">
                Services
              </span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed">
              From minor repairs to major renovations, our skilled team handles every aspect of your 
              home improvement project with precision and care.
            </p>
          </div>
        </div>
      </section>

      {/* Services Grid */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {SERVICES.map((service) => {
              const IconComponent = iconMap[service.icon] || Home
              return (
                <Link
                  key={service.id}
                  href={`/services/${service.id}`}
                  className="group relative bg-white rounded-2xl border border-dark-100 p-8 hover:border-primary-200 hover:shadow-xl transition-all duration-300"
                >
                  <div className="w-14 h-14 rounded-xl bg-primary-50 flex items-center justify-center mb-6 group-hover:bg-primary-100 group-hover:scale-110 transition-all duration-300">
                    <IconComponent className="w-7 h-7 text-primary-600" />
                  </div>
                  <h3 className="text-xl font-display font-semibold text-dark-900 mb-3 group-hover:text-primary-800 transition-colors">
                    {service.name}
                  </h3>
                  <p className="text-dark-500 mb-4">{service.shortDescription}</p>
                  <div className="flex items-center justify-between text-sm text-dark-400 pt-4 border-t border-dark-100">
                    <span>{service.priceRange}</span>
                    <span>{service.duration}</span>
                  </div>
                  <div className="absolute top-8 right-8 opacity-0 group-hover:opacity-100 transition-opacity">
                    <ArrowRight className="w-5 h-5 text-primary-500" />
                  </div>
                </Link>
              )
            })}
          </div>
        </div>
      </section>

      {/* Green Options Banner */}
      <section className="py-8">
        <div className="container-custom">
          <EcoBanner />
        </div>
      </section>

      {/* Why Choose Us */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <div>
              <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
                Why CR Home Pros?
              </span>
              <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
                Quality Work, Every Time
              </h2>
              <div className="space-y-4">
                {[
                  'Licensed (MHIC #05-132359) and fully insured',
                  'Free, no-obligation estimates',
                  'Transparent pricing with no hidden fees',
                  'Bilingual team (English & Spanish)',
                  'Clean job sites and respectful of your home',
                  'Written warranties on our work',
                ].map((item) => (
                  <div key={item} className="flex items-start gap-3">
                    <div className="w-6 h-6 rounded-full bg-gold-500 flex items-center justify-center flex-shrink-0 mt-0.5">
                      <svg className="w-3 h-3 text-dark-900" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M5 13l4 4L19 7" />
                      </svg>
                    </div>
                    <span className="text-dark-700">{item}</span>
                  </div>
                ))}
              </div>
            </div>
            <div className="bg-primary-800 rounded-2xl p-8 text-white">
              <h3 className="text-2xl font-display font-semibold mb-4">Not Sure Where to Start?</h3>
              <p className="text-primary-200 mb-6">
                Schedule a free consultation and we'll help you prioritize your home improvement needs.
              </p>
              <div className="space-y-3">
                <Link href="/get-started" className="btn-gold w-full justify-center">
                  Request Free Consultation
                  <ArrowRight className="w-5 h-5 ml-2" />
                </Link>
                <a href={formatPhoneLink(COMPANY.phone)} className="btn-outline-white w-full justify-center">
                  <Phone className="w-5 h-5 mr-2" />
                  {COMPANY.phoneFormatted}
                </a>
              </div>
            </div>
          </div>
        </div>
      </section>

      {/* Green & Sustainable */}
      <section className="py-12 bg-emerald-50/50">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto flex flex-col md:flex-row items-center gap-6 text-center md:text-left">
            <div className="w-16 h-16 rounded-full bg-emerald-100 flex items-center justify-center flex-shrink-0">
              <span className="text-3xl">üåø</span>
            </div>
            <div>
              <h3 className="text-xl font-display font-bold text-emerald-800 mb-1">Eco-Friendly Options on Every Project</h3>
              <p className="text-emerald-700 text-sm mb-2">
                Low-VOC paints, Energy Star appliances, LED lighting, sustainable materials, and responsible waste handling are standard.
              </p>
              <Link href="/blog/green-renovations-sustainability" className="text-emerald-600 font-semibold text-sm hover:text-emerald-700 inline-flex items-center gap-1">
                Read our sustainability approach ‚Üí
              </Link>
            </div>
          </div>
        </div>
      </section>

      {/* Emergency Services */}
      <section className="py-16 bg-gradient-to-r from-red-600 to-red-700">
        <div className="container-custom">
          <div className="flex flex-col md:flex-row items-center justify-between gap-6 text-white">
            <div>
              <h3 className="text-2xl font-display font-semibold mb-2">üö® Emergency Repairs Available</h3>
              <p className="text-white/80">Water damage, roof leaks, or urgent repairs? We're on call 24/7.</p>
            </div>
            <a href={formatPhoneLink(COMPANY.phone)} className="flex items-center gap-2 bg-white text-red-600 px-6 py-3 rounded-xl font-semibold hover:bg-red-50 transition-colors">
              <Phone className="w-5 h-5" />
              Call Now: {COMPANY.phoneFormatted}
            </a>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/services/[slug]/page.tsx ---
import { Metadata } from 'next'
import Link from 'next/link'
import Image from 'next/image'
import { notFound } from 'next/navigation'
import { ArrowRight, CheckCircle, Clock, DollarSign, Phone, ChefHat, Bath, Home, Warehouse, Hammer, Grid3X3, Paintbrush, Wrench, TreeDeciduous, Shield, Building, FileText } from 'lucide-react'
import { SERVICES, COMPANY, TESTIMONIALS } from '@/lib/constants'
import { formatPhoneLink } from '@/lib/utils'

const iconMap: Record<string, React.ComponentType<{ className?: string }>> = {
  ChefHat, Bath, Home, Warehouse, Hammer, Grid3X3, Paintbrush, Wrench, TreeDeciduous, Shield, Building, FileText,
}

const serviceContent: Record<string, {
  heroImage: string
  benefits: string[]
  process: { title: string; description: string }[]
  faqs: { q: string; a: string }[]
}> = {
  'kitchen-remodeling': {
    heroImage: 'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=1200&q=80',
    benefits: [
      'Custom cabinet design and installation',
      'Premium countertop options (quartz, granite, marble)',
      'Modern appliance integration',
      'Efficient layout optimization',
      'Quality flooring and backsplash',
      'Updated plumbing and electrical',
    ],
    process: [
      { title: 'Consultation', description: 'We discuss your vision, needs, and budget' },
      { title: 'Design', description: 'Create detailed plans and 3D renderings' },
      { title: 'Selection', description: 'Choose materials, finishes, and fixtures' },
      { title: 'Construction', description: 'Expert demolition and installation' },
    ],
    faqs: [
      { q: 'How long does a kitchen remodel take?', a: 'Most kitchen remodels take 4-8 weeks depending on scope.' },
      { q: 'Can I stay in my home during the remodel?', a: 'Yes! We minimize disruption to your daily life.' },
      { q: 'Do you handle permits?', a: 'Absolutely. We handle all necessary permits and inspections.' },
    ],
  },
  'bathroom-renovation': {
    heroImage: 'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=1200&q=80',
    benefits: [
      'Walk-in showers and soaking tubs',
      'Heated flooring options',
      'Custom vanities and storage',
      'Modern lighting design',
      'Water-efficient fixtures',
      'Accessibility modifications available',
    ],
    process: [
      { title: 'Assessment', description: 'Evaluate space and plumbing requirements' },
      { title: 'Design', description: 'Create your spa-inspired bathroom plan' },
      { title: 'Demolition', description: 'Careful removal of existing fixtures' },
      { title: 'Installation', description: 'Expert plumbing, tile, and fixture work' },
    ],
    faqs: [
      { q: 'How long does a bathroom renovation take?', a: 'A typical bathroom renovation takes 2-4 weeks.' },
      { q: 'Can you work with my existing layout?', a: 'Yes, though moving fixtures can improve the space.' },
      { q: 'Do you offer accessibility features?', a: 'Yes, including grab bars, walk-in tubs, and more.' },
    ],
  },
}

const defaultContent = {
  heroImage: 'https://images.unsplash.com/photo-1504307651254-35680f356dfd?w=1200&q=80',
  benefits: [
    'Professional, licensed contractors',
    'Quality materials and workmanship',
    'Transparent pricing',
    'Clean job sites',
    'Warranty on all work',
    'Timely project completion',
  ],
  process: [
    { title: 'Consultation', description: 'Free on-site assessment and estimate' },
    { title: 'Planning', description: 'Detailed project scope and timeline' },
    { title: 'Execution', description: 'Professional installation by our team' },
    { title: 'Completion', description: 'Final walkthrough and satisfaction guarantee' },
  ],
  faqs: [
    { q: 'Do you provide free estimates?', a: 'Yes! We offer free, no-obligation estimates.' },
    { q: 'Are you licensed and insured?', a: 'Yes, fully licensed (MHIC #05-132359) and insured.' },
    { q: 'What areas do you serve?', a: 'We serve DC, Maryland, and Northern Virginia.' },
  ],
}

export async function generateStaticParams() {
  return SERVICES.map((service) => ({ slug: service.id }))
}

export async function generateMetadata({ params }: { params: { slug: string } }): Promise<Metadata> {
  const service = SERVICES.find((s) => s.id === params.slug)
  if (!service) return { title: 'Service Not Found' }
  return { title: service.name, description: service.shortDescription }
}

export default function ServicePage({ params }: { params: { slug: string } }) {
  const service = SERVICES.find((s) => s.id === params.slug)
  if (!service) notFound()

  const content = serviceContent[params.slug] || defaultContent
  const IconComponent = iconMap[service.icon] || Home
  const relatedTestimonial = TESTIMONIALS[0]

  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-20 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <Image src={content.heroImage} alt={service.name} fill className="object-cover opacity-20" />
          <div className="absolute inset-0 bg-gradient-to-r from-dark-900/90 to-dark-900/70" />
        </div>
        
        <div className="container-custom relative z-10">
          <div className="max-w-3xl">
            <Link href="/services" className="inline-flex items-center text-primary-300 hover:text-white mb-6">
              ‚Üê Back to Services
            </Link>
            <div className="flex items-center gap-4 mb-6">
              <div className="w-16 h-16 rounded-2xl bg-gold-500/20 flex items-center justify-center">
                <IconComponent className="w-8 h-8 text-gold-400" />
              </div>
            </div>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">{service.name}</h1>
            <p className="text-xl text-white/70 leading-relaxed mb-8">{service.shortDescription}</p>
            <div className="flex flex-wrap gap-6 text-white/70 mb-8">
              <div className="flex items-center gap-2">
                <DollarSign className="w-5 h-5 text-gold-400" />
                <span>{service.priceRange}</span>
              </div>
              <div className="flex items-center gap-2">
                <Clock className="w-5 h-5 text-gold-400" />
                <span>{service.duration}</span>
              </div>
            </div>
            <div className="flex flex-col sm:flex-row gap-4">
              <Link href="/get-started" className="btn-gold btn-lg">
                Get Free Estimate <ArrowRight className="w-5 h-5 ml-2" />
              </Link>
              <a href={formatPhoneLink(COMPANY.phone)} className="btn-outline-white btn-lg">
                <Phone className="w-5 h-5 mr-2" /> {COMPANY.phoneFormatted}
              </a>
            </div>
          </div>
        </div>
      </section>

      {/* What's Included */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="grid lg:grid-cols-2 gap-12 items-center">
            <div>
              <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">What's Included</span>
              <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">Our {service.name} Services</h2>
              <div className="space-y-4">
                {content.benefits.map((benefit) => (
                  <div key={benefit} className="flex items-start gap-3">
                    <CheckCircle className="w-6 h-6 text-green-500 flex-shrink-0 mt-0.5" />
                    <span className="text-dark-700">{benefit}</span>
                  </div>
                ))}
              </div>
            </div>
            <div className="relative aspect-[4/3] rounded-2xl overflow-hidden">
              <Image src={content.heroImage} alt={service.name} fill className="object-cover" />
            </div>
          </div>
        </div>
      </section>

      {/* Process */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="text-center max-w-3xl mx-auto mb-16">
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">Our Process</span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900">How We Work</h2>
          </div>
          <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
            {content.process.map((step, index) => (
              <div key={step.title} className="bg-white rounded-2xl p-6 border border-dark-100">
                <div className="w-10 h-10 rounded-full bg-primary-800 text-white flex items-center justify-center font-bold mb-4">{index + 1}</div>
                <h3 className="text-lg font-semibold text-dark-900 mb-2">{step.title}</h3>
                <p className="text-dark-500 text-sm">{step.description}</p>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Testimonial */}
      <section className="section-padding bg-primary-800">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center text-white">
            <div className="text-6xl text-primary-600 mb-6">"</div>
            <p className="text-xl md:text-2xl leading-relaxed mb-8">{relatedTestimonial.text}</p>
            <p className="font-semibold">{relatedTestimonial.name}</p>
            <p className="text-primary-300">{relatedTestimonial.location}</p>
          </div>
        </div>
      </section>

      {/* FAQs */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto">
            <div className="text-center mb-12">
              <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900">FAQs About {service.name}</h2>
            </div>
            <div className="space-y-4">
              {content.faqs.map((faq, i) => (
                <div key={i} className="bg-dark-50 rounded-xl p-6">
                  <h3 className="font-semibold text-dark-900 mb-2">{faq.q}</h3>
                  <p className="text-dark-600">{faq.a}</p>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="section-padding bg-gradient-to-br from-gold-500 to-gold-600">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center">
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">Ready to Get Started?</h2>
            <p className="text-lg text-dark-700 mb-8">Let's discuss your {service.name.toLowerCase()} project.</p>
            <Link href="/get-started" className="btn bg-dark-900 text-white hover:bg-dark-800 btn-lg">
              Request Free Estimate <ArrowRight className="w-5 h-5 ml-2" />
            </Link>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/get-started/page.tsx ---
import { Metadata } from 'next'
import { Shield, Clock, Phone, CheckCircle } from 'lucide-react'
import { COMPANY } from '@/lib/constants'
import { IntakeForm } from '@/components/forms/IntakeForm'

export const metadata: Metadata = {
  title: 'Get Started - Free Estimate',
  description: 'Request a free home improvement estimate from CR Home Pros. Fill out our simple form and get a consultation within 24 hours.',
}

const benefits = [
  { icon: CheckCircle, text: 'Free, no-obligation estimate' },
  { icon: Clock, text: 'Response within 24 hours' },
  { icon: Shield, text: 'Licensed & insured (MHIC #05-132359)' },
  { icon: Phone, text: 'Bilingual team available' },
]

export default function GetStartedPage() {
  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-12 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
        </div>
        
        <div className="container-custom relative z-10">
          <div className="max-w-3xl mx-auto text-center">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              Free Consultation
            </span>
            <h1 className="text-4xl md:text-5xl font-display font-bold text-white mb-6">
              Let's Start Your{' '}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">
                Project
              </span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed mb-8">
              Tell us about your project and we'll provide a free estimate within 24 hours. 
              No obligation, no pressure‚Äîjust honest advice.
            </p>
            
            {/* Trust badges */}
            <div className="flex flex-wrap justify-center gap-6">
              {benefits.map((benefit) => (
                <div key={benefit.text} className="flex items-center gap-2 text-white/70">
                  <benefit.icon className="w-5 h-5 text-gold-400" />
                  <span className="text-sm">{benefit.text}</span>
                </div>
              ))}
            </div>
          </div>
        </div>
      </section>

      {/* Form Section */}
      <section className="py-12 bg-white">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto">
            <IntakeForm />
          </div>
        </div>
      </section>

      {/* Bottom trust bar */}
      <section className="py-8 bg-dark-50 border-t border-dark-100">
        <div className="container-custom">
          <div className="flex flex-col md:flex-row items-center justify-center gap-6 text-center">
            <p className="text-dark-500">
              <strong className="text-dark-700">{COMPANY.projectsCompleted}</strong> projects completed
            </p>
            <span className="hidden md:block text-dark-300">‚Ä¢</span>
            <p className="text-dark-500">
              <strong className="text-dark-700">{COMPANY.yearsInBusiness}+</strong> years experience
            </p>
            <span className="hidden md:block text-dark-300">‚Ä¢</span>
            <p className="text-dark-500">
              <strong className="text-dark-700">{COMPANY.license}</strong>
            </p>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/reviews/page.tsx ---
import { Metadata } from 'next'
import Link from 'next/link'
import { Star, Quote, MapPin, ArrowRight, CheckCircle, FileText } from 'lucide-react'
import { TESTIMONIALS, COMPANY } from '@/lib/constants'
import { RECOMMENDATION_LETTERS } from '@/lib/recommendations-data'
import { cn, getInitials } from '@/lib/utils'

export const metadata: Metadata = {
  title: 'Customer Reviews',
  description: `Read what our customers say about CR Home Pros. ${COMPANY.projectsCompleted} satisfied customers across DC, Maryland & Virginia.`,
}

// Extended testimonials with more detail
const allReviews = [
  ...TESTIMONIALS,
  {
    id: 7,
    name: 'Patricia M.',
    location: 'Chevy Chase, MD',
    rating: 5,
    text: 'We hired CR for a complete bathroom renovation and couldn\'t be happier. Carlos and his team were professional, punctual, and the quality of work exceeded our expectations. The attention to detail was remarkable.',
    service: 'Bathroom Renovation',
  },
  {
    id: 8,
    name: 'David K.',
    location: 'Arlington, VA',
    rating: 5,
    text: 'After getting quotes from several contractors, we chose CR because of their transparent pricing and professionalism. They delivered exactly what they promised, on time and on budget. Will definitely use them again.',
    service: 'Kitchen Remodel',
  },
  {
    id: 9,
    name: 'Maria S.',
    location: 'College Park, MD',
    rating: 5,
    text: 'Excelente trabajo! Carlos habla espa√±ol lo cual fue muy √∫til para comunicarnos. The roof replacement was done quickly and professionally. They cleaned up everything when finished. Highly recommend!',
    service: 'Roofing',
  },
]

const stats = [
  { value: '500+', label: 'Happy Clients' },
  { value: '4.9', label: 'Average Rating' },
  { value: '98%', label: 'Would Recommend' },
  { value: '15+', label: 'Years of Reviews' },
]

export default function ReviewsPage() {
  return (
    <>
      {/* Hero */}
      <section className="relative pt-32 pb-20 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950 overflow-hidden">
        <div className="absolute inset-0">
          <div className="absolute top-1/4 right-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
          <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent" />
        </div>
        
        <div className="container-custom relative z-10">
          <div className="max-w-3xl">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              Testimonials
            </span>
            <h1 className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-6">
              What Our Clients{' '}
              <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-300 to-gold-500">
                Say About Us
              </span>
            </h1>
            <p className="text-xl text-white/70 leading-relaxed">
              Don't take our word for it‚Äîread real reviews from homeowners across the DMV who've 
              experienced the CR Home Pros difference.
            </p>
          </div>
        </div>
      </section>

      {/* Stats Bar */}
      <section className="py-12 bg-white border-b border-dark-100">
        <div className="container-custom">
          <div className="grid grid-cols-2 md:grid-cols-4 gap-8">
            {stats.map((stat) => (
              <div key={stat.label} className="text-center">
                <div className="text-3xl md:text-4xl font-bold text-primary-700">{stat.value}</div>
                <div className="text-dark-500">{stat.label}</div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Reviews Grid */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
            {allReviews.map((review) => (
              <div
                key={review.id}
                className="bg-white rounded-2xl border border-dark-100 p-6 hover:shadow-lg transition-shadow"
              >
                {/* Header */}
                <div className="flex items-start gap-4 mb-4">
                  <div className="w-12 h-12 rounded-full bg-primary-100 flex items-center justify-center text-primary-700 font-bold">
                    {getInitials(review.name)}
                  </div>
                  <div className="flex-1">
                    <h3 className="font-semibold text-dark-900">{review.name}</h3>
                    <div className="flex items-center gap-2 text-sm text-dark-500">
                      <MapPin className="w-3 h-3" />
                      {review.location}
                    </div>
                  </div>
                </div>

                {/* Stars */}
                <div className="flex gap-1 mb-4">
                  {[...Array(5)].map((_, i) => (
                    <Star
                      key={i}
                      className={cn(
                        'w-5 h-5',
                        i < review.rating
                          ? 'text-gold-400 fill-gold-400'
                          : 'text-dark-200'
                      )}
                    />
                  ))}
                </div>

                {/* Quote */}
                <p className="text-dark-600 mb-4 leading-relaxed">
                  "{review.text.length > 200 ? review.text.slice(0, 200) + '...' : review.text}"
                </p>

                {/* Service Badge */}
                <div className="flex items-center justify-between">
                  <span className="text-xs font-medium px-3 py-1 bg-primary-50 text-primary-700 rounded-full">
                    {review.service}
                  </span>
                  <CheckCircle className="w-5 h-5 text-green-500" />
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Letters of Recommendation */}
      <section className="section-padding bg-gradient-to-br from-primary-900 to-primary-800">
        <div className="container-custom">
          <div className="text-center mb-12">
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-3">
              Letters of Recommendation
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-white mb-4">
              In Their Own Words
            </h2>
            <p className="text-lg text-primary-200 max-w-xl mx-auto">
              Real letters from real clients who trusted us with their homes.
            </p>
          </div>
          <div className="max-w-3xl mx-auto space-y-8">
            {RECOMMENDATION_LETTERS.map((letter) => (
              <div
                key={letter.id}
                className="bg-white/5 backdrop-blur-sm rounded-2xl p-8 border border-white/10"
              >
                <Quote className="w-10 h-10 text-gold-400 mb-4 opacity-60" />
                <blockquote className="text-lg text-white/90 leading-relaxed mb-4 italic">
                  &ldquo;{letter.fullText}&rdquo;
                </blockquote>
                <div className="flex items-center justify-between flex-wrap gap-4">
                  <div>
                    <p className="font-display font-semibold text-white">{letter.author}</p>
                    <p className="text-sm text-primary-300">{letter.service}</p>
                  </div>
                  {letter.pdfPath && (
                    <a
                      href={letter.pdfPath}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="flex items-center gap-2 px-4 py-2 rounded-lg bg-white/10 text-white text-sm font-medium hover:bg-white/20 transition-colors"
                    >
                      <FileText className="w-4 h-4" />
                      View Original Letter
                    </a>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* External Reviews */}
      <section className="section-padding bg-white">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center mb-10">
            <h2 className="text-3xl font-display font-bold text-dark-900 mb-4">
              Find Us On
            </h2>
            <p className="text-lg text-dark-500">
              See what our clients are saying across the web.
            </p>
          </div>
          <div className="grid md:grid-cols-2 gap-6 max-w-2xl mx-auto">
            {/* Google Reviews */}
            <a
              href="https://g.page/crhomepros"
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center gap-4 p-6 rounded-2xl border-2 border-dark-100 bg-white hover:border-blue-300 hover:shadow-lg transition-all group"
            >
              <div className="w-14 h-14 rounded-xl bg-blue-50 flex items-center justify-center flex-shrink-0">
                <svg className="w-8 h-8" viewBox="0 0 24 24" fill="none">
                  <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 01-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z" fill="#4285F4"/>
                  <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z" fill="#34A853"/>
                  <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z" fill="#FBBC05"/>
                  <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z" fill="#EA4335"/>
                </svg>
              </div>
              <div className="text-left">
                <h3 className="font-display font-semibold text-dark-900 group-hover:text-blue-600 transition-colors">
                  Google Reviews
                </h3>
                <p className="text-sm text-dark-500">Read reviews on Google</p>
              </div>
              <ArrowRight className="w-5 h-5 text-dark-300 ml-auto group-hover:translate-x-1 transition-transform" />
            </a>

            {/* Yelp Reviews */}
            <a
              href="https://biz.yelp.com/biz_info/-Py44m6S_fcOmE3RLTY31A"
              target="_blank"
              rel="noopener noreferrer"
              className="flex items-center gap-4 p-6 rounded-2xl border-2 border-dark-100 bg-white hover:border-red-300 hover:shadow-lg transition-all group"
            >
              <div className="w-14 h-14 rounded-xl bg-red-50 flex items-center justify-center flex-shrink-0">
                <svg className="w-8 h-8" viewBox="0 0 24 24" fill="#D32323">
                  <path d="M20.16 12.594l-4.995 1.433c-.96.276-1.74-.8-1.176-1.63l2.986-4.378c.283-.415.89-.326 1.04.152l1.36 4.32c.112.355-.135.678-.394.678l-.82-.575zM12.596 20.16l1.433-4.995c.276-.96-.8-1.74-1.63-1.176l-4.378 2.986c-.415.283-.326.89.152 1.04l4.32 1.36c.12.04.24-.01.3-.06l-.197-1.155zM3.84 11.406l4.995-1.433c.96-.276 1.74.8 1.176 1.63L7.025 15.98c-.283.415-.89.326-1.04-.152l-1.36-4.32c-.15-.48.135-.78.395-.78l.82.678zM11.404 3.84l-1.433 4.995c-.276.96.8 1.74 1.63 1.176l4.378-2.986c.415-.283.326-.89-.152-1.04l-4.32-1.36c-.12-.04-.24.01-.3.06l.197 1.155z"/>
                </svg>
              </div>
              <div className="text-left">
                <h3 className="font-display font-semibold text-dark-900 group-hover:text-red-600 transition-colors">
                  Yelp Reviews
                </h3>
                <p className="text-sm text-dark-500">Read reviews on Yelp</p>
              </div>
              <ArrowRight className="w-5 h-5 text-dark-300 ml-auto group-hover:translate-x-1 transition-transform" />
            </a>
          </div>

          {/* Video Testimonials Placeholder */}
          {/*
          <div className="mt-16 max-w-3xl mx-auto">
            <h3 className="text-2xl font-display font-bold text-dark-900 text-center mb-8">
              Video Testimonials
            </h3>
            <div className="grid md:grid-cols-2 gap-6">
              <div className="aspect-video rounded-2xl overflow-hidden bg-dark-100">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/VIDEO_ID_EN" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
              </div>
              <div className="aspect-video rounded-2xl overflow-hidden bg-dark-100">
                <iframe width="100%" height="100%" src="https://www.youtube.com/embed/VIDEO_ID_ES" frameBorder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowFullScreen />
              </div>
            </div>
          </div>
          */}
        </div>
      </section>

      {/* Submit Review CTA */}
      <section className="section-padding bg-dark-50">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center">
            <Quote className="w-12 h-12 text-dark-200 mx-auto mb-6" />
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              Had a Great Experience?
            </h2>
            <p className="text-lg text-dark-500 mb-8">
              We'd love to hear about your project! Share your experience and help other homeowners 
              find quality contractors they can trust.
            </p>
            <Link href="/reviews/submit" className="btn-primary btn-lg">
              Leave a Review
              <ArrowRight className="w-5 h-5 ml-2" />
            </Link>
          </div>
        </div>
      </section>

      {/* CTA */}
      <section className="section-padding bg-primary-800">
        <div className="container-custom">
          <div className="max-w-3xl mx-auto text-center text-white">
            <h2 className="text-3xl md:text-4xl font-display font-bold mb-6">
              Ready to Join Our Happy Clients?
            </h2>
            <p className="text-primary-200 text-lg mb-8">
              Get a free estimate and see why hundreds of homeowners trust CR Home Pros.
            </p>
            <Link href="/get-started" className="btn-gold btn-lg">
              Get Free Estimate
              <ArrowRight className="w-5 h-5 ml-2" />
            </Link>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/[locale]/reviews/submit/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { Star, Send, Loader2, CheckCircle, ArrowLeft } from 'lucide-react'
import { cn } from '@/lib/utils'
import { SERVICES } from '@/lib/constants'
import { getDb } from '@/lib/firebase'
import { collection, addDoc, serverTimestamp } from 'firebase/firestore'

const reviewSchema = z.object({
  name: z.string().min(2, 'Name is required'),
  email: z.string().email('Valid email required'),
  location: z.string().min(2, 'City/Area is required'),
  service: z.string().min(1, 'Please select a service'),
  rating: z.number().min(1, 'Please select a rating').max(5),
  title: z.string().min(5, 'Please add a short title'),
  review: z.string().min(20, 'Please write at least 20 characters'),
  recommend: z.boolean(),
  projectYear: z.string().min(4, 'Please enter the year'),
})

type ReviewFormData = z.infer<typeof reviewSchema>

export default function SubmitReviewPage() {
  const [rating, setRating] = useState(0)
  const [hoverRating, setHoverRating] = useState(0)
  const [isSubmitting, setIsSubmitting] = useState(false)
  const [isSuccess, setIsSuccess] = useState(false)

  const {
    register,
    handleSubmit,
    setValue,
    formState: { errors },
  } = useForm<ReviewFormData>({
    resolver: zodResolver(reviewSchema),
    defaultValues: {
      rating: 0,
      recommend: true,
    },
  })

  const onSubmit = async (data: ReviewFormData) => {
    setIsSubmitting(true)
    try {
      const db = getDb()
      if (db) {
        await addDoc(collection(db, 'reviews'), {
          name: data.name,
          email: data.email,
          location: data.location,
          service: data.service,
          rating: data.rating,
          text: data.review,
          recommend: data.recommend,
          approved: false, // pending moderation
          createdAt: serverTimestamp(),
        })
      }
      setIsSubmitting(false)
      setIsSuccess(true)
    } catch (err) {
      console.error('Review submit error:', err)
      setIsSubmitting(false)
      alert('Something went wrong. Please try again.')
    }
  }

  const handleRatingClick = (value: number) => {
    setRating(value)
    setValue('rating', value)
  }

  if (isSuccess) {
    return (
      <div className="min-h-screen bg-dark-50 flex items-center justify-center p-4">
        <div className="max-w-md w-full bg-white rounded-2xl p-8 text-center shadow-xl">
          <div className="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6">
            <CheckCircle className="w-8 h-8 text-green-600" />
          </div>
          <h2 className="text-2xl font-display font-bold text-dark-900 mb-4">
            Thank You!
          </h2>
          <p className="text-dark-500 mb-6">
            Your review has been submitted and is pending approval. We appreciate you taking 
            the time to share your experience!
          </p>
          <Link href="/reviews" className="btn-primary">
            View All Reviews
          </Link>
        </div>
      </div>
    )
  }

  return (
    <>
      <section className="pt-32 pb-12 bg-gradient-to-br from-dark-900 via-primary-900 to-dark-950">
        <div className="container-custom">
          <Link href="/reviews" className="inline-flex items-center gap-2 text-white/60 hover:text-white mb-6 transition-colors">
            <ArrowLeft className="w-4 h-4" />Back to Reviews
          </Link>
          <h1 className="text-3xl md:text-4xl font-display font-bold text-white mb-4">
            Share Your Experience
          </h1>
          <p className="text-white/70 text-lg max-w-2xl">
            We'd love to hear about your project! Your feedback helps other homeowners 
            find quality contractors they can trust.
          </p>
        </div>
      </section>

      <section className="py-12 bg-dark-50">
        <div className="container-custom">
          <div className="max-w-2xl mx-auto">
            <form onSubmit={handleSubmit(onSubmit)} className="bg-white rounded-2xl p-6 md:p-8 shadow-lg border border-dark-100 space-y-6">
              
              {/* Rating */}
              <div>
                <label className="label mb-3">Overall Rating *</label>
                <div className="flex gap-2">
                  {[1, 2, 3, 4, 5].map((value) => (
                    <button
                      key={value}
                      type="button"
                      onClick={() => handleRatingClick(value)}
                      onMouseEnter={() => setHoverRating(value)}
                      onMouseLeave={() => setHoverRating(0)}
                      className="p-1 transition-transform hover:scale-110"
                    >
                      <Star
                        className={cn(
                          'w-10 h-10 transition-colors',
                          (hoverRating || rating) >= value
                            ? 'text-gold-400 fill-gold-400'
                            : 'text-dark-200'
                        )}
                      />
                    </button>
                  ))}
                </div>
                {errors.rating && <p className="mt-1 text-sm text-red-500">{errors.rating.message}</p>}
              </div>

              {/* Name & Email */}
              <div className="grid md:grid-cols-2 gap-4">
                <div>
                  <label className="label">Your Name *</label>
                  <input {...register('name')} className={cn('input', errors.name && 'border-red-500')} placeholder="John S." />
                  {errors.name && <p className="mt-1 text-sm text-red-500">{errors.name.message}</p>}
                </div>
                <div>
                  <label className="label">Email *</label>
                  <input {...register('email')} type="email" className={cn('input', errors.email && 'border-red-500')} placeholder="john@example.com" />
                  {errors.email && <p className="mt-1 text-sm text-red-500">{errors.email.message}</p>}
                </div>
              </div>

              {/* Location & Service */}
              <div className="grid md:grid-cols-2 gap-4">
                <div>
                  <label className="label">City/Area *</label>
                  <input {...register('location')} className={cn('input', errors.location && 'border-red-500')} placeholder="Bethesda, MD" />
                  {errors.location && <p className="mt-1 text-sm text-red-500">{errors.location.message}</p>}
                </div>
                <div>
                  <label className="label">Service Received *</label>
                  <select {...register('service')} className={cn('input', errors.service && 'border-red-500')}>
                    <option value="">Select a service</option>
                    {SERVICES.map((s) => <option key={s.id} value={s.id}>{s.name}</option>)}
                  </select>
                  {errors.service && <p className="mt-1 text-sm text-red-500">{errors.service.message}</p>}
                </div>
              </div>

              {/* Title */}
              <div>
                <label className="label">Review Title *</label>
                <input {...register('title')} className={cn('input', errors.title && 'border-red-500')} placeholder="Excellent kitchen transformation!" />
                {errors.title && <p className="mt-1 text-sm text-red-500">{errors.title.message}</p>}
              </div>

              {/* Review */}
              <div>
                <label className="label">Your Review *</label>
                <textarea {...register('review')} rows={5} className={cn('textarea', errors.review && 'border-red-500')} placeholder="Tell us about your experience working with CR Home Pros..." />
                {errors.review && <p className="mt-1 text-sm text-red-500">{errors.review.message}</p>}
              </div>

              {/* Project Year & Recommend */}
              <div className="grid md:grid-cols-2 gap-4 items-end">
                <div>
                  <label className="label">Project Year *</label>
                  <input {...register('projectYear')} className={cn('input', errors.projectYear && 'border-red-500')} placeholder="2024" />
                  {errors.projectYear && <p className="mt-1 text-sm text-red-500">{errors.projectYear.message}</p>}
                </div>
                <div>
                  <label className="flex items-center gap-3 cursor-pointer p-3 bg-dark-50 rounded-lg">
                    <input {...register('recommend')} type="checkbox" className="w-5 h-5 text-primary-600 rounded" />
                    <span className="text-dark-700">I would recommend CR Home Pros</span>
                  </label>
                </div>
              </div>

              {/* Submit */}
              <button type="submit" disabled={isSubmitting} className="btn-gold w-full btn-lg">
                {isSubmitting ? (
                  <><Loader2 className="w-5 h-5 animate-spin mr-2" />Submitting...</>
                ) : (
                  <><Send className="w-5 h-5 mr-2" />Submit Review</>
                )}
              </button>

              <p className="text-sm text-dark-400 text-center">
                Your review will be visible after approval. We may edit for clarity but never change your meaning.
              </p>
            </form>
          </div>
        </div>
      </section>
    </>
  )
}


==========================================================================================

--- file: app/admin/layout.tsx ---
'use client'

import { AuthProvider, useAuth } from './_components/AuthProvider'
import Link from 'next/link'
import { usePathname } from 'next/navigation'
import { useState } from 'react'
import {
  LayoutDashboard, FileText, FilePlus, FileSignature,
  FolderOpen, LogOut, Menu, X, ChevronDown, ChevronRight,
  Receipt, ClipboardList, Briefcase, Home, Loader2
} from 'lucide-react'

function AdminSidebar({ mobile, onClose }: { mobile?: boolean; onClose?: () => void }) {
  const pathname = usePathname()
  const { user, signOut } = useAuth()
  const [expandedSections, setExpandedSections] = useState<Record<string, boolean>>({
    invoices: true,
    changeOrders: true,
    contracts: true,
  })

  const toggleSection = (key: string) => {
    setExpandedSections(prev => ({ ...prev, [key]: !prev[key] }))
  }

  const isActive = (href: string) => pathname === href

  const navLink = (href: string, icon: React.ReactNode, label: string, indent = false) => (
    <Link
      href={href}
      onClick={onClose}
      className={`flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-all ${indent ? 'ml-6' : ''
        } ${isActive(href)
          ? 'bg-blue-600/20 text-blue-300 border border-blue-500/20'
          : 'text-slate-400 hover:text-white hover:bg-white/5'
        }`}
    >
      {icon}
      {label}
    </Link>
  )

  const sectionHeader = (key: string, icon: React.ReactNode, label: string) => (
    <button
      onClick={() => toggleSection(key)}
      className="w-full flex items-center justify-between px-3 py-2.5 rounded-lg text-sm font-semibold text-slate-300 hover:text-white hover:bg-white/5 transition-all"
    >
      <span className="flex items-center gap-3">{icon} {label}</span>
      {expandedSections[key] ? <ChevronDown className="w-4 h-4" /> : <ChevronRight className="w-4 h-4" />}
    </button>
  )

  return (
    <div className={`${mobile ? 'w-full' : 'w-64 min-h-screen'} bg-slate-900 border-r border-white/5 flex flex-col`}>
      {/* Logo / Brand */}
      <div className="px-5 py-5 border-b border-white/5">
        <div className="flex items-center justify-between">
          <Link href="/admin" onClick={onClose} className="flex items-center gap-3">
            <div className="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-sm shadow-lg shadow-blue-500/20">
              CR
            </div>
            <div>
              <p className="font-bold text-white text-sm">Admin Portal</p>
              <p className="text-[11px] text-slate-500">CRGS, Inc.</p>
            </div>
          </Link>
          {mobile && (
            <button onClick={onClose} className="text-slate-400 hover:text-white">
              <X className="w-5 h-5" />
            </button>
          )}
        </div>
      </div>

      {/* Nav */}
      <nav className="flex-1 px-3 py-4 space-y-1 overflow-y-auto">
        {navLink('/admin', <LayoutDashboard className="w-4 h-4" />, 'Dashboard')}

        <div className="pt-3">
          {sectionHeader('invoices', <Receipt className="w-4 h-4" />, 'Invoices')}
          {expandedSections.invoices && (
            <div className="space-y-0.5 mt-0.5">
              {navLink('/admin/invoices', <FilePlus className="w-4 h-4" />, 'Generate Invoice', true)}
              {navLink('/admin/invoices/sent', <FolderOpen className="w-4 h-4" />, 'Sent Invoices', true)}
            </div>
          )}
        </div>

        <div className="pt-1">
          {sectionHeader('changeOrders', <ClipboardList className="w-4 h-4" />, 'Change Orders')}
          {expandedSections.changeOrders && (
            <div className="space-y-0.5 mt-0.5">
              {navLink('/admin/change-orders', <FilePlus className="w-4 h-4" />, 'Generate Change Order', true)}
              {navLink('/admin/change-orders/sent', <FolderOpen className="w-4 h-4" />, 'Sent Change Orders', true)}
            </div>
          )}
        </div>

        <div className="pt-1">
          {sectionHeader('contracts', <Briefcase className="w-4 h-4" />, 'Contracts')}
          {expandedSections.contracts && (
            <div className="space-y-0.5 mt-0.5">
              {navLink('/admin/contracts', <FilePlus className="w-4 h-4" />, 'Generate Contract', true)}
              {navLink('/admin/contracts/sent', <FolderOpen className="w-4 h-4" />, 'Sent Contracts', true)}
            </div>
          )}
        </div>

        <div className="pt-3 border-t border-white/5 mt-3">
          {navLink('/admin/documents', <FileSignature className="w-4 h-4" />, 'Signed Documents')}
          {navLink('/admin/leads', <FileText className="w-4 h-4" />, 'Leads')}
          {navLink('/admin/projects', <Briefcase className="w-4 h-4" />, 'Projects')}
        </div>
      </nav>

      {/* Footer */}
      <div className="px-3 py-4 border-t border-white/5 space-y-2">
        <Link
          href="/"
          className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-slate-500 hover:text-white hover:bg-white/5 transition-all"
        >
          <Home className="w-4 h-4" />
          Back to Site
        </Link>
        <button
          onClick={signOut}
          className="w-full flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm text-red-400/70 hover:text-red-400 hover:bg-red-500/10 transition-all"
        >
          <LogOut className="w-4 h-4" />
          Sign Out
        </button>
        {user && (
          <p className="px-3 text-[11px] text-slate-600 truncate">{user.email}</p>
        )}
      </div>
    </div>
  )
}

function AdminShell({ children }: { children: React.ReactNode }) {
  const { user, loading } = useAuth()
  const [mobileMenuOpen, setMobileMenuOpen] = useState(false)
  const pathname = usePathname()

  // Login page doesn't need the shell
  if (pathname === '/admin/login') {
    return <>{children}</>
  }

  if (loading) {
    return (
      <div className="min-h-screen bg-slate-950 flex items-center justify-center">
        <Loader2 className="w-8 h-8 text-blue-500 animate-spin" />
      </div>
    )
  }

  if (!user) {
    return null // AuthProvider will redirect to login
  }

  return (
    <div className="min-h-screen bg-slate-950 flex">
      {/* Desktop Sidebar */}
      <div className="hidden lg:block">
        <div className="fixed inset-y-0 left-0 w-64 z-30">
          <AdminSidebar />
        </div>
      </div>

      {/* Mobile Menu Overlay */}
      {mobileMenuOpen && (
        <div className="fixed inset-0 z-50 lg:hidden">
          <div className="absolute inset-0 bg-black/60" onClick={() => setMobileMenuOpen(false)} />
          <div className="relative w-80 max-w-[85vw] h-full">
            <AdminSidebar mobile onClose={() => setMobileMenuOpen(false)} />
          </div>
        </div>
      )}

      {/* Main Content */}
      <div className="flex-1 lg:ml-64 min-h-screen">
        {/* Mobile Header */}
        <header className="lg:hidden sticky top-0 z-20 bg-slate-900/80 backdrop-blur-xl border-b border-white/5 px-4 py-3 flex items-center justify-between">
          <button onClick={() => setMobileMenuOpen(true)} className="text-slate-400 hover:text-white">
            <Menu className="w-6 h-6" />
          </button>
          <div className="flex items-center gap-2">
            <div className="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-xs">
              CR
            </div>
            <span className="font-bold text-white text-sm">Admin</span>
          </div>
          <div className="w-6" />
        </header>
        <main>{children}</main>
      </div>
    </div>
  )
}

export default function AdminLayout({ children }: { children: React.ReactNode }) {
  return (
    <AuthProvider>
      <AdminShell>{children}</AdminShell>
    </AuthProvider>
  )
}


==========================================================================================

--- file: app/admin/page.tsx ---
'use client'

import Link from 'next/link'
import {
  Users, Briefcase, Star, FileText, ClipboardList, DollarSign,
  Phone, ArrowRight, AlertCircle, Receipt, FileSignature, FilePlus
} from 'lucide-react'

const stats = [
  { label: 'Active Leads', value: '‚Äî', change: 'View leads', icon: Users, color: 'text-blue-400 bg-blue-500/20' },
  { label: 'Active Projects', value: '‚Äî', change: 'View projects', icon: Briefcase, color: 'text-green-400 bg-green-500/20' },
  { label: 'Pending Reviews', value: '‚Äî', change: 'Check reviews', icon: Star, color: 'text-yellow-400 bg-yellow-500/20' },
  { label: 'Documents', value: '‚Äî', change: 'View all', icon: FileSignature, color: 'text-purple-400 bg-purple-500/20' },
]

const quickActions = [
  { label: 'Create Invoice', href: '/admin/invoices', icon: Receipt, desc: 'Generate & send invoices', color: 'from-blue-600 to-blue-700' },
  { label: 'Create Change Order', href: '/admin/change-orders', icon: ClipboardList, desc: 'Document additional work', color: 'from-purple-600 to-purple-700' },
  { label: 'Create Contract', href: '/admin/contracts', icon: Briefcase, desc: 'Scope of work agreements', color: 'from-green-600 to-green-700' },
  { label: 'Signed Documents', href: '/admin/documents', icon: FileSignature, desc: 'Upload & view signed docs', color: 'from-amber-600 to-amber-700' },
  { label: 'Manage Leads', href: '/admin/leads', icon: Users, desc: 'View & respond to leads', color: 'from-cyan-600 to-cyan-700' },
  { label: 'Field Notes', href: '/admin/field-notes', icon: FilePlus, desc: 'On-site project notes', color: 'from-slate-600 to-slate-700' },
]

const sentLinks = [
  { label: 'Sent Invoices', href: '/admin/invoices/sent', icon: Receipt },
  { label: 'Sent Change Orders', href: '/admin/change-orders/sent', icon: ClipboardList },
  { label: 'Sent Contracts', href: '/admin/contracts/sent', icon: Briefcase },
]

export default function AdminDashboard() {
  return (
    <div className="p-6 max-w-6xl mx-auto">
      {/* Welcome */}
      <div className="mb-8">
        <h1 className="text-2xl font-bold text-white">Welcome back, Carlos!</h1>
        <p className="text-slate-400 mt-1">Here&apos;s your admin dashboard. Create documents, manage leads, and track your business.</p>
      </div>

      {/* Stats */}
      <div className="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
        {stats.map((stat) => (
          <div key={stat.label} className="bg-slate-800/50 border border-white/5 rounded-xl p-5">
            <div className={`w-10 h-10 rounded-xl ${stat.color} flex items-center justify-center mb-3`}>
              <stat.icon className="w-5 h-5" />
            </div>
            <p className="text-2xl font-bold text-white">{stat.value}</p>
            <p className="text-sm text-slate-400">{stat.label}</p>
            <p className="text-xs text-slate-500 mt-1">{stat.change}</p>
          </div>
        ))}
      </div>

      {/* Quick Actions */}
      <div className="mb-8">
        <h2 className="font-semibold text-white mb-4 text-lg">Quick Actions</h2>
        <div className="grid sm:grid-cols-2 lg:grid-cols-3 gap-3">
          {quickActions.map((action) => (
            <Link
              key={action.label}
              href={action.href}
              className="group flex items-center gap-4 p-4 rounded-xl bg-slate-800/50 border border-white/5 hover:border-white/15 transition-all"
            >
              <div className={`w-12 h-12 rounded-xl bg-gradient-to-br ${action.color} flex items-center justify-center text-white shadow-lg flex-shrink-0 group-hover:scale-105 transition-transform`}>
                <action.icon className="w-5 h-5" />
              </div>
              <div>
                <p className="font-semibold text-white text-sm">{action.label}</p>
                <p className="text-xs text-slate-500">{action.desc}</p>
              </div>
              <ArrowRight className="w-4 h-4 text-slate-600 ml-auto group-hover:text-white transition-colors" />
            </Link>
          ))}
        </div>
      </div>

      {/* Sent Documents */}
      <div className="mb-8">
        <h2 className="font-semibold text-white mb-4 text-lg">View Sent Documents</h2>
        <div className="grid sm:grid-cols-3 gap-3">
          {sentLinks.map((link) => (
            <Link
              key={link.label}
              href={link.href}
              className="flex items-center gap-3 p-4 rounded-xl bg-slate-800/50 border border-white/5 hover:border-white/15 transition-all text-slate-300 hover:text-white"
            >
              <link.icon className="w-5 h-5 text-slate-500" />
              <span className="font-medium text-sm">{link.label}</span>
              <ArrowRight className="w-4 h-4 ml-auto text-slate-600" />
            </Link>
          ))}
        </div>
      </div>

      {/* Tip */}
      <div className="bg-blue-500/10 border border-blue-500/20 rounded-xl p-5">
        <div className="flex items-start gap-4">
          <div className="w-10 h-10 rounded-full bg-blue-500/20 flex items-center justify-center flex-shrink-0">
            <AlertCircle className="w-5 h-5 text-blue-400" />
          </div>
          <div>
            <h3 className="font-semibold text-blue-300">Getting Started</h3>
            <p className="text-blue-400/80 text-sm mt-1">
              Create your first invoice, change order, or contract using the quick actions above. 
              Your signature will be saved after drawing it once ‚Äî it&apos;ll auto-load on all future documents.
            </p>
          </div>
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: app/admin/invoices/page.tsx ---
'use client'

import { useState, useEffect } from 'react'
import {
  Plus, Trash2, Send, Download, Eye, Loader2,
  CheckCircle, DollarSign, User, Calendar, FileText, Pencil,
  AlertTriangle, Mail
} from 'lucide-react'
import { SignaturePad } from '../_components/SignaturePad'
import { saveDocument, type DocumentRecord, getSavedSignatureUrl } from '@/lib/firebase-auth'

import Link from 'next/link'

interface LineItem { id: string; description: string; quantity: number; unitPrice: number }

interface InvoiceData {
  number: string; date: string; dueDate: string; clientName: string; clientEmail: string
  clientPhone: string; clientAddress: string; projectName: string; items: LineItem[]
  notes: string; taxRate: number; signatureData: string | null; isCorrection: boolean
}

const INITIAL: InvoiceData = {
  number: `INV-${new Date().getFullYear()}-${String(Date.now()).slice(-4)}`,
  date: new Date().toISOString().split('T')[0],
  dueDate: new Date(Date.now() + 30 * 86400000).toISOString().split('T')[0],
  clientName: '', clientEmail: '', clientPhone: '', clientAddress: '', projectName: '',
  items: [{ id: '1', description: '', quantity: 1, unitPrice: 0 }],
  notes: 'Payment due within 30 days of invoice date.\nAll dumping fees, materials and labor are included.\nThank you for choosing CR Home Pros!',
  taxRate: 0, signatureData: null, isCorrection: false,
}

export default function InvoicesPage() {
  const [inv, setInv] = useState<InvoiceData>(INITIAL)
  const [saving, setSaving] = useState(false)
  const [savedId, setSavedId] = useState<string | null>(null)
  const [generating, setGenerating] = useState(false)
  const [sending, setSending] = useState(false)
  const [sent, setSent] = useState(false)
  const [savedSigUrl, setSavedSigUrl] = useState<string | null>(null)
  const [emailSubject, setEmailSubject] = useState('')
  const [emailBody, setEmailBody] = useState('')
  const [showEmailModal, setShowEmailModal] = useState(false)
  const [tab, setTab] = useState<'edit' | 'preview'>('edit')

  const subtotal = inv.items.reduce((s, i) => s + i.quantity * i.unitPrice, 0)
  const tax = subtotal * (inv.taxRate / 100)
  const total = subtotal + tax

  useEffect(() => {
    getSavedSignatureUrl().then(url => { if (url) setSavedSigUrl(url) })
  }, [])

  const updateField = (field: keyof InvoiceData, value: any) => setInv(prev => ({ ...prev, [field]: value }))
  const addItem = () => setInv(prev => ({ ...prev, items: [...prev.items, { id: String(Date.now()), description: '', quantity: 1, unitPrice: 0 }] }))
  const removeItem = (id: string) => { if (inv.items.length > 1) setInv(prev => ({ ...prev, items: prev.items.filter(i => i.id !== id) })) }
  const updateItem = (id: string, field: keyof LineItem, value: any) => setInv(prev => ({ ...prev, items: prev.items.map(i => i.id === id ? { ...i, [field]: value } : i) }))

  const handleSave = async (status: DocumentRecord['status'] = 'draft') => {
    setSaving(true)
    try {
      const docData: DocumentRecord = {
        ...(savedId ? { id: savedId } : {}), type: 'invoice',
        number: inv.isCorrection ? `${inv.number}-CORRECTED` : inv.number,
        clientName: inv.clientName, clientEmail: inv.clientEmail, clientPhone: inv.clientPhone,
        clientAddress: inv.clientAddress, projectName: inv.projectName, date: inv.date, dueDate: inv.dueDate,
        items: inv.items, notes: inv.notes, subtotal, tax, taxRate: inv.taxRate, total,
        signatureData: inv.signatureData, status,
      }
      const id = await saveDocument(docData)
      setSavedId(id)
    } catch (err) { console.error('Save failed:', err) }
    setSaving(false)
  }

  const handleGeneratePdf = async () => {
    setGenerating(true)
    try {
      const res = await fetch('/api/admin/generate-pdf', {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ type: 'invoice', data: {
          number: inv.isCorrection ? `${inv.number}-CORRECTED` : inv.number,
          date: inv.date, dueDate: inv.dueDate, clientName: inv.clientName,
          clientEmail: inv.clientEmail, clientPhone: inv.clientPhone,
          clientAddress: inv.clientAddress, projectName: inv.projectName,
          items: inv.items, notes: inv.notes, taxRate: inv.taxRate,
        }})
      })
      const blob = await res.blob()
      window.open(URL.createObjectURL(blob), '_blank')
    } catch (err) { console.error('PDF failed:', err) }
    setGenerating(false)
  }

  const prepareEmail = () => {
    setEmailSubject(`Invoice ${inv.number} ‚Äî ${inv.projectName || 'CR Home Pros'}`)
    setEmailBody(`Hi ${inv.clientName.split(' ')[0] || 'there'},\n\nPlease find attached Invoice ${inv.number} for ${inv.projectName || 'your project'} in the amount of $${total.toLocaleString('en-US', { minimumFractionDigits: 2 })}.\n\nPayment is due by ${new Date(inv.dueDate).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}.\n\nIf you have any questions, please don't hesitate to reach out.\n\nBest regards,\nCarlos Hernandez\nCR Home Pros\n(571) 237-7164`)
    setShowEmailModal(true)
  }

  const handleSend = async () => {
    setSending(true)
    try {
      await handleSave('sent')
      window.open(`mailto:${inv.clientEmail}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`, '_blank')
      setSent(true); setShowEmailModal(false)
      setTimeout(() => setSent(false), 3000)
    } catch (err) { console.error('Send failed:', err) }
    setSending(false)
  }

  const fmt = (n: number) => `$${n.toLocaleString('en-US', { minimumFractionDigits: 2 })}`
  const ic = "w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all text-sm"
  const lc = "text-sm font-medium text-slate-300 mb-1.5 block"

  return (
    <div className="p-4 sm:p-6 max-w-6xl mx-auto">
      <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4">
        <div>
          <h1 className="text-2xl font-bold text-white flex items-center gap-3">
            <DollarSign className="w-6 h-6 text-blue-400" />
            {inv.isCorrection ? 'Correction Invoice' : 'Create Invoice'}
          </h1>
          <p className="text-slate-400 text-sm mt-1">Generate professional invoices for your clients</p>
        </div>
        <div className="flex items-center gap-2 flex-wrap">
          <Link href="/admin/invoices/sent" className="px-3 py-2 rounded-xl bg-slate-800 text-slate-300 text-sm hover:bg-slate-700 flex items-center gap-2">
            <FileText className="w-4 h-4" /> Sent
          </Link>
          <label className="flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-600/20 text-amber-400 text-sm cursor-pointer">
            <input type="checkbox" checked={inv.isCorrection} onChange={e => updateField('isCorrection', e.target.checked)} className="rounded" />
            <AlertTriangle className="w-3.5 h-3.5" /> Correction
          </label>
        </div>
      </div>

      <div className="flex gap-1 bg-slate-800/50 p-1 rounded-xl mb-6 w-fit">
        <button onClick={() => setTab('edit')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${tab === 'edit' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}><Pencil className="w-3.5 h-3.5 inline mr-1.5" />Edit</button>
        <button onClick={() => setTab('preview')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${tab === 'preview' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}><Eye className="w-3.5 h-3.5 inline mr-1.5" />Preview</button>
      </div>

      {tab === 'edit' ? (
        <div className="space-y-6">
          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><Calendar className="w-4 h-4 text-blue-400" /> Invoice Details</h2>
            <div className="grid sm:grid-cols-3 gap-4">
              <div><label className={lc}>Invoice #</label><input value={inv.number} onChange={e => updateField('number', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Date</label><input type="date" value={inv.date} onChange={e => updateField('date', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Due Date</label><input type="date" value={inv.dueDate} onChange={e => updateField('dueDate', e.target.value)} className={ic} /></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><User className="w-4 h-4 text-blue-400" /> Client Information</h2>
            <div className="grid sm:grid-cols-2 gap-4">
              <div><label className={lc}>Full Name</label><input value={inv.clientName} onChange={e => updateField('clientName', e.target.value)} placeholder="Monica McNutt" className={ic} /></div>
              <div><label className={lc}>Email</label><input type="email" value={inv.clientEmail} onChange={e => updateField('clientEmail', e.target.value)} placeholder="client@email.com" className={ic} /></div>
              <div><label className={lc}>Phone</label><input value={inv.clientPhone} onChange={e => updateField('clientPhone', e.target.value)} placeholder="(202) 555-0123" className={ic} /></div>
              <div><label className={lc}>Project Name</label><input value={inv.projectName} onChange={e => updateField('projectName', e.target.value)} placeholder="Kitchen Remodel" className={ic} /></div>
              <div className="sm:col-span-2"><label className={lc}>Address</label><textarea value={inv.clientAddress} onChange={e => updateField('clientAddress', e.target.value)} placeholder={"3441 Massachusetts Avenue\nSouth East Washington DC"} rows={2} className={ic} /></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><FileText className="w-4 h-4 text-blue-400" /> Line Items</h2>
            <div className="space-y-3">
              {inv.items.map((item, idx) => (
                <div key={item.id} className="flex gap-3 items-start">
                  <span className="text-slate-500 text-sm mt-3 w-6 text-right flex-shrink-0">{idx + 1}.</span>
                  <div className="flex-1 grid sm:grid-cols-[1fr_80px_120px] gap-3">
                    <input value={item.description} onChange={e => updateItem(item.id, 'description', e.target.value)} placeholder="Power wash garage..." className={ic} />
                    <input type="number" value={item.quantity} onChange={e => updateItem(item.id, 'quantity', Number(e.target.value))} min={1} className={ic + ' text-center'} placeholder="Qty" />
                    <input type="number" value={item.unitPrice || ''} onChange={e => updateItem(item.id, 'unitPrice', Number(e.target.value))} className={ic + ' text-right'} placeholder="$ 0.00" step="0.01" />
                  </div>
                  <button onClick={() => removeItem(item.id)} className="mt-3 text-red-400 hover:text-red-300 p-1" disabled={inv.items.length === 1}><Trash2 className="w-4 h-4" /></button>
                </div>
              ))}
            </div>
            <button onClick={addItem} className="mt-4 flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 px-3 py-2 rounded-lg hover:bg-blue-600/10"><Plus className="w-4 h-4" /> Add Line Item</button>
            <div className="mt-6 pt-4 border-t border-white/5 space-y-2 text-right">
              <div className="text-slate-400 text-sm">Subtotal: <span className="text-white font-medium ml-2">{fmt(subtotal)}</span></div>
              <div className="flex items-center justify-end gap-2">
                <span className="text-slate-400 text-sm">Tax</span>
                <input type="number" value={inv.taxRate} onChange={e => updateField('taxRate', Number(e.target.value))} className="w-16 bg-slate-800 border border-white/10 rounded-lg px-2 py-1 text-white text-sm text-center" />
                <span className="text-slate-400 text-sm">%: <span className="text-white font-medium ml-1">{fmt(tax)}</span></span>
              </div>
              <div className="text-lg font-bold text-white pt-2 border-t border-white/10">Total: {fmt(total)}</div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6"><label className={lc}>Notes</label><textarea value={inv.notes} onChange={e => updateField('notes', e.target.value)} rows={3} className={ic} /></div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <SignaturePad onSignatureChange={sig => updateField('signatureData', sig)} savedSignatureUrl={savedSigUrl} label="Carlos Hernandez ‚Äî President, CRGS Inc." />
          </div>

          <div className="flex flex-wrap gap-3 pt-2">
            <button onClick={() => handleSave('draft')} disabled={saving} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-slate-700 text-white font-medium hover:bg-slate-600 text-sm">{saving ? <Loader2 className="w-4 h-4 animate-spin" /> : <FileText className="w-4 h-4" />} Save Draft</button>
            <button onClick={() => setTab('preview')} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-blue-600/20 text-blue-400 font-medium hover:bg-blue-600/30 text-sm"><Eye className="w-4 h-4" /> Preview</button>
            <button onClick={handleGeneratePdf} disabled={generating} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 text-sm">{generating ? <Loader2 className="w-4 h-4 animate-spin" /> : <Download className="w-4 h-4" />} Generate PDF</button>
            <button onClick={prepareEmail} disabled={!inv.clientEmail} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-green-600 text-white font-medium hover:bg-green-700 text-sm disabled:opacity-40">{sent ? <CheckCircle className="w-4 h-4" /> : <Send className="w-4 h-4" />} {sent ? 'Sent!' : 'Send to Client'}</button>
          </div>
        </div>
      ) : (
        <div>
          <div className="bg-white rounded-2xl shadow-2xl p-8 sm:p-12 max-w-[800px] mx-auto text-slate-900">
            <div className="flex items-start justify-between border-b-4 border-blue-900 pb-6 mb-8">
              <div>
                <h2 className="text-3xl font-bold text-blue-900">C&R</h2>
                <p className="text-sm text-slate-600">General Services Inc.</p>
                <p className="text-xs text-amber-600 mt-1">Licensed | Insured | Bonded</p>
                <p className="text-xs text-slate-400 mt-0.5">(571) 237-7164 | crhomepros@gmail.com</p>
              </div>
              <div className="text-right">
                <h1 className="text-2xl font-bold text-amber-600">{inv.isCorrection ? 'CORRECTED INVOICE' : 'INVOICE'}</h1>
                <p className="text-sm text-slate-500 mt-1">#{inv.number}</p>
                <p className="text-sm text-slate-500">Date: {inv.date}</p>
                <p className="text-sm text-slate-500">Due: {inv.dueDate}</p>
              </div>
            </div>
            <div className="grid sm:grid-cols-2 gap-8 mb-8">
              <div><p className="text-xs font-bold text-blue-900 uppercase mb-2">Bill To</p><p className="font-semibold text-lg">{inv.clientName || '‚Äî'}</p><p className="text-sm text-slate-600 whitespace-pre-line">{inv.clientAddress}</p>{inv.clientPhone && <p className="text-sm text-slate-600 mt-1">{inv.clientPhone}</p>}</div>
              {inv.projectName && <div><p className="text-xs font-bold text-blue-900 uppercase mb-2">Project</p><p className="font-medium">{inv.projectName}</p></div>}
            </div>
            <table className="w-full mb-6"><thead><tr className="bg-blue-900 text-white text-sm"><th className="px-3 py-2.5 text-left rounded-tl-lg">#</th><th className="px-3 py-2.5 text-left">Description</th><th className="px-3 py-2.5 text-right">Qty</th><th className="px-3 py-2.5 text-right">Price</th><th className="px-3 py-2.5 text-right rounded-tr-lg">Amount</th></tr></thead>
              <tbody>{inv.items.map((item, idx) => (<tr key={item.id} className={idx % 2 === 0 ? 'bg-slate-50' : ''}><td className="px-3 py-2.5 text-sm text-slate-500">{idx + 1}</td><td className="px-3 py-2.5 text-sm">{item.description || '‚Äî'}</td><td className="px-3 py-2.5 text-sm text-right">{item.quantity}</td><td className="px-3 py-2.5 text-sm text-right">{fmt(item.unitPrice)}</td><td className="px-3 py-2.5 text-sm text-right font-medium">{fmt(item.quantity * item.unitPrice)}</td></tr>))}</tbody>
            </table>
            <div className="flex justify-end mb-8"><div className="w-64 space-y-1.5 text-sm">
              <div className="flex justify-between text-slate-600"><span>Subtotal</span><span>{fmt(subtotal)}</span></div>
              {inv.taxRate > 0 && <div className="flex justify-between text-slate-600"><span>Tax ({inv.taxRate}%)</span><span>{fmt(tax)}</span></div>}
              <div className="flex justify-between text-lg font-bold text-blue-900 pt-2 border-t-2 border-blue-900"><span>TOTAL</span><span>{fmt(total)}</span></div>
            </div></div>
            {inv.notes && <div className="bg-slate-50 rounded-xl p-4 mb-8"><p className="text-xs font-bold text-blue-900 uppercase mb-2">Notes</p><p className="text-sm text-slate-600 whitespace-pre-line">{inv.notes}</p></div>}
            <div className="grid sm:grid-cols-2 gap-8 border-t pt-8">
              <div><p className="text-sm font-semibold mb-4">Provided and Guaranteed by:</p><div className="h-16 border-b border-slate-300 mb-1">{inv.signatureData && <img src={inv.signatureData} alt="Sig" className="h-full object-contain" />}</div><p className="text-sm font-semibold">Carlos Hernandez</p><p className="text-xs text-slate-500">President, CRGS, Inc.</p></div>
              <div><p className="text-sm font-semibold mb-4">Accepted and Agreed:</p><div className="h-16 border-b border-slate-300 mb-1" /><p className="text-sm font-semibold">{inv.clientName || '________________'}</p><p className="text-xs text-slate-500">Date: ________________</p></div>
            </div>
          </div>
          <div className="flex justify-center gap-3 mt-6">
            <button onClick={() => setTab('edit')} className="px-4 py-2.5 rounded-xl bg-slate-700 text-white text-sm hover:bg-slate-600">‚Üê Back to Edit</button>
            <button onClick={handleGeneratePdf} disabled={generating} className="px-5 py-2.5 rounded-xl bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 flex items-center gap-2">{generating ? <Loader2 className="w-4 h-4 animate-spin" /> : <Download className="w-4 h-4" />} Download PDF</button>
          </div>
        </div>
      )}

      {showEmailModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
          <div className="bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-lg w-full shadow-2xl">
            <h3 className="text-lg font-bold text-white mb-4 flex items-center gap-2"><Mail className="w-5 h-5 text-blue-400" /> Send Invoice</h3>
            <div className="space-y-4">
              <div><label className={lc}>To</label><input value={inv.clientEmail} readOnly className={ic + ' opacity-60'} /></div>
              <div><label className={lc}>Subject</label><input value={emailSubject} onChange={e => setEmailSubject(e.target.value)} className={ic} /></div>
              <div><label className={lc}>Message</label><textarea value={emailBody} onChange={e => setEmailBody(e.target.value)} rows={8} className={ic} /></div>
              <p className="text-xs text-slate-500">Opens your email client. Attach the PDF after generating it.</p>
            </div>
            <div className="flex gap-3 mt-6">
              <button onClick={() => setShowEmailModal(false)} className="flex-1 px-4 py-2.5 rounded-xl bg-slate-800 text-slate-300 hover:bg-slate-700 text-sm">Cancel</button>
              <button onClick={handleSend} disabled={sending} className="flex-1 px-4 py-2.5 rounded-xl bg-green-600 text-white font-medium hover:bg-green-700 text-sm flex items-center justify-center gap-2">{sending ? <Loader2 className="w-4 h-4 animate-spin" /> : <Send className="w-4 h-4" />} Open Email</button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}


==========================================================================================

--- file: app/admin/invoices/sent/page.tsx ---
'use client'
import { DocumentList } from '../../_components/DocumentList'
export default function InvoicesSentPage() {
  return <DocumentList type="invoice" title="Sent Invoices" createHref="/admin/invoices" createLabel="New Invoice" />
}


==========================================================================================

--- file: app/admin/images/page.tsx ---
'use client'

import { useState, useCallback, useRef } from 'react'
import Image from 'next/image'
import { Upload, X, FolderOpen, Check, AlertCircle, Loader2, ImagePlus, Trash2, GripVertical } from 'lucide-react'
import { cn } from '@/lib/utils'

interface UploadedFile {
  file: File
  preview: string
  status: 'pending' | 'uploading' | 'done' | 'error'
  url?: string
  error?: string
}

const PROJECT_CATEGORIES = [
  'Kitchen',
  'Bathroom',
  'Roofing',
  'Deck',
  'Painting',
  'Concrete',
  'Complete Renovation',
  'Insurance Claim',
  'General',
] as const

export default function AdminImagesPage() {
  const [files, setFiles] = useState<UploadedFile[]>([])
  const [category, setCategory] = useState<string>('General')
  const [projectName, setProjectName] = useState('')
  const [uploading, setUploading] = useState(false)
  const [results, setResults] = useState<{ success: number; errors: number } | null>(null)
  const fileInputRef = useRef<HTMLInputElement>(null)
  const dropRef = useRef<HTMLDivElement>(null)

  // Generate storage folder path from category + project name
  const getFolder = () => {
    const slug = projectName
      ? projectName.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-|-$/g, '')
      : 'uploads'
    const catSlug = category.toLowerCase().replace(/[^a-z0-9]+/g, '-')
    return `projects/${catSlug}/${slug}`
  }

  // Handle file selection
  const addFiles = useCallback((newFiles: FileList | File[]) => {
    const imageFiles = Array.from(newFiles).filter(f =>
      f.type.startsWith('image/')
    )
    const mapped: UploadedFile[] = imageFiles.map(file => ({
      file,
      preview: URL.createObjectURL(file),
      status: 'pending',
    }))
    setFiles(prev => [...prev, ...mapped])
    setResults(null)
  }, [])

  // Drag & drop handlers
  const handleDragOver = useCallback((e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    if (dropRef.current) dropRef.current.classList.add('ring-2', 'ring-gold-500', 'bg-gold-500/5')
  }, [])

  const handleDragLeave = useCallback((e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    if (dropRef.current) dropRef.current.classList.remove('ring-2', 'ring-gold-500', 'bg-gold-500/5')
  }, [])

  const handleDrop = useCallback((e: React.DragEvent) => {
    e.preventDefault()
    e.stopPropagation()
    if (dropRef.current) dropRef.current.classList.remove('ring-2', 'ring-gold-500', 'bg-gold-500/5')
    if (e.dataTransfer.files.length) {
      addFiles(e.dataTransfer.files)
    }
  }, [addFiles])

  // Remove a file
  const removeFile = (index: number) => {
    setFiles(prev => {
      const updated = [...prev]
      URL.revokeObjectURL(updated[index].preview)
      updated.splice(index, 1)
      return updated
    })
  }

  // Clear all
  const clearAll = () => {
    files.forEach(f => URL.revokeObjectURL(f.preview))
    setFiles([])
    setResults(null)
  }

  // Upload all files
  const uploadAll = async () => {
    if (!files.length) return
    setUploading(true)
    setResults(null)

    let success = 0
    let errors = 0
    const folder = getFolder()

    // Upload in batches of 3 to avoid overwhelming the API
    const batchSize = 3
    for (let i = 0; i < files.length; i += batchSize) {
      const batch = files.slice(i, i + batchSize)
      
      const promises = batch.map(async (fileObj, batchIndex) => {
        const globalIndex = i + batchIndex
        
        // Update status to uploading
        setFiles(prev => {
          const updated = [...prev]
          updated[globalIndex] = { ...updated[globalIndex], status: 'uploading' }
          return updated
        })

        try {
          const formData = new FormData()
          formData.append('files', fileObj.file)
          formData.append('folder', folder)

          const res = await fetch('/api/images', {
            method: 'POST',
            body: formData,
          })

          if (!res.ok) {
            const data = await res.json()
            throw new Error(data.error || 'Upload failed')
          }

          const data = await res.json()
          const url = data.uploaded?.[0]?.url || ''

          setFiles(prev => {
            const updated = [...prev]
            updated[globalIndex] = { ...updated[globalIndex], status: 'done', url }
            return updated
          })
          success++
        } catch (err) {
          const message = err instanceof Error ? err.message : 'Upload failed'
          setFiles(prev => {
            const updated = [...prev]
            updated[globalIndex] = { ...updated[globalIndex], status: 'error', error: message }
            return updated
          })
          errors++
        }
      })

      await Promise.all(promises)
    }

    setResults({ success, errors })
    setUploading(false)
  }

  const pendingCount = files.filter(f => f.status === 'pending').length
  const doneCount = files.filter(f => f.status === 'done').length
  const totalSize = files.reduce((sum, f) => sum + f.file.size, 0)

  return (
    <div className="min-h-screen bg-dark-900 text-white p-6">
      <div className="max-w-6xl mx-auto">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-3xl font-bold">
            <span className="text-gold-500">üì∏</span> Image Manager
          </h1>
          <p className="text-dark-400 mt-2">
            Drag & drop project photos to upload them all to Firebase Storage at once.
          </p>
        </div>

        {/* Project Info */}
        <div className="bg-dark-800 rounded-2xl p-6 mb-6 border border-dark-700">
          <h2 className="text-lg font-semibold mb-4">Project Details</h2>
          <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label className="block text-sm text-dark-400 mb-1">Category</label>
              <select
                value={category}
                onChange={(e) => setCategory(e.target.value)}
                className="w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-xl text-white focus:ring-2 focus:ring-gold-500 focus:border-transparent"
              >
                {PROJECT_CATEGORIES.map(cat => (
                  <option key={cat} value={cat}>{cat}</option>
                ))}
              </select>
            </div>
            <div>
              <label className="block text-sm text-dark-400 mb-1">Project Name</label>
              <input
                type="text"
                value={projectName}
                onChange={(e) => setProjectName(e.target.value)}
                placeholder="e.g. Kitchen Remodel ‚Äî PG County"
                className="w-full px-4 py-3 bg-dark-700 border border-dark-600 rounded-xl text-white placeholder:text-dark-500 focus:ring-2 focus:ring-gold-500 focus:border-transparent"
              />
            </div>
          </div>
          <p className="text-xs text-dark-500 mt-3">
            <FolderOpen className="w-3 h-3 inline mr-1" />
            Storage path: <code className="text-gold-500">{getFolder()}/</code>
          </p>
        </div>

        {/* Drop Zone */}
        <div
          ref={dropRef}
          onDragOver={handleDragOver}
          onDragLeave={handleDragLeave}
          onDrop={handleDrop}
          onClick={() => fileInputRef.current?.click()}
          className="border-2 border-dashed border-dark-600 rounded-2xl p-12 text-center cursor-pointer transition-all hover:border-gold-500/50 hover:bg-dark-800/50 mb-6"
        >
          <input
            ref={fileInputRef}
            type="file"
            multiple
            accept="image/*"
            className="hidden"
            onChange={(e) => e.target.files && addFiles(e.target.files)}
          />
          <ImagePlus className="w-16 h-16 mx-auto text-dark-500 mb-4" />
          <p className="text-lg font-medium text-dark-300">
            Drop photos here or click to browse
          </p>
          <p className="text-sm text-dark-500 mt-2">
            Supports JPG, PNG, WebP ‚Ä¢ Select as many as you want
          </p>
        </div>

        {/* File Preview Grid */}
        {files.length > 0 && (
          <div className="mb-6">
            <div className="flex items-center justify-between mb-4">
              <div className="flex items-center gap-4">
                <h2 className="text-lg font-semibold">
                  {files.length} photo{files.length !== 1 ? 's' : ''} selected
                </h2>
                <span className="text-sm text-dark-400">
                  ({(totalSize / 1024 / 1024).toFixed(1)} MB)
                </span>
              </div>
              <div className="flex gap-3">
                <button
                  onClick={clearAll}
                  className="px-4 py-2 text-sm rounded-lg bg-dark-700 hover:bg-dark-600 text-dark-300 transition-colors"
                >
                  <Trash2 className="w-4 h-4 inline mr-1" /> Clear All
                </button>
                <button
                  onClick={uploadAll}
                  disabled={uploading || pendingCount === 0}
                  className={cn(
                    'px-6 py-2 text-sm font-semibold rounded-lg transition-all flex items-center gap-2',
                    uploading || pendingCount === 0
                      ? 'bg-dark-700 text-dark-500 cursor-not-allowed'
                      : 'bg-gold-500 text-dark-900 hover:bg-gold-400'
                  )}
                >
                  {uploading ? (
                    <>
                      <Loader2 className="w-4 h-4 animate-spin" />
                      Uploading...
                    </>
                  ) : (
                    <>
                      <Upload className="w-4 h-4" />
                      Upload {pendingCount} Photo{pendingCount !== 1 ? 's' : ''}
                    </>
                  )}
                </button>
              </div>
            </div>

            {/* Results banner */}
            {results && (
              <div className={cn(
                'mb-4 p-4 rounded-xl flex items-center gap-3',
                results.errors > 0 
                  ? 'bg-red-900/20 border border-red-500/30 text-red-300'
                  : 'bg-green-900/20 border border-green-500/30 text-green-300'
              )}>
                {results.errors > 0 ? (
                  <AlertCircle className="w-5 h-5 flex-shrink-0" />
                ) : (
                  <Check className="w-5 h-5 flex-shrink-0" />
                )}
                <span>
                  {results.success} uploaded successfully
                  {results.errors > 0 && `, ${results.errors} failed`}
                </span>
              </div>
            )}

            {/* Grid */}
            <div className="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3">
              {files.map((fileObj, i) => (
                <div
                  key={i}
                  className={cn(
                    'relative group rounded-xl overflow-hidden border-2 transition-all',
                    fileObj.status === 'done' && 'border-green-500/50',
                    fileObj.status === 'error' && 'border-red-500/50',
                    fileObj.status === 'uploading' && 'border-gold-500/50',
                    fileObj.status === 'pending' && 'border-dark-600',
                  )}
                >
                  {/* Thumbnail */}
                  <div className="aspect-square relative">
                    <Image
                      src={fileObj.preview}
                      alt={fileObj.file.name}
                      fill
                      className="object-cover"
                    />
                    
                    {/* Status overlay */}
                    {fileObj.status === 'uploading' && (
                      <div className="absolute inset-0 bg-black/60 flex items-center justify-center">
                        <Loader2 className="w-8 h-8 text-gold-500 animate-spin" />
                      </div>
                    )}
                    {fileObj.status === 'done' && (
                      <div className="absolute top-2 right-2 w-7 h-7 bg-green-500 rounded-full flex items-center justify-center">
                        <Check className="w-4 h-4 text-white" />
                      </div>
                    )}
                    {fileObj.status === 'error' && (
                      <div className="absolute inset-0 bg-red-900/60 flex items-center justify-center">
                        <AlertCircle className="w-8 h-8 text-red-300" />
                      </div>
                    )}
                    
                    {/* Remove button */}
                    {fileObj.status === 'pending' && (
                      <button
                        onClick={() => removeFile(i)}
                        className="absolute top-2 right-2 w-7 h-7 bg-red-500/80 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                      >
                        <X className="w-4 h-4 text-white" />
                      </button>
                    )}
                  </div>

                  {/* File name */}
                  <div className="p-2 bg-dark-800">
                    <p className="text-xs text-dark-400 truncate">{fileObj.file.name}</p>
                    <p className="text-xs text-dark-500">{(fileObj.file.size / 1024).toFixed(0)} KB</p>
                  </div>
                </div>
              ))}
            </div>

            {/* URL list for done files */}
            {doneCount > 0 && (
              <div className="mt-6 bg-dark-800 rounded-xl p-4 border border-dark-700">
                <h3 className="text-sm font-semibold text-gold-500 mb-3">
                  ‚úÖ Uploaded URLs ‚Äî Copy these for gallery-data.ts:
                </h3>
                <div className="space-y-1 font-mono text-xs max-h-48 overflow-y-auto">
                  {files
                    .filter(f => f.status === 'done' && f.url)
                    .map((f, i) => (
                      <div key={i} className="flex items-center gap-2">
                        <code className="text-green-400 flex-1 truncate">{f.url}</code>
                        <button
                          onClick={() => navigator.clipboard.writeText(f.url || '')}
                          className="text-dark-400 hover:text-white flex-shrink-0 px-2 py-1 rounded bg-dark-700 text-xs"
                        >
                          Copy
                        </button>
                      </div>
                    ))}
                </div>
              </div>
            )}
          </div>
        )}

        {/* Instructions */}
        <div className="bg-dark-800/50 rounded-2xl p-6 border border-dark-700">
          <h3 className="font-semibold text-gold-500 mb-3">üí° How it works</h3>
          <div className="space-y-2 text-sm text-dark-400">
            <p>1. Select a <strong className="text-dark-200">category</strong> and name the project</p>
            <p>2. <strong className="text-dark-200">Drag & drop</strong> all photos at once (or click to browse)</p>
            <p>3. Hit <strong className="text-dark-200">Upload</strong> ‚Äî all photos go to Firebase Storage in one click</p>
            <p>4. Copy the generated URLs into the gallery data to add them to the site</p>
          </div>
          <div className="mt-4 p-3 bg-dark-900 rounded-lg">
            <p className="text-xs text-dark-500">
              <strong className="text-dark-300">Storage:</strong> Firebase free tier gives you 5 GB ‚Äî enough for 5,000+ project photos.
              Currently using ~{(totalSize / 1024 / 1024).toFixed(1) || '0'} MB.
            </p>
          </div>
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: app/admin/leads/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { 
  Target, 
  Filter, 
  RefreshCw, 
  MapPin, 
  Clock, 
  DollarSign,
  ExternalLink,
  Send,
  Star,
  StarOff,
  CheckCircle,
  XCircle,
  ChevronDown,
  Search,
  Zap,
  ArrowLeft
} from 'lucide-react'
import { cn } from '@/lib/utils'

// Mock lead data - this would come from scraping API
const mockLeads = [
  {
    id: 1,
    title: 'Looking for kitchen remodel contractor',
    description: 'Need full kitchen renovation including cabinets, countertops, backsplash, and new appliances. Budget around $30-40k. Looking to start in February.',
    source: 'craigslist',
    sourceUrl: 'https://washingtondc.craigslist.org/...',
    location: 'Bethesda, MD',
    distance: '8 miles',
    postedAt: '2 hours ago',
    budgetRange: '$30k - $40k',
    category: 'Kitchen',
    status: 'new',
    hot: true,
    contactMethod: 'email',
  },
  {
    id: 2,
    title: 'Bathroom renovation needed ASAP',
    description: 'Master bathroom needs complete overhaul. Shower leak causing water damage. Need someone who can start within 2 weeks. Please provide references.',
    source: 'craigslist',
    sourceUrl: 'https://washingtondc.craigslist.org/...',
    location: 'Silver Spring, MD',
    distance: '5 miles',
    postedAt: '3 hours ago',
    budgetRange: '$15k - $25k',
    category: 'Bathroom',
    status: 'new',
    hot: true,
    contactMethod: 'phone',
  },
  {
    id: 3,
    title: 'Deck repair or replacement',
    description: 'Existing deck is about 15 years old with some rotted boards. Need assessment on whether to repair or fully replace. Approximately 400 sq ft.',
    source: 'nextdoor',
    sourceUrl: 'https://nextdoor.com/...',
    location: 'Arlington, VA',
    distance: '12 miles',
    postedAt: '5 hours ago',
    budgetRange: '$5k - $15k',
    category: 'Deck',
    status: 'new',
    hot: false,
    contactMethod: 'message',
  },
  {
    id: 4,
    title: 'Basement finishing project',
    description: 'Unfinished basement, approximately 800 sq ft. Want to add a bedroom, bathroom, and living area. Need full permits and inspections.',
    source: 'website',
    sourceUrl: '/admin/leads',
    location: 'Rockville, MD',
    distance: '10 miles',
    postedAt: '6 hours ago',
    budgetRange: '$40k - $60k',
    category: 'Basement',
    status: 'new',
    hot: true,
    contactMethod: 'email',
  },
  {
    id: 5,
    title: 'Interior painting - whole house',
    description: '4 bedroom colonial, approximately 2800 sq ft. All rooms need painting including trim and ceilings. We will provide paint colors.',
    source: 'craigslist',
    sourceUrl: 'https://washingtondc.craigslist.org/...',
    location: 'Potomac, MD',
    distance: '15 miles',
    postedAt: '8 hours ago',
    budgetRange: '$5k - $8k',
    category: 'Painting',
    status: 'new',
    hot: false,
    contactMethod: 'email',
  },
  {
    id: 6,
    title: 'Roof replacement needed',
    description: 'Shingle roof on single family home, approximately 2000 sq ft. Multiple leaks after last storm. Insurance claim filed. Need estimate ASAP.',
    source: 'nextdoor',
    sourceUrl: 'https://nextdoor.com/...',
    location: 'College Park, MD',
    distance: '7 miles',
    postedAt: '1 day ago',
    budgetRange: '$10k - $18k',
    category: 'Roofing',
    status: 'contacted',
    hot: true,
    contactMethod: 'phone',
  },
]

const sources = [
  { id: 'all', name: 'All Sources', count: 15 },
  { id: 'website', name: 'CR Home Pros Website', count: 4 },
  { id: 'craigslist', name: 'Craigslist', count: 8 },
  { id: 'nextdoor', name: 'NextDoor', count: 3 },
]

const categories = ['All', 'Kitchen', 'Bathroom', 'Basement', 'Deck', 'Roofing', 'Painting', 'Flooring']

const statusOptions = [
  { id: 'new', label: 'New', color: 'bg-blue-100 text-blue-700' },
  { id: 'contacted', label: 'Contacted', color: 'bg-yellow-100 text-yellow-700' },
  { id: 'quoted', label: 'Quoted', color: 'bg-purple-100 text-purple-700' },
  { id: 'won', label: 'Won', color: 'bg-green-100 text-green-700' },
  { id: 'lost', label: 'Lost', color: 'bg-red-100 text-red-700' },
]

export default function LeadHunterPage() {
  const [selectedSource, setSelectedSource] = useState('all')
  const [selectedCategory, setSelectedCategory] = useState('All')
  const [searchQuery, setSearchQuery] = useState('')
  const [showFilters, setShowFilters] = useState(false)
  const [leads, setLeads] = useState(mockLeads)
  const [selectedLead, setSelectedLead] = useState<typeof mockLeads[0] | null>(null)
  const [isRefreshing, setIsRefreshing] = useState(false)

  const filteredLeads = leads.filter((lead) => {
    if (selectedSource !== 'all' && lead.source !== selectedSource) return false
    if (selectedCategory !== 'All' && lead.category !== selectedCategory) return false
    if (searchQuery && !lead.title.toLowerCase().includes(searchQuery.toLowerCase())) return false
    return true
  })

  const handleRefresh = async () => {
    setIsRefreshing(true)
    // Simulate API call
    await new Promise((r) => setTimeout(r, 2000))
    setIsRefreshing(false)
  }

  const handleStatusChange = (leadId: number, newStatus: string) => {
    setLeads(leads.map((l) => l.id === leadId ? { ...l, status: newStatus } : l))
  }

  const getSourceLogo = (source: string) => {
    const logos: Record<string, string> = {
      website: 'üåê',
      craigslist: 'üìã',
      nextdoor: 'üèòÔ∏è',
    }
    return logos[source] || 'üìÑ'
  }

  return (
    <div className="min-h-screen bg-dark-50">
      {/* Header */}
      <header className="bg-white border-b border-dark-100 sticky top-0 z-40">
        <div className="max-w-7xl mx-auto px-4 py-4">
          <div className="flex items-center justify-between mb-4">
            <div className="flex items-center gap-4">
              <Link href="/admin" className="p-2 hover:bg-dark-50 rounded-lg">
                <ArrowLeft className="w-5 h-5" />
              </Link>
              <div>
                <h1 className="text-xl font-display font-bold text-dark-900 flex items-center gap-2">
                  <Target className="w-6 h-6 text-primary-600" />
                  Lead Hunter
                </h1>
                <p className="text-sm text-dark-500">Find and respond to job opportunities</p>
              </div>
            </div>
            <button
              onClick={handleRefresh}
              disabled={isRefreshing}
              className="btn-primary"
            >
              <RefreshCw className={cn('w-5 h-5', isRefreshing && 'animate-spin')} />
              {isRefreshing ? 'Scanning...' : 'Refresh Leads'}
            </button>
          </div>

          {/* Search & Filters */}
          <div className="flex flex-col md:flex-row gap-4">
            <div className="relative flex-1">
              <Search className="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-dark-400" />
              <input
                type="text"
                placeholder="Search leads..."
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                className="w-full pl-10 pr-4 py-2 bg-dark-50 rounded-lg border border-dark-100 focus:border-primary-500 focus:outline-none"
              />
            </div>
            <button
              onClick={() => setShowFilters(!showFilters)}
              className="btn-outline"
            >
              <Filter className="w-5 h-5" />
              Filters
              <ChevronDown className={cn('w-4 h-4 transition-transform', showFilters && 'rotate-180')} />
            </button>
          </div>

          {/* Filter Panel */}
          {showFilters && (
            <div className="mt-4 p-4 bg-dark-50 rounded-xl">
              <div className="grid md:grid-cols-2 gap-4">
                <div>
                  <label className="text-sm font-medium text-dark-700 mb-2 block">Source</label>
                  <div className="flex flex-wrap gap-2">
                    {sources.map((source) => (
                      <button
                        key={source.id}
                        onClick={() => setSelectedSource(source.id)}
                        className={cn(
                          'px-3 py-1.5 rounded-lg text-sm font-medium transition-all',
                          selectedSource === source.id
                            ? 'bg-primary-600 text-white'
                            : 'bg-white text-dark-600 hover:bg-dark-100'
                        )}
                      >
                        {source.name} ({source.count})
                      </button>
                    ))}
                  </div>
                </div>
                <div>
                  <label className="text-sm font-medium text-dark-700 mb-2 block">Category</label>
                  <div className="flex flex-wrap gap-2">
                    {categories.map((cat) => (
                      <button
                        key={cat}
                        onClick={() => setSelectedCategory(cat)}
                        className={cn(
                          'px-3 py-1.5 rounded-lg text-sm font-medium transition-all',
                          selectedCategory === cat
                            ? 'bg-gold-500 text-dark-900'
                            : 'bg-white text-dark-600 hover:bg-dark-100'
                        )}
                      >
                        {cat}
                      </button>
                    ))}
                  </div>
                </div>
              </div>
            </div>
          )}
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-7xl mx-auto px-4 py-6">
        <div className="grid lg:grid-cols-3 gap-6">
          {/* Lead List */}
          <div className="lg:col-span-2 space-y-4">
            <div className="flex items-center justify-between">
              <p className="text-dark-500">
                <span className="font-semibold text-dark-900">{filteredLeads.length}</span> leads found
              </p>
              <div className="flex items-center gap-2 text-sm text-dark-500">
                <Zap className="w-4 h-4 text-gold-500" />
                Last updated: 2 mins ago
              </div>
            </div>

            {filteredLeads.map((lead) => (
              <div
                key={lead.id}
                onClick={() => setSelectedLead(lead)}
                className={cn(
                  'bg-white rounded-xl border p-5 cursor-pointer transition-all hover:shadow-md',
                  selectedLead?.id === lead.id
                    ? 'border-primary-500 shadow-md'
                    : 'border-dark-100'
                )}
              >
                <div className="flex items-start justify-between mb-3">
                  <div className="flex items-center gap-3">
                    <span className="text-2xl">{getSourceLogo(lead.source)}</span>
                    <div>
                      <h3 className="font-semibold text-dark-900 flex items-center gap-2">
                        {lead.title}
                        {lead.hot && (
                          <span className="px-2 py-0.5 bg-red-100 text-red-600 text-xs font-bold rounded-full animate-pulse">
                            üî• HOT
                          </span>
                        )}
                      </h3>
                      <p className="text-sm text-dark-500">{lead.source.replace('_', ' ')} ‚Ä¢ {lead.postedAt}</p>
                    </div>
                  </div>
                  <span className={cn(
                    'px-2 py-1 text-xs font-medium rounded-full',
                    statusOptions.find((s) => s.id === lead.status)?.color
                  )}>
                    {statusOptions.find((s) => s.id === lead.status)?.label}
                  </span>
                </div>

                <p className="text-dark-600 text-sm mb-4 line-clamp-2">{lead.description}</p>

                <div className="flex flex-wrap gap-4 text-sm text-dark-500">
                  <span className="flex items-center gap-1">
                    <MapPin className="w-4 h-4" />
                    {lead.location} ({lead.distance})
                  </span>
                  <span className="flex items-center gap-1">
                    <DollarSign className="w-4 h-4" />
                    {lead.budgetRange}
                  </span>
                  <span className="px-2 py-0.5 bg-primary-50 text-primary-700 rounded text-xs font-medium">
                    {lead.category}
                  </span>
                </div>
              </div>
            ))}
          </div>

          {/* Lead Detail Panel */}
          <div className="lg:col-span-1">
            {selectedLead ? (
              <div className="bg-white rounded-xl border border-dark-100 p-6 sticky top-32">
                <div className="flex items-center justify-between mb-4">
                  <span className="text-2xl">{getSourceLogo(selectedLead.source)}</span>
                  <a
                    href={selectedLead.sourceUrl}
                    target="_blank"
                    rel="noopener noreferrer"
                    className="text-primary-600 hover:text-primary-700 flex items-center gap-1 text-sm"
                  >
                    View Original
                    <ExternalLink className="w-4 h-4" />
                  </a>
                </div>

                <h2 className="text-xl font-display font-bold text-dark-900 mb-2">
                  {selectedLead.title}
                </h2>

                <div className="flex flex-wrap gap-2 mb-4">
                  <span className="flex items-center gap-1 text-sm text-dark-500">
                    <MapPin className="w-4 h-4" />
                    {selectedLead.location}
                  </span>
                  <span className="flex items-center gap-1 text-sm text-dark-500">
                    <Clock className="w-4 h-4" />
                    {selectedLead.postedAt}
                  </span>
                </div>

                <div className="bg-dark-50 rounded-lg p-4 mb-6">
                  <p className="text-dark-700 text-sm leading-relaxed">
                    {selectedLead.description}
                  </p>
                </div>

                <div className="grid grid-cols-2 gap-4 mb-6">
                  <div className="bg-green-50 rounded-lg p-3">
                    <p className="text-xs text-green-600 mb-1">Budget Range</p>
                    <p className="font-bold text-green-700">{selectedLead.budgetRange}</p>
                  </div>
                  <div className="bg-primary-50 rounded-lg p-3">
                    <p className="text-xs text-primary-600 mb-1">Category</p>
                    <p className="font-bold text-primary-700">{selectedLead.category}</p>
                  </div>
                </div>

                {/* Status Update */}
                <div className="mb-6">
                  <label className="text-sm font-medium text-dark-700 mb-2 block">Update Status</label>
                  <div className="flex flex-wrap gap-2">
                    {statusOptions.map((status) => (
                      <button
                        key={status.id}
                        onClick={() => handleStatusChange(selectedLead.id, status.id)}
                        className={cn(
                          'px-3 py-1.5 rounded-lg text-xs font-medium transition-all',
                          selectedLead.status === status.id
                            ? status.color
                            : 'bg-dark-100 text-dark-500 hover:bg-dark-200'
                        )}
                      >
                        {status.label}
                      </button>
                    ))}
                  </div>
                </div>

                {/* Actions */}
                <div className="space-y-3">
                  <button className="btn-gold w-full">
                    <Send className="w-5 h-5" />
                    Send Quote / Respond
                  </button>
                  <div className="grid grid-cols-2 gap-3">
                    <button className="btn-outline btn-sm">
                      <Star className="w-4 h-4" />
                      Save
                    </button>
                    <button className="btn-outline btn-sm text-red-600 border-red-200 hover:bg-red-50">
                      <XCircle className="w-4 h-4" />
                      Dismiss
                    </button>
                  </div>
                </div>

                {/* Quick Response Templates */}
                <div className="mt-6 pt-6 border-t border-dark-100">
                  <p className="text-sm font-medium text-dark-700 mb-3">Quick Response Templates</p>
                  <div className="space-y-2">
                    <button className="w-full text-left p-3 bg-dark-50 rounded-lg text-sm text-dark-600 hover:bg-dark-100 transition-colors">
                      üìß Standard Introduction
                    </button>
                    <button className="w-full text-left p-3 bg-dark-50 rounded-lg text-sm text-dark-600 hover:bg-dark-100 transition-colors">
                      üìû Request Phone Call
                    </button>
                    <button className="w-full text-left p-3 bg-dark-50 rounded-lg text-sm text-dark-600 hover:bg-dark-100 transition-colors">
                      üìÖ Schedule Site Visit
                    </button>
                  </div>
                </div>
              </div>
            ) : (
              <div className="bg-white rounded-xl border border-dark-100 p-8 text-center">
                <Target className="w-12 h-12 text-dark-300 mx-auto mb-4" />
                <h3 className="font-semibold text-dark-900 mb-2">Select a Lead</h3>
                <p className="text-dark-500 text-sm">
                  Click on a lead to see details and respond
                </p>
              </div>
            )}
          </div>
        </div>
      </main>
    </div>
  )
}


==========================================================================================

--- file: app/admin/contracts/page.tsx ---
'use client'

import { useState, useEffect } from 'react'
import {
  Plus, Trash2, Send, Download, Eye, Loader2, CheckCircle,
  Briefcase, User, Calendar, FileText, Pencil, AlertTriangle, Mail
} from 'lucide-react'
import { SignaturePad } from '../_components/SignaturePad'
import { saveDocument, type DocumentRecord, getSavedSignatureUrl } from '@/lib/firebase-auth'

import Link from 'next/link'

interface ScopeItem { id: string; description: string }

interface ContractData {
  number: string; date: string; clientName: string; clientEmail: string; clientPhone: string
  clientAddress: string; propertyAddress: string; projectName: string; projectTitle: string
  scopeItems: ScopeItem[]; scopeNote: string; totalAmount: number
  paymentStructure: string; contractTerms: string; notes: string
  signatureData: string | null; isCorrection: boolean
}

const DEFAULT_TERMS = `Any alteration or deviation from written agreement involving extra work will be executed only upon written agreement and will be charged over the above estimate accordingly.

All work guaranteed for one (1) year from completion date. Warranty covers workmanship defects only, not normal wear and tear.

Client agrees to provide reasonable access to the property during scheduled work hours. Any delays caused by client will extend the project timeline accordingly.

CRGS, Inc. carries full liability insurance and workers' compensation coverage. MHIC License #05-132359.`

const INITIAL: ContractData = {
  number: `CTR-${new Date().getFullYear()}-${String(Date.now()).slice(-4)}`,
  date: new Date().toISOString().split('T')[0],
  clientName: '', clientEmail: '', clientPhone: '', clientAddress: '', propertyAddress: '',
  projectName: '', projectTitle: '',
  scopeItems: [{ id: '1', description: '' }],
  scopeNote: 'All the above will be plastered, sanded, primed and painted two coats. Existing color will be matched.',
  totalAmount: 0,
  paymentStructure: '',
  contractTerms: DEFAULT_TERMS,
  notes: 'All dumping fees, materials and labor are included in this price.',
  signatureData: null, isCorrection: false,
}

export default function ContractsPage() {
  const [ct, setCt] = useState<ContractData>(INITIAL)
  const [saving, setSaving] = useState(false)
  const [savedId, setSavedId] = useState<string | null>(null)
  const [generating, setGenerating] = useState(false)
  const [sending, setSending] = useState(false)
  const [sent, setSent] = useState(false)
  const [savedSigUrl, setSavedSigUrl] = useState<string | null>(null)
  const [showEmailModal, setShowEmailModal] = useState(false)
  const [emailSubject, setEmailSubject] = useState('')
  const [emailBody, setEmailBody] = useState('')
  const [tab, setTab] = useState<'edit' | 'preview'>('edit')

  useEffect(() => {
    getSavedSignatureUrl().then(url => { if (url) setSavedSigUrl(url) })
  }, [])

  // Auto-generate payment structure when total changes
  useEffect(() => {
    if (ct.totalAmount > 0 && !ct.paymentStructure) {
      const third = Math.round(ct.totalAmount / 3 * 100) / 100
      setCt(prev => ({
        ...prev,
        paymentStructure: `$${third.toLocaleString('en-US', { minimumFractionDigits: 2 })} USD when client authorizes work agreement.\n$${third.toLocaleString('en-US', { minimumFractionDigits: 2 })} USD due at project midpoint.\n$${third.toLocaleString('en-US', { minimumFractionDigits: 2 })} USD upon completion and customer satisfaction.`
      }))
    }
  }, [ct.totalAmount])

  const updateField = (field: keyof ContractData, value: any) => setCt(prev => ({ ...prev, [field]: value }))
  const addScope = () => setCt(prev => ({ ...prev, scopeItems: [...prev.scopeItems, { id: String(Date.now()), description: '' }] }))
  const removeScope = (id: string) => { if (ct.scopeItems.length > 1) setCt(prev => ({ ...prev, scopeItems: prev.scopeItems.filter(i => i.id !== id) })) }
  const updateScope = (id: string, value: string) => setCt(prev => ({ ...prev, scopeItems: prev.scopeItems.map(i => i.id === id ? { ...i, description: value } : i) }))

  const handleSave = async (status: DocumentRecord['status'] = 'draft') => {
    setSaving(true)
    try {
      const docData: DocumentRecord = {
        ...(savedId ? { id: savedId } : {}), type: 'contract',
        number: ct.isCorrection ? `${ct.number}-CORRECTED` : ct.number,
        clientName: ct.clientName, clientEmail: ct.clientEmail, clientPhone: ct.clientPhone,
        clientAddress: ct.clientAddress, propertyAddress: ct.propertyAddress,
        projectName: ct.projectName, date: ct.date,
        items: ct.scopeItems.map(s => ({ id: s.id, description: s.description, quantity: 1, unitPrice: 0 })),
        freeformDescription: ct.scopeNote,
        paymentStructure: ct.paymentStructure, contractTerms: ct.contractTerms,
        notes: ct.notes, subtotal: ct.totalAmount, tax: 0, taxRate: 0, total: ct.totalAmount,
        signatureData: ct.signatureData, status,
      }
      const id = await saveDocument(docData)
      setSavedId(id)
    } catch (err) { console.error('Save failed:', err) }
    setSaving(false)
  }

  const handleGeneratePdf = async () => {
    setGenerating(true)
    try {
      const res = await fetch('/api/admin/generate-pdf', {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ type: 'contract', data: {
          number: ct.isCorrection ? `${ct.number}-CORRECTED` : ct.number,
          date: ct.date, clientName: ct.clientName, clientPhone: ct.clientPhone,
          clientEmail: ct.clientEmail, clientAddress: ct.clientAddress,
          propertyAddress: ct.propertyAddress,
          projectName: ct.projectTitle || ct.projectName,
          items: ct.scopeItems.map(s => ({ description: s.description })),
          freeformDescription: ct.scopeNote ? `Note: ${ct.scopeNote}` : '',
          paymentStructure: `${ct.paymentStructure}\n\nSum estimated to complete job: $${ct.totalAmount.toLocaleString('en-US', { minimumFractionDigits: 2 })} USD`,
          contractTerms: ct.contractTerms,
          notes: ct.notes,
        }})
      })
      const blob = await res.blob()
      window.open(URL.createObjectURL(blob), '_blank')
    } catch (err) { console.error('PDF failed:', err) }
    setGenerating(false)
  }

  const prepareEmail = () => {
    setEmailSubject(`Contract ${ct.number} ‚Äî ${ct.projectName || 'CR Home Pros'}`)
    setEmailBody(`Hi ${ct.clientName.split(' ')[0] || 'there'},\n\nPlease find attached the contract for ${ct.projectName || 'your project'} at ${ct.propertyAddress || 'your property'}.\n\nTotal estimated cost: $${ct.totalAmount.toLocaleString('en-US', { minimumFractionDigits: 2 })}\n\nPlease review, sign, and return at your earliest convenience. If you have any questions, don't hesitate to reach out.\n\nBest regards,\nCarlos Hernandez\nCR Home Pros\n(571) 237-7164`)
    setShowEmailModal(true)
  }

  const handleSend = async () => {
    setSending(true)
    try {
      await handleSave('sent')
      window.open(`mailto:${ct.clientEmail}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`, '_blank')
      setSent(true); setShowEmailModal(false)
      setTimeout(() => setSent(false), 3000)
    } catch (err) { console.error('Send failed:', err) }
    setSending(false)
  }

  const fmt = (n: number) => `$${n.toLocaleString('en-US', { minimumFractionDigits: 2 })}`
  const ic = "w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all text-sm"
  const lc = "text-sm font-medium text-slate-300 mb-1.5 block"

  return (
    <div className="p-4 sm:p-6 max-w-6xl mx-auto">
      <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4">
        <div>
          <h1 className="text-2xl font-bold text-white flex items-center gap-3"><Briefcase className="w-6 h-6 text-blue-400" /> {ct.isCorrection ? 'Corrected Contract' : 'Create Contract'}</h1>
          <p className="text-slate-400 text-sm mt-1">Professional scope of work and agreement</p>
        </div>
        <div className="flex items-center gap-2 flex-wrap">
          <Link href="/admin/contracts/sent" className="px-3 py-2 rounded-xl bg-slate-800 text-slate-300 text-sm hover:bg-slate-700 flex items-center gap-2"><FileText className="w-4 h-4" /> Sent</Link>
          <label className="flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-600/20 text-amber-400 text-sm cursor-pointer">
            <input type="checkbox" checked={ct.isCorrection} onChange={e => updateField('isCorrection', e.target.checked)} className="rounded" />
            <AlertTriangle className="w-3.5 h-3.5" /> Correction
          </label>
        </div>
      </div>

      <div className="flex gap-1 bg-slate-800/50 p-1 rounded-xl mb-6 w-fit">
        <button onClick={() => setTab('edit')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${tab === 'edit' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}><Pencil className="w-3.5 h-3.5 inline mr-1.5" />Edit</button>
        <button onClick={() => setTab('preview')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${tab === 'preview' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}><Eye className="w-3.5 h-3.5 inline mr-1.5" />Preview</button>
      </div>

      {tab === 'edit' ? (
        <div className="space-y-6">
          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><Calendar className="w-4 h-4 text-blue-400" /> Contract Details</h2>
            <div className="grid sm:grid-cols-3 gap-4">
              <div><label className={lc}>Contract #</label><input value={ct.number} onChange={e => updateField('number', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Date</label><input type="date" value={ct.date} onChange={e => updateField('date', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Total Amount</label><input type="number" value={ct.totalAmount || ''} onChange={e => updateField('totalAmount', Number(e.target.value))} className={ic} step="0.01" placeholder="17097.00" /></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><User className="w-4 h-4 text-blue-400" /> Client & Property</h2>
            <div className="grid sm:grid-cols-2 gap-4">
              <div><label className={lc}>Client Name</label><input value={ct.clientName} onChange={e => updateField('clientName', e.target.value)} placeholder="Ishaan Tharoor" className={ic} /></div>
              <div><label className={lc}>Email</label><input type="email" value={ct.clientEmail} onChange={e => updateField('clientEmail', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Phone</label><input value={ct.clientPhone} onChange={e => updateField('clientPhone', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Project Name</label><input value={ct.projectName} onChange={e => updateField('projectName', e.target.value)} placeholder="Basement Renovation" className={ic} /></div>
              <div><label className={lc}>Property Address</label><textarea value={ct.propertyAddress} onChange={e => updateField('propertyAddress', e.target.value)} placeholder={"4611 43rd Street NW\nWashington DC 20016"} rows={2} className={ic} /></div>
              <div><label className={lc}>Scope Title (on PDF)</label><input value={ct.projectTitle} onChange={e => updateField('projectTitle', e.target.value)} placeholder="FLOORING, FRAMING, DRYWALL AND PAINTING" className={ic} /></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><FileText className="w-4 h-4 text-blue-400" /> Scope of Work</h2>
            <div className="space-y-3">
              {ct.scopeItems.map((item, idx) => (
                <div key={item.id} className="flex gap-3 items-start">
                  <span className="text-slate-500 text-sm mt-3 w-6 text-right flex-shrink-0">{idx + 1}.</span>
                  <textarea value={item.description} onChange={e => updateScope(item.id, e.target.value)} placeholder="Protect all furniture with plastic and floors with drop cloth..." rows={2} className={ic + ' flex-1'} />
                  <button onClick={() => removeScope(item.id)} className="mt-3 text-red-400 hover:text-red-300 p-1" disabled={ct.scopeItems.length === 1}><Trash2 className="w-4 h-4" /></button>
                </div>
              ))}
            </div>
            <button onClick={addScope} className="mt-4 flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 px-3 py-2 rounded-lg hover:bg-blue-600/10"><Plus className="w-4 h-4" /> Add Scope Item</button>
            <div className="mt-4"><label className={lc}>Scope Note</label><textarea value={ct.scopeNote} onChange={e => updateField('scopeNote', e.target.value)} rows={2} className={ic} /></div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4">Payment Structure</h2>
            <textarea value={ct.paymentStructure} onChange={e => updateField('paymentStructure', e.target.value)} rows={4} placeholder="$5,699.00 when client authorizes work agreement..." className={ic} />
            <p className="text-xs text-slate-500 mt-2">Auto-generated as 3 equal payments. Edit as needed.</p>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4">Terms & Conditions</h2>
            <textarea value={ct.contractTerms} onChange={e => updateField('contractTerms', e.target.value)} rows={6} className={ic} />
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6"><label className={lc}>Additional Notes</label><textarea value={ct.notes} onChange={e => updateField('notes', e.target.value)} rows={2} className={ic} /></div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <SignaturePad onSignatureChange={sig => updateField('signatureData', sig)} savedSignatureUrl={savedSigUrl} label="Carlos Hernandez ‚Äî President, CRGS Inc." />
          </div>

          <div className="flex flex-wrap gap-3 pt-2">
            <button onClick={() => handleSave('draft')} disabled={saving} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-slate-700 text-white font-medium hover:bg-slate-600 text-sm">{saving ? <Loader2 className="w-4 h-4 animate-spin" /> : <FileText className="w-4 h-4" />} Save Draft</button>
            <button onClick={() => setTab('preview')} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-blue-600/20 text-blue-400 font-medium hover:bg-blue-600/30 text-sm"><Eye className="w-4 h-4" /> Preview</button>
            <button onClick={handleGeneratePdf} disabled={generating} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 text-sm">{generating ? <Loader2 className="w-4 h-4 animate-spin" /> : <Download className="w-4 h-4" />} Generate PDF</button>
            <button onClick={prepareEmail} disabled={!ct.clientEmail} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-green-600 text-white font-medium hover:bg-green-700 text-sm disabled:opacity-40">{sent ? <CheckCircle className="w-4 h-4" /> : <Send className="w-4 h-4" />} {sent ? 'Sent!' : 'Send to Client'}</button>
          </div>
        </div>
      ) : (
        <div>
          <div className="bg-white rounded-2xl shadow-2xl p-8 sm:p-12 max-w-[800px] mx-auto text-slate-900">
            <div className="flex items-start justify-between border-b-4 border-blue-900 pb-6 mb-8">
              <div><h2 className="text-3xl font-bold text-blue-900">C&R</h2><p className="text-sm text-slate-600">General Services Inc.</p><p className="text-xs text-amber-600 mt-1">Licensed | Insured | Bonded</p></div>
              <div className="text-right"><h1 className="text-xl font-bold text-amber-600">{ct.isCorrection ? 'CORRECTED CONTRACT' : 'CONTRACT'}</h1><p className="text-sm text-slate-500 mt-1">#{ct.number} ‚Ä¢ {ct.date}</p></div>
            </div>
            <div className="grid sm:grid-cols-2 gap-8 mb-6">
              <div><p className="text-xs font-bold text-blue-900 uppercase mb-2">Client</p><p className="font-semibold">{ct.clientName || '‚Äî'}</p>{ct.clientPhone && <p className="text-sm text-slate-600">{ct.clientPhone}</p>}</div>
              <div><p className="text-xs font-bold text-blue-900 uppercase mb-2">Property</p><p className="text-sm whitespace-pre-line">{ct.propertyAddress || '‚Äî'}</p></div>
            </div>
            <p className="text-sm text-slate-600 mb-4">C&R General Services Inc. is pleased to submit the following scope of work for:</p>
            {ct.projectTitle && <h3 className="font-bold text-blue-900 text-center text-lg underline mb-6">{ct.projectTitle}</h3>}
            <div className="space-y-3 mb-6">
              {ct.scopeItems.map((item, idx) => (
                <div key={item.id} className="text-sm"><span className="font-semibold text-blue-900 mr-2">{idx + 1}.</span>{item.description || '‚Äî'}</div>
              ))}
            </div>
            {ct.scopeNote && <p className="text-sm italic text-slate-600 mb-6 bg-slate-50 rounded-lg p-3">Note: {ct.scopeNote}</p>}
            {ct.paymentStructure && (
              <div className="bg-slate-50 rounded-xl p-5 mb-6">
                <h4 className="font-bold text-blue-900 uppercase text-xs mb-3">Payment Structure</h4>
                <p className="text-sm whitespace-pre-line">{ct.paymentStructure}</p>
                <div className="mt-3 pt-3 border-t"><p className="font-bold text-lg text-blue-900">Sum estimated to complete job: {fmt(ct.totalAmount)}</p></div>
              </div>
            )}
            {ct.notes && <p className="text-sm text-slate-600 mb-4">{ct.notes}</p>}
            <div className="grid sm:grid-cols-2 gap-8 border-t pt-8 mb-8">
              <div><p className="text-sm font-semibold mb-4">Provided and Guaranteed by:</p><div className="h-16 border-b border-slate-300 mb-1">{ct.signatureData && <img src={ct.signatureData} alt="Sig" className="h-full object-contain" />}</div><p className="text-sm font-semibold">Carlos Hernandez</p><p className="text-xs text-slate-500">President, CRGS, Inc.</p></div>
              <div><p className="text-sm font-semibold mb-4">Accepted and Agreed:</p><div className="h-16 border-b border-slate-300 mb-1" /><p className="text-sm font-semibold">{ct.clientName || '________________'}</p><p className="text-xs text-slate-500">Owner of Above House ‚Ä¢ Date: ________</p></div>
            </div>
            {ct.contractTerms && (
              <div className="border-t pt-6"><h4 className="font-bold text-blue-900 uppercase text-xs mb-3">Terms & Conditions</h4><p className="text-xs text-slate-500 whitespace-pre-line leading-relaxed">{ct.contractTerms}</p></div>
            )}
            <div className="mt-8 text-center border-t pt-6">
              <p className="text-xs font-bold text-blue-900">C&R GENERAL SERVICES INC.</p>
              <p className="text-xs text-amber-600 italic">We Are In This Business For You</p>
              <p className="text-xs text-slate-400">(571) 237-7164 | crhomepros@gmail.com</p>
            </div>
          </div>
          <div className="flex justify-center gap-3 mt-6">
            <button onClick={() => setTab('edit')} className="px-4 py-2.5 rounded-xl bg-slate-700 text-white text-sm hover:bg-slate-600">‚Üê Back to Edit</button>
            <button onClick={handleGeneratePdf} disabled={generating} className="px-5 py-2.5 rounded-xl bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 flex items-center gap-2">{generating ? <Loader2 className="w-4 h-4 animate-spin" /> : <Download className="w-4 h-4" />} Download PDF</button>
          </div>
        </div>
      )}

      {showEmailModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
          <div className="bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-lg w-full shadow-2xl">
            <h3 className="text-lg font-bold text-white mb-4 flex items-center gap-2"><Mail className="w-5 h-5 text-blue-400" /> Send Contract</h3>
            <div className="space-y-4">
              <div><label className={lc}>To</label><input value={ct.clientEmail} readOnly className={ic + ' opacity-60'} /></div>
              <div><label className={lc}>Subject</label><input value={emailSubject} onChange={e => setEmailSubject(e.target.value)} className={ic} /></div>
              <div><label className={lc}>Message</label><textarea value={emailBody} onChange={e => setEmailBody(e.target.value)} rows={8} className={ic} /></div>
            </div>
            <div className="flex gap-3 mt-6">
              <button onClick={() => setShowEmailModal(false)} className="flex-1 px-4 py-2.5 rounded-xl bg-slate-800 text-slate-300 hover:bg-slate-700 text-sm">Cancel</button>
              <button onClick={handleSend} disabled={sending} className="flex-1 px-4 py-2.5 rounded-xl bg-green-600 text-white font-medium hover:bg-green-700 text-sm flex items-center justify-center gap-2">{sending ? <Loader2 className="w-4 h-4 animate-spin" /> : <Send className="w-4 h-4" />} Open Email</button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}


==========================================================================================

--- file: app/admin/contracts/sent/page.tsx ---
'use client'
import { DocumentList } from '../../_components/DocumentList'
export default function ContractsSentPage() {
  return <DocumentList type="contract" title="Sent Contracts" createHref="/admin/contracts" createLabel="New Contract" />
}


==========================================================================================

--- file: app/admin/projects/page.tsx ---
'use client'

import { useState, useRef } from 'react'
import { Briefcase, User, Phone, MapPin, FileText, Camera, Upload, DollarSign, CheckCircle, Plus, X, Download, Trash2 } from 'lucide-react'
import { SERVICE_PRICING } from '@/lib/pricing-data'

interface ProjectImage {
  file: File
  preview: string
  phase: 'before' | 'after'
}

export default function AdminProjectsPage() {
  const [formData, setFormData] = useState({
    clientName: '',
    clientPhone: '',
    clientEmail: '',
    clientAddress: '',
    serviceType: '',
    serviceTier: '',
    description: '',
    notes: '',
    startDate: '',
    estimatedCompletion: '',
  })
  const [images, setImages] = useState<ProjectImage[]>([])
  const [phase, setPhase] = useState<'before' | 'after'>('before')
  const [isGenerating, setIsGenerating] = useState(false)
  const [generated, setGenerated] = useState(false)
  const fileInputRef = useRef<HTMLInputElement>(null)

  const selectedService = SERVICE_PRICING.find((s) => s.id === formData.serviceType)
  const selectedTier = selectedService?.tiers[parseInt(formData.serviceTier)] || null

  const update = (field: string, value: string) =>
    setFormData((prev) => ({ ...prev, [field]: value }))

  const handleImageUpload = (e: React.ChangeEvent<HTMLInputElement>) => {
    const files = e.target.files
    if (!files) return
    const newImages: ProjectImage[] = Array.from(files).map((file) => ({
      file,
      preview: URL.createObjectURL(file),
      phase,
    }))
    setImages((prev) => [...prev, ...newImages])
    if (fileInputRef.current) fileInputRef.current.value = ''
  }

  const removeImage = (index: number) => {
    setImages((prev) => {
      const img = prev[index]
      URL.revokeObjectURL(img.preview)
      return prev.filter((_, i) => i !== index)
    })
  }

  const handleGenerate = async () => {
    setIsGenerating(true)

    // Upload before/after images to Firebase
    const beforeImages = images.filter((img) => img.phase === 'before')
    const afterImages = images.filter((img) => img.phase === 'after')

    const uploadedUrls: { before: string[]; after: string[] } = { before: [], after: [] }

    for (const img of [...beforeImages, ...afterImages]) {
      const fd = new FormData()
      fd.append('file', img.file)
      fd.append('category', `clients/${formData.clientName.toLowerCase().replace(/\s+/g, '-')}/${img.phase}`)

      try {
        const res = await fetch('/api/images', { method: 'POST', body: fd })
        if (res.ok) {
          const data = await res.json()
          if (data.uploaded?.[0]?.url) {
            uploadedUrls[img.phase].push(data.uploaded[0].url)
          }
        }
      } catch (err) {
        console.error('Upload error:', err)
      }
    }

    // Generate DOCX via API
    try {
      const res = await fetch('/api/projects/generate', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({
          ...formData,
          estimateMin: selectedTier?.min,
          estimateMax: selectedTier?.max,
          serviceName: selectedService?.name,
          tierLabel: selectedTier?.label,
          beforeImageUrls: uploadedUrls.before,
          afterImageUrls: uploadedUrls.after,
        }),
      })

      if (res.ok) {
        const blob = await res.blob()
        const url = URL.createObjectURL(blob)
        const a = document.createElement('a')
        a.href = url
        a.download = `Project-${formData.clientName.replace(/\s+/g, '-')}.docx`
        a.click()
        URL.revokeObjectURL(url)
        setGenerated(true)
      }
    } catch (err) {
      console.error('Generate error:', err)
    }

    setIsGenerating(false)
  }

  const beforeCount = images.filter((img) => img.phase === 'before').length
  const afterCount = images.filter((img) => img.phase === 'after').length

  return (
    <div className="min-h-screen bg-gray-50 py-8 px-4 md:px-8">
      <div className="max-w-4xl mx-auto">
        {/* Header */}
        <div className="flex items-center gap-3 mb-8">
          <div className="w-12 h-12 rounded-xl bg-primary-100 flex items-center justify-center">
            <Briefcase className="w-6 h-6 text-primary-600" />
          </div>
          <div>
            <h1 className="text-2xl font-bold text-gray-900">New Project</h1>
            <p className="text-gray-500 text-sm">Create a project folder with client info, estimates, and photos</p>
          </div>
        </div>

        <div className="space-y-6">
          {/* Client Information */}
          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
            <h2 className="text-lg font-semibold text-gray-800 flex items-center gap-2 mb-5">
              <User className="w-5 h-5 text-primary-500" />
              Client Information
            </h2>
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Full Name *</label>
                <input
                  type="text"
                  value={formData.clientName}
                  onChange={(e) => update('clientName', e.target.value)}
                  placeholder="John Smith"
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Phone *</label>
                <div className="relative">
                  <Phone className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400" />
                  <input
                    type="tel"
                    value={formData.clientPhone}
                    onChange={(e) => update('clientPhone', e.target.value)}
                    placeholder="(301) 555-0123"
                    className="w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  />
                </div>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Email</label>
                <input
                  type="email"
                  value={formData.clientEmail}
                  onChange={(e) => update('clientEmail', e.target.value)}
                  placeholder="john@example.com"
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Address *</label>
                <div className="relative">
                  <MapPin className="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400" />
                  <input
                    type="text"
                    value={formData.clientAddress}
                    onChange={(e) => update('clientAddress', e.target.value)}
                    placeholder="123 Main St, Silver Spring, MD"
                    className="w-full pl-10 pr-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  />
                </div>
              </div>
            </div>
          </div>

          {/* Service & Estimate */}
          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
            <h2 className="text-lg font-semibold text-gray-800 flex items-center gap-2 mb-5">
              <DollarSign className="w-5 h-5 text-primary-500" />
              Service & Estimate
            </h2>

            <div className="grid md:grid-cols-2 gap-4 mb-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Service Type *</label>
                <select
                  value={formData.serviceType}
                  onChange={(e) => {
                    update('serviceType', e.target.value)
                    update('serviceTier', '')
                  }}
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                >
                  <option value="">Select a service...</option>
                  {SERVICE_PRICING.map((svc) => (
                    <option key={svc.id} value={svc.id}>
                      {svc.icon} {svc.name}
                    </option>
                  ))}
                </select>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Scope / Tier</label>
                <select
                  value={formData.serviceTier}
                  onChange={(e) => update('serviceTier', e.target.value)}
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  disabled={!selectedService}
                >
                  <option value="">Select scope...</option>
                  {selectedService?.tiers.map((tier, i) => (
                    <option key={i} value={i}>
                      {tier.label} ‚Äî ${tier.min.toLocaleString()} ‚Äì ${tier.max.toLocaleString()}
                    </option>
                  ))}
                </select>
              </div>
            </div>

            {/* Estimate Display */}
            {selectedTier && (
              <div className="bg-primary-50 border border-primary-200 rounded-lg p-4 flex items-center justify-between">
                <div>
                  <div className="text-sm font-medium text-primary-700">Estimated Range</div>
                  <div className="text-sm text-primary-600">{selectedService?.name} ‚Äî {selectedTier.label}</div>
                </div>
                <div className="text-2xl font-bold text-primary-800">
                  ${selectedTier.min.toLocaleString()} ‚Äì ${selectedTier.max.toLocaleString()}
                </div>
              </div>
            )}

            <div className="grid md:grid-cols-2 gap-4 mt-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Start Date</label>
                <input
                  type="date"
                  value={formData.startDate}
                  onChange={(e) => update('startDate', e.target.value)}
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Est. Completion</label>
                <input
                  type="date"
                  value={formData.estimatedCompletion}
                  onChange={(e) => update('estimatedCompletion', e.target.value)}
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
              </div>
            </div>
          </div>

          {/* Job Description */}
          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
            <h2 className="text-lg font-semibold text-gray-800 flex items-center gap-2 mb-5">
              <FileText className="w-5 h-5 text-primary-500" />
              Project Details
            </h2>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Job Description *</label>
                <textarea
                  value={formData.description}
                  onChange={(e) => update('description', e.target.value)}
                  placeholder="Describe the work to be done..."
                  rows={4}
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-1">Internal Notes</label>
                <textarea
                  value={formData.notes}
                  onChange={(e) => update('notes', e.target.value)}
                  placeholder="Any notes for the team..."
                  rows={2}
                  className="w-full px-4 py-2.5 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
              </div>
            </div>
          </div>

          {/* Photo Upload */}
          <div className="bg-white rounded-xl p-6 shadow-sm border border-gray-100">
            <h2 className="text-lg font-semibold text-gray-800 flex items-center gap-2 mb-5">
              <Camera className="w-5 h-5 text-primary-500" />
              Project Photos
            </h2>

            {/* Phase Toggle */}
            <div className="flex gap-2 mb-4">
              <button
                onClick={() => setPhase('before')}
                className={`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${
                  phase === 'before'
                    ? 'bg-orange-100 text-orange-700 border-2 border-orange-300'
                    : 'bg-gray-100 text-gray-600 border-2 border-transparent hover:bg-gray-200'
                }`}
              >
                üì∑ Before ({beforeCount})
              </button>
              <button
                onClick={() => setPhase('after')}
                className={`px-4 py-2 rounded-lg font-medium text-sm transition-colors ${
                  phase === 'after'
                    ? 'bg-green-100 text-green-700 border-2 border-green-300'
                    : 'bg-gray-100 text-gray-600 border-2 border-transparent hover:bg-gray-200'
                }`}
              >
                ‚úÖ After ({afterCount})
              </button>
            </div>

            {/* Upload Area */}
            <div
              onClick={() => fileInputRef.current?.click()}
              className="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center cursor-pointer hover:border-primary-400 hover:bg-primary-50/50 transition-colors"
            >
              <Upload className="w-8 h-8 text-gray-400 mx-auto mb-3" />
              <p className="text-gray-600 font-medium">
                Click to upload <span className={phase === 'before' ? 'text-orange-600' : 'text-green-600'}>{phase}</span> photos
              </p>
              <p className="text-gray-400 text-sm mt-1">JPG, PNG ‚Äî multiple files at once</p>
              <input
                ref={fileInputRef}
                type="file"
                accept="image/*"
                multiple
                onChange={handleImageUpload}
                className="hidden"
              />
            </div>

            {/* Image Grid */}
            {images.length > 0 && (
              <div className="mt-4 grid grid-cols-3 md:grid-cols-4 gap-3">
                {images.map((img, i) => (
                  <div key={i} className="relative group rounded-lg overflow-hidden aspect-square">
                    <img src={img.preview} alt="" className="w-full h-full object-cover" />
                    <div className={`absolute top-1 left-1 px-1.5 py-0.5 rounded text-xs font-bold text-white ${
                      img.phase === 'before' ? 'bg-orange-500' : 'bg-green-500'
                    }`}>
                      {img.phase === 'before' ? 'B' : 'A'}
                    </div>
                    <button
                      onClick={() => removeImage(i)}
                      className="absolute top-1 right-1 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity"
                    >
                      <X className="w-3 h-3 text-white" />
                    </button>
                  </div>
                ))}
              </div>
            )}
          </div>

          {/* Generate Button */}
          <div className="flex gap-4">
            <button
              onClick={handleGenerate}
              disabled={!formData.clientName || !formData.serviceType || isGenerating}
              className={`flex-1 py-4 rounded-xl font-semibold text-lg flex items-center justify-center gap-3 transition-all ${
                !formData.clientName || !formData.serviceType
                  ? 'bg-gray-200 text-gray-400 cursor-not-allowed'
                  : isGenerating
                  ? 'bg-primary-400 text-white cursor-wait'
                  : 'bg-primary-600 text-white hover:bg-primary-700 shadow-lg hover:shadow-xl'
              }`}
            >
              {isGenerating ? (
                <>
                  <div className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin" />
                  Generating...
                </>
              ) : generated ? (
                <>
                  <CheckCircle className="w-5 h-5" />
                  Generated! Click to regenerate
                </>
              ) : (
                <>
                  <Download className="w-5 h-5" />
                  Generate Project File & Upload Photos
                </>
              )}
            </button>
          </div>

          {generated && (
            <div className="bg-green-50 border border-green-200 rounded-xl p-4 text-green-800 text-sm">
              Project file downloaded and photos uploaded to Firebase Storage.
              Photos are organized under <code className="bg-green-100 px-1.5 py-0.5 rounded text-xs">clients/{formData.clientName.toLowerCase().replace(/\s+/g, '-')}/</code>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: app/admin/connect-drive/page.tsx ---
'use client';

import { useState, useEffect } from 'react';

export default function ConnectDrivePage() {
  const [loading, setLoading] = useState(false);
  const [error, setError] = useState('');
  const [refreshToken, setRefreshToken] = useState('');

  // Check if we're returning from OAuth with a token in the URL
  useEffect(() => {
    const params = new URLSearchParams(window.location.search);
    const token = params.get('token');
    if (token) {
      setRefreshToken(token);
    }
  }, []);

  const handleConnect = async () => {
    try {
      setLoading(true);
      setError('');
      
      const response = await fetch('/api/admin/drive/auth-url');
      const data = await response.json();
      
      if (data.url) {
        window.location.href = data.url;
      } else {
        setError('Failed to generate authorization URL');
      }
    } catch (err) {
      setError('Failed to connect to Google Drive');
      setLoading(false);
    }
  };

  const copyToClipboard = () => {
    navigator.clipboard.writeText(refreshToken);
    alert('Token copied to clipboard!');
  };

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4">
      <div className="max-w-2xl w-full bg-white rounded-2xl shadow-xl p-8">
        <div className="text-center mb-8">
          <div className="inline-block p-4 bg-blue-100 rounded-full mb-4">
            <svg className="w-12 h-12 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z" />
            </svg>
          </div>
          <h1 className="text-3xl font-bold text-gray-900 mb-2">Connect Google Drive</h1>
          <p className="text-gray-600">Get your refresh token to enable automatic folder creation</p>
        </div>

        {!refreshToken ? (
          <div className="space-y-6">
            <div className="bg-blue-50 border border-blue-200 rounded-lg p-6">
              <h2 className="font-semibold text-blue-900 mb-3 flex items-center">
                <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
                </svg>
                What happens next:
              </h2>
              <ol className="space-y-2 text-sm text-gray-700">
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">1.</span>
                  <span>You'll be redirected to Google to authorize access</span>
                </li>
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">2.</span>
                  <span>Grant permission for CR Home Pros to access Google Drive</span>
                </li>
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">3.</span>
                  <span>You'll be redirected back with your refresh token</span>
                </li>
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">4.</span>
                  <span>Copy the token and add it to your .env.local file</span>
                </li>
              </ol>
            </div>

            {error && (
              <div className="bg-red-50 border border-red-200 rounded-lg p-4">
                <p className="text-red-800 text-sm">{error}</p>
              </div>
            )}

            <button
              onClick={handleConnect}
              disabled={loading}
              className="w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-300 text-white font-semibold py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center"
            >
              {loading ? (
                <>
                  <svg className="animate-spin -ml-1 mr-3 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24">
                    <circle className="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" strokeWidth="4" />
                    <path className="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z" />
                  </svg>
                  Connecting...
                </>
              ) : (
                <>
                  <svg className="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20">
                    <path fillRule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clipRule="evenodd" />
                  </svg>
                  Connect Google Drive
                </>
              )}
            </button>
          </div>
        ) : (
          <div className="space-y-6">
            <div className="bg-green-50 border-2 border-green-200 rounded-lg p-6">
              <div className="flex items-center mb-4">
                <svg className="w-6 h-6 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fillRule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd" />
                </svg>
                <h2 className="text-xl font-bold text-green-900">Success!</h2>
              </div>
              <p className="text-green-800 mb-4">Your Google Drive refresh token:</p>
              
              <div className="bg-gray-900 text-green-400 p-4 rounded-lg mb-4 font-mono text-sm break-all">
                {refreshToken}
              </div>

              <button
                onClick={copyToClipboard}
                className="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center"
              >
                <svg className="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                </svg>
                Copy Token to Clipboard
              </button>
            </div>

            <div className="bg-blue-50 border border-blue-200 rounded-lg p-6">
              <h3 className="font-semibold text-blue-900 mb-3">Next Steps:</h3>
              <ol className="space-y-3 text-sm text-gray-700">
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">1.</span>
                  <span>Open your <code className="bg-white px-2 py-1 rounded text-xs">.env.local</code> file</span>
                </li>
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">2.</span>
                  <span>Find the line: <code className="bg-white px-2 py-1 rounded text-xs">GOOGLE_DRIVE_REFRESH_TOKEN=</code></span>
                </li>
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">3.</span>
                  <span>Paste your token after the equals sign</span>
                </li>
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">4.</span>
                  <span>Save the file and restart your dev server</span>
                </li>
                <li className="flex items-start">
                  <span className="font-bold text-blue-600 mr-2">5.</span>
                  <span>Test the configuration at <code className="bg-white px-2 py-1 rounded text-xs">/api/test-config</code></span>
                </li>
              </ol>
            </div>

            <div className="text-center">
              <a
                href="/get-started"
                className="inline-block bg-gray-600 hover:bg-gray-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200"
              >
                Go to Form ‚Üí
              </a>
            </div>
          </div>
        )}
      </div>
    </div>
  );
}


==========================================================================================

--- file: app/admin/change-orders/page.tsx ---
'use client'

import { useState, useEffect } from 'react'
import {
  Plus, Trash2, Send, Download, Eye, Loader2, CheckCircle,
  ClipboardList, User, Calendar, FileText, Pencil, AlertTriangle, Mail
} from 'lucide-react'
import { SignaturePad } from '../_components/SignaturePad'
import { saveDocument, type DocumentRecord, getSavedSignatureUrl } from '@/lib/firebase-auth'

import Link from 'next/link'

interface LineItem { id: string; description: string; quantity: number; unitPrice: number }

interface ChangeOrderData {
  number: string; date: string; clientName: string; clientEmail: string; clientPhone: string
  clientAddress: string; propertyAddress: string; projectName: string
  existingContractDate: string; previousContractAmount: number
  depositAmount: number; depositNote: string
  items: LineItem[]; notes: string; signatureData: string | null; isCorrection: boolean
}

const INITIAL: ChangeOrderData = {
  number: `CO-${new Date().getFullYear()}-${String(Date.now()).slice(-4)}`,
  date: new Date().toISOString().split('T')[0],
  clientName: '', clientEmail: '', clientPhone: '', clientAddress: '', propertyAddress: '',
  projectName: '', existingContractDate: '', previousContractAmount: 0,
  depositAmount: 0, depositNote: '',
  items: [{ id: '1', description: '', quantity: 1, unitPrice: 0 }],
  notes: 'All work to be performed under the same terms and conditions as specified in original contract unless otherwise stipulated.',
  signatureData: null, isCorrection: false,
}

export default function ChangeOrdersPage() {
  const [co, setCo] = useState<ChangeOrderData>(INITIAL)
  const [saving, setSaving] = useState(false)
  const [savedId, setSavedId] = useState<string | null>(null)
  const [generating, setGenerating] = useState(false)
  const [sending, setSending] = useState(false)
  const [sent, setSent] = useState(false)
  const [savedSigUrl, setSavedSigUrl] = useState<string | null>(null)
  const [showEmailModal, setShowEmailModal] = useState(false)
  const [emailSubject, setEmailSubject] = useState('')
  const [emailBody, setEmailBody] = useState('')
  const [tab, setTab] = useState<'edit' | 'preview'>('edit')

  const changeTotal = co.items.reduce((s, i) => s + i.quantity * i.unitPrice, 0)
  const totalAfterChange = co.previousContractAmount + changeTotal - co.depositAmount

  useEffect(() => {
    getSavedSignatureUrl().then(url => { if (url) setSavedSigUrl(url) })
  }, [])

  const updateField = (field: keyof ChangeOrderData, value: any) => setCo(prev => ({ ...prev, [field]: value }))
  const addItem = () => setCo(prev => ({ ...prev, items: [...prev.items, { id: String(Date.now()), description: '', quantity: 1, unitPrice: 0 }] }))
  const removeItem = (id: string) => { if (co.items.length > 1) setCo(prev => ({ ...prev, items: prev.items.filter(i => i.id !== id) })) }
  const updateItem = (id: string, field: keyof LineItem, value: any) => setCo(prev => ({ ...prev, items: prev.items.map(i => i.id === id ? { ...i, [field]: value } : i) }))

  const handleSave = async (status: DocumentRecord['status'] = 'draft') => {
    setSaving(true)
    try {
      const docData: DocumentRecord = {
        ...(savedId ? { id: savedId } : {}), type: 'change-order',
        number: co.isCorrection ? `${co.number}-CORRECTED` : co.number,
        clientName: co.clientName, clientEmail: co.clientEmail, clientPhone: co.clientPhone,
        clientAddress: co.clientAddress, propertyAddress: co.propertyAddress,
        projectName: co.projectName, date: co.date,
        items: co.items, notes: co.notes,
        subtotal: changeTotal, tax: 0, taxRate: 0, total: totalAfterChange,
        signatureData: co.signatureData, status,
      }
      const id = await saveDocument(docData)
      setSavedId(id)
    } catch (err) { console.error('Save failed:', err) }
    setSaving(false)
  }

  const handleGeneratePdf = async () => {
    setGenerating(true)
    try {
      const res = await fetch('/api/admin/generate-pdf', {
        method: 'POST', headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ type: 'change-order', data: {
          number: co.isCorrection ? `${co.number}-CORRECTED` : co.number,
          date: co.date, clientName: co.clientName, clientPhone: co.clientPhone,
          clientEmail: co.clientEmail, clientAddress: co.clientAddress,
          propertyAddress: co.propertyAddress, projectName: co.projectName,
          items: co.items, notes: co.notes,
          paymentStructure: `DATE OF EXISTING CONTRACT: ${co.existingContractDate}\n\nPREVIOUS CONTRACT AMOUNT: $${co.previousContractAmount.toLocaleString('en-US', { minimumFractionDigits: 2 })}\nDEPOSIT: $${co.depositAmount.toLocaleString('en-US', { minimumFractionDigits: 2 })} ${co.depositNote}\n\nCHANGE ORDER TOTAL: $${changeTotal.toLocaleString('en-US', { minimumFractionDigits: 2 })}\nTOTAL AFTER CHANGE ORDER: $${totalAfterChange.toLocaleString('en-US', { minimumFractionDigits: 2 })}`,
        }})
      })
      const blob = await res.blob()
      window.open(URL.createObjectURL(blob), '_blank')
    } catch (err) { console.error('PDF failed:', err) }
    setGenerating(false)
  }

  const prepareEmail = () => {
    setEmailSubject(`Change Order ${co.number} ‚Äî ${co.projectName || 'CR Home Pros'}`)
    setEmailBody(`Hi ${co.clientName.split(' ')[0] || 'there'},\n\nPlease find attached Change Order ${co.number} for additional work on your project.\n\nThe change order total is $${changeTotal.toLocaleString('en-US', { minimumFractionDigits: 2 })}.\n\nPlease review, sign, and return at your earliest convenience.\n\nBest regards,\nCarlos Hernandez\nCR Home Pros\n(571) 237-7164`)
    setShowEmailModal(true)
  }

  const handleSend = async () => {
    setSending(true)
    try {
      await handleSave('sent')
      window.open(`mailto:${co.clientEmail}?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`, '_blank')
      setSent(true); setShowEmailModal(false)
      setTimeout(() => setSent(false), 3000)
    } catch (err) { console.error('Send failed:', err) }
    setSending(false)
  }

  const fmt = (n: number) => `$${n.toLocaleString('en-US', { minimumFractionDigits: 2 })}`
  const ic = "w-full bg-slate-800 border border-white/10 rounded-xl px-4 py-3 text-white placeholder-slate-500 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none transition-all text-sm"
  const lc = "text-sm font-medium text-slate-300 mb-1.5 block"

  return (
    <div className="p-4 sm:p-6 max-w-6xl mx-auto">
      <div className="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4">
        <div>
          <h1 className="text-2xl font-bold text-white flex items-center gap-3">
            <ClipboardList className="w-6 h-6 text-blue-400" />
            {co.isCorrection ? 'Corrected Change Order' : 'Create Change Order'}
          </h1>
          <p className="text-slate-400 text-sm mt-1">Document additional work for existing contracts</p>
        </div>
        <div className="flex items-center gap-2 flex-wrap">
          <Link href="/admin/change-orders/sent" className="px-3 py-2 rounded-xl bg-slate-800 text-slate-300 text-sm hover:bg-slate-700 flex items-center gap-2"><FileText className="w-4 h-4" /> Sent</Link>
          <label className="flex items-center gap-2 px-3 py-2 rounded-xl bg-amber-600/20 text-amber-400 text-sm cursor-pointer">
            <input type="checkbox" checked={co.isCorrection} onChange={e => updateField('isCorrection', e.target.checked)} className="rounded" />
            <AlertTriangle className="w-3.5 h-3.5" /> Correction
          </label>
        </div>
      </div>

      <div className="flex gap-1 bg-slate-800/50 p-1 rounded-xl mb-6 w-fit">
        <button onClick={() => setTab('edit')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${tab === 'edit' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}><Pencil className="w-3.5 h-3.5 inline mr-1.5" />Edit</button>
        <button onClick={() => setTab('preview')} className={`px-4 py-2 rounded-lg text-sm font-medium transition-all ${tab === 'preview' ? 'bg-blue-600 text-white' : 'text-slate-400 hover:text-white'}`}><Eye className="w-3.5 h-3.5 inline mr-1.5" />Preview</button>
      </div>

      {tab === 'edit' ? (
        <div className="space-y-6">
          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><Calendar className="w-4 h-4 text-blue-400" /> Change Order Details</h2>
            <div className="grid sm:grid-cols-3 gap-4">
              <div><label className={lc}>CO #</label><input value={co.number} onChange={e => updateField('number', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Date</label><input type="date" value={co.date} onChange={e => updateField('date', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Existing Contract Date</label><input type="date" value={co.existingContractDate} onChange={e => updateField('existingContractDate', e.target.value)} className={ic} /></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><User className="w-4 h-4 text-blue-400" /> Client & Property</h2>
            <div className="grid sm:grid-cols-2 gap-4">
              <div><label className={lc}>Client Name</label><input value={co.clientName} onChange={e => updateField('clientName', e.target.value)} placeholder="Monica McNutt" className={ic} /></div>
              <div><label className={lc}>Email</label><input type="email" value={co.clientEmail} onChange={e => updateField('clientEmail', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Phone</label><input value={co.clientPhone} onChange={e => updateField('clientPhone', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Project Name</label><input value={co.projectName} onChange={e => updateField('projectName', e.target.value)} className={ic} /></div>
              <div><label className={lc}>Client Address</label><textarea value={co.clientAddress} onChange={e => updateField('clientAddress', e.target.value)} rows={2} className={ic} /></div>
              <div><label className={lc}>Property Address</label><textarea value={co.propertyAddress} onChange={e => updateField('propertyAddress', e.target.value)} placeholder={"3441 Massachusetts Avenue\nSouth East Washington DC"} rows={2} className={ic} /></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4">Original Contract</h2>
            <div className="grid sm:grid-cols-3 gap-4">
              <div><label className={lc}>Previous Contract Amount</label><input type="number" value={co.previousContractAmount || ''} onChange={e => updateField('previousContractAmount', Number(e.target.value))} className={ic} step="0.01" /></div>
              <div><label className={lc}>Deposit Amount</label><input type="number" value={co.depositAmount || ''} onChange={e => updateField('depositAmount', Number(e.target.value))} className={ic} step="0.01" /></div>
              <div><label className={lc}>Deposit Note</label><input value={co.depositNote} onChange={e => updateField('depositNote', e.target.value)} placeholder="Check 5848 Bank of America" className={ic} /></div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <h2 className="font-semibold text-white mb-4 flex items-center gap-2"><FileText className="w-4 h-4 text-blue-400" /> Change Items</h2>
            <div className="space-y-3">
              {co.items.map((item, idx) => (
                <div key={item.id} className="flex gap-3 items-start">
                  <span className="text-slate-500 text-sm mt-3 w-6 text-right flex-shrink-0">{idx + 1}.</span>
                  <div className="flex-1 grid sm:grid-cols-[1fr_120px] gap-3">
                    <input value={item.description} onChange={e => updateItem(item.id, 'description', e.target.value)} placeholder="Power wash garage brick walls and columns" className={ic} />
                    <input type="number" value={item.unitPrice || ''} onChange={e => updateItem(item.id, 'unitPrice', Number(e.target.value))} className={ic + ' text-right'} placeholder="$ 0.00" step="0.01" />
                  </div>
                  <button onClick={() => removeItem(item.id)} className="mt-3 text-red-400 hover:text-red-300 p-1" disabled={co.items.length === 1}><Trash2 className="w-4 h-4" /></button>
                </div>
              ))}
            </div>
            <button onClick={addItem} className="mt-4 flex items-center gap-2 text-sm text-blue-400 hover:text-blue-300 px-3 py-2 rounded-lg hover:bg-blue-600/10"><Plus className="w-4 h-4" /> Add Change Item</button>

            <div className="mt-6 pt-4 border-t border-white/5 space-y-2 text-right text-sm">
              <div className="text-slate-400">Change Order Total: <span className="text-white font-medium ml-2">{fmt(changeTotal)}</span></div>
              <div className="text-slate-400">Previous Contract: <span className="text-white font-medium ml-2">{fmt(co.previousContractAmount)}</span></div>
              {co.depositAmount > 0 && <div className="text-slate-400">Deposit: <span className="text-green-400 font-medium ml-2">-{fmt(co.depositAmount)}</span></div>}
              <div className="text-lg font-bold text-white pt-2 border-t border-white/10">Total After Change Order: {fmt(totalAfterChange)}</div>
            </div>
          </div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6"><label className={lc}>Notes</label><textarea value={co.notes} onChange={e => updateField('notes', e.target.value)} rows={3} className={ic} /></div>

          <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-6">
            <SignaturePad onSignatureChange={sig => updateField('signatureData', sig)} savedSignatureUrl={savedSigUrl} label="Carlos Hernandez ‚Äî President, CRGS Inc." />
          </div>

          <div className="flex flex-wrap gap-3 pt-2">
            <button onClick={() => handleSave('draft')} disabled={saving} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-slate-700 text-white font-medium hover:bg-slate-600 text-sm">{saving ? <Loader2 className="w-4 h-4 animate-spin" /> : <FileText className="w-4 h-4" />} Save Draft</button>
            <button onClick={() => setTab('preview')} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-blue-600/20 text-blue-400 font-medium hover:bg-blue-600/30 text-sm"><Eye className="w-4 h-4" /> Preview</button>
            <button onClick={handleGeneratePdf} disabled={generating} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 text-sm">{generating ? <Loader2 className="w-4 h-4 animate-spin" /> : <Download className="w-4 h-4" />} Generate PDF</button>
            <button onClick={prepareEmail} disabled={!co.clientEmail} className="flex items-center gap-2 px-5 py-3 rounded-xl bg-green-600 text-white font-medium hover:bg-green-700 text-sm disabled:opacity-40">{sent ? <CheckCircle className="w-4 h-4" /> : <Send className="w-4 h-4" />} {sent ? 'Sent!' : 'Send to Client'}</button>
          </div>
        </div>
      ) : (
        <div>
          <div className="bg-white rounded-2xl shadow-2xl p-8 sm:p-12 max-w-[800px] mx-auto text-slate-900">
            <div className="flex items-start justify-between border-b-4 border-blue-900 pb-6 mb-8">
              <div><h2 className="text-3xl font-bold text-blue-900">C&R</h2><p className="text-sm text-slate-600">General Services Inc.</p><p className="text-xs text-amber-600 mt-1">Licensed | Insured | Bonded</p></div>
              <div className="text-right"><h1 className="text-2xl font-bold text-amber-600">{co.isCorrection ? 'CORRECTED CHANGE ORDER' : 'CHANGE ORDER'}</h1><p className="text-sm text-slate-500 mt-1">#{co.number}</p><p className="text-sm text-slate-500">{co.date}</p></div>
            </div>
            <div className="grid sm:grid-cols-2 gap-8 mb-6">
              <div><p className="text-xs font-bold text-blue-900 uppercase mb-2">Client</p><p className="font-semibold">{co.clientName || '‚Äî'}</p></div>
              <div><p className="text-xs font-bold text-blue-900 uppercase mb-2">Property</p><p className="text-sm whitespace-pre-line">{co.propertyAddress || '‚Äî'}</p></div>
            </div>
            {co.existingContractDate && <p className="text-sm text-slate-600 mb-6">Date of Existing Contract: <strong>{co.existingContractDate}</strong></p>}
            <h3 className="font-bold text-blue-900 mb-4">We hereby agree to make the change(s) specified below:</h3>
            <div className="space-y-2 mb-6">
              {co.items.map((item, idx) => (
                <div key={item.id} className="flex justify-between items-start text-sm">
                  <span>{idx + 1}. {item.description || '‚Äî'}</span>
                  <span className="font-medium whitespace-nowrap ml-4">{fmt(item.unitPrice)}</span>
                </div>
              ))}
            </div>
            <div className="bg-slate-50 rounded-xl p-5 space-y-2 text-sm mb-8">
              <div className="flex justify-between"><span>Change Order Total</span><span className="font-bold">{fmt(changeTotal)}</span></div>
              <div className="flex justify-between text-slate-600"><span>Previous Contract Amount</span><span>{fmt(co.previousContractAmount)}</span></div>
              {co.depositAmount > 0 && <div className="flex justify-between text-slate-600"><span>Deposit {co.depositNote}</span><span>-{fmt(co.depositAmount)}</span></div>}
              <div className="flex justify-between text-lg font-bold text-blue-900 pt-2 border-t-2 border-blue-900"><span>TOTAL AFTER CHANGE ORDER</span><span>{fmt(totalAfterChange)}</span></div>
            </div>
            {co.notes && <p className="text-sm text-slate-600 mb-8 italic">{co.notes}</p>}
            <div className="grid sm:grid-cols-2 gap-8 border-t pt-8">
              <div><p className="text-sm font-semibold mb-4">Provided and Guaranteed by:</p><div className="h-16 border-b border-slate-300 mb-1">{co.signatureData && <img src={co.signatureData} alt="Sig" className="h-full object-contain" />}</div><p className="text-sm font-semibold">Carlos Hernandez</p><p className="text-xs text-slate-500">President, CRGS, Inc.</p></div>
              <div><p className="text-sm font-semibold mb-4">Accepted and Agreed:</p><div className="h-16 border-b border-slate-300 mb-1" /><p className="text-sm font-semibold">{co.clientName || '________________'}</p><p className="text-xs text-slate-500">Owner of the house ‚Ä¢ Date: ________</p></div>
            </div>
          </div>
          <div className="flex justify-center gap-3 mt-6">
            <button onClick={() => setTab('edit')} className="px-4 py-2.5 rounded-xl bg-slate-700 text-white text-sm hover:bg-slate-600">‚Üê Back to Edit</button>
            <button onClick={handleGeneratePdf} disabled={generating} className="px-5 py-2.5 rounded-xl bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 flex items-center gap-2">{generating ? <Loader2 className="w-4 h-4 animate-spin" /> : <Download className="w-4 h-4" />} Download PDF</button>
          </div>
        </div>
      )}

      {showEmailModal && (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm">
          <div className="bg-slate-900 border border-white/10 rounded-2xl p-6 max-w-lg w-full shadow-2xl">
            <h3 className="text-lg font-bold text-white mb-4 flex items-center gap-2"><Mail className="w-5 h-5 text-blue-400" /> Send Change Order</h3>
            <div className="space-y-4">
              <div><label className={lc}>To</label><input value={co.clientEmail} readOnly className={ic + ' opacity-60'} /></div>
              <div><label className={lc}>Subject</label><input value={emailSubject} onChange={e => setEmailSubject(e.target.value)} className={ic} /></div>
              <div><label className={lc}>Message</label><textarea value={emailBody} onChange={e => setEmailBody(e.target.value)} rows={8} className={ic} /></div>
            </div>
            <div className="flex gap-3 mt-6">
              <button onClick={() => setShowEmailModal(false)} className="flex-1 px-4 py-2.5 rounded-xl bg-slate-800 text-slate-300 hover:bg-slate-700 text-sm">Cancel</button>
              <button onClick={handleSend} disabled={sending} className="flex-1 px-4 py-2.5 rounded-xl bg-green-600 text-white font-medium hover:bg-green-700 text-sm flex items-center justify-center gap-2">{sending ? <Loader2 className="w-4 h-4 animate-spin" /> : <Send className="w-4 h-4" />} Open Email</button>
            </div>
          </div>
        </div>
      )}
    </div>
  )
}


==========================================================================================

--- file: app/admin/change-orders/sent/page.tsx ---
'use client'
import { DocumentList } from '../../_components/DocumentList'
export default function ChangeOrdersSentPage() {
  return <DocumentList type="change-order" title="Sent Change Orders" createHref="/admin/change-orders" createLabel="New Change Order" />
}


==========================================================================================

--- file: app/admin/_components/AuthProvider.tsx ---
'use client'

import { createContext, useContext, useEffect, useState, type ReactNode } from 'react'
import { type User } from 'firebase/auth'
import { onAuthChange, isAdmin, logout } from '@/lib/firebase-auth'
import { useRouter, usePathname } from 'next/navigation'

interface AuthContextType {
  user: User | null
  loading: boolean
  signOut: () => Promise<void>
}

const AuthContext = createContext<AuthContextType>({
  user: null,
  loading: true,
  signOut: async () => {},
})

export function useAuth() {
  return useContext(AuthContext)
}

export function AuthProvider({ children }: { children: ReactNode }) {
  const [user, setUser] = useState<User | null>(null)
  const [loading, setLoading] = useState(true)
  const router = useRouter()
  const pathname = usePathname()

  useEffect(() => {
    const unsub = onAuthChange((firebaseUser) => {
      if (firebaseUser && isAdmin(firebaseUser)) {
        setUser(firebaseUser)
      } else {
        setUser(null)
      }
      setLoading(false)
    })
    return unsub
  }, [])

  useEffect(() => {
    if (!loading && !user && pathname !== '/admin/login') {
      router.replace('/admin/login')
    }
  }, [user, loading, pathname, router])

  const handleSignOut = async () => {
    await logout()
    router.replace('/admin/login')
  }

  return (
    <AuthContext.Provider value={{ user, loading, signOut: handleSignOut }}>
      {children}
    </AuthContext.Provider>
  )
}


==========================================================================================

--- file: app/admin/_components/DocumentList.tsx ---
'use client'

import { useState, useEffect } from 'react'
import { getDocumentsByType, deleteDocument, type DocumentRecord } from '@/lib/firebase-auth'
import { FileText, Trash2, Download, Eye, Send, Loader2, CheckCircle, Clock, DollarSign, Upload } from 'lucide-react'
import Link from 'next/link'

const STATUS_STYLES: Record<string, string> = {
  draft: 'bg-slate-500/20 text-slate-400',
  sent: 'bg-blue-500/20 text-blue-400',
  signed: 'bg-green-500/20 text-green-400',
  paid: 'bg-emerald-500/20 text-emerald-400',
}

const STATUS_ICONS: Record<string, typeof Clock> = {
  draft: Clock,
  sent: Send,
  signed: CheckCircle,
  paid: DollarSign,
}

interface DocumentListProps {
  type: DocumentRecord['type']
  title: string
  createHref: string
  createLabel: string
}

export function DocumentList({ type, title, createHref, createLabel }: DocumentListProps) {
  const [docs, setDocs] = useState<DocumentRecord[]>([])
  const [loading, setLoading] = useState(true)
  const [deleting, setDeleting] = useState<string | null>(null)

  useEffect(() => {
    loadDocs()
  }, [])

  const loadDocs = async () => {
    try {
      const data = await getDocumentsByType(type)
      setDocs(data)
    } catch (err) {
      console.error('Failed to load documents:', err)
    }
    setLoading(false)
  }

  const handleDelete = async (id: string) => {
    if (!confirm('Are you sure you want to delete this document?')) return
    setDeleting(id)
    try {
      await deleteDocument(id)
      setDocs(prev => prev.filter(d => d.id !== id))
    } catch (err) {
      console.error('Failed to delete:', err)
    }
    setDeleting(null)
  }

  const formatDate = (timestamp: any) => {
    if (!timestamp) return '‚Äî'
    const date = timestamp.toDate ? timestamp.toDate() : new Date(timestamp)
    return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })
  }

  const formatCurrency = (amount: number) => {
    return new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(amount)
  }

  if (loading) {
    return (
      <div className="flex items-center justify-center py-20">
        <Loader2 className="w-8 h-8 text-blue-500 animate-spin" />
      </div>
    )
  }

  return (
    <div className="p-6 max-w-6xl mx-auto">
      <div className="flex items-center justify-between mb-8">
        <div>
          <h1 className="text-2xl font-bold text-white">{title}</h1>
          <p className="text-slate-400 text-sm mt-1">{docs.length} document{docs.length !== 1 ? 's' : ''}</p>
        </div>
        <Link
          href={createHref}
          className="px-4 py-2.5 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700 transition-all flex items-center gap-2 text-sm"
        >
          <FileText className="w-4 h-4" />
          {createLabel}
        </Link>
      </div>

      {docs.length === 0 ? (
        <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-12 text-center">
          <FileText className="w-12 h-12 text-slate-600 mx-auto mb-4" />
          <p className="text-slate-400 text-lg mb-2">No {type.replace('-', ' ')}s yet</p>
          <p className="text-slate-500 text-sm mb-6">Create your first {type.replace('-', ' ')} to get started.</p>
          <Link
            href={createHref}
            className="inline-flex items-center gap-2 px-5 py-2.5 rounded-xl bg-blue-600 text-white font-medium hover:bg-blue-700"
          >
            {createLabel}
          </Link>
        </div>
      ) : (
        <div className="space-y-3">
          {docs.map((doc) => {
            const StatusIcon = STATUS_ICONS[doc.status] || Clock
            return (
              <div
                key={doc.id}
                className="bg-slate-800/50 border border-white/5 rounded-xl p-5 hover:border-white/10 transition-all"
              >
                <div className="flex items-start justify-between gap-4">
                  <div className="flex-1 min-w-0">
                    <div className="flex items-center gap-3 mb-1.5">
                      <h3 className="font-semibold text-white truncate">{doc.number}</h3>
                      <span className={`inline-flex items-center gap-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${STATUS_STYLES[doc.status]}`}>
                        <StatusIcon className="w-3 h-3" />
                        {doc.status}
                      </span>
                    </div>
                    <p className="text-slate-300 text-sm">{doc.clientName}</p>
                    <p className="text-slate-500 text-xs mt-1">
                      {doc.projectName} ‚Ä¢ {formatDate(doc.createdAt)}
                    </p>
                  </div>

                  <div className="text-right flex-shrink-0">
                    <p className="text-lg font-bold text-white">{formatCurrency(doc.total)}</p>
                    {doc.signedFileUrl && (
                      <a
                        href={doc.signedFileUrl}
                        target="_blank"
                        rel="noopener noreferrer"
                        className="text-xs text-green-400 flex items-center gap-1 mt-1 justify-end"
                      >
                        <CheckCircle className="w-3 h-3" /> Signed
                      </a>
                    )}
                  </div>
                </div>

                <div className="flex items-center gap-2 mt-4 pt-3 border-t border-white/5">
                  {doc.signedFileUrl && (
                    <a
                      href={doc.signedFileUrl}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="text-xs px-3 py-1.5 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600/30 flex items-center gap-1.5"
                    >
                      <Download className="w-3 h-3" /> Download Signed
                    </a>
                  )}
                  <button
                    onClick={() => doc.id && handleDelete(doc.id)}
                    disabled={deleting === doc.id}
                    className="text-xs px-3 py-1.5 rounded-lg bg-red-600/10 text-red-400 hover:bg-red-600/20 flex items-center gap-1.5 ml-auto"
                  >
                    {deleting === doc.id ? <Loader2 className="w-3 h-3 animate-spin" /> : <Trash2 className="w-3 h-3" />}
                    Delete
                  </button>
                </div>
              </div>
            )
          })}
        </div>
      )}
    </div>
  )
}


==========================================================================================

--- file: app/admin/_components/SignaturePad.tsx ---
'use client'

import { useRef, useState, useEffect, useCallback } from 'react'
import { Pencil, RotateCcw, Save, CheckCircle, Loader2 } from 'lucide-react'
import { ref, uploadString, getDownloadURL } from 'firebase/storage'
import { ensureStorage } from '@/lib/firebase-auth'

interface SignaturePadProps {
  onSignatureChange: (dataUrl: string | null) => void
  savedSignatureUrl?: string | null
  label?: string
  compact?: boolean
}

export function SignaturePad({ onSignatureChange, savedSignatureUrl, label = 'Signature', compact = false }: SignaturePadProps) {
  const canvasRef = useRef<HTMLCanvasElement>(null)
  const [isDrawing, setIsDrawing] = useState(false)
  const [hasDrawn, setHasDrawn] = useState(false)
  const [useSaved, setUseSaved] = useState(!!savedSignatureUrl)
  const [saving, setSaving] = useState(false)
  const [saved, setSaved] = useState(false)

  useEffect(() => {
    const canvas = canvasRef.current
    if (!canvas) return
    const ctx = canvas.getContext('2d')
    if (!ctx) return
    ctx.strokeStyle = '#1a1a2e'
    ctx.lineWidth = 2.5
    ctx.lineCap = 'round'
    ctx.lineJoin = 'round'
  }, [])

  useEffect(() => {
    if (savedSignatureUrl && useSaved) {
      onSignatureChange(savedSignatureUrl)
    }
  }, [savedSignatureUrl, useSaved])

  const getPos = (e: React.MouseEvent | React.TouchEvent) => {
    const canvas = canvasRef.current
    if (!canvas) return { x: 0, y: 0 }
    const rect = canvas.getBoundingClientRect()
    const scaleX = canvas.width / rect.width
    const scaleY = canvas.height / rect.height
    if ('touches' in e) {
      return {
        x: (e.touches[0].clientX - rect.left) * scaleX,
        y: (e.touches[0].clientY - rect.top) * scaleY,
      }
    }
    return {
      x: (e.clientX - rect.left) * scaleX,
      y: (e.clientY - rect.top) * scaleY,
    }
  }

  const startDrawing = (e: React.MouseEvent | React.TouchEvent) => {
    e.preventDefault()
    setIsDrawing(true)
    setUseSaved(false)
    const { x, y } = getPos(e)
    const ctx = canvasRef.current?.getContext('2d')
    if (!ctx) return
    ctx.beginPath()
    ctx.moveTo(x, y)
  }

  const draw = (e: React.MouseEvent | React.TouchEvent) => {
    if (!isDrawing) return
    e.preventDefault()
    const { x, y } = getPos(e)
    const ctx = canvasRef.current?.getContext('2d')
    if (!ctx) return
    ctx.lineTo(x, y)
    ctx.stroke()
    setHasDrawn(true)
  }

  const stopDrawing = () => {
    setIsDrawing(false)
    if (hasDrawn && canvasRef.current) {
      onSignatureChange(canvasRef.current.toDataURL('image/png'))
    }
  }

  const clearCanvas = () => {
    const canvas = canvasRef.current
    if (!canvas) return
    const ctx = canvas.getContext('2d')
    if (!ctx) return
    ctx.clearRect(0, 0, canvas.width, canvas.height)
    setHasDrawn(false)
    setSaved(false)
    onSignatureChange(null)
  }

  const saveAsDefault = async () => {
    if (!canvasRef.current) return
    const s = ensureStorage()
    if (!s) { console.warn('Firebase Storage not configured'); return }
    setSaving(true)
    try {
      const dataUrl = canvasRef.current.toDataURL('image/png')
      const storageRef = ref(s, 'admin/signature/carlos-default.png')
      await uploadString(storageRef, dataUrl, 'data_url')
      const url = await getDownloadURL(storageRef)
      onSignatureChange(url)
      setSaved(true)
      setTimeout(() => setSaved(false), 2000)
    } catch (err) {
      console.error('Failed to save signature:', err)
    }
    setSaving(false)
  }

  const h = compact ? 100 : 150

  return (
    <div className="space-y-2">
      <div className="flex items-center justify-between">
        <label className="text-sm font-medium text-slate-300 flex items-center gap-2">
          <Pencil className="w-3.5 h-3.5" />
          {label}
        </label>
        <div className="flex gap-2">
          {savedSignatureUrl && !useSaved && (
            <button
              type="button"
              onClick={() => {
                setUseSaved(true)
                onSignatureChange(savedSignatureUrl)
              }}
              className="text-xs px-2.5 py-1 rounded-lg bg-blue-600/20 text-blue-400 hover:bg-blue-600/30"
            >
              Use Saved
            </button>
          )}
          {hasDrawn && (
            <>
              <button
                type="button"
                onClick={saveAsDefault}
                disabled={saving}
                className="text-xs px-2.5 py-1 rounded-lg bg-green-600/20 text-green-400 hover:bg-green-600/30 flex items-center gap-1"
              >
                {saving ? <Loader2 className="w-3 h-3 animate-spin" /> : saved ? <CheckCircle className="w-3 h-3" /> : <Save className="w-3 h-3" />}
                {saved ? 'Saved!' : 'Save as Default'}
              </button>
              <button
                type="button"
                onClick={clearCanvas}
                className="text-xs px-2.5 py-1 rounded-lg bg-red-600/20 text-red-400 hover:bg-red-600/30 flex items-center gap-1"
              >
                <RotateCcw className="w-3 h-3" /> Clear
              </button>
            </>
          )}
        </div>
      </div>

      {useSaved && savedSignatureUrl ? (
        <div className="relative border border-white/10 rounded-xl bg-white p-4 flex items-center justify-center" style={{ height: h }}>
          <img src={savedSignatureUrl} alt="Saved signature" className="max-h-full max-w-full object-contain" />
          <button
            type="button"
            onClick={() => { setUseSaved(false); clearCanvas() }}
            className="absolute top-2 right-2 text-xs px-2 py-1 rounded bg-slate-200 text-slate-600 hover:bg-slate-300"
          >
            Draw New
          </button>
        </div>
      ) : (
        <canvas
          ref={canvasRef}
          width={600}
          height={h * 2}
          className="w-full border border-white/10 rounded-xl bg-white cursor-crosshair touch-none"
          style={{ height: h }}
          onMouseDown={startDrawing}
          onMouseMove={draw}
          onMouseUp={stopDrawing}
          onMouseLeave={stopDrawing}
          onTouchStart={startDrawing}
          onTouchMove={draw}
          onTouchEnd={stopDrawing}
        />
      )}
      {!hasDrawn && !useSaved && (
        <p className="text-xs text-slate-500 text-center">Draw your signature above</p>
      )}
    </div>
  )
}


==========================================================================================

--- file: app/admin/field-notes/page.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { FileText, Camera, MapPin, Clock, Save, ArrowLeft, Plus, X, CheckCircle, Loader2 } from 'lucide-react'
import { cn } from '@/lib/utils'
import { SERVICES } from '@/lib/constants'

export default function FieldNotesPage() {
  const [isCreating, setIsCreating] = useState(false)
  const [isSaving, setIsSaving] = useState(false)
  const [saveSuccess, setSaveSuccess] = useState(false)
  const [photos, setPhotos] = useState<string[]>([])
  
  const [formData, setFormData] = useState({
    projectName: '', clientName: '', address: '', serviceType: '',
    notes: '', measurements: '', materialsNeeded: '', estimatedCost: '', nextSteps: '',
  })

  const existingNotes = [
    {
      id: '1', projectName: 'Johnson Kitchen Remodel', clientName: 'Sarah Johnson',
      address: '456 Oak St, Bethesda, MD', date: '2024-01-25', serviceType: 'kitchen',
      notes: 'Measured existing cabinets. Client wants white shaker style with quartz countertops.',
      estimatedCost: '$35,000 - $42,000', status: 'complete',
    },
    {
      id: '2', projectName: 'Martinez Deck Repair', clientName: 'Roberto Martinez',
      address: '789 Pine Ave, Silver Spring, MD', date: '2024-01-24', serviceType: 'deck',
      notes: 'Deck has significant rot on north side. Recommend full replacement.',
      estimatedCost: '$12,000 - $15,000', status: 'draft',
    },
  ]

  const handlePhotoUpload = () => {
    setPhotos([...photos, `https://images.unsplash.com/photo-${Date.now()}?w=400`])
  }

  const handleSave = async () => {
    setIsSaving(true)
    await new Promise((r) => setTimeout(r, 1500))
    setIsSaving(false)
    setSaveSuccess(true)
    setTimeout(() => { setSaveSuccess(false); setIsCreating(false) }, 2000)
  }

  if (saveSuccess) {
    return (
      <div className="min-h-screen bg-dark-50 flex items-center justify-center p-4">
        <div className="bg-white rounded-2xl p-8 text-center max-w-sm">
          <CheckCircle className="w-16 h-16 text-green-600 mx-auto mb-4" />
          <h2 className="text-xl font-bold text-dark-900 mb-2">Note Saved!</h2>
          <p className="text-dark-500">Your field note has been saved.</p>
        </div>
      </div>
    )
  }

  if (isCreating) {
    return (
      <div className="min-h-screen bg-dark-50">
        <header className="bg-white border-b border-dark-100 sticky top-0 z-40">
          <div className="max-w-2xl mx-auto px-4 py-4 flex items-center justify-between">
            <button onClick={() => setIsCreating(false)} className="p-2"><ArrowLeft className="w-6 h-6" /></button>
            <h1 className="font-display font-bold">New Field Note</h1>
            <button onClick={handleSave} disabled={isSaving} className="text-primary-600 font-medium">
              {isSaving ? <Loader2 className="w-5 h-5 animate-spin" /> : 'Save'}
            </button>
          </div>
        </header>

        <div className="max-w-2xl mx-auto p-4 space-y-6">
          <div className="bg-white rounded-xl p-4 space-y-4">
            <h2 className="font-semibold text-dark-900">Project Info</h2>
            <input type="text" value={formData.projectName} onChange={(e) => setFormData({...formData, projectName: e.target.value})} placeholder="Project Name *" className="input" />
            <input type="text" value={formData.clientName} onChange={(e) => setFormData({...formData, clientName: e.target.value})} placeholder="Client Name *" className="input" />
            <div className="relative">
              <MapPin className="w-5 h-5 absolute left-3 top-1/2 -translate-y-1/2 text-dark-400" />
              <input type="text" value={formData.address} onChange={(e) => setFormData({...formData, address: e.target.value})} placeholder="Address *" className="input pl-10" />
            </div>
            <select value={formData.serviceType} onChange={(e) => setFormData({...formData, serviceType: e.target.value})} className="input">
              <option value="">Select Service Type</option>
              {SERVICES.map((s) => <option key={s.id} value={s.id}>{s.name}</option>)}
            </select>
          </div>

          <div className="bg-white rounded-xl p-4">
            <h2 className="font-semibold text-dark-900 mb-4">Photos</h2>
            <div className="grid grid-cols-3 gap-3">
              {photos.map((_, i) => (
                <div key={i} className="relative aspect-square bg-dark-200 rounded-lg">
                  <button onClick={() => setPhotos(photos.filter((_,idx)=>idx!==i))} className="absolute top-1 right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center"><X className="w-4 h-4" /></button>
                </div>
              ))}
              <button onClick={handlePhotoUpload} className="aspect-square border-2 border-dashed border-dark-200 rounded-lg flex flex-col items-center justify-center text-dark-400 hover:border-primary-500 hover:text-primary-500">
                <Camera className="w-8 h-8 mb-1" /><span className="text-xs">Add Photo</span>
              </button>
            </div>
          </div>

          <div className="bg-white rounded-xl p-4 space-y-4">
            <h2 className="font-semibold text-dark-900">Notes & Details</h2>
            <textarea value={formData.notes} onChange={(e) => setFormData({...formData, notes: e.target.value})} rows={4} placeholder="Site Notes *" className="textarea" />
            <textarea value={formData.measurements} onChange={(e) => setFormData({...formData, measurements: e.target.value})} rows={2} placeholder="Measurements" className="textarea" />
            <textarea value={formData.materialsNeeded} onChange={(e) => setFormData({...formData, materialsNeeded: e.target.value})} rows={2} placeholder="Materials Needed" className="textarea" />
          </div>

          <div className="bg-white rounded-xl p-4 space-y-4">
            <h2 className="font-semibold text-dark-900">Estimate</h2>
            <input type="text" value={formData.estimatedCost} onChange={(e) => setFormData({...formData, estimatedCost: e.target.value})} placeholder="Estimated Cost (e.g., $15,000 - $20,000)" className="input" />
            <textarea value={formData.nextSteps} onChange={(e) => setFormData({...formData, nextSteps: e.target.value})} rows={2} placeholder="Next Steps" className="textarea" />
          </div>

          <button onClick={handleSave} disabled={isSaving} className="btn-gold w-full btn-lg">
            {isSaving ? <><Loader2 className="w-5 h-5 animate-spin" /> Saving...</> : <><Save className="w-5 h-5" /> Save Field Note</>}
          </button>
        </div>
      </div>
    )
  }

  return (
    <div className="min-h-screen bg-dark-50">
      <header className="bg-white border-b border-dark-100 sticky top-0 z-40">
        <div className="max-w-2xl mx-auto px-4 py-4 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <Link href="/admin" className="p-2"><ArrowLeft className="w-6 h-6" /></Link>
            <div>
              <h1 className="text-xl font-display font-bold">Field Notes</h1>
              <p className="text-sm text-dark-500">Job site documentation</p>
            </div>
          </div>
          <button onClick={() => setIsCreating(true)} className="btn-gold"><Plus className="w-5 h-5" /> New</button>
        </div>
      </header>

      <div className="max-w-2xl mx-auto p-4 space-y-4">
        {existingNotes.map((note) => (
          <div key={note.id} className="bg-white rounded-xl border border-dark-100 p-4">
            <div className="flex items-start justify-between mb-3">
              <div>
                <h3 className="font-semibold text-dark-900">{note.projectName}</h3>
                <p className="text-sm text-dark-500">{note.clientName}</p>
              </div>
              <span className={cn('px-2 py-1 text-xs font-medium rounded-full', note.status === 'complete' ? 'bg-green-100 text-green-700' : 'bg-yellow-100 text-yellow-700')}>
                {note.status === 'complete' ? 'Complete' : 'Draft'}
              </span>
            </div>
            <div className="flex items-center gap-4 text-sm text-dark-500 mb-3">
              <span className="flex items-center gap-1"><MapPin className="w-4 h-4" />{note.address}</span>
              <span className="flex items-center gap-1"><Clock className="w-4 h-4" />{note.date}</span>
            </div>
            <p className="text-dark-600 text-sm mb-3">{note.notes}</p>
            {note.estimatedCost && (
              <div className="bg-green-50 rounded-lg px-3 py-2 text-sm">
                <span className="text-green-600">Estimate:</span> <span className="font-medium text-green-700">{note.estimatedCost}</span>
              </div>
            )}
          </div>
        ))}
      </div>
    </div>
  )
}


==========================================================================================

--- file: app/admin/documents/page.tsx ---
'use client'

import { useState, useEffect, useRef } from 'react'
import { getAllDocuments, uploadSignedDocument, type DocumentRecord } from '@/lib/firebase-auth'
import { FileText, Upload, Download, CheckCircle, Loader2, Filter, FileSignature } from 'lucide-react'

export default function SignedDocumentsPage() {
  const [docs, setDocs] = useState<DocumentRecord[]>([])
  const [loading, setLoading] = useState(true)
  const [uploading, setUploading] = useState<string | null>(null)
  const [filter, setFilter] = useState<'all' | 'invoice' | 'change-order' | 'contract'>('all')
  const fileInputRef = useRef<HTMLInputElement>(null)
  const [uploadTargetId, setUploadTargetId] = useState<string | null>(null)
  const [uploadTargetType, setUploadTargetType] = useState<string>('')

  useEffect(() => { loadDocs() }, [])

  const loadDocs = async () => {
    try {
      const data = await getAllDocuments()
      setDocs(data)
    } catch (err) { console.error('Load failed:', err) }
    setLoading(false)
  }

  const triggerUpload = (id: string, type: string) => {
    setUploadTargetId(id)
    setUploadTargetType(type)
    fileInputRef.current?.click()
  }

  const handleUpload = async (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0]
    if (!file || !uploadTargetId) return
    setUploading(uploadTargetId)
    try {
      await uploadSignedDocument(file, uploadTargetId, uploadTargetType)
      await loadDocs()
    } catch (err) { console.error('Upload failed:', err) }
    setUploading(null)
    setUploadTargetId(null)
    if (fileInputRef.current) fileInputRef.current.value = ''
  }

  const filtered = filter === 'all' ? docs : docs.filter(d => d.type === filter)
  const signed = filtered.filter(d => d.signedFileUrl)
  const unsigned = filtered.filter(d => !d.signedFileUrl)

  const typeLabel = (t: string) => t === 'change-order' ? 'Change Order' : t.charAt(0).toUpperCase() + t.slice(1)
  const typeBadge = (t: string) => {
    const colors: Record<string, string> = { invoice: 'bg-blue-500/20 text-blue-400', 'change-order': 'bg-purple-500/20 text-purple-400', contract: 'bg-green-500/20 text-green-400' }
    return colors[t] || 'bg-slate-500/20 text-slate-400'
  }

  const formatDate = (ts: any) => {
    if (!ts) return '‚Äî'
    const d = ts.toDate ? ts.toDate() : new Date(ts)
    return d.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })
  }

  const fmt = (n: number) => `$${n.toLocaleString('en-US', { minimumFractionDigits: 2 })}`

  if (loading) return <div className="flex items-center justify-center py-20"><Loader2 className="w-8 h-8 text-blue-500 animate-spin" /></div>

  return (
    <div className="p-6 max-w-6xl mx-auto">
      <input ref={fileInputRef} type="file" accept=".pdf,.jpg,.png" className="hidden" onChange={handleUpload} />

      <div className="flex items-center justify-between mb-8">
        <div>
          <h1 className="text-2xl font-bold text-white flex items-center gap-3"><FileSignature className="w-6 h-6 text-green-400" /> Signed Documents</h1>
          <p className="text-slate-400 text-sm mt-1">Upload and manage signed documents</p>
        </div>
      </div>

      {/* Filters */}
      <div className="flex gap-2 mb-6 flex-wrap">
        {(['all', 'invoice', 'change-order', 'contract'] as const).map(f => (
          <button key={f} onClick={() => setFilter(f)} className={`px-4 py-2 rounded-xl text-sm font-medium transition-all ${filter === f ? 'bg-blue-600 text-white' : 'bg-slate-800 text-slate-400 hover:text-white'}`}>
            {f === 'all' ? 'All' : typeLabel(f)}s
          </button>
        ))}
      </div>

      {/* Signed */}
      {signed.length > 0 && (
        <div className="mb-8">
          <h2 className="text-lg font-semibold text-white mb-4 flex items-center gap-2"><CheckCircle className="w-5 h-5 text-green-400" /> Signed ({signed.length})</h2>
          <div className="space-y-3">
            {signed.map(doc => (
              <div key={doc.id} className="bg-slate-800/50 border border-green-500/20 rounded-xl p-5 flex items-center justify-between gap-4">
                <div className="flex-1 min-w-0">
                  <div className="flex items-center gap-3 mb-1">
                    <span className="font-semibold text-white">{doc.number}</span>
                    <span className={`text-xs px-2 py-0.5 rounded-full font-medium ${typeBadge(doc.type)}`}>{typeLabel(doc.type)}</span>
                  </div>
                  <p className="text-slate-400 text-sm">{doc.clientName} ‚Ä¢ {fmt(doc.total)} ‚Ä¢ {formatDate(doc.createdAt)}</p>
                </div>
                <a href={doc.signedFileUrl} target="_blank" rel="noopener noreferrer" className="flex items-center gap-2 px-4 py-2.5 rounded-xl bg-green-600/20 text-green-400 hover:bg-green-600/30 text-sm font-medium">
                  <Download className="w-4 h-4" /> View Signed
                </a>
              </div>
            ))}
          </div>
        </div>
      )}

      {/* Awaiting Signature */}
      {unsigned.length > 0 && (
        <div>
          <h2 className="text-lg font-semibold text-white mb-4 flex items-center gap-2"><FileText className="w-5 h-5 text-amber-400" /> Awaiting Signature ({unsigned.length})</h2>
          <div className="space-y-3">
            {unsigned.map(doc => (
              <div key={doc.id} className="bg-slate-800/50 border border-white/5 rounded-xl p-5 flex items-center justify-between gap-4">
                <div className="flex-1 min-w-0">
                  <div className="flex items-center gap-3 mb-1">
                    <span className="font-semibold text-white">{doc.number}</span>
                    <span className={`text-xs px-2 py-0.5 rounded-full font-medium ${typeBadge(doc.type)}`}>{typeLabel(doc.type)}</span>
                    <span className={`text-xs px-2 py-0.5 rounded-full font-medium ${doc.status === 'sent' ? 'bg-blue-500/20 text-blue-400' : 'bg-slate-500/20 text-slate-400'}`}>{doc.status}</span>
                  </div>
                  <p className="text-slate-400 text-sm">{doc.clientName} ‚Ä¢ {fmt(doc.total)} ‚Ä¢ {formatDate(doc.createdAt)}</p>
                </div>
                <button
                  onClick={() => doc.id && triggerUpload(doc.id, doc.type)}
                  disabled={uploading === doc.id}
                  className="flex items-center gap-2 px-4 py-2.5 rounded-xl bg-amber-600/20 text-amber-400 hover:bg-amber-600/30 text-sm font-medium"
                >
                  {uploading === doc.id ? <Loader2 className="w-4 h-4 animate-spin" /> : <Upload className="w-4 h-4" />}
                  Upload Signed
                </button>
              </div>
            ))}
          </div>
        </div>
      )}

      {filtered.length === 0 && (
        <div className="bg-slate-800/50 border border-white/5 rounded-2xl p-12 text-center">
          <FileSignature className="w-12 h-12 text-slate-600 mx-auto mb-4" />
          <p className="text-slate-400 text-lg">No documents yet</p>
          <p className="text-slate-500 text-sm mt-1">Create invoices, change orders, or contracts to get started.</p>
        </div>
      )}
    </div>
  )
}


==========================================================================================

--- file: app/admin/login/page.tsx ---
'use client'

import { useState } from 'react'
import { useRouter } from 'next/navigation'
import { loginWithEmail, loginWithGoogle, isFirebaseConfigured } from '@/lib/firebase-auth'
import { Lock, Mail, Eye, EyeOff, Loader2, Shield, AlertTriangle } from 'lucide-react'

export default function AdminLoginPage() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [showPw, setShowPw] = useState(false)
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const router = useRouter()
  const configured = isFirebaseConfigured()

  const handleEmailLogin = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')
    setLoading(true)
    try {
      await loginWithEmail(email, password)
      router.replace('/admin')
    } catch (err: any) {
      setError(err.message || 'Login failed. Check your credentials.')
    } finally {
      setLoading(false)
    }
  }

  const handleGoogleLogin = async () => {
    setError('')
    setLoading(true)
    try {
      await loginWithGoogle()
      router.replace('/admin')
    } catch (err: any) {
      setError(err.message || 'Google login failed.')
    } finally {
      setLoading(false)
    }
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900 flex items-center justify-center p-4">
      {/* Background Pattern */}
      <div className="fixed inset-0 opacity-5">
        <div className="absolute inset-0" style={{
          backgroundImage: `url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,
        }} />
      </div>

      <div className="relative w-full max-w-md">
        {/* Card */}
        <div className="bg-white/[0.03] backdrop-blur-xl border border-white/10 rounded-2xl shadow-2xl overflow-hidden">
          {/* Header */}
          <div className="bg-gradient-to-r from-blue-600/20 to-indigo-600/20 border-b border-white/10 px-8 py-8 text-center">
            <div className="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center mx-auto mb-4 shadow-lg shadow-blue-500/25">
              <Shield className="w-8 h-8 text-white" />
            </div>
            <h1 className="text-2xl font-bold text-white">CR Home Pros</h1>
            <p className="text-blue-200/60 text-sm mt-1">Admin Portal</p>
          </div>

          {/* Form */}
          <div className="px-8 py-8">
            {!configured && (
              <div className="mb-6 p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl">
                <div className="flex items-start gap-3">
                  <AlertTriangle className="w-5 h-5 text-amber-400 flex-shrink-0 mt-0.5" />
                  <div>
                    <p className="text-amber-300 text-sm font-semibold">Firebase Not Configured</p>
                    <p className="text-amber-300/70 text-xs mt-1">
                      Create <code className="bg-white/10 px-1.5 py-0.5 rounded">.env.local</code> from{' '}
                      <code className="bg-white/10 px-1.5 py-0.5 rounded">.env.example</code> and add your Firebase keys.
                      Or run: <code className="bg-white/10 px-1.5 py-0.5 rounded">vercel env pull .env.local</code>
                    </p>
                  </div>
                </div>
              </div>
            )}

            {error && (
              <div className="mb-6 p-3 bg-red-500/10 border border-red-500/20 rounded-xl text-red-300 text-sm text-center">
                {error}
              </div>
            )}

            <form onSubmit={handleEmailLogin} className="space-y-5">
              <div>
                <label className="block text-sm font-medium text-blue-200/80 mb-2">Email</label>
                <div className="relative">
                  <Mail className="absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-300/40" />
                  <input
                    type="email"
                    value={email}
                    onChange={e => setEmail(e.target.value)}
                    required
                    className="w-full pl-11 pr-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all"
                    placeholder="Email address"
                  />
                </div>
              </div>

              <div>
                <label className="block text-sm font-medium text-blue-200/80 mb-2">Password</label>
                <div className="relative">
                  <Lock className="absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 text-blue-300/40" />
                  <input
                    type={showPw ? 'text' : 'password'}
                    value={password}
                    onChange={e => setPassword(e.target.value)}
                    required
                    className="w-full pl-11 pr-12 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all"
                    placeholder="Password"
                  />
                  <button
                    type="button"
                    onClick={() => setShowPw(!showPw)}
                    className="absolute right-3.5 top-1/2 -translate-y-1/2 text-white/30 hover:text-white/60 transition-colors"
                  >
                    {showPw ? <EyeOff className="w-4 h-4" /> : <Eye className="w-4 h-4" />}
                  </button>
                </div>
              </div>

              <button
                type="submit"
                disabled={loading}
                className="w-full py-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-semibold hover:from-blue-500 hover:to-indigo-500 focus:outline-none focus:ring-2 focus:ring-blue-500/50 disabled:opacity-50 transition-all flex items-center justify-center gap-2"
              >
                {loading ? <Loader2 className="w-4 h-4 animate-spin" /> : null}
                {loading ? 'Signing In...' : 'Sign In'}
              </button>
            </form>

            {/* Divider */}
            <div className="relative my-6">
              <div className="absolute inset-0 flex items-center">
                <div className="w-full border-t border-white/10" />
              </div>
              <div className="relative flex justify-center text-sm">
                <span className="px-3 bg-transparent text-white/30">or</span>
              </div>
            </div>

            {/* Google Login */}
            <button
              onClick={handleGoogleLogin}
              disabled={loading}
              className="w-full py-3 bg-white/5 border border-white/10 rounded-xl text-white/80 font-medium hover:bg-white/10 focus:outline-none focus:ring-2 focus:ring-white/20 disabled:opacity-50 transition-all flex items-center justify-center gap-3"
            >
              <svg className="w-5 h-5" viewBox="0 0 24 24">
                <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92a5.06 5.06 0 0 1-2.2 3.32v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.1z"/>
                <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
                <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
                <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
              </svg>
              Sign in with Google
            </button>
          </div>

          {/* Footer */}
          <div className="px-8 pb-6 text-center">
            <p className="text-xs text-white/20">
              Authorized personnel only ‚Ä¢ CRGS, Inc.
            </p>
          </div>
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: app/api/contact/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { logContactInDrive, isDriveConfigured } from '@/lib/google-drive'
import { sendContactFormNotification } from '@/lib/email'

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const { name, email, phone, message, service } = body

    if (!name || !email || !phone || !message) {
      return NextResponse.json(
        { success: false, error: 'Missing required fields' },
        { status: 400 }
      )
    }

    console.log(`\nüí¨ New Contact: ${name}`)

    // Log to Google Drive
    if (isDriveConfigured()) {
      try {
        await logContactInDrive({ name, email, phone, message, service })
        console.log('‚úÖ Contact logged to Google Drive')
      } catch (driveError: any) {
        console.error('‚ùå Google Drive error (non-fatal):', driveError?.message || driveError)
      }
    }

    // Send email notification
    try {
      console.log('üìß Sending contact notification...')
      await sendContactFormNotification({ name, email, phone, message, service })
      console.log('üìß Contact notification sent ‚úÖ')
    } catch (emailError: any) {
      console.error('‚ùå Email error:', emailError?.message || emailError)
    }

    return NextResponse.json({ success: true, message: 'Message sent!' })
  } catch (error: any) {
    console.error('‚ùå Error processing contact:', error?.message || error)
    return NextResponse.json(
      { success: false, error: 'Failed to send message' },
      { status: 500 }
    )
  }
}


==========================================================================================

--- file: app/api/auth/google/callback/route.ts ---
// ============================================
// GET /api/auth/google/callback
// Handles OAuth2 callback from Google Drive authorization
// One-time setup: Carlos clicks "Connect Drive" in admin,
// authorizes, gets redirected here with code, we exchange for tokens.
// ============================================

import { NextRequest, NextResponse } from 'next/server'
import { getTokensFromCode } from '@/lib/google-drive'

export async function GET(request: NextRequest) {
  const code = request.nextUrl.searchParams.get('code')
  const error = request.nextUrl.searchParams.get('error')

  if (error) {
    return NextResponse.redirect(new URL('/admin?drive=error&msg=' + error, request.url))
  }

  if (!code) {
    return NextResponse.redirect(new URL('/admin?drive=error&msg=no_code', request.url))
  }

  try {
    const tokens = await getTokensFromCode(code)
    
    // In production, store this securely. For now, display it so it can be
    // copied to GOOGLE_DRIVE_REFRESH_TOKEN env variable.
    const refreshToken = tokens.refresh_token || 'No refresh token (already authorized?)'
    
    // Redirect to admin with success + token display
    const adminUrl = new URL('/admin', request.url)
    adminUrl.searchParams.set('drive', 'success')
    adminUrl.searchParams.set('token', refreshToken)
    
    return NextResponse.redirect(adminUrl)
  } catch (err: any) {
    console.error('Google OAuth error:', err)
    return NextResponse.redirect(
      new URL('/admin?drive=error&msg=' + encodeURIComponent(err.message || 'unknown'), request.url)
    )
  }
}


==========================================================================================

--- file: app/api/images/route.ts ---
// ============================================
// POST /api/images ‚Äî Upload images to Firebase Storage
// ============================================
import { NextRequest, NextResponse } from 'next/server'
import { getStorage } from 'firebase-admin/storage'
import { getApps } from 'firebase-admin/app'

// Lazy init admin (reuse existing if available)
function getBucket() {
  if (getApps().length === 0) {
    // Import will initialize if needed
    require('@/lib/firebase-admin')
  }
  return getStorage().bucket()
}

export async function POST(request: NextRequest) {
  try {
    const formData = await request.formData()
    const files = formData.getAll('files') as File[]
    const folder = formData.get('folder') as string || 'projects/uploads'

    if (!files.length) {
      return NextResponse.json({ error: 'No files provided' }, { status: 400 })
    }

    const bucket = getBucket()
    const uploaded: { name: string; url: string; size: number }[] = []

    for (const file of files) {
      const buffer = Buffer.from(await file.arrayBuffer())
      const safeName = file.name.replace(/[^a-zA-Z0-9._-]/g, '-').toLowerCase()
      const storagePath = `${folder}/${safeName}`

      const fileRef = bucket.file(storagePath)
      
      await fileRef.save(buffer, {
        metadata: {
          contentType: file.type,
          cacheControl: 'public, max-age=31536000',
        },
      })

      await fileRef.makePublic()

      const bucketName = bucket.name
      const url = `https://firebasestorage.googleapis.com/v0/b/${bucketName}/o/${encodeURIComponent(storagePath)}?alt=media`

      uploaded.push({
        name: safeName,
        url,
        size: buffer.length,
      })
    }

    return NextResponse.json({
      success: true,
      uploaded,
      count: uploaded.length,
    })
  } catch (error: unknown) {
    console.error('Image upload error:', error)
    const message = error instanceof Error ? error.message : 'Upload failed'
    return NextResponse.json({ error: message }, { status: 500 })
  }
}


==========================================================================================

--- file: app/api/referrals/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { createReferralInDrive, isDriveConfigured } from '@/lib/google-drive'
import { sendReferralNotification } from '@/lib/email'

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const { referrerName, referrerEmail, referrerPhone, referralName, referralPhone, referralEmail, projectType, projectDetails, paymentMethod } = body

    if (!referrerName || !referrerEmail || !referralName || !referralPhone) {
      return NextResponse.json({ success: false, error: 'Missing required fields' }, { status: 400 })
    }

    console.log(`\nü§ù New Referral: ${referrerName} ‚Üí ${referralName}`)

    if (isDriveConfigured()) {
      try {
        await createReferralInDrive({
          referrerName,
          referrerEmail,
          referrerPhone,
          referralName,
          referralPhone,
          referralEmail: referralEmail || '',
          projectType: projectType || '',
          projectDetails: projectDetails || '',
          paymentMethod: paymentMethod || 'Not specified',
        })
        console.log('‚úÖ Referral logged to Google Drive')
      } catch (driveError: any) {
        console.error('‚ùå Drive error (non-fatal):', driveError?.message)
      }
    }

    try {
      await sendReferralNotification({ referrerName, referrerEmail, referrerPhone, referralName, referralPhone, projectType, projectDetails })
      console.log('üìß Referral notification sent ‚úÖ')
    } catch (emailError: any) {
      console.error('‚ùå Email error:', emailError?.message)
    }

    return NextResponse.json({ success: true, message: 'Referral submitted!' })
  } catch (error: any) {
    console.error('‚ùå Error processing referral:', error?.message)
    return NextResponse.json({ success: false, error: 'Failed to submit referral' }, { status: 500 })
  }
}


==========================================================================================

--- file: app/api/leads/route.ts ---
import { NextRequest, NextResponse } from 'next/server'

// Lead sources configuration ‚Äî direct contact only, no bidding platforms
const SOURCES = {
  craigslist: {
    name: 'Craigslist',
    baseUrl: 'https://washingtondc.craigslist.org',
    searchPaths: ['/search/sss?query=contractor', '/search/sss?query=remodel', '/search/sss?query=renovation'],
    enabled: true,
  },
  nextdoor: {
    name: 'NextDoor',
    baseUrl: 'https://nextdoor.com',
    enabled: true,
  },
  website: {
    name: 'CR Home Pros Website',
    baseUrl: 'https://crhomepros.com',
    enabled: true,
  },
}

// Keywords to search for
const SEARCH_KEYWORDS = [
  'kitchen remodel',
  'bathroom renovation',
  'basement finishing',
  'deck repair',
  'deck building',
  'roofing',
  'roof replacement',
  'painting contractor',
  'home renovation',
  'general contractor',
  'tile work',
  'flooring installation',
  'drywall repair',
  'handyman',
]

// Service area ZIP codes (DMV area)
const SERVICE_AREA_ZIPS = [
  '20814', '20815', '20816', // Bethesda
  '20901', '20902', '20903', // Silver Spring
  '20850', '20851', '20852', // Rockville
  '22201', '22202', '22203', // Arlington
  '20001', '20002', '20003', // DC
  '20740', '20742', // College Park
  '20781', '20782', '20783', '20784', // Hyattsville
]

interface Lead {
  id: string
  title: string
  description: string
  source: string
  sourceUrl: string
  location: string
  postedAt: string
  budgetRange?: string
  category: string
  contactMethod: string
  raw?: any
}

// Mock scraper functions - these would be replaced with actual scrapers
async function scrapeCraigslist(): Promise<Lead[]> {
  // In production, this would use cheerio/puppeteer to scrape Craigslist
  // For now, return mock data
  return [
    {
      id: 'cl-' + Date.now(),
      title: 'Looking for kitchen remodel contractor',
      description: 'Need full kitchen renovation including cabinets, countertops, backsplash.',
      source: 'craigslist',
      sourceUrl: 'https://washingtondc.craigslist.org/nva/hss/d/kitchen-remodel/123456.html',
      location: 'Bethesda, MD',
      postedAt: new Date().toISOString(),
      category: 'Kitchen',
      contactMethod: 'email',
    },
  ]
}

async function scrapeNextDoor(): Promise<Lead[]> {
  // NextDoor has business features
  return []
}

// Main scraper orchestrator
async function fetchAllLeads(): Promise<Lead[]> {
  const allLeads: Lead[] = []

  try {
    // Run all scrapers in parallel ‚Äî direct contact sources only
    const [craigslistLeads, nextdoorLeads] = await Promise.all([
      scrapeCraigslist().catch(() => []),
      scrapeNextDoor().catch(() => []),
    ])

    allLeads.push(...craigslistLeads, ...nextdoorLeads)
  } catch (error) {
    console.error('Error fetching leads:', error)
  }

  // Sort by most recent
  return allLeads.sort((a, b) => 
    new Date(b.postedAt).getTime() - new Date(a.postedAt).getTime()
  )
}

// Filter leads by service area
function filterByServiceArea(leads: Lead[]): Lead[] {
  // In production, would geocode and filter by distance
  return leads
}

// Categorize leads by type
function categorizeLeads(leads: Lead[]): Lead[] {
  const categoryKeywords: Record<string, string[]> = {
    Kitchen: ['kitchen', 'cabinet', 'countertop', 'backsplash'],
    Bathroom: ['bathroom', 'bath', 'shower', 'toilet', 'vanity'],
    Basement: ['basement', 'finish basement', 'unfinished'],
    Deck: ['deck', 'patio', 'outdoor'],
    Roofing: ['roof', 'shingle', 'gutter'],
    Painting: ['paint', 'painting', 'interior paint', 'exterior paint'],
    Flooring: ['floor', 'flooring', 'hardwood', 'tile', 'carpet'],
    General: ['renovation', 'remodel', 'contractor', 'handyman'],
  }

  return leads.map((lead) => {
    const text = `${lead.title} ${lead.description}`.toLowerCase()
    
    for (const [category, keywords] of Object.entries(categoryKeywords)) {
      if (keywords.some((kw) => text.includes(kw))) {
        return { ...lead, category }
      }
    }
    
    return { ...lead, category: 'General' }
  })
}

// Score leads by relevance/quality
function scoreLeads(leads: Lead[]): (Lead & { score: number })[] {
  return leads.map((lead) => {
    let score = 50 // Base score

    // Boost for budget mentioned
    if (lead.budgetRange) score += 20
    
    // Boost for being recent
    const hoursAgo = (Date.now() - new Date(lead.postedAt).getTime()) / (1000 * 60 * 60)
    if (hoursAgo < 6) score += 30
    else if (hoursAgo < 24) score += 15
    
    // Boost for certain high-value categories
    if (['Kitchen', 'Bathroom', 'Basement'].includes(lead.category)) score += 10

    return { ...lead, score }
  }).sort((a, b) => b.score - a.score)
}

// GET handler - fetch leads
export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams
    const source = searchParams.get('source') || 'all'
    const category = searchParams.get('category') || 'all'
    const refresh = searchParams.get('refresh') === 'true'

    let leads = await fetchAllLeads()
    
    // Filter by source
    if (source !== 'all') {
      leads = leads.filter((l) => l.source === source)
    }

    // Filter by category
    if (category !== 'all') {
      leads = leads.filter((l) => l.category === category)
    }

    // Categorize and score
    leads = categorizeLeads(leads)
    const scoredLeads = scoreLeads(leads)

    return NextResponse.json({
      success: true,
      count: scoredLeads.length,
      leads: scoredLeads,
      sources: SOURCES,
      lastUpdated: new Date().toISOString(),
    })
  } catch (error) {
    console.error('Error in leads API:', error)
    return NextResponse.json(
      { success: false, error: 'Failed to fetch leads' },
      { status: 500 }
    )
  }
}

// POST handler - mark lead status, save notes, etc.
export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const { leadId, action, data } = body

    switch (action) {
      case 'update_status':
        // Update lead status in database
        return NextResponse.json({ success: true, message: 'Status updated' })
      
      case 'save_lead':
        // Save lead to favorites
        return NextResponse.json({ success: true, message: 'Lead saved' })
      
      case 'dismiss_lead':
        // Mark lead as dismissed
        return NextResponse.json({ success: true, message: 'Lead dismissed' })
      
      case 'send_response':
        // Queue response to be sent
        return NextResponse.json({ success: true, message: 'Response queued' })
      
      default:
        return NextResponse.json(
          { success: false, error: 'Unknown action' },
          { status: 400 }
        )
    }
  } catch (error) {
    console.error('Error in leads POST:', error)
    return NextResponse.json(
      { success: false, error: 'Failed to process request' },
      { status: 500 }
    )
  }
}


==========================================================================================

--- file: app/api/projects/generate/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import {
  Document, Packer, Paragraph, TextRun, Table, TableRow, TableCell,
  HeadingLevel, AlignmentType, BorderStyle, WidthType, ShadingType,
} from 'docx'

export async function POST(req: NextRequest) {
  try {
    const body = await req.json()
    const {
      clientName, clientPhone, clientEmail, clientAddress,
      serviceType, serviceName, tierLabel,
      estimateMin, estimateMax,
      description, notes, startDate, estimatedCompletion,
      beforeImageUrls = [], afterImageUrls = [],
    } = body

    const today = new Date().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })
    const border = { style: BorderStyle.SINGLE, size: 1, color: 'CCCCCC' }
    const borders = { top: border, bottom: border, left: border, right: border }
    const cellMargins = { top: 80, bottom: 80, left: 120, right: 120 }

    const infoRow = (label: string, value: string) => {
      return new TableRow({
        children: [
          new TableCell({
            borders,
            width: { size: 2800, type: WidthType.DXA },
            shading: { fill: 'F0F4F8', type: ShadingType.CLEAR },
            margins: cellMargins,
            children: [new Paragraph({ children: [new TextRun({ text: label, bold: true, font: 'Arial', size: 20 })] })],
          }),
          new TableCell({
            borders,
            width: { size: 6560, type: WidthType.DXA },
            margins: cellMargins,
            children: [new Paragraph({ children: [new TextRun({ text: value || 'N/A', font: 'Arial', size: 20 })] })],
          }),
        ],
      })
    }

    const estimateStr = estimateMin && estimateMax
      ? `$${Number(estimateMin).toLocaleString()} - $${Number(estimateMax).toLocaleString()}`
      : 'To be determined'

    const doc = new Document({
      styles: {
        default: { document: { run: { font: 'Arial', size: 22 } } },
        paragraphStyles: [
          {
            id: 'Heading1', name: 'Heading 1', basedOn: 'Normal', next: 'Normal', quickFormat: true,
            run: { size: 36, bold: true, font: 'Arial', color: '1E2A85' },
            paragraph: { spacing: { before: 240, after: 240 }, outlineLevel: 0 },
          },
          {
            id: 'Heading2', name: 'Heading 2', basedOn: 'Normal', next: 'Normal', quickFormat: true,
            run: { size: 28, bold: true, font: 'Arial', color: '2A3AA6' },
            paragraph: { spacing: { before: 200, after: 120 }, outlineLevel: 1 },
          },
        ],
      },
      sections: [
        {
          properties: {
            page: {
              size: { width: 12240, height: 15840 },
              margin: { top: 1440, right: 1440, bottom: 1440, left: 1440 },
            },
          },
          children: [
            // Company Header
            new Paragraph({
              alignment: AlignmentType.CENTER,
              spacing: { after: 60 },
              children: [new TextRun({ text: 'CR HOME PROS', bold: true, size: 40, font: 'Arial', color: '1E2A85' })],
            }),
            new Paragraph({
              alignment: AlignmentType.CENTER,
              spacing: { after: 60 },
              children: [new TextRun({ text: 'CR Home Pros LLC', size: 20, font: 'Arial', color: '666666' })],
            }),
            new Paragraph({
              alignment: AlignmentType.CENTER,
              spacing: { after: 60 },
              children: [new TextRun({ text: '(240) 560-1498  |  crhomepros.com', size: 18, font: 'Arial', color: '888888' })],
            }),
            new Paragraph({
              alignment: AlignmentType.CENTER,
              spacing: { after: 200 },
              children: [new TextRun({ text: 'MHIC #05-132359  |  MHIC #109350', size: 16, font: 'Arial', color: '888888' })],
            }),

            // Divider
            new Paragraph({
              border: { bottom: { style: BorderStyle.SINGLE, size: 2, color: 'C4A052' } },
              spacing: { after: 300 },
              children: [],
            }),

            // Project Title
            new Paragraph({
              heading: HeadingLevel.HEADING_1,
              children: [new TextRun({ text: `Project: ${clientName}` })],
            }),
            new Paragraph({
              spacing: { after: 200 },
              children: [new TextRun({ text: `Created: ${today}`, color: '888888', size: 18, font: 'Arial' })],
            }),

            // Client Information Table
            new Paragraph({ heading: HeadingLevel.HEADING_2, children: [new TextRun('Client Information')] }),
            new Table({
              width: { size: 9360, type: WidthType.DXA },
              columnWidths: [2800, 6560],
              rows: [
                infoRow('Name', clientName),
                infoRow('Phone', clientPhone),
                infoRow('Email', clientEmail),
                infoRow('Address', clientAddress),
              ],
            }),

            new Paragraph({ spacing: { before: 300 }, children: [] }),

            // Service & Estimate Table
            new Paragraph({ heading: HeadingLevel.HEADING_2, children: [new TextRun('Service & Estimate')] }),
            new Table({
              width: { size: 9360, type: WidthType.DXA },
              columnWidths: [2800, 6560],
              rows: [
                infoRow('Service', serviceName || serviceType || 'N/A'),
                infoRow('Scope', tierLabel || 'N/A'),
                infoRow('Estimated Range', estimateStr),
                infoRow('Start Date', startDate || 'TBD'),
                infoRow('Est. Completion', estimatedCompletion || 'TBD'),
              ],
            }),

            new Paragraph({ spacing: { before: 300 }, children: [] }),

            // Job Description
            new Paragraph({ heading: HeadingLevel.HEADING_2, children: [new TextRun('Job Description')] }),
            new Paragraph({
              spacing: { after: 200 },
              children: [new TextRun({ text: description || 'No description provided.', font: 'Arial', size: 22 })],
            }),

            // Notes
            ...(notes
              ? [
                  new Paragraph({ heading: HeadingLevel.HEADING_2, children: [new TextRun('Internal Notes')] }),
                  new Paragraph({
                    spacing: { after: 200 },
                    children: [new TextRun({ text: notes, font: 'Arial', size: 22, italics: true, color: '666666' })],
                  }),
                ]
              : []),

            // Photo Reference URLs
            ...(beforeImageUrls.length > 0 || afterImageUrls.length > 0
              ? [
                  new Paragraph({ spacing: { before: 300 }, children: [] }),
                  new Paragraph({ heading: HeadingLevel.HEADING_2, children: [new TextRun('Photo References')] }),
                  ...(beforeImageUrls.length > 0
                    ? [
                        new Paragraph({
                          spacing: { after: 60 },
                          children: [new TextRun({ text: `Before Photos: ${beforeImageUrls.length} uploaded`, bold: true, font: 'Arial', size: 20 })],
                        }),
                        ...beforeImageUrls.map(
                          (url: string) =>
                            new Paragraph({
                              spacing: { after: 40 },
                              children: [new TextRun({ text: url, font: 'Arial', size: 16, color: '2A3AA6' })],
                            })
                        ),
                      ]
                    : []),
                  ...(afterImageUrls.length > 0
                    ? [
                        new Paragraph({
                          spacing: { before: 120, after: 60 },
                          children: [new TextRun({ text: `After Photos: ${afterImageUrls.length} uploaded`, bold: true, font: 'Arial', size: 20 })],
                        }),
                        ...afterImageUrls.map(
                          (url: string) =>
                            new Paragraph({
                              spacing: { after: 40 },
                              children: [new TextRun({ text: url, font: 'Arial', size: 16, color: '2A3AA6' })],
                            })
                        ),
                      ]
                    : []),
                ]
              : []),

            // Footer
            new Paragraph({ spacing: { before: 600 }, children: [] }),
            new Paragraph({
              border: { top: { style: BorderStyle.SINGLE, size: 1, color: 'DDDDDD' } },
              spacing: { before: 200 },
              alignment: AlignmentType.CENTER,
              children: [
                new TextRun({
                  text: 'CR Home Pros  |  Crafting Your Ideal Home Space  |  Licensed & Insured',
                  size: 16, font: 'Arial', color: '999999',
                }),
              ],
            }),
          ],
        },
      ],
    })

    const buffer = await Packer.toBuffer(doc)
    const uint8 = new Uint8Array(buffer)

    return new NextResponse(uint8, {
      headers: {
        'Content-Type': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
        'Content-Disposition': `attachment; filename="Project-${clientName?.replace(/\s+/g, '-') || 'New'}.docx"`,
      },
    })
  } catch (error: any) {
    console.error('Project generate error:', error)
    return NextResponse.json({ error: error.message }, { status: 500 })
  }
}


==========================================================================================

--- file: app/api/admin/generate-pdf/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { exec } from 'child_process'
import { writeFileSync, readFileSync, unlinkSync, mkdirSync } from 'fs'
import { join } from 'path'
import { promisify } from 'util'

const execAsync = promisify(exec)

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const { type, data } = body

    // Build the Python script for PDF generation
    const tmpDir = '/tmp/pdf-gen'
    try { mkdirSync(tmpDir, { recursive: true }) } catch {}
    
    const jsonPath = join(tmpDir, `${Date.now()}.json`)
    const outPath = join(tmpDir, `${Date.now()}.pdf`)
    
    writeFileSync(jsonPath, JSON.stringify({ type, data }))

    const pythonScript = `
import json, sys, os
from reportlab.lib.pagesizes import letter
from reportlab.lib import colors
from reportlab.lib.units import inch
from reportlab.platypus import SimpleDocTemplate, Paragraph, Spacer, Table, TableStyle, HRFlowable
from reportlab.lib.styles import getSampleStyleSheet, ParagraphStyle
from reportlab.pdfgen import canvas
from reportlab.lib.enums import TA_CENTER, TA_RIGHT, TA_LEFT

with open("${jsonPath}") as f:
    payload = json.load(f)

doc_type = payload["type"]
d = payload["data"]

WIDTH, HEIGHT = letter
BLUE = colors.HexColor("#1e3a5f")
GOLD = colors.HexColor("#c4a45f")
DARK = colors.HexColor("#0f172a")
GRAY = colors.HexColor("#64748b")

class DocTemplate(canvas.Canvas):
    pass

def build_pdf(output_path):
    c = canvas.Canvas(output_path, pagesize=letter)
    
    # ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ
    # Blue header bar
    c.setFillColor(BLUE)
    c.rect(0, HEIGHT - 120, WIDTH, 120, fill=True, stroke=False)
    
    # Company name
    c.setFillColor(colors.white)
    c.setFont("Helvetica-Bold", 26)
    c.drawString(60, HEIGHT - 55, "C&R")
    c.setFont("Helvetica", 11)
    c.drawString(60, HEIGHT - 72, "General Services Inc.")
    c.setFont("Helvetica", 8)
    c.setFillColor(GOLD)
    c.drawString(60, HEIGHT - 86, "Licensed  |  Insured  |  Bonded")
    c.setFont("Helvetica", 7)
    c.setFillColor(colors.HexColor("#94a3b8"))
    c.drawString(60, HEIGHT - 100, "www.crgenserv.com  |  (571) 237-7164  |  crhomepros@gmail.com")
    
    # Document type badge
    type_labels = {"invoice": "INVOICE", "change-order": "CHANGE ORDER", "contract": "CONTRACT"}
    badge = type_labels.get(doc_type, "DOCUMENT")
    c.setFillColor(GOLD)
    c.setFont("Helvetica-Bold", 18)
    c.drawRightString(WIDTH - 60, HEIGHT - 55, badge)
    
    # Doc number
    c.setFillColor(colors.white)
    c.setFont("Helvetica", 10)
    c.drawRightString(WIDTH - 60, HEIGHT - 75, f"#{d.get('number', '')}")
    
    # Gold accent bar
    c.setFillColor(GOLD)
    c.rect(0, HEIGHT - 124, WIDTH, 4, fill=True, stroke=False)
    
    y = HEIGHT - 155
    
    # ‚îÄ‚îÄ DATE ‚îÄ‚îÄ
    c.setFillColor(DARK)
    c.setFont("Helvetica", 10)
    c.drawString(60, y, f"Date: {d.get('date', '')}")
    if d.get("dueDate"):
        c.drawRightString(WIDTH - 60, y, f"Due: {d['dueDate']}")
    y -= 30
    
    # ‚îÄ‚îÄ CLIENT INFO ‚îÄ‚îÄ
    c.setFillColor(BLUE)
    c.setFont("Helvetica-Bold", 11)
    c.drawString(60, y, "CLIENT")
    y -= 16
    c.setFillColor(DARK)
    c.setFont("Helvetica-Bold", 12)
    c.drawString(60, y, d.get("clientName", ""))
    y -= 15
    c.setFont("Helvetica", 10)
    c.setFillColor(GRAY)
    if d.get("clientAddress"):
        for line in d["clientAddress"].split("\\n"):
            c.drawString(60, y, line.strip())
            y -= 14
    if d.get("clientPhone"):
        c.drawString(60, y, f"Phone: {d['clientPhone']}")
        y -= 14
    if d.get("clientEmail"):
        c.drawString(60, y, f"Email: {d['clientEmail']}")
        y -= 14
    
    # Property address (for change orders / contracts)
    if d.get("propertyAddress"):
        y -= 6
        c.setFillColor(BLUE)
        c.setFont("Helvetica-Bold", 11)
        c.drawString(300, HEIGHT - 185, "PROPERTY")
        c.setFillColor(DARK)
        c.setFont("Helvetica", 10)
        py = HEIGHT - 201
        for line in d["propertyAddress"].split("\\n"):
            c.drawString(300, py, line.strip())
            py -= 14
    
    y -= 10
    
    # ‚îÄ‚îÄ PROJECT NAME ‚îÄ‚îÄ
    if d.get("projectName"):
        c.setFillColor(BLUE)
        c.setFont("Helvetica-Bold", 11)
        c.drawString(60, y, "PROJECT")
        y -= 16
        c.setFillColor(DARK)
        c.setFont("Helvetica", 10)
        c.drawString(60, y, d["projectName"])
        y -= 25
    
    # ‚îÄ‚îÄ LINE ITEMS TABLE ‚îÄ‚îÄ
    items = d.get("items", [])
    if items and items[0].get("unitPrice") is not None:
        # Invoice / Change Order style - with pricing
        header = ["#", "Description", "Qty", "Unit Price", "Amount"]
        table_data = [header]
        for i, item in enumerate(items):
            qty = item.get("quantity", 1)
            price = item.get("unitPrice", 0)
            amount = qty * price
            table_data.append([
                str(i + 1),
                item.get("description", ""),
                str(qty),
                f"$ {price:,.2f}",
                f"$ {amount:,.2f}"
            ])
        
        col_widths = [30, 250, 40, 80, 90]
        t = Table(table_data, colWidths=col_widths)
        t.setStyle(TableStyle([
            ('BACKGROUND', (0, 0), (-1, 0), BLUE),
            ('TEXTCOLOR', (0, 0), (-1, 0), colors.white),
            ('FONTNAME', (0, 0), (-1, 0), 'Helvetica-Bold'),
            ('FONTSIZE', (0, 0), (-1, 0), 9),
            ('FONTNAME', (0, 1), (-1, -1), 'Helvetica'),
            ('FONTSIZE', (0, 1), (-1, -1), 9),
            ('ALIGN', (0, 0), (0, -1), 'CENTER'),
            ('ALIGN', (2, 0), (-1, -1), 'RIGHT'),
            ('GRID', (0, 0), (-1, -1), 0.5, colors.HexColor("#e2e8f0")),
            ('ROWBACKGROUNDS', (0, 1), (-1, -1), [colors.white, colors.HexColor("#f8fafc")]),
            ('TOPPADDING', (0, 0), (-1, -1), 8),
            ('BOTTOMPADDING', (0, 0), (-1, -1), 8),
            ('LEFTPADDING', (0, 0), (-1, -1), 8),
            ('RIGHTPADDING', (0, 0), (-1, -1), 8),
        ]))
        
        tw, th = t.wrapOn(c, WIDTH - 120, 400)
        if y - th < 120:
            c.showPage()
            y = HEIGHT - 60
        t.drawOn(c, 60, y - th)
        y = y - th - 15
        
        # Totals
        subtotal = sum(item.get("quantity", 1) * item.get("unitPrice", 0) for item in items)
        tax_rate = d.get("taxRate", 0)
        tax = subtotal * (tax_rate / 100)
        total = subtotal + tax
        
        totals_x = WIDTH - 60
        c.setFont("Helvetica", 10)
        c.setFillColor(GRAY)
        c.drawRightString(totals_x, y, f"Subtotal:  $ {subtotal:,.2f}")
        y -= 16
        if tax_rate > 0:
            c.drawRightString(totals_x, y, f"Tax ({tax_rate}%):  $ {tax:,.2f}")
            y -= 16
        
        # Total highlight
        c.setFillColor(BLUE)
        c.rect(totals_x - 200, y - 8, 200, 26, fill=True, stroke=False)
        c.setFillColor(colors.white)
        c.setFont("Helvetica-Bold", 13)
        c.drawRightString(totals_x - 8, y, f"TOTAL:  $ {total:,.2f}")
        y -= 35
    
    elif items:
        # Contract style - scope of work items (no pricing per line)
        y -= 5
        c.setFillColor(BLUE)
        c.setFont("Helvetica-Bold", 11)
        c.drawString(60, y, "SCOPE OF WORK")
        y -= 20
        
        c.setFillColor(DARK)
        c.setFont("Helvetica", 9.5)
        for i, item in enumerate(items):
            desc = item.get("description", "")
            # Wrap long lines
            words = desc.split()
            lines = []
            current = f"{i+1}. "
            for w in words:
                if len(current + w) > 85:
                    lines.append(current)
                    current = "    " + w + " "
                else:
                    current += w + " "
            lines.append(current)
            
            for line in lines:
                if y < 120:
                    c.showPage()
                    y = HEIGHT - 60
                c.drawString(70, y, line.strip())
                y -= 14
            y -= 4
    
    # ‚îÄ‚îÄ FREEFORM DESCRIPTION ‚îÄ‚îÄ
    if d.get("freeformDescription"):
        y -= 5
        c.setFillColor(DARK)
        c.setFont("Helvetica", 9.5)
        for line in d["freeformDescription"].split("\\n"):
            if y < 120:
                c.showPage()
                y = HEIGHT - 60
            c.drawString(60, y, line)
            y -= 14
    
    # ‚îÄ‚îÄ PAYMENT STRUCTURE ‚îÄ‚îÄ
    if d.get("paymentStructure"):
        y -= 10
        c.setFillColor(BLUE)
        c.setFont("Helvetica-Bold", 11)
        c.drawString(60, y, "PAYMENT STRUCTURE")
        y -= 18
        c.setFillColor(DARK)
        c.setFont("Helvetica", 9.5)
        for line in d["paymentStructure"].split("\\n"):
            if y < 120:
                c.showPage()
                y = HEIGHT - 60
            c.drawString(60, y, line)
            y -= 14
    
    # ‚îÄ‚îÄ CONTRACT TERMS ‚îÄ‚îÄ
    if d.get("contractTerms"):
        y -= 10
        c.setFillColor(BLUE)
        c.setFont("Helvetica-Bold", 11)
        c.drawString(60, y, "TERMS & CONDITIONS")
        y -= 18
        c.setFillColor(DARK)
        c.setFont("Helvetica", 8.5)
        for line in d["contractTerms"].split("\\n"):
            if y < 120:
                c.showPage()
                y = HEIGHT - 60
            c.drawString(60, y, line)
            y -= 13
    
    # ‚îÄ‚îÄ NOTES ‚îÄ‚îÄ
    if d.get("notes"):
        y -= 10
        c.setFillColor(BLUE)
        c.setFont("Helvetica-Bold", 10)
        c.drawString(60, y, "NOTES")
        y -= 16
        c.setFillColor(GRAY)
        c.setFont("Helvetica", 9)
        for line in d["notes"].split("\\n"):
            if y < 120:
                c.showPage()
                y = HEIGHT - 60
            c.drawString(60, y, line)
            y -= 13
    
    # ‚îÄ‚îÄ SIGNATURE BLOCK ‚îÄ‚îÄ
    if y < 200:
        c.showPage()
        y = HEIGHT - 60
    
    y -= 30
    
    # Separator
    c.setStrokeColor(colors.HexColor("#e2e8f0"))
    c.line(60, y, WIDTH - 60, y)
    y -= 30
    
    # Company signature
    c.setFillColor(DARK)
    c.setFont("Helvetica-Bold", 10)
    c.drawString(60, y, "Provided and Guaranteed by:")
    y -= 25
    c.line(60, y, 250, y)
    y -= 14
    c.setFont("Helvetica-Bold", 10)
    c.drawString(60, y, "Carlos Hernandez")
    y -= 13
    c.setFont("Helvetica", 9)
    c.setFillColor(GRAY)
    c.drawString(60, y, "President, CRGS, Inc.")
    y -= 13
    c.drawString(60, y, "Date: _______________")
    
    # Client signature
    accept_y = y + 52
    c.setFillColor(DARK)
    c.setFont("Helvetica-Bold", 10)
    c.drawString(320, accept_y, "Accepted and Agreed:")
    accept_y -= 25
    c.line(320, accept_y, WIDTH - 60, accept_y)
    accept_y -= 14
    c.setFont("Helvetica-Bold", 10)
    c.drawString(320, accept_y, d.get("clientName", ""))
    accept_y -= 13
    c.setFont("Helvetica", 9)
    c.setFillColor(GRAY)
    c.drawString(320, accept_y, "Date: _______________")
    
    # ‚îÄ‚îÄ FOOTER ‚îÄ‚îÄ
    c.setFillColor(BLUE)
    c.rect(0, 0, WIDTH, 40, fill=True, stroke=False)
    c.setFillColor(GOLD)
    c.setFont("Helvetica-Bold", 8)
    c.drawCentredString(WIDTH / 2, 22, "C&R GENERAL SERVICES INC.  |  We Are In This Business For You")
    c.setFillColor(colors.HexColor("#94a3b8"))
    c.setFont("Helvetica", 7)
    c.drawCentredString(WIDTH / 2, 10, "(571) 237-7164  |  crhomepros@gmail.com  |  MHIC #05-132359")
    
    c.save()

build_pdf("${outPath}")
`

    const scriptPath = join(tmpDir, 'gen.py')
    writeFileSync(scriptPath, pythonScript)

    const { stderr } = await execAsync(`python3 ${scriptPath}`)
    if (stderr) console.error('Python stderr:', stderr)

    const pdfBytes = readFileSync(outPath)

    // Cleanup
    try { unlinkSync(jsonPath); unlinkSync(outPath); unlinkSync(scriptPath) } catch {}

    return new NextResponse(pdfBytes, {
      headers: {
        'Content-Type': 'application/pdf',
        'Content-Disposition': `inline; filename="${type}-${data.number || 'document'}.pdf"`,
      },
    })
  } catch (error: any) {
    console.error('PDF generation error:', error)
    return NextResponse.json({ error: error.message }, { status: 500 })
  }
}


==========================================================================================

--- file: app/api/admin/drive/auth-url/route.ts ---
import { NextResponse } from 'next/server';
import { google } from 'googleapis';

export async function GET() {
  try {
    const oauth2Client = new google.auth.OAuth2(
      process.env.GOOGLE_DRIVE_CLIENT_ID,
      process.env.GOOGLE_DRIVE_CLIENT_SECRET,
      `${process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000'}/api/admin/drive/callback`
    );

    const scopes = [
      'https://www.googleapis.com/auth/drive.file',
    ];

    const url = oauth2Client.generateAuthUrl({
      access_type: 'offline',
      scope: scopes,
      prompt: 'consent', // Force to get refresh token
    });

    return NextResponse.json({ url });
  } catch (error) {
    console.error('Error generating auth URL:', error);
    return NextResponse.json(
      { error: 'Failed to generate auth URL' },
      { status: 500 }
    );
  }
}


==========================================================================================

--- file: app/api/admin/drive/callback/route.ts ---
import { NextRequest, NextResponse } from 'next/server';
import { google } from 'googleapis';

export async function GET(request: NextRequest) {
  try {
    const searchParams = request.nextUrl.searchParams;
    const code = searchParams.get('code');

    if (!code) {
      return NextResponse.redirect(
        new URL('/admin/connect-drive?error=no_code', request.url)
      );
    }

    const oauth2Client = new google.auth.OAuth2(
      process.env.GOOGLE_DRIVE_CLIENT_ID,
      process.env.GOOGLE_DRIVE_CLIENT_SECRET,
      `${process.env.NEXT_PUBLIC_BASE_URL || 'http://localhost:3000'}/api/admin/drive/callback`
    );

    // Exchange authorization code for tokens
    const { tokens } = await oauth2Client.getToken(code);

    if (!tokens.refresh_token) {
      return NextResponse.redirect(
        new URL('/admin/connect-drive?error=no_refresh_token', request.url)
      );
    }

    // Redirect back to the connect page with the token
    const redirectUrl = new URL('/admin/connect-drive', request.url);
    redirectUrl.searchParams.set('token', tokens.refresh_token);

    return NextResponse.redirect(redirectUrl);
  } catch (error) {
    console.error('Error in OAuth callback:', error);
    return NextResponse.redirect(
      new URL('/admin/connect-drive?error=auth_failed', request.url)
    );
  }
}


==========================================================================================

--- file: app/api/test-config/route.ts ---
import { NextResponse } from 'next/server'
import { isDriveConfigured } from '@/lib/google-drive'
import { isEmailConfigured } from '@/lib/email'

export async function GET() {
  const resendKey = process.env.RESEND_API_KEY
  const driveClientId = process.env.GOOGLE_DRIVE_CLIENT_ID
  const driveClientSecret = process.env.GOOGLE_DRIVE_CLIENT_SECRET
  const driveRefreshToken = process.env.GOOGLE_DRIVE_REFRESH_TOKEN
  const emailFrom = process.env.EMAIL_FROM || 'CR Home Pros <onboarding@resend.dev>'
  const emailTo = process.env.EMAIL_TO_LEADS || 'crhomepros@gmail.com'

  const status = {
    email: {
      provider: 'Resend',
      from: emailFrom,
      to: emailTo,
      api_key_configured: !!(resendKey && resendKey.length > 5),
      api_key_length: resendKey?.length || 0,
      status: isEmailConfigured() ? '‚úÖ READY' : '‚ùå MISSING OR INVALID API KEY',
    },
    google_drive: {
      configured: isDriveConfigured(),
      client_id_present: !!driveClientId,
      client_secret_present: !!driveClientSecret,
      refresh_token_present: !!(driveRefreshToken && driveRefreshToken.length > 10),
      refresh_token_length: driveRefreshToken?.length || 0,
      status: isDriveConfigured() ? '‚úÖ READY' : '‚ùå MISSING CONFIG',
    },
    overall_status:
      isEmailConfigured() && isDriveConfigured()
        ? '‚úÖ ALL SYSTEMS READY'
        : '‚ö†Ô∏è CONFIGURATION INCOMPLETE',
  }

  return NextResponse.json(status, { status: 200 })
}


==========================================================================================

--- file: app/api/get-started/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { createLeadInDrive, isDriveConfigured } from '@/lib/google-drive'
import { sendNewLeadNotification, sendLeadConfirmation, isEmailConfigured } from '@/lib/email'

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()

    const {
      firstName, lastName, email, phone, preferredContact,
      address, city, state, zip, services,
      projectDescription, timeline, budget,
      additionalNotes, howDidYouHear,
      images,
    } = body

    // Validate required fields
    if (!firstName || !lastName || !email || !phone || !address || !services?.length) {
      return NextResponse.json(
        { success: false, error: 'Missing required fields' },
        { status: 400 }
      )
    }

    console.log(`\nüè† New Lead: ${firstName} ${lastName} ‚Äî ${services.join(', ')}`)

    // Generate communication tag
    const contactTag = preferredContact ? `[${preferredContact.toUpperCase()}]` : '[PHONE]'

    // Convert base64 images to Buffers
    const imageBuffers: Buffer[] = []
    const emailAttachments: { filename: string; content: Buffer }[] = []

    if (images && Array.isArray(images)) {
      for (let i = 0; i < images.length; i++) {
        try {
          const base64Data = images[i].replace(/^data:image\/\w+;base64,/, '')
          const buffer = Buffer.from(base64Data, 'base64')
          imageBuffers.push(buffer)
          const ext = images[i].startsWith('data:image/png') ? 'png' : 'jpg'
          emailAttachments.push({
            filename: `project-photo-${i + 1}.${ext}`,
            content: buffer,
          })
        } catch (e) {
          console.warn(`‚ö†Ô∏è Failed to decode image ${i}:`, e)
        }
      }
      console.log(`üì∏ ${imageBuffers.length} photo(s) processed`)
    }

    // Save lead to Google Drive
    let driveFolderUrl: string | undefined
    const folderName = `${firstName} ${lastName} - ${services[0] || 'General'} - ${new Date().toISOString().split('T')[0]}`

    if (isDriveConfigured()) {
      try {
        console.log('üìÅ Creating Google Drive folder...')
        const driveResult = await createLeadInDrive(
          {
            firstName, lastName, email, phone,
            preferredContact: preferredContact || 'phone',
            address, city: city || '', state: state || '', zip: zip || '',
            services, projectDescription: projectDescription || '',
            timeline: timeline || '', budget: budget || '',
            additionalNotes: additionalNotes || '',
            howDidYouHear: howDidYouHear || '',
          },
          imageBuffers.length > 0 ? imageBuffers : undefined
        )
        driveFolderUrl = driveResult.folderUrl
        console.log('‚úÖ Google Drive folder created:', driveFolderUrl)
      } catch (driveError: any) {
        console.error('‚ùå Google Drive error (non-fatal):', driveError?.message || driveError)
      }
    } else {
      console.log('‚è≠Ô∏è Google Drive not configured ‚Äî skipping folder creation')
    }

    // Send notification email to Carlos
    try {
      console.log('üìß Sending lead notification email...')
      const emailSent = await sendNewLeadNotification({
        firstName, lastName, email, phone,
        address, city: city || '', state: state || '',
        services, projectDescription: projectDescription || '',
        timeline: timeline || '', budget: budget || '',
        preferredContact: preferredContact || 'phone',
        contactTag,
        additionalNotes: additionalNotes || '',
        driveFolderUrl,
        driveFolderName: folderName,
        attachments: emailAttachments.length > 0 ? emailAttachments : undefined,
      })
      console.log('üìß Lead notification result:', emailSent ? '‚úÖ SUCCESS' : '‚ùå FAILED')
    } catch (emailError: any) {
      console.error('‚ùå Email send error:', emailError?.message || emailError)
    }

    // Send confirmation to customer
    try {
      console.log('üìß Sending confirmation email to customer...')
      const confirmSent = await sendLeadConfirmation(email, firstName)
      console.log('üìß Confirmation result:', confirmSent ? '‚úÖ SUCCESS' : '‚ùå FAILED')
    } catch (emailError: any) {
      console.error('‚ùå Confirmation email error:', emailError?.message || emailError)
    }

    return NextResponse.json({
      success: true,
      driveFolderUrl,
      message: 'Lead submitted successfully',
    })
  } catch (error: any) {
    console.error('‚ùå Error submitting lead:', error?.message || error)
    return NextResponse.json(
      { success: false, error: 'Failed to submit lead' },
      { status: 500 }
    )
  }
}


==========================================================================================

--- file: app/api/invoice/send/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { Resend } from 'resend'

const resend = new Resend(process.env.RESEND_API_KEY || 'placeholder_key')
const FROM_EMAIL = process.env.EMAIL_FROM || 'CR Home Pros <noreply@crhomepros.com>'

export async function POST(request: NextRequest) {
  try {
    const invoice = await request.json()
    const { clientEmail, clientName, invoiceNumber, date, dueDate, projectName, items, notes, subtotal, tax, total, signatureData } = invoice

    if (!clientEmail || !clientName) {
      return NextResponse.json({ success: false, error: 'Missing client info' }, { status: 400 })
    }

    const itemRows = items.map((item: any) =>
      `<tr>
        <td style="padding:10px;border-bottom:1px solid #e5e7eb;">${item.description || '‚Äî'}</td>
        <td style="padding:10px;border-bottom:1px solid #e5e7eb;text-align:center;">${item.quantity}</td>
        <td style="padding:10px;border-bottom:1px solid #e5e7eb;text-align:right;">$${Number(item.unitPrice).toFixed(2)}</td>
        <td style="padding:10px;border-bottom:1px solid #e5e7eb;text-align:right;font-weight:600;">$${(item.quantity * item.unitPrice).toFixed(2)}</td>
      </tr>`
    ).join('')

    const html = `
    <div style="font-family:Arial,sans-serif;max-width:640px;margin:0 auto;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden;">
      <div style="background:linear-gradient(135deg,#0f172a,#1e40af);padding:28px;color:white;">
        <table width="100%"><tr>
          <td><h1 style="margin:0;font-size:28px;">INVOICE</h1><p style="margin:4px 0 0;color:#94a3b8;">${invoiceNumber}</p></td>
          <td style="text-align:right;">
            <p style="margin:0;font-size:18px;font-weight:bold;">CR Home Pros</p>
            <p style="margin:4px 0 0;color:#94a3b8;font-size:12px;">Licensed & Insured ‚Ä¢ MHIC #05-132359</p>
            <p style="margin:2px 0 0;color:#94a3b8;font-size:12px;">crhomepros@gmail.com ‚Ä¢ (301) 602-2553</p>
          </td>
        </tr></table>
      </div>

      <div style="padding:24px;">
        <table width="100%"><tr>
          <td style="vertical-align:top;">
            <p style="color:#6b7280;font-size:11px;text-transform:uppercase;letter-spacing:1px;margin:0;">Bill To</p>
            <p style="font-weight:bold;margin:4px 0;">${clientName}</p>
            <p style="color:#6b7280;font-size:13px;margin:0;">${clientEmail}</p>
          </td>
          <td style="text-align:right;vertical-align:top;">
            <p style="font-size:13px;margin:2px 0;"><span style="color:#6b7280;">Date:</span> <b>${date}</b></p>
            <p style="font-size:13px;margin:2px 0;"><span style="color:#6b7280;">Due:</span> <b>${dueDate}</b></p>
            ${projectName ? `<p style="font-size:13px;margin:2px 0;"><span style="color:#6b7280;">Project:</span> <b>${projectName}</b></p>` : ''}
          </td>
        </tr></table>

        <table width="100%" style="margin-top:20px;border-collapse:collapse;">
          <thead>
            <tr style="border-bottom:2px solid #1e40af;">
              <th style="text-align:left;padding:10px;font-size:11px;color:#6b7280;text-transform:uppercase;">Description</th>
              <th style="text-align:center;padding:10px;font-size:11px;color:#6b7280;text-transform:uppercase;width:60px;">Qty</th>
              <th style="text-align:right;padding:10px;font-size:11px;color:#6b7280;text-transform:uppercase;width:90px;">Rate</th>
              <th style="text-align:right;padding:10px;font-size:11px;color:#6b7280;text-transform:uppercase;width:90px;">Amount</th>
            </tr>
          </thead>
          <tbody>${itemRows}</tbody>
        </table>

        <div style="text-align:right;margin-top:16px;">
          <p style="margin:4px 0;font-size:14px;"><span style="color:#6b7280;">Subtotal:</span> $${Number(subtotal).toFixed(2)}</p>
          <p style="margin:4px 0;font-size:14px;"><span style="color:#6b7280;">Tax:</span> $${Number(tax).toFixed(2)}</p>
          <p style="margin:8px 0;font-size:20px;font-weight:bold;color:#1e40af;border-top:2px solid #e5e7eb;padding-top:8px;">Total: $${Number(total).toFixed(2)}</p>
        </div>

        ${notes ? `<div style="background:#f8fafc;padding:12px;border-radius:8px;margin-top:16px;"><p style="font-size:11px;color:#6b7280;margin:0 0 4px;text-transform:uppercase;">Notes</p><p style="font-size:13px;color:#374151;margin:0;white-space:pre-line;">${notes}</p></div>` : ''}

        ${signatureData ? `<div style="margin-top:20px;border-top:1px solid #e5e7eb;padding-top:12px;"><p style="font-size:11px;color:#6b7280;margin:0 0 4px;">Authorized Signature</p><img src="${signatureData}" alt="Signature" style="height:50px;"/><p style="font-size:13px;font-weight:600;margin:4px 0 0;">Carlos Hernandez ‚Äî CR Home Pros</p></div>` : ''}
      </div>

      <div style="background:#0f172a;padding:14px;text-align:center;color:#6b7280;font-size:11px;">
        CR Home Pros | MHIC #05-132359 | (301) 602-2553 | crhomepros.com
      </div>
    </div>`

    await resend.emails.send({
      from: FROM_EMAIL,
      to: clientEmail,
      cc: process.env.EMAIL_TO_LEADS || 'crhomepros@gmail.com',
      subject: `Invoice ${invoiceNumber} from CR Home Pros ‚Äî $${Number(total).toFixed(2)}`,
      html,
    })

    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Invoice send error:', error)
    return NextResponse.json({ success: false, error: 'Failed to send invoice' }, { status: 500 })
  }
}


==========================================================================================

--- file: .backup-20260215-115343/middleware.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { i18n } from './lib/i18n/config'

function getLocale(request: NextRequest): string {
  // Check if locale already in URL
  const { pathname } = request.nextUrl
  for (const locale of i18n.locales) {
    if (pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`) {
      return locale
    }
  }

  // DISABLED: Auto language detection
  // Always default to English unless explicitly /es/ in URL
  // Users can manually switch using language selector
  
  return i18n.defaultLocale
}

export function middleware(request: NextRequest) {
  const { pathname } = request.nextUrl

  // Skip for API routes, static files, images, etc.
  if (
    pathname.startsWith('/api/') ||
    pathname.startsWith('/_next/') ||
    pathname.startsWith('/images/') ||
    pathname.startsWith('/favicon') ||
    pathname.startsWith('/manifest') ||
    pathname.startsWith('/robots') ||
    pathname.startsWith('/sitemap') ||
    pathname.startsWith('/admin') ||
    pathname.includes('.')
  ) {
    return NextResponse.next()
  }

  // Check if locale prefix exists
  const pathnameHasLocale = i18n.locales.some(
    (locale) => pathname.startsWith(`/${locale}/`) || pathname === `/${locale}`
  )

  if (pathnameHasLocale) {
    return NextResponse.next()
  }

  // Redirect to locale-prefixed path
  // Default: English visitors get /en/..., Spanish get /es/...
  // But for root path, default locale doesn't redirect (keeps clean URLs)
  const locale = getLocale(request)

  // For the default locale (en), rewrite instead of redirect to keep clean URLs
  if (locale === i18n.defaultLocale) {
    const url = request.nextUrl.clone()
    url.pathname = `/en${pathname}`
    return NextResponse.rewrite(url)
  }

  // For non-default locales, redirect so the URL shows /es/...
  const url = request.nextUrl.clone()
  url.pathname = `/${locale}${pathname}`
  return NextResponse.redirect(url)
}

export const config = {
  matcher: [
    // Match all paths except static files
    '/((?!_next/static|_next/image|favicon.ico|images|api).*)',
  ],
}


==========================================================================================

--- file: .backup-20260215-115343/app/api/contact/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { logContactInDrive, isDriveConfigured } from '@/lib/google-drive'
import { sendContactFormNotification } from '@/lib/email'

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()
    const { name, email, phone, message, service } = body

    if (!name || !email || !phone || !message) {
      return NextResponse.json(
        { success: false, error: 'Missing required fields' },
        { status: 400 }
      )
    }

    // Log to Google Drive
    if (isDriveConfigured()) {
      try {
        await logContactInDrive({ name, email, phone, message, service })
      } catch (driveError) {
        console.error('Google Drive error (non-fatal):', driveError)
      }
    }

    // Send email notification
    await sendContactFormNotification({ name, email, phone, message, service })

    return NextResponse.json({ success: true, message: 'Message sent!' })
  } catch (error) {
    console.error('Error processing contact:', error)
    return NextResponse.json(
      { success: false, error: 'Failed to send message' },
      { status: 500 }
    )
  }
}


==========================================================================================

--- file: .backup-20260215-115343/app/api/referrals/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { createReferralInDrive, isDriveConfigured } from '@/lib/google-drive'
import { sendNewReferralNotification } from '@/lib/email'

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()

    const {
      referrerName, referrerEmail, referrerPhone,
      referralName, referralPhone, referralEmail,
      projectType, projectDetails, paymentMethod,
    } = body

    if (!referrerName || !referrerEmail || !referralName || !referralPhone || !projectType) {
      return NextResponse.json(
        { success: false, error: 'Missing required fields' },
        { status: 400 }
      )
    }

    // Save to Google Drive
    let driveFolderUrl: string | undefined

    if (isDriveConfigured()) {
      try {
        const result = await createReferralInDrive({
          referrerName, referrerEmail, referrerPhone,
          referralName, referralPhone, referralEmail,
          projectType, projectDetails, paymentMethod,
        })
        driveFolderUrl = result.folderUrl
      } catch (driveError) {
        console.error('Google Drive error (non-fatal):', driveError)
      }
    }

    // Send email notification
    await sendNewReferralNotification({
      referrerName, referrerEmail, referrerPhone,
      referralName, referralPhone,
      projectType, projectDetails,
    })

    return NextResponse.json({
      success: true,
      driveFolderUrl,
      message: 'Referral submitted successfully',
    })
  } catch (error) {
    console.error('Error submitting referral:', error)
    return NextResponse.json(
      { success: false, error: 'Failed to submit referral' },
      { status: 500 }
    )
  }
}


==========================================================================================

--- file: .backup-20260215-115343/app/api/test-config/route.ts ---
import { NextResponse } from 'next/server';

export async function GET() {
  const config = {
    email: {
      status: process.env.RESEND_API_KEY ? '‚úÖ READY' : '‚ùå NOT CONFIGURED',
      provider: 'Resend',
      from: 'CR Home Pros <onboarding@resend.dev>',
      api_key_configured: !!process.env.RESEND_API_KEY,
    },
    google_drive: {
      status:
        process.env.GOOGLE_DRIVE_CLIENT_ID &&
        process.env.GOOGLE_DRIVE_CLIENT_SECRET &&
        process.env.GOOGLE_DRIVE_REFRESH_TOKEN
          ? '‚úÖ READY'
          : '‚ùå NOT CONFIGURED',
      client_configured: !!(
        process.env.GOOGLE_DRIVE_CLIENT_ID &&
        process.env.GOOGLE_DRIVE_CLIENT_SECRET
      ),
      refresh_token_configured: !!process.env.GOOGLE_DRIVE_REFRESH_TOKEN,
    },
  };

  const allReady =
    config.email.status === '‚úÖ READY' &&
    config.google_drive.status === '‚úÖ READY';

  return NextResponse.json({
    ...config,
    overall_status: allReady ? '‚úÖ ALL SYSTEMS READY' : '‚ö†Ô∏è CONFIGURATION INCOMPLETE',
  });
}


==========================================================================================

--- file: .backup-20260215-115343/app/api/get-started/route.ts ---
import { NextRequest, NextResponse } from 'next/server'
import { createLeadInDrive, isDriveConfigured } from '@/lib/google-drive'
import { sendNewLeadNotification, sendLeadConfirmation } from '@/lib/email'

export async function POST(request: NextRequest) {
  try {
    const body = await request.json()

    const {
      firstName, lastName, email, phone, preferredContact,
      address, city, state, zip, services,
      projectDescription, timeline, budget,
      additionalNotes, howDidYouHear,
      images, // base64 encoded images from form
    } = body

    // Validate required fields
    if (!firstName || !lastName || !email || !phone || !address || !services?.length) {
      return NextResponse.json(
        { success: false, error: 'Missing required fields' },
        { status: 400 }
      )
    }

    // Generate communication tag
    const contactTag = preferredContact ? `[${preferredContact.toUpperCase()}]` : '[PHONE]'

    // Convert base64 images to Buffers for email attachments + Drive upload
    const imageBuffers: Buffer[] = []
    const emailAttachments: { filename: string; content: Buffer }[] = []

    if (images && Array.isArray(images)) {
      for (let i = 0; i < images.length; i++) {
        try {
          const base64Data = images[i].replace(/^data:image\/\w+;base64,/, '')
          const buffer = Buffer.from(base64Data, 'base64')
          imageBuffers.push(buffer)
          const ext = images[i].startsWith('data:image/png') ? 'png' : 'jpg'
          emailAttachments.push({
            filename: `project-photo-${i + 1}.${ext}`,
            content: buffer,
          })
        } catch (e) {
          console.warn(`Failed to decode image ${i}:`, e)
        }
      }
    }

    // Save lead to Google Drive (if configured)
    let driveFolderUrl: string | undefined
    let folderName: string | undefined

    if (isDriveConfigured()) {
      try {
        const date = new Date().toISOString().split('T')[0]
        const primaryService = services[0] || 'General'
        folderName = `${firstName} ${lastName} - ${primaryService} - ${date}`
        
        const driveResult = await createLeadInDrive(
          {
            firstName, lastName, email, phone,
            preferredContact: preferredContact || 'phone',
            address, city: city || '', state: state || '', zip: zip || '',
            services, projectDescription: projectDescription || '',
            timeline: timeline || '', budget: budget || '',
            additionalNotes: additionalNotes || '',
            howDidYouHear: howDidYouHear || '',
          },
          imageBuffers.length > 0 ? imageBuffers : undefined
        )
        driveFolderUrl = driveResult.folderUrl
      } catch (driveError) {
        console.error('Google Drive error (non-fatal):', driveError)
      }
    }

    // Send notification email with image attachments + Drive link
    try {
      console.log('üìß Sending lead notification email...')
      const emailSent = await sendNewLeadNotification({
        firstName, lastName, email, phone,
        address, city, state, services,
        projectDescription, timeline, budget,
        preferredContact: preferredContact || 'phone',
        contactTag,
        additionalNotes: additionalNotes || '',
        driveFolderUrl,
        attachments: emailAttachments.length > 0 ? emailAttachments : undefined,
      })
      console.log('üìß Lead notification email result:', emailSent ? '‚úÖ SUCCESS' : '‚ùå FAILED')
    } catch (emailError) {
      console.error('‚ùå Failed to send lead notification email:', emailError)
    }

    // Send confirmation to customer
    try {
      console.log('üìß Sending confirmation email to customer...')
      const confirmSent = await sendLeadConfirmation(email, firstName)
      console.log('üìß Confirmation email result:', confirmSent ? '‚úÖ SUCCESS' : '‚ùå FAILED')
    } catch (emailError) {
      console.error('‚ùå Failed to send confirmation email:', emailError)
    }

    return NextResponse.json({
      success: true,
      driveFolderUrl,
      message: 'Lead submitted successfully',
    })
  } catch (error) {
    console.error('Error submitting lead:', error)
    return NextResponse.json(
      { success: false, error: 'Failed to submit lead' },
      { status: 500 }
    )
  }
}


==========================================================================================

--- file: .backup-20260215-115343/components/forms/IntakeForm.tsx ---
'use client'

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { ArrowRight, ArrowLeft, Loader2, CheckCircle, Upload, X, Phone, Calendar, Mail, MessageSquare } from 'lucide-react'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { cn, formatPhoneLink } from '@/lib/utils'
import { SERVICES, BUDGET_RANGES, TIMELINE_OPTIONS, REFERRAL_SOURCES, COMPANY } from '@/lib/constants'

const intakeSchema = z.object({
  // Step 1: Contact
  firstName: z.string().min(2, 'First name is required'),
  lastName: z.string().min(2, 'Last name is required'),
  email: z.string().email('Valid email required'),
  phone: z.string().min(10, 'Valid phone required'),
  preferredContact: z.enum(['phone', 'email', 'text', 'whatsapp']),
  
  // Step 2: Location
  address: z.string().min(5, 'Address is required'),
  city: z.string().min(2, 'City is required'),
  state: z.string().min(2, 'State is required'),
  zip: z.string().min(5, 'ZIP code is required'),
  propertyType: z.enum(['single-family', 'townhouse', 'condo', 'multi-family', 'commercial']),
  
  // Step 3: Project
  services: z.array(z.string()).min(1, 'Select at least one service'),
  projectDescription: z.string().min(20, 'Please describe your project'),
  
  // Step 4: Timeline & Budget
  timeline: z.string().min(1, 'Please select a timeline'),
  budget: z.string().min(1, 'Please select a budget range'),
  flexibleBudget: z.boolean().optional(),
  
  // Step 5: Additional
  howDidYouHear: z.string().optional(),
  additionalNotes: z.string().optional(),
})

type IntakeFormData = z.infer<typeof intakeSchema>

const steps = [
  { title: 'Contact Info', description: 'How can we reach you?' },
  { title: 'Location', description: 'Where is your project?' },
  { title: 'Project Details', description: 'What do you need done?' },
  { title: 'Timeline & Budget', description: 'When and how much?' },
  { title: 'Almost Done!', description: 'Just a few more details' },
]

export function IntakeForm() {
  const [currentStep, setCurrentStep] = useState(0)
  const [isSubmitting, setIsSubmitting] = useState(false)
  const [isSuccess, setIsSuccess] = useState(false)
  const [uploadedPhotos, setUploadedPhotos] = useState<File[]>([])

  const {
    register,
    handleSubmit,
    watch,
    trigger,
    formState: { errors },
  } = useForm<IntakeFormData>({
    resolver: zodResolver(intakeSchema),
    defaultValues: {
      preferredContact: 'phone',
      propertyType: 'single-family',
      services: [],
      flexibleBudget: false,
    },
  })

  const selectedServices = watch('services') || []

  const validateStep = async () => {
    const fieldsToValidate: (keyof IntakeFormData)[][] = [
      ['firstName', 'lastName', 'email', 'phone', 'preferredContact'],
      ['address', 'city', 'state', 'zip', 'propertyType'],
      ['services', 'projectDescription'],
      ['timeline', 'budget'],
      [],
    ]
    
    const result = await trigger(fieldsToValidate[currentStep])
    return result
  }

  const nextStep = async () => {
    const isValid = await validateStep()
    if (isValid && currentStep < steps.length - 1) {
      setCurrentStep(currentStep + 1)
      window.scrollTo({ top: 0, behavior: 'smooth' })
    }
  }

  const prevStep = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1)
      window.scrollTo({ top: 0, behavior: 'smooth' })
    }
  }

  const onSubmit = async (data: IntakeFormData) => {
    setIsSubmitting(true)
    try {
      // Convert photos to base64 for API
      const imagePromises = uploadedPhotos.map(file => {
        return new Promise<string>((resolve, reject) => {
          const reader = new FileReader()
          reader.onload = () => resolve(reader.result as string)
          reader.onerror = reject
          reader.readAsDataURL(file)
        })
      })
      const images = await Promise.all(imagePromises)

      const response = await fetch('/api/get-started', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ...data, images }),
      })

      if (!response.ok) throw new Error('Submission failed')

      setIsSubmitting(false)
      setIsSuccess(true)
    } catch (err) {
      console.error('Lead form error:', err)
      setIsSubmitting(false)
      alert('Something went wrong. Please try calling us directly.')
    }
  }

  if (isSuccess) {
    return (
      <div className="bg-green-50 border border-green-200 rounded-2xl p-8 md:p-12 text-center">
        <div className="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6">
          <CheckCircle className="w-10 h-10 text-green-600" />
        </div>
        <h2 className="text-2xl md:text-3xl font-display font-bold text-green-800 mb-4">
          Request Submitted!
        </h2>
        <p className="text-green-700 text-lg mb-6">
          Thank you! We've received your project details and will contact you within 24 hours 
          to schedule your free consultation.
        </p>
        <div className="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href={formatPhoneLink(COMPANY.phone)}
            className="btn bg-green-600 text-white hover:bg-green-700 w-full sm:w-auto px-6 py-3"
          >
            <Phone className="w-5 h-5 mr-2" />
            Call Us Now
          </a>
          <a
            href="/projects"
            className="btn bg-white text-green-700 border border-green-200 hover:bg-green-50 w-full sm:w-auto px-6 py-3"
          >
            Browse Our Work
          </a>
        </div>
      </div>
    )
  }

  return (
    <div className="bg-white rounded-2xl border border-dark-100 shadow-xl overflow-hidden">
      {/* Progress Bar */}
      <div className="bg-dark-50 px-6 py-4">
        <div className="flex items-center justify-between mb-2">
          <span className="text-sm font-medium text-dark-600">
            Step {currentStep + 1} of {steps.length}
          </span>
          <span className="text-sm text-dark-500">
            {Math.round(((currentStep + 1) / steps.length) * 100)}% complete
          </span>
        </div>
        <div className="h-2 bg-dark-200 rounded-full overflow-hidden">
          <div
            className="h-full bg-primary-600 rounded-full transition-all duration-500"
            style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
          />
        </div>
      </div>

      {/* Step Header */}
      <div className="px-6 py-6 border-b border-dark-100">
        <h2 className="text-xl md:text-2xl font-display font-bold text-dark-900">
          {steps[currentStep].title}
        </h2>
        <p className="text-dark-500">{steps[currentStep].description}</p>
      </div>

      {/* Form */}
      <form onSubmit={handleSubmit(onSubmit)} onKeyDown={(e) => { if (e.key === "Enter" && (e.target as HTMLElement).tagName !== "TEXTAREA") e.preventDefault() }} className="p-6 md:p-8">
        {/* Step 1: Contact Info */}
        {currentStep === 0 && (
          <div className="space-y-6">
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <label className="label">First Name *</label>
                <input {...register('firstName')} autoComplete="given-name" className={cn('input', errors.firstName && 'border-red-500')} placeholder="John" />
                {errors.firstName && <p className="mt-1 text-sm text-red-500">{errors.firstName.message}</p>}
              </div>
              <div>
                <label className="label">Last Name *</label>
                <input {...register('lastName')} autoComplete="family-name" className={cn('input', errors.lastName && 'border-red-500')} placeholder="Smith" />
                {errors.lastName && <p className="mt-1 text-sm text-red-500">{errors.lastName.message}</p>}
              </div>
            </div>
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <label className="label">Email *</label>
                <input {...register('email')} type="email" autoComplete="email" className={cn('input', errors.email && 'border-red-500')} placeholder="john@example.com" />
                {errors.email && <p className="mt-1 text-sm text-red-500">{errors.email.message}</p>}
              </div>
              <div>
                <label className="label">Phone *</label>
                <input {...register('phone')} type="tel" autoComplete="tel" className={cn('input', errors.phone && 'border-red-500')} placeholder="(555) 123-4567" />
                {errors.phone && <p className="mt-1 text-sm text-red-500">{errors.phone.message}</p>}
              </div>
            </div>
            <div>
              <label className="label">Preferred Contact Method *</label>
              <div className="grid grid-cols-2 sm:flex gap-3 sm:gap-4">
                {[
                  { value: 'phone', icon: <Phone className="w-4 h-4" />, label: 'Phone' },
                  { value: 'email', icon: <Mail className="w-4 h-4" />, label: 'Email' },
                  { value: 'text', icon: <MessageSquare className="w-4 h-4" />, label: 'Text' },
                  { value: 'whatsapp', icon: <WhatsAppIcon className="w-4 h-4" />, label: 'WhatsApp' },
                ].map((method) => (
                  <label key={method.value} className="flex items-center gap-2 cursor-pointer bg-white border border-dark-200 rounded-lg px-3 py-2.5 hover:border-primary-400 transition-colors has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                    <input {...register('preferredContact')} type="radio" value={method.value} className="text-primary-600" />
                    <span className={cn('flex-shrink-0', method.value === 'whatsapp' ? 'text-green-500' : 'text-dark-500')}>{method.icon}</span>
                    <span className="text-sm font-medium">{method.label}</span>
                  </label>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Step 2: Location */}
        {currentStep === 1 && (
          <div className="space-y-6">
            <div>
              <label className="label">Street Address *</label>
              <input {...register('address')} autoComplete="street-address" className={cn('input', errors.address && 'border-red-500')} placeholder="123 Main Street" />
              {errors.address && <p className="mt-1 text-sm text-red-500">{errors.address.message}</p>}
            </div>
            <div className="grid md:grid-cols-3 gap-4">
              <div>
                <label className="label">City *</label>
                <input {...register('city')} autoComplete="address-level2" className={cn('input', errors.city && 'border-red-500')} placeholder="Bethesda" />
                {errors.city && <p className="mt-1 text-sm text-red-500">{errors.city.message}</p>}
              </div>
              <div>
                <label className="label">State *</label>
                <select {...register('state')} className={cn('input', errors.state && 'border-red-500')}>
                  <option value="">Select</option>
                  <option value="DC">Washington DC</option>
                  <option value="MD">Maryland</option>
                  <option value="VA">Virginia</option>
                </select>
                {errors.state && <p className="mt-1 text-sm text-red-500">{errors.state.message}</p>}
              </div>
              <div>
                <label className="label">ZIP Code *</label>
                <input {...register('zip')} autoComplete="postal-code" className={cn('input', errors.zip && 'border-red-500')} placeholder="20814" />
                {errors.zip && <p className="mt-1 text-sm text-red-500">{errors.zip.message}</p>}
              </div>
            </div>
            <div>
              <label className="label">Property Type *</label>
              <select {...register('propertyType')} className="input">
                <option value="single-family">Single Family Home</option>
                <option value="townhouse">Townhouse</option>
                <option value="condo">Condo / Apartment</option>
                <option value="multi-family">Multi-Family</option>
                <option value="commercial">Commercial</option>
              </select>
            </div>
          </div>
        )}

        {/* Step 3: Project Details */}
        {currentStep === 2 && (
          <div className="space-y-6">
            <div>
              <label className="label">Services Needed * (select all that apply)</label>
              <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mt-2">
                {SERVICES.map((service) => (
                  <label
                    key={service.id}
                    className={cn(
                      'flex items-center gap-2 p-3 rounded-lg border cursor-pointer transition-all',
                      selectedServices.includes(service.id)
                        ? 'border-primary-500 bg-primary-50 text-primary-700'
                        : 'border-dark-200 hover:border-primary-200'
                    )}
                  >
                    <input
                      {...register('services')}
                      type="checkbox"
                      value={service.id}
                      className="text-primary-600"
                    />
                    <span className="text-sm font-medium">{service.name}</span>
                  </label>
                ))}
              </div>
              {errors.services && <p className="mt-2 text-sm text-red-500">{errors.services.message}</p>}
            </div>
            <div>
              <label className="label">Tell Us About Your Project *</label>
              <textarea
                {...register('projectDescription')}
                rows={5}
                className={cn('textarea', errors.projectDescription && 'border-red-500')}
                placeholder="Describe what you'd like done, any specific requirements, challenges, or ideas you have..."
              />
              {errors.projectDescription && <p className="mt-1 text-sm text-red-500">{errors.projectDescription.message}</p>}
            </div>
          </div>
        )}

        {/* Step 4: Timeline & Budget */}
        {currentStep === 3 && (
          <div className="space-y-6">
            <div>
              <label className="label">When Would You Like to Start? *</label>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {TIMELINE_OPTIONS.map((option) => (
                  <label
                    key={option}
                    className={cn(
                      'flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all',
                      watch('timeline') === option
                        ? 'border-primary-500 bg-primary-50'
                        : 'border-dark-200 hover:border-primary-200'
                    )}
                  >
                    <input {...register('timeline')} type="radio" value={option} className="text-primary-600" />
                    <span>{option}</span>
                  </label>
                ))}
              </div>
              {errors.timeline && <p className="mt-2 text-sm text-red-500">{errors.timeline.message}</p>}
            </div>
            <div>
              <label className="label">Estimated Budget Range *</label>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {BUDGET_RANGES.map((range) => (
                  <label
                    key={range}
                    className={cn(
                      'flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all',
                      watch('budget') === range
                        ? 'border-primary-500 bg-primary-50'
                        : 'border-dark-200 hover:border-primary-200'
                    )}
                  >
                    <input {...register('budget')} type="radio" value={range} className="text-primary-600" />
                    <span>{range}</span>
                  </label>
                ))}
              </div>
              {errors.budget && <p className="mt-2 text-sm text-red-500">{errors.budget.message}</p>}
            </div>
            <label className="flex items-center gap-2 cursor-pointer">
              <input {...register('flexibleBudget')} type="checkbox" className="text-primary-600" />
              <span className="text-dark-600">I'm flexible on budget for the right solution</span>
            </label>
          </div>
        )}

        {/* Step 5: Additional Info */}
        {currentStep === 4 && (
          <div className="space-y-6">
            <div>
              <label className="label">How Did You Hear About Us?</label>
              <select {...register('howDidYouHear')} className="input">
                <option value="">Select (optional)</option>
                {REFERRAL_SOURCES.map((source) => (
                  <option key={source} value={source}>{source}</option>
                ))}
              </select>
            </div>
            <div>
              <label className="label">üì∏ Upload Photos of Your Project (Optional)</label>
              <p className="text-sm text-dark-500 mb-2">Help us understand your project better ‚Äî share photos of the area you want renovated.</p>
              {uploadedPhotos.length > 0 && (
                <div className="flex flex-wrap gap-2 mb-3">
                  {uploadedPhotos.map((file, i) => (
                    <div key={i} className="relative group">
                      <img
                        src={URL.createObjectURL(file)}
                        alt={`Photo ${i + 1}`}
                        className="w-20 h-20 object-cover rounded-lg border border-dark-200"
                      />
                      <button
                        type="button"
                        onClick={() => setUploadedPhotos(prev => prev.filter((_, idx) => idx !== i))}
                        className="absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity"
                      >
                        <X className="w-3 h-3" />
                      </button>
                    </div>
                  ))}
                </div>
              )}
              <label className="flex flex-col items-center justify-center gap-2 p-6 border-2 border-dashed border-dark-300 rounded-xl cursor-pointer hover:border-primary-400 hover:bg-primary-50/30 transition-colors">
                <Upload className="w-8 h-8 text-dark-400" />
                <span className="text-sm font-medium text-dark-600">Tap to upload photos</span>
                <span className="text-xs text-dark-400">JPG, PNG up to 10MB each ‚Ä¢ Max 5 photos</span>
                <input
                  type="file"
                  accept="image/*"
                  multiple
                  className="hidden"
                  onChange={(e) => {
                    const files = Array.from(e.target.files || [])
                    const total = uploadedPhotos.length + files.length
                    if (total > 5) {
                      alert('Maximum 5 photos allowed')
                      return
                    }
                    const valid = files.filter(f => f.size <= 10 * 1024 * 1024)
                    if (valid.length < files.length) {
                      alert('Some files exceeded 10MB and were skipped')
                    }
                    setUploadedPhotos(prev => [...prev, ...valid])
                    e.target.value = '' // reset input
                  }}
                />
              </label>
            </div>
            <div>
              <label className="label">Anything Else We Should Know?</label>
              <textarea
                {...register('additionalNotes')}
                rows={4}
                className="textarea"
                placeholder="Access instructions, HOA requirements, pets, scheduling preferences, etc."
              />
            </div>
            <div className="bg-gold-50 border border-gold-200 rounded-xl p-4">
              <p className="text-gold-800 text-sm">
                <strong>What happens next?</strong> We'll review your project details and contact you within 
                24 hours to schedule a free on-site consultation and provide a detailed estimate.
              </p>
            </div>
          </div>
        )}

        {/* Navigation Buttons */}
        <div className="flex flex-col sm:flex-row justify-between gap-3 sm:gap-0 mt-8 pt-6 border-t border-dark-100">
          <button
            type="button"
            onClick={prevStep}
            className={cn("btn-outline text-sm md:text-base px-4 py-2 md:px-6 md:py-3", currentStep === 0 && "invisible")}
          >
            <ArrowLeft className="w-5 h-5 mr-2" />
            Back
          </button>

          {currentStep < steps.length - 1 ? (
            <button type="button" onClick={(e) => { e.preventDefault(); nextStep(); }} className="btn-primary text-sm md:text-base px-4 py-2 md:px-6 md:py-3">
              Continue
              <ArrowRight className="w-5 h-5 ml-2" />
            </button>
          ) : (
            <button type="submit" disabled={isSubmitting} className="btn-gold btn-lg text-sm md:text-base px-6 py-3 md:px-8 md:py-4">
              {isSubmitting ? (
                <>
                  <Loader2 className="w-5 h-5 animate-spin mr-2" />
                  Submitting...
                </>
              ) : (
                <>
                  <Calendar className="w-5 h-5 mr-2" />
                  Request Free Estimate
                </>
              )}
            </button>
          )}
        </div>
      </form>
    </div>
  )
}


==========================================================================================

--- file: .backup-20260215-115343/lib/email.ts ---
// ============================================
// Email Service using Resend
// ============================================

import { Resend } from 'resend'

const resend = new Resend(process.env.RESEND_API_KEY || 'placeholder_key')

const FROM_EMAIL = process.env.EMAIL_FROM || 'CR Home Pros <noreply@crhomepros.com>'
const CARLOS_EMAIL = process.env.EMAIL_TO_LEADS || 'crhomepros@gmail.com'

// ============================================
// Email Templates
// ============================================

interface LeadEmailData {
  firstName: string
  lastName: string
  email: string
  phone: string
  address: string
  city: string
  state: string
  services: string[]
  projectDescription: string
  timeline: string
  budget: string
  preferredContact?: string
  contactTag?: string
  additionalNotes?: string
  driveFolderUrl?: string
  attachments?: { filename: string; content: Buffer }[]
}

interface ReferralEmailData {
  referrerName: string
  referrerEmail: string
  referrerPhone: string
  referralName: string
  referralPhone: string
  projectType: string
  projectDetails?: string
}

interface ContactEmailData {
  name: string
  email: string
  phone: string
  message: string
  service?: string
}

// ============================================
// Send Functions
// ============================================

export async function sendNewLeadNotification(lead: LeadEmailData): Promise<boolean> {
  try {
    const tag = lead.contactTag || '[PHONE]'
    const contactMethodLabel = (lead.preferredContact || 'phone').toUpperCase()
    const contactMethodEmoji = {
      'PHONE': 'üìû',
      'EMAIL': '‚úâÔ∏è',
      'TEXT': 'üí¨',
      'WHATSAPP': 'üü¢',
    }[contactMethodLabel] || 'üìû'

    await resend.emails.send({
      from: FROM_EMAIL,
      to: CARLOS_EMAIL,
      subject: `üî• ${tag} New Lead: ${lead.firstName} ${lead.lastName} - ${lead.services.join(', ')}`,
      attachments: lead.attachments?.map(a => ({
        filename: a.filename,
        content: a.content,
      })),
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #1e40af, #0f172a); padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">üè† New Project Lead!</h1>
            <p style="color: #c4a052; margin: 8px 0 0; font-size: 16px; font-weight: bold;">
              ${contactMethodEmoji} Prefers: ${contactMethodLabel}
            </p>
          </div>
          
          <div style="padding: 20px; background: #f8fafc;">
            <div style="background: ${contactMethodLabel === 'WHATSAPP' ? '#25D366' : contactMethodLabel === 'TEXT' ? '#3b82f6' : contactMethodLabel === 'EMAIL' ? '#8b5cf6' : '#1e40af'}; color: white; padding: 10px 16px; border-radius: 8px; margin-bottom: 16px; font-weight: bold; font-size: 14px;">
              ${contactMethodEmoji} PREFERRED CONTACT: ${contactMethodLabel} ${contactMethodLabel === 'WHATSAPP' ? '‚Äî Open WhatsApp: wa.me/' + lead.phone.replace(/\\D/g, '') : contactMethodLabel === 'TEXT' ? '‚Äî Send text to: ' + lead.phone : ''}
            </div>

            <h2 style="color: #1e40af;">Contact Information</h2>
            <table style="width: 100%; border-collapse: collapse;">
              <tr>
                <td style="padding: 8px; font-weight: bold;">Name:</td>
                <td style="padding: 8px;">${lead.firstName} ${lead.lastName}</td>
              </tr>
              <tr>
                <td style="padding: 8px; font-weight: bold;">Phone:</td>
                <td style="padding: 8px;"><a href="tel:${lead.phone}">${lead.phone}</a></td>
              </tr>
              <tr>
                <td style="padding: 8px; font-weight: bold;">Email:</td>
                <td style="padding: 8px;"><a href="mailto:${lead.email}">${lead.email}</a></td>
              </tr>
              <tr>
                <td style="padding: 8px; font-weight: bold;">Address:</td>
                <td style="padding: 8px;">${lead.address}, ${lead.city}, ${lead.state}</td>
              </tr>
            </table>
            
            <h2 style="color: #1e40af; margin-top: 20px;">Project Details</h2>
            <table style="width: 100%; border-collapse: collapse;">
              <tr>
                <td style="padding: 8px; font-weight: bold;">Services:</td>
                <td style="padding: 8px;">${lead.services.join(', ')}</td>
              </tr>
              <tr>
                <td style="padding: 8px; font-weight: bold;">Timeline:</td>
                <td style="padding: 8px;">${lead.timeline}</td>
              </tr>
              <tr>
                <td style="padding: 8px; font-weight: bold;">Budget:</td>
                <td style="padding: 8px;">${lead.budget}</td>
              </tr>
            </table>
            
            <div style="background: white; padding: 15px; margin-top: 20px; border-radius: 8px; border-left: 4px solid #c4a052;">
              <p style="margin: 0; font-weight: bold;">Project Description:</p>
              <p style="margin: 10px 0 0 0;">${lead.projectDescription}</p>
            </div>

            ${lead.additionalNotes ? `
            <div style="background: white; padding: 15px; margin-top: 12px; border-radius: 8px; border-left: 4px solid #94a3b8;">
              <p style="margin: 0; font-weight: bold;">Additional Notes:</p>
              <p style="margin: 10px 0 0 0;">${lead.additionalNotes}</p>
            </div>
            ` : ''}

            ${lead.driveFolderUrl ? `
            <div style="background: #e0f2fe; padding: 15px; margin-top: 12px; border-radius: 8px; border-left: 4px solid #0ea5e9; text-align: center;">
              <a href="${lead.driveFolderUrl}" style="color: #0369a1; font-weight: bold; font-size: 16px; text-decoration: none;">
                üìÅ Open Lead Folder in Google Drive
              </a>
            </div>
            ` : ''}

            ${lead.attachments && lead.attachments.length > 0 ? `
            <div style="background: #fef3c7; padding: 12px; margin-top: 12px; border-radius: 8px; text-align: center;">
              <p style="margin: 0; font-size: 14px; color: #92400e;">üì∏ ${lead.attachments.length} photo(s) attached below</p>
            </div>
            ` : ''}
          </div>
          
          <div style="background: #c4a052; padding: 15px; text-align: center;">
            ${contactMethodLabel === 'WHATSAPP' 
              ? `<a href="https://wa.me/${lead.phone.replace(/\\D/g, '')}" style="color: #0f172a; font-weight: bold; font-size: 18px; text-decoration: none;">üü¢ Reply via WhatsApp</a>`
              : `<a href="tel:${lead.phone}" style="color: #0f172a; font-weight: bold; font-size: 18px; text-decoration: none;">üìû Call Now: ${lead.phone}</a>`
            }
          </div>
        </div>
      `,
    })
    
    return true
  } catch (error) {
    console.error('Error sending lead notification:', error)
    return false
  }
}

export async function sendNewReferralNotification(referral: ReferralEmailData): Promise<boolean> {
  try {
    await resend.emails.send({
      from: FROM_EMAIL,
      to: CARLOS_EMAIL,
      subject: `üí∞ New Referral from ${referral.referrerName}!`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #c4a052, #a08941); padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">üí∞ New Referral!</h1>
          </div>
          
          <div style="padding: 20px; background: #f8fafc;">
            <h2 style="color: #1e40af;">Referrer Information</h2>
            <p><strong>Name:</strong> ${referral.referrerName}</p>
            <p><strong>Email:</strong> ${referral.referrerEmail}</p>
            <p><strong>Phone:</strong> ${referral.referrerPhone}</p>
            
            <h2 style="color: #1e40af; margin-top: 20px;">Referred Person</h2>
            <p><strong>Name:</strong> ${referral.referralName}</p>
            <p><strong>Phone:</strong> <a href="tel:${referral.referralPhone}">${referral.referralPhone}</a></p>
            <p><strong>Project Type:</strong> ${referral.projectType}</p>
            ${referral.projectDetails ? `<p><strong>Details:</strong> ${referral.projectDetails}</p>` : ''}
          </div>
          
          <div style="background: #1e40af; padding: 15px; text-align: center;">
            <a href="tel:${referral.referralPhone}" style="color: white; font-weight: bold; font-size: 18px; text-decoration: none;">
              üìû Call Referral: ${referral.referralPhone}
            </a>
          </div>
        </div>
      `,
    })
    
    return true
  } catch (error) {
    console.error('Error sending referral notification:', error)
    return false
  }
}

export async function sendContactFormNotification(contact: ContactEmailData): Promise<boolean> {
  try {
    await resend.emails.send({
      from: FROM_EMAIL,
      to: CARLOS_EMAIL,
      subject: `üì¨ Contact Form: ${contact.name}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: #1e40af; padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">üì¨ New Contact Message</h1>
          </div>
          
          <div style="padding: 20px; background: #f8fafc;">
            <p><strong>Name:</strong> ${contact.name}</p>
            <p><strong>Email:</strong> <a href="mailto:${contact.email}">${contact.email}</a></p>
            <p><strong>Phone:</strong> <a href="tel:${contact.phone}">${contact.phone}</a></p>
            ${contact.service ? `<p><strong>Service:</strong> ${contact.service}</p>` : ''}
            
            <div style="background: white; padding: 15px; margin-top: 15px; border-radius: 8px;">
              <p style="margin: 0; font-weight: bold;">Message:</p>
              <p style="margin: 10px 0 0 0;">${contact.message}</p>
            </div>
          </div>
          
          <div style="background: #c4a052; padding: 15px; text-align: center;">
            <a href="tel:${contact.phone}" style="color: #0f172a; font-weight: bold; text-decoration: none;">
              üìû ${contact.phone}
            </a>
          </div>
        </div>
      `,
    })
    
    return true
  } catch (error) {
    console.error('Error sending contact notification:', error)
    return false
  }
}

// Auto-reply to customer
export async function sendLeadConfirmation(email: string, firstName: string): Promise<boolean> {
  try {
    await resend.emails.send({
      from: FROM_EMAIL,
      to: email,
      subject: 'Thank you for contacting CR Home Pros!',
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #1e40af, #0f172a); padding: 30px; text-align: center;">
            <h1 style="color: white; margin: 0;">CR Home Pros</h1>
            <p style="color: #c4a052; margin: 10px 0 0 0;">Your Home. Our Expertise.</p>
          </div>
          
          <div style="padding: 30px;">
            <h2 style="color: #1e40af;">Thank You, ${firstName}!</h2>
            <p>We've received your project request and are excited to help transform your home!</p>
            
            <p><strong>What happens next:</strong></p>
            <ul>
              <li>Our team will review your project details</li>
              <li>We'll contact you within 24 hours</li>
              <li>We'll schedule a free on-site consultation</li>
              <li>You'll receive a detailed, no-obligation estimate</li>
            </ul>
            
            <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
              <p style="margin: 0;"><strong>Need immediate assistance?</strong></p>
              <p style="margin: 10px 0 0 0;">
                Call us at <a href="tel:5712377164" style="color: #1e40af; font-weight: bold;">(571) 237-7164</a>
              </p>
              <p style="margin: 5px 0 0 0; font-size: 14px; color: #666;">
                üåé ¬°Hablamos Espa√±ol!
              </p>
            </div>
            
            <p>We look forward to working with you!</p>
            <p><strong>Carlos Hernandez</strong><br>Owner, CR Home Pros</p>
          </div>
          
          <div style="background: #0f172a; padding: 20px; text-align: center; color: #999; font-size: 12px;">
            <p>CR Home Pros | MHIC #05-132359 | Licensed & Insured</p>
            <p>6509 Perry Ct, Hyattsville, MD 20784</p>
          </div>
        </div>
      `,
    })
    
    return true
  } catch (error) {
    console.error('Error sending confirmation email:', error)
    return false
  }
}


==========================================================================================

--- file: .backup-20260215-115343/lib/google-drive.ts ---
// ============================================
// Google Drive Service ‚Äî Lead Management
// ============================================
// Creates folders, generates lead docs, uploads images
// directly to Carlos's Google Drive via OAuth2 refresh token.
//
// SETUP:
// 1. Carlos authorizes via /admin/connect-drive (one-time)
// 2. Refresh token stored in GOOGLE_DRIVE_REFRESH_TOKEN env
// 3. All form submissions auto-create folders in Drive
//
// FOLDER STRUCTURE:
// CR Home Pros/
//   ‚îú‚îÄ‚îÄ Leads/
//   ‚îÇ   ‚îî‚îÄ‚îÄ [2026-02-13] John Smith - Kitchen/
//   ‚îÇ       ‚îú‚îÄ‚îÄ Lead-Details.docx
//   ‚îÇ       ‚îî‚îÄ‚îÄ photos/
//   ‚îú‚îÄ‚îÄ In Progress/
//   ‚îî‚îÄ‚îÄ Completed/
// ============================================

import { google } from 'googleapis'
import { Readable } from 'stream'

const SCOPES = [
  'https://www.googleapis.com/auth/drive.file',
  'https://www.googleapis.com/auth/drive',
]

const CLIENT_ID = process.env.GOOGLE_DRIVE_CLIENT_ID || ''
const CLIENT_SECRET = process.env.GOOGLE_DRIVE_CLIENT_SECRET || ''
const REDIRECT_URI = process.env.GOOGLE_DRIVE_REDIRECT_URI || 'https://crhomepros.com/api/auth/google/callback'
const REFRESH_TOKEN = process.env.GOOGLE_DRIVE_REFRESH_TOKEN || ''

// Root folder names
const ROOT_FOLDER_NAME = 'CR Home Pros'
const LEADS_FOLDER_NAME = 'Leads'
const IN_PROGRESS_FOLDER_NAME = 'In Progress'
const COMPLETED_FOLDER_NAME = 'Completed'

// ============================================
// OAuth2 Client
// ============================================

function getOAuth2Client() {
  const oauth2Client = new google.auth.OAuth2(CLIENT_ID, CLIENT_SECRET, REDIRECT_URI)

  if (REFRESH_TOKEN) {
    oauth2Client.setCredentials({ refresh_token: REFRESH_TOKEN })
  }

  return oauth2Client
}

function getDrive() {
  return google.drive({ version: 'v3', auth: getOAuth2Client() })
}

/**
 * Generate the authorization URL for Carlos to grant access (one-time setup)
 */
export function getAuthUrl(): string {
  const oauth2Client = getOAuth2Client()
  return oauth2Client.generateAuthUrl({
    access_type: 'offline',
    scope: SCOPES,
    prompt: 'consent',
  })
}

/**
 * Exchange authorization code for tokens (callback handler)
 */
export async function getTokensFromCode(code: string) {
  const oauth2Client = getOAuth2Client()
  const { tokens } = await oauth2Client.getToken(code)
  return tokens
}

// ============================================
// Folder Management
// ============================================

/**
 * Find or create a folder by name under a parent folder
 */
async function findOrCreateFolder(name: string, parentId?: string): Promise<string> {
  const drive = getDrive()

  // Search for existing folder
  let query = `name='${name}' and mimeType='application/vnd.google-apps.folder' and trashed=false`
  if (parentId) {
    query += ` and '${parentId}' in parents`
  }

  const search = await drive.files.list({
    q: query,
    fields: 'files(id, name)',
    spaces: 'drive',
  })

  if (search.data.files && search.data.files.length > 0) {
    return search.data.files[0].id!
  }

  // Create folder
  const folder = await drive.files.create({
    requestBody: {
      name,
      mimeType: 'application/vnd.google-apps.folder',
      parents: parentId ? [parentId] : undefined,
    },
    fields: 'id',
  })

  return folder.data.id!
}

/**
 * Initialize the CR Home Pros folder structure in Drive
 */
export async function initializeFolderStructure(): Promise<{
  rootId: string
  leadsId: string
  inProgressId: string
  completedId: string
}> {
  const rootId = await findOrCreateFolder(ROOT_FOLDER_NAME)
  const leadsId = await findOrCreateFolder(LEADS_FOLDER_NAME, rootId)
  const inProgressId = await findOrCreateFolder(IN_PROGRESS_FOLDER_NAME, rootId)
  const completedId = await findOrCreateFolder(COMPLETED_FOLDER_NAME, rootId)

  return { rootId, leadsId, inProgressId, completedId }
}

// ============================================
// Lead Folder Creation
// ============================================

export interface LeadData {
  firstName: string
  lastName: string
  email: string
  phone: string
  preferredContact?: string
  address: string
  city: string
  state: string
  zip?: string
  services: string[]
  projectDescription: string
  timeline?: string
  budget?: string
  additionalNotes?: string
  howDidYouHear?: string
}

/**
 * Create a lead folder with all details in Google Drive
 * Returns the folder URL for Carlos to access
 */
export async function createLeadInDrive(lead: LeadData, images?: Buffer[]): Promise<{
  folderId: string
  folderUrl: string
  docId?: string
}> {
  const drive = getDrive()

  // Get or create the Leads folder
  const { leadsId } = await initializeFolderStructure()

  // Create lead-specific folder
  const date = new Date().toISOString().split('T')[0]
  const folderName = `[${date}] ${lead.firstName} ${lead.lastName} - ${lead.services[0] || 'General'}`
  const folderId = await findOrCreateFolder(folderName, leadsId)

  // Create the lead details document (plain text for reliability)
  const contactTag = lead.preferredContact ? `[${lead.preferredContact.toUpperCase()}]` : '[PHONE]'
  const docContent = buildLeadDocument(lead, contactTag, date)

  const docFile = await drive.files.create({
    requestBody: {
      name: `Lead-Details-${lead.firstName}-${lead.lastName}.txt`,
      parents: [folderId],
      mimeType: 'text/plain',
    },
    media: {
      mimeType: 'text/plain',
      body: docContent,
    },
    fields: 'id',
  })

  // Upload images if provided
  if (images && images.length > 0) {
    const photosId = await findOrCreateFolder('photos', folderId)

    for (let i = 0; i < images.length; i++) {

      await drive.files.create({
        requestBody: {
          name: `project-photo-${i + 1}.jpg`,
          parents: [photosId],
        },
        media: {
          mimeType: 'image/jpeg',
          body: Readable.from(images[i]),
        },
        fields: 'id',
      })
    }
  }

  const folderUrl = `https://drive.google.com/drive/folders/${folderId}`

  return {
    folderId,
    folderUrl,
    docId: docFile.data.id || undefined,
  }
}

/**
 * Build a formatted lead details document
 */
function buildLeadDocument(lead: LeadData, contactTag: string, date: string): string {
  const contactEmoji: Record<string, string> = {
    phone: 'üìû', email: '‚úâÔ∏è', text: 'üí¨', whatsapp: 'üü¢',
  }
  const emoji = contactEmoji[lead.preferredContact || 'phone'] || 'üìû'

  return `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CR HOME PROS ‚Äî NEW LEAD
   ${date}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

${emoji} PREFERRED CONTACT: ${(lead.preferredContact || 'phone').toUpperCase()} ${contactTag}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
CONTACT INFORMATION
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Name:       ${lead.firstName} ${lead.lastName}
Phone:      ${lead.phone}
Email:      ${lead.email}
Address:    ${lead.address}
City:       ${lead.city}, ${lead.state} ${lead.zip || ''}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
PROJECT DETAILS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Services:   ${lead.services.join(', ')}
Timeline:   ${lead.timeline || 'Not specified'}
Budget:     ${lead.budget || 'Not specified'}

Description:
${lead.projectDescription}

${lead.additionalNotes ? `Additional Notes:\n${lead.additionalNotes}\n` : ''}
${lead.howDidYouHear ? `How They Found Us: ${lead.howDidYouHear}\n` : ''}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
STATUS: NEW ‚Äî Awaiting contact
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

CR Home Pros | (301) 602-2553
Licensed & Insured ‚Äî MHIC #05-132359
crhomepros.com
`.trim()
}

// ============================================
// Referral Folder Creation
// ============================================

export interface ReferralData {
  referrerName: string
  referrerEmail: string
  referrerPhone: string
  referralName: string
  referralPhone: string
  referralEmail?: string
  projectType: string
  projectDetails?: string
  paymentMethod: string
}

export async function createReferralInDrive(referral: ReferralData): Promise<{
  folderId: string
  folderUrl: string
}> {
  const drive = getDrive()
  const { leadsId } = await initializeFolderStructure()

  const date = new Date().toISOString().split('T')[0]
  const folderName = `[${date}] REFERRAL - ${referral.referralName} (by ${referral.referrerName})`
  const folderId = await findOrCreateFolder(folderName, leadsId)

  const docContent = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CR HOME PROS ‚Äî REFERRAL
   ${date}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

REFERRED BY:
  Name:   ${referral.referrerName}
  Phone:  ${referral.referrerPhone}
  Email:  ${referral.referrerEmail}
  Pay via: ${referral.paymentMethod}

REFERRED PERSON:
  Name:   ${referral.referralName}
  Phone:  ${referral.referralPhone}
  ${referral.referralEmail ? `Email:  ${referral.referralEmail}` : ''}

PROJECT:
  Type:    ${referral.projectType}
  ${referral.projectDetails ? `Details: ${referral.projectDetails}` : ''}

STATUS: PENDING ‚Äî Awaiting contact
`.trim()

  await drive.files.create({
    requestBody: {
      name: `Referral-${referral.referralName}.txt`,
      parents: [folderId],
      mimeType: 'text/plain',
    },
    media: {
      mimeType: 'text/plain',
      body: docContent,
    },
    fields: 'id',
  })

  return {
    folderId,
    folderUrl: `https://drive.google.com/drive/folders/${folderId}`,
  }
}

// ============================================
// Contact Message (simpler ‚Äî just append to a log)
// ============================================

export async function logContactInDrive(contact: {
  name: string
  email: string
  phone: string
  message: string
  service?: string
}): Promise<void> {
  const drive = getDrive()
  const { leadsId } = await initializeFolderStructure()

  const date = new Date().toISOString().split('T')[0]
  const time = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })

  await drive.files.create({
    requestBody: {
      name: `[${date}] Contact - ${contact.name}.txt`,
      parents: [leadsId],
      mimeType: 'text/plain',
    },
    media: {
      mimeType: 'text/plain',
      body: `CONTACT MESSAGE ‚Äî ${date} ${time}\n\nName: ${contact.name}\nEmail: ${contact.email}\nPhone: ${contact.phone}\nService: ${contact.service || 'General'}\n\nMessage:\n${contact.message}`,
    },
    fields: 'id',
  })
}

/**
 * Check if Google Drive is configured (has refresh token)
 */
export function isDriveConfigured(): boolean {
  return !!(CLIENT_ID && CLIENT_SECRET && REFRESH_TOKEN)
}


==========================================================================================

--- file: styles/globals.css ---
/* Google Fonts */
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400;500;600;700&family=Sora:wght@300;400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== ROOT VARIABLES ===== */
:root {
  --primary: #0c1355;
  --primary-light: #1e2a85;
  --gold: #c4a052;
  --gold-light: #d4b872;
  --dark: #060828;
  --dark-light: #121638;
}

/* ===== BASE STYLES ===== */
@layer base {
  html {
    scroll-behavior: smooth;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  body {
    @apply bg-white text-dark-900;
    font-feature-settings: "rlig" 1, "calt" 1;
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-semibold tracking-tight;
  }

  h1 {
    @apply text-4xl md:text-5xl lg:text-display-sm;
  }

  h2 {
    @apply text-3xl md:text-4xl lg:text-5xl;
  }

  h3 {
    @apply text-2xl md:text-3xl;
  }

  h4 {
    @apply text-xl md:text-2xl;
  }

  p {
    @apply text-dark-600 leading-relaxed;
  }

  /* Focus styles */
  *:focus-visible {
    @apply outline-none ring-2 ring-primary-500 ring-offset-2;
  }

  /* Selection */
  ::selection {
    @apply bg-gold-500/30 text-dark-900;
  }
}

/* ===== COMPONENT STYLES ===== */
@layer components {
  /* Container */
  .container-custom {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .container-narrow {
    @apply max-w-4xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* Section spacing */
  .section-padding {
    @apply py-16 md:py-24 lg:py-32;
  }

  .section-padding-sm {
    @apply py-12 md:py-16 lg:py-20;
  }

  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 
           font-medium rounded-xl transition-all duration-300
           focus:outline-none focus:ring-2 focus:ring-offset-2
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-primary {
    @apply btn bg-primary-800 text-white px-6 py-3
           hover:bg-primary-700 hover:shadow-lg hover:-translate-y-0.5
           focus:ring-primary-500 active:translate-y-0;
  }

  .btn-gold {
    @apply btn bg-gold-500 text-dark-900 px-6 py-3
           hover:bg-gold-400 hover:shadow-glow hover:-translate-y-0.5
           focus:ring-gold-500 active:translate-y-0;
  }

  .btn-outline {
    @apply btn border-2 border-primary-800 text-primary-800 px-6 py-3
           hover:bg-primary-800 hover:text-white
           focus:ring-primary-500;
  }

  .btn-outline-white {
    @apply btn border-2 border-white/30 text-white px-6 py-3
           hover:bg-white hover:text-dark-900
           focus:ring-white;
  }

  .btn-ghost {
    @apply btn text-primary-800 px-4 py-2
           hover:bg-primary-50
           focus:ring-primary-500;
  }

  .btn-lg {
    @apply px-8 py-4 text-lg;
  }

  .btn-sm {
    @apply px-4 py-2 text-sm;
  }

  /* Cards */
  .card {
    @apply bg-white rounded-2xl shadow-lg shadow-dark-900/5
           border border-dark-100
           transition-all duration-300;
  }

  .card-hover {
    @apply card hover:shadow-xl hover:-translate-y-1 hover:border-primary-200;
  }

  .card-dark {
    @apply bg-dark-900 rounded-2xl border border-white/10
           shadow-lg shadow-black/20;
  }

  /* Inputs */
  .input {
    @apply w-full px-4 py-3 rounded-xl border border-dark-200
           bg-white text-dark-900 placeholder-dark-400
           focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20
           transition-all duration-200;
  }

  .input-dark {
    @apply w-full px-4 py-3 rounded-xl border border-white/10
           bg-white/5 text-white placeholder-white/40
           focus:border-gold-500 focus:ring-2 focus:ring-gold-500/20
           transition-all duration-200;
  }

  .textarea {
    @apply input min-h-[120px] resize-y;
  }

  .label {
    @apply block text-sm font-medium text-dark-700 mb-2;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center gap-1.5 px-3 py-1 
           rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply badge bg-primary-100 text-primary-800;
  }

  .badge-gold {
    @apply badge bg-gold-100 text-gold-800;
  }

  .badge-dark {
    @apply badge bg-dark-800 text-white;
  }

  /* Links */
  .link {
    @apply text-primary-600 hover:text-primary-800 
           underline underline-offset-4 decoration-primary-300
           hover:decoration-primary-600 transition-colors;
  }

  /* Gradients */
  .gradient-text {
    @apply bg-clip-text text-transparent 
           bg-gradient-to-r from-primary-600 via-primary-800 to-primary-600;
  }

  .gradient-text-gold {
    @apply bg-clip-text text-transparent 
           bg-gradient-to-r from-gold-400 via-gold-500 to-gold-400;
  }

  .gradient-bg {
    @apply bg-gradient-to-br from-primary-800 via-primary-900 to-dark-900;
  }

  .gradient-bg-gold {
    @apply bg-gradient-to-br from-gold-500 via-gold-600 to-gold-700;
  }

  /* Glass effect */
  .glass {
    @apply bg-white/80 backdrop-blur-lg border border-white/20;
  }

  .glass-dark {
    @apply bg-dark-900/80 backdrop-blur-lg border border-white/10;
  }

  /* Dividers */
  .divider {
    @apply h-px bg-gradient-to-r from-transparent via-dark-200 to-transparent;
  }

  .divider-dark {
    @apply h-px bg-gradient-to-r from-transparent via-white/20 to-transparent;
  }
}

/* ===== UTILITY STYLES ===== */
@layer utilities {
  /* Text balance */
  .text-balance {
    text-wrap: balance;
  }

  /* Hide scrollbar */
  .no-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .no-scrollbar::-webkit-scrollbar {
    display: none;
  }

  /* Aspect ratios */
  .aspect-golden {
    aspect-ratio: 1.618 / 1;
  }

  /* Animations */
  .animate-delay-100 {
    animation-delay: 100ms;
  }

  .animate-delay-200 {
    animation-delay: 200ms;
  }

  .animate-delay-300 {
    animation-delay: 300ms;
  }

  .animate-delay-400 {
    animation-delay: 400ms;
  }

  .animate-delay-500 {
    animation-delay: 500ms;
  }

  /* Hover lift */
  .hover-lift {
    @apply transition-transform duration-300 hover:-translate-y-1;
  }

  /* Text shadow */
  .text-shadow {
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
  }

  .text-shadow-lg {
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }
}

/* ===== CUSTOM ANIMATIONS ===== */
@keyframes gradient-shift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animate-gradient {
  background-size: 200% 200%;
  animation: gradient-shift 8s ease infinite;
}

/* Before/After Slider */
.before-after-slider {
  @apply relative overflow-hidden rounded-xl;
}

.before-after-slider .before-image,
.before-after-slider .after-image {
  @apply absolute inset-0 w-full h-full object-cover;
}

.before-after-slider .slider-handle {
  @apply absolute top-0 bottom-0 w-1 bg-white cursor-ew-resize
         flex items-center justify-center z-10;
}

.before-after-slider .slider-handle::before {
  content: '';
  @apply absolute w-10 h-10 rounded-full bg-white shadow-lg
         flex items-center justify-center;
}

/* WhatsApp button pulse */
@keyframes whatsapp-pulse {
  0%, 100% {
    box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.4);
  }
  50% {
    box-shadow: 0 0 0 15px rgba(37, 211, 102, 0);
  }
}

.whatsapp-pulse {
  animation: whatsapp-pulse 2s ease-in-out infinite;
}

/* Noise overlay */
.noise-overlay::before {
  content: '';
  @apply absolute inset-0 opacity-[0.03] pointer-events-none;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
}

/* Hide scrollbar but keep scroll functionality */
.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}


==========================================================================================

--- file: components/EmergencyModal.tsx ---
'use client'

import { X, Phone, AlertTriangle } from 'lucide-react'
import Link from 'next/link'
import { COMPANY } from '@/lib/constants'

interface EmergencyModalProps {
  isOpen: boolean
  onClose: () => void
}

export function EmergencyModal({ isOpen, onClose }: EmergencyModalProps) {
  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-[100] flex items-center justify-center p-4">
      {/* Backdrop */}
      <div 
        className="absolute inset-0 bg-black/60 backdrop-blur-sm"
        onClick={onClose}
      />
      
      {/* Modal */}
      <div className="relative bg-white rounded-2xl shadow-2xl max-w-md w-full overflow-hidden">
        {/* Header */}
        <div className="bg-red-600 text-white px-6 py-4 flex items-center justify-between">
          <div className="flex items-center gap-2">
            <AlertTriangle className="w-5 h-5" />
            <h2 className="text-xl font-bold">Emergency Service</h2>
          </div>
          <button 
            onClick={onClose}
            className="p-1 hover:bg-white/20 rounded-lg transition-colors"
          >
            <X className="w-5 h-5" />
          </button>
        </div>

        {/* Pricing */}
        <div className="p-6 space-y-4">
          <p className="text-dark-600 text-sm">
            We respond to emergencies fast. Here are our on-call rates:
          </p>

          <div className="space-y-3">
            <div className="flex items-center justify-between p-3 bg-dark-50 rounded-xl">
              <div>
                <p className="font-semibold text-dark-900">Standard Emergency</p>
                <p className="text-sm text-dark-500">Mon‚ÄìFri, 8AM‚Äì6PM</p>
              </div>
              <span className="text-xl font-bold text-red-600">$150<span className="text-sm font-normal text-dark-400">/hr</span></span>
            </div>

            <div className="flex items-center justify-between p-3 bg-dark-50 rounded-xl">
              <div>
                <p className="font-semibold text-dark-900">After Hours</p>
                <p className="text-sm text-dark-500">Mon‚ÄìFri, 6PM‚Äì8AM</p>
              </div>
              <span className="text-xl font-bold text-red-600">$200<span className="text-sm font-normal text-dark-400">/hr</span></span>
            </div>

            <div className="flex items-center justify-between p-3 bg-dark-50 rounded-xl">
              <div>
                <p className="font-semibold text-dark-900">Weekends & Holidays</p>
                <p className="text-sm text-dark-500">Sat‚ÄìSun, all day</p>
              </div>
              <span className="text-xl font-bold text-red-600">$250<span className="text-sm font-normal text-dark-400">/hr</span></span>
            </div>
          </div>

          <p className="text-xs text-dark-400 italic">
            Dispatch fee of $75 applies. Minimum 1-hour service call.
            Additional work billed separately. We'll provide a full estimate before starting major repairs.
          </p>

          <div className="space-y-3">
            <a
              href="tel:5712377164"
              className="flex items-center justify-center gap-3 w-full bg-red-500 hover:bg-red-600 text-white py-4 rounded-xl font-bold text-lg transition-colors"
            >
              <Phone className="w-5 h-5" />
              Call Now: (571) 237-7164
            </a>
            <Link
              href="/contact"
              onClick={onClose}
              className="block text-center w-full bg-dark-100 hover:bg-dark-200 text-dark-900 py-3 rounded-xl font-semibold transition-colors"
            >
              Or Contact Us
            </Link>
          </div>
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: components/GoogleAnalytics.tsx ---
'use client'

import Script from 'next/script'
import { usePathname, useSearchParams } from 'next/navigation'
import { useEffect } from 'react'
import { GA_ID, gtag, trackPhoneClick, trackWhatsAppClick } from '@/lib/analytics'

export function GoogleAnalytics() {
  const pathname = usePathname()
  const searchParams = useSearchParams()

  // Track page views on route change
  useEffect(() => {
    if (pathname) {
      gtag('config', GA_ID, {
        page_path: pathname,
      })
    }
  }, [pathname, searchParams])

  // Auto-track phone and WhatsApp link clicks via event delegation
  useEffect(() => {
    const handleClick = (e: MouseEvent) => {
      const target = (e.target as HTMLElement).closest('a')
      if (!target) return

      const href = target.getAttribute('href') || ''

      // Phone clicks
      if (href.startsWith('tel:')) {
        const section = target.closest('header') ? 'navbar'
          : target.closest('footer') ? 'footer'
          : target.closest('[class*="floating"]') ? 'floating'
          : 'page'
        trackPhoneClick(section)
      }

      // WhatsApp clicks
      if (href.includes('wa.me') || href.includes('whatsapp')) {
        const section = target.closest('header') ? 'navbar'
          : target.closest('footer') ? 'footer'
          : 'page'
        trackWhatsAppClick(section)
      }
    }

    document.addEventListener('click', handleClick)
    return () => document.removeEventListener('click', handleClick)
  }, [])

  return (
    <>
      <Script
        strategy="afterInteractive"
        src={`https://www.googletagmanager.com/gtag/js?id=${GA_ID}`}
      />
      <Script
        id="google-analytics"
        strategy="afterInteractive"
        dangerouslySetInnerHTML={{
          __html: `
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', '${GA_ID}', {
              page_path: window.location.pathname,
            });
          `,
        }}
      />
    </>
  )
}


==========================================================================================

--- file: components/ScrollIndicator.tsx ---
'use client'

import { ChevronDown } from 'lucide-react'
import { cn } from '@/lib/utils'

interface ScrollIndicatorProps {
  className?: string
  text?: string
}

export function ScrollIndicator({ className, text = "Scroll for more" }: ScrollIndicatorProps) {
  return (
    <div className={cn(
      "flex flex-col items-center gap-2 animate-bounce-slow",
      className
    )}>
      <span className="text-sm text-white/60 font-medium">{text}</span>
      <ChevronDown className="w-6 h-6 text-white/60" />
    </div>
  )
}


==========================================================================================

--- file: components/ui/BeforeAfterSlider.tsx ---
'use client'

import { useState, useRef, useCallback, useEffect } from 'react'
import Image from 'next/image'

interface BeforeAfterSliderProps {
  beforeImage: string
  afterImage: string
  beforeLabel?: string
  afterLabel?: string
  className?: string
}

export function BeforeAfterSlider({
  beforeImage,
  afterImage,
  beforeLabel = 'Before',
  afterLabel = 'After',
  className = '',
}: BeforeAfterSliderProps) {
  const [position, setPosition] = useState(50)
  const [isDragging, setIsDragging] = useState(false)
  const containerRef = useRef<HTMLDivElement>(null)

  const handleMove = useCallback(
    (clientX: number) => {
      if (!containerRef.current) return
      const rect = containerRef.current.getBoundingClientRect()
      const x = Math.max(0, Math.min(clientX - rect.left, rect.width))
      setPosition((x / rect.width) * 100)
    },
    []
  )

  const handleMouseDown = () => setIsDragging(true)
  const handleMouseUp = () => setIsDragging(false)

  useEffect(() => {
    const handleMouseMove = (e: MouseEvent) => {
      if (isDragging) handleMove(e.clientX)
    }
    const handleTouchMove = (e: TouchEvent) => {
      if (isDragging) handleMove(e.touches[0].clientX)
    }

    if (isDragging) {
      window.addEventListener('mousemove', handleMouseMove)
      window.addEventListener('mouseup', handleMouseUp)
      window.addEventListener('touchmove', handleTouchMove)
      window.addEventListener('touchend', handleMouseUp)
    }

    return () => {
      window.removeEventListener('mousemove', handleMouseMove)
      window.removeEventListener('mouseup', handleMouseUp)
      window.removeEventListener('touchmove', handleTouchMove)
      window.removeEventListener('touchend', handleMouseUp)
    }
  }, [isDragging, handleMove])

  return (
    <div
      ref={containerRef}
      className={`relative overflow-hidden rounded-2xl cursor-col-resize select-none ${className}`}
      onMouseDown={handleMouseDown}
      onTouchStart={handleMouseDown}
    >
      {/* After Image (full background) */}
      <div className="relative w-full aspect-[4/3]">
        <Image src={afterImage} alt="After" fill className="object-cover" />
      </div>

      {/* Before Image (clipped) */}
      <div
        className="absolute inset-0 overflow-hidden"
        style={{ width: `${position}%` }}
      >
        <div className="relative w-full h-full" style={{ width: `${100 / (position / 100)}%` }}>
          <Image src={beforeImage} alt="Before" fill className="object-cover" />
        </div>
      </div>

      {/* Slider Line + Handle */}
      <div
        className="absolute top-0 bottom-0 w-1 bg-white shadow-lg z-10"
        style={{ left: `${position}%`, transform: 'translateX(-50%)' }}
      >
        <div className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-10 h-10 bg-white/80 hover:bg-white/80 hover:bg-white rounded-full shadow-lg flex items-center justify-center">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none" className="text-dark-700">
            <path d="M7 4L3 10L7 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
            <path d="M13 4L17 10L13 16" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" />
          </svg>
        </div>
      </div>

      {/* Labels */}
      <div className="absolute top-4 left-4 px-3 py-1.5 bg-dark-900/80 backdrop-blur-sm rounded-full text-sm font-semibold text-white z-20">
        {beforeLabel}
      </div>
      <div className="absolute top-4 right-4 px-3 py-1.5 bg-gold-500/90 backdrop-blur-sm rounded-full text-sm font-semibold text-dark-900 z-20">
        {afterLabel}
      </div>
    </div>
  )
}


==========================================================================================

--- file: components/ui/EcoBadge.tsx ---
import Link from 'next/link'

interface EcoBadgeProps {
  size?: 'sm' | 'md' | 'lg'
  showLink?: boolean
  className?: string
}

export function EcoBadge({ size = 'md', showLink = true, className = '' }: EcoBadgeProps) {
  const sizes = {
    sm: 'text-xs px-2 py-1 gap-1',
    md: 'text-sm px-3 py-1.5 gap-1.5',
    lg: 'text-base px-4 py-2 gap-2',
  }

  const badge = (
    <span
      className={`inline-flex items-center font-semibold rounded-full bg-emerald-50 text-emerald-700 border border-emerald-200 ${sizes[size]} ${className}`}
    >
      <span className="text-emerald-500">üåø</span>
      Eco-Friendly Options
    </span>
  )

  if (showLink) {
    return (
      <Link href="/blog/green-renovations-sustainability" className="hover:opacity-80 transition-opacity">
        {badge}
      </Link>
    )
  }

  return badge
}

export function EcoBanner() {
  return (
    <div className="bg-gradient-to-r from-emerald-50 to-emerald-100/50 border border-emerald-200 rounded-xl p-6">
      <div className="flex items-start gap-4">
        <div className="w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center flex-shrink-0">
          <span className="text-2xl">üåø</span>
        </div>
        <div>
          <h3 className="text-lg font-display font-bold text-emerald-800 mb-1">
            Green & Sustainable Options Available
          </h3>
          <p className="text-emerald-700 text-sm mb-3">
            We offer eco-friendly materials, energy-efficient upgrades, and sustainable practices on every project.
            Ask about low-VOC paints, Energy Star appliances, LED lighting, and reclaimed materials.
          </p>
          <Link
            href="/blog/green-renovations-sustainability"
            className="text-emerald-600 font-semibold text-sm hover:text-emerald-700 inline-flex items-center gap-1"
          >
            Learn about our green approach ‚Üí
          </Link>
        </div>
      </div>
    </div>
  )
}


==========================================================================================

--- file: components/ui/LogoWatermark.tsx ---
import { resolveImageUrl } from '@/lib/resolve-images'
import Image from 'next/image'
import { cn } from '@/lib/utils'

interface LogoWatermarkProps {
  /** Size variant of the logo watermark */
  size?: 'sm' | 'md' | 'lg'
  /** Position on the page */
  position?: 'top-left' | 'top-right' | 'bottom-left' | 'bottom-right' | 'center'
  /** Opacity level */
  opacity?: 'subtle' | 'medium' | 'visible'
  /** Whether to show on blue background (adds bleed effect) */
  blueBackground?: boolean
  /** Custom className */
  className?: string
}

export function LogoWatermark({
  size = 'md',
  position = 'top-right',
  opacity = 'subtle',
  blueBackground = false,
  className,
}: LogoWatermarkProps) {
  const sizeMap = {
    sm: { height: 40, width: 150 },
    md: { height: 60, width: 200 },
    lg: { height: 80, width: 250 },
  }

  const opacityMap = {
    subtle: 'opacity-10',
    medium: 'opacity-20',
    visible: 'opacity-40',
  }

  const positionMap = {
    'top-left': 'top-4 left-4',
    'top-right': 'top-4 right-4',
    'bottom-left': 'bottom-4 left-4',
    'bottom-right': 'bottom-4 right-4',
    'center': 'top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2',
  }

  const dimensions = sizeMap[size]

  return (
    <div className={cn('absolute pointer-events-none z-0', positionMap[position], className)}>
      {/* Bleed effect for blue backgrounds */}
      {blueBackground && (
        <div className="absolute inset-0 overflow-visible">
          {/* Primary gradient */}
          <div
            className="absolute -inset-8 transition-opacity duration-500"
            style={{
              background: `
                radial-gradient(ellipse at center, 
                  rgba(12, 19, 85, 0.20) 0%,
                  rgba(6, 8, 40, 0.10) 40%,
                  transparent 70%
                )
              `,
            }}
          />
          {/* Secondary softer layer */}
          <div
            className="absolute -inset-6 transition-opacity duration-500"
            style={{
              background: `
                radial-gradient(ellipse at center, 
                  rgba(1, 1, 50, 0.18) 0%,
                  rgba(1, 0, 30, 0.08) 50%,
                  transparent 80%
                )
              `,
            }}
          />
          {/* Gold shimmer */}
          <div
            className="absolute -inset-4 transition-opacity duration-500"
            style={{
              background: `
                radial-gradient(ellipse at center, 
                  rgba(196, 160, 82, 0.1) 0%,
                  transparent 70%
                )
              `,
            }}
          />
        </div>
      )}

      {/* Logo */}
      <div className="relative">
        <Image
          src={resolveImageUrl("/images/logo.png")}
          alt="CR Home Pros"
          width={dimensions.width}
          height={dimensions.height}
          className={cn(
            'w-auto object-contain transition-opacity duration-300',
            opacityMap[opacity]
          )}
          style={{
            filter: blueBackground 
              ? 'drop-shadow(0 2px 8px rgba(0, 0, 0, 0.3)) drop-shadow(0 0 15px rgba(196, 160, 82, 0.2))'
              : 'drop-shadow(0 2px 8px rgba(0, 0, 0, 0.1))'
          }}
          quality={100}
          unoptimized
        />
      </div>
    </div>
  )
}


==========================================================================================

--- file: components/ui/ScrollHint.tsx ---
'use client'

import { useEffect, useState } from 'react'
import { ChevronDown } from 'lucide-react'

/**
 * Subtle scroll hint ‚Äî shows a gentle bouncing chevron at the bottom of a section
 * when the user hasn't scrolled yet. Fades out after first scroll.
 * Use inside any section that has more content below the fold.
 */
export function ScrollHint({ className = '' }: { className?: string }) {
  const [visible, setVisible] = useState(true)

  useEffect(() => {
    const handleScroll = () => {
      if (window.scrollY > 80) {
        setVisible(false)
      }
    }
    window.addEventListener('scroll', handleScroll, { passive: true })
    // Auto-fade after 6 seconds even without scroll
    const timer = setTimeout(() => setVisible(false), 6000)
    return () => {
      window.removeEventListener('scroll', handleScroll)
      clearTimeout(timer)
    }
  }, [])

  if (!visible) return null

  return (
    <div
      className={`flex flex-col items-center gap-1 transition-opacity duration-700 ${visible ? 'opacity-60' : 'opacity-0'} ${className}`}
    >
      <span className="text-[10px] uppercase tracking-widest text-current font-medium">Scroll</span>
      <div className="animate-bounce">
        <ChevronDown className="w-5 h-5" />
      </div>
    </div>
  )
}


==========================================================================================

--- file: components/ui/WhatsAppIcon.tsx ---
// WhatsApp brand icon SVG
export function WhatsAppIcon({ className = 'w-5 h-5' }: { className?: string }) {
  return (
    <svg className={className} viewBox="0 0 24 24" fill="currentColor">
      <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
    </svg>
  )
}


==========================================================================================

--- file: components/sections/CallToAction.tsx ---
'use client'

import Link from 'next/link'
import { useTranslation, useLocale } from '@/lib/i18n/provider'
import { Phone, ArrowRight } from 'lucide-react'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { COMPANY, SERVICE_AREAS } from '@/lib/constants'
import { formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'

export function CallToAction() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`

  return (
    <section className="relative py-24 md:py-32 overflow-hidden">
      {/* Background */}
      <div className="absolute inset-0 bg-gradient-to-br from-primary-900 via-primary-800 to-dark-900" />
      
      {/* Decorative elements */}
      <div className="absolute inset-0">
        <div className="absolute top-0 left-1/4 w-96 h-96 bg-gold-500/10 rounded-full blur-3xl" />
        <div className="absolute bottom-0 right-1/4 w-96 h-96 bg-primary-500/10 rounded-full blur-3xl" />
        
        {/* Grid pattern */}
        <div
          className="absolute inset-0 opacity-5"
          style={{
            backgroundImage: `linear-gradient(white 1px, transparent 1px), 
                             linear-gradient(90deg, white 1px, transparent 1px)`,
            backgroundSize: '50px 50px',
          }}
        />
      </div>

      <div className="container-custom relative z-10">
        <div className="max-w-3xl mx-auto text-center">
          {/* Headline */}
          <h2 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-white mb-6">
            {t.cta.title}
          </h2>

          {/* Subheadline */}
          <p className="text-lg md:text-xl text-white/70 mb-10 leading-relaxed">
            {t.cta.subtitle}
          </p>

          {/* CTAs */}
          <div className="flex flex-col sm:flex-row items-center justify-center gap-4 mb-12">
            <div className="w-full sm:w-auto">
              <Link
                href={lp('/get-started')}
                className="group flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-dark-900 px-8 py-4 rounded-xl font-semibold text-lg shadow-lg shadow-gold-500/20 hover:shadow-xl hover:shadow-gold-500/30 hover:-translate-y-0.5 transition-all duration-300 w-full sm:w-auto justify-center"
              >
                {t.cta.button}
                <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
              </Link>
              <p className="text-xs text-white/50 mt-2 text-center">{t.cta.noObligation}</p>
            </div>
            
            <div className="w-full sm:w-auto">
              <a
                href={formatPhoneLink(COMPANY.phone)}
                className="flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-8 py-4 rounded-xl font-semibold text-lg border border-white/20 hover:border-white/30 transition-all duration-300 w-full sm:w-auto justify-center"
              >
                <Phone className="w-5 h-5" />
                {t.cta.callNow}
              </a>
              <p className="text-xs text-white/50 mt-2 text-center">{t.cta.letsDiscuss}</p>
            </div>
          </div>

          {/* WhatsApp - translated message */}
          <a
            href={formatWhatsAppLink(COMPANY.phone, t.common.whatsappGreeting)}
            target="_blank"
            rel="noopener noreferrer"
            className="inline-flex items-center gap-2 text-white/70 hover:text-white transition-colors"
          >
            <WhatsAppIcon className="w-5 h-5 text-[#25D366]" />
            <span>{t.cta.orWhatsApp}</span>
          </a>

          {/* Service Areas */}
          <div className="mt-12 pt-8 border-t border-white/10">
            <p className="text-sm text-white/50 mb-3">{t.cta.proudlyServing}</p>
            <p className="text-white/70">
              {SERVICE_AREAS.slice(0, 6).join(' ‚Ä¢ ')} {t.cta.andSurrounding}
            </p>
          </div>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/FAQSection.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { ChevronDown, Phone } from 'lucide-react'
import { cn, formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'
import { COMPANY } from '@/lib/constants'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { useTranslation } from '@/lib/i18n/provider'

const FAQ_COUNT = 15

export function FAQSection() {
  const t = useTranslation()
  const [openIndex, setOpenIndex] = useState<number | null>(0)

  // Build FAQ items from dictionary
  const faqItems: { question: string; answer: string }[] = []
  for (let i = 0; i < FAQ_COUNT; i++) {
    const q = (t.faq as Record<string, string>)[`q${i}`]
    const a = (t.faq as Record<string, string>)[`a${i}`]
    if (q && a) faqItems.push({ question: q, answer: a })
  }

  return (
    <section className="section-padding bg-white">
      <div className="container-custom">
        <div className="max-w-3xl mx-auto">
          {/* Header */}
          <div className="text-center mb-12">
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
              {t.faq.badge}
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-4">
              {t.faq.title}
            </h2>
            <p className="text-lg text-dark-500">
              {t.faq.description}
            </p>
          </div>

          {/* FAQ Items */}
          <div className="space-y-3">
            {faqItems.map((item, index) => (
              <div
                key={index}
                className="border border-dark-100 rounded-xl overflow-hidden hover:border-primary-200 transition-colors"
              >
                <button
                  onClick={() => setOpenIndex(openIndex === index ? null : index)}
                  className="w-full flex items-center justify-between px-6 py-4 text-left"
                >
                  <span className="font-semibold text-dark-900 pr-4">{item.question}</span>
                  <ChevronDown
                    className={cn(
                      'w-5 h-5 text-dark-400 transition-transform duration-200 flex-shrink-0',
                      openIndex === index && 'rotate-180'
                    )}
                  />
                </button>
                <div
                  className={cn(
                    'overflow-hidden transition-all duration-300',
                    openIndex === index ? 'max-h-96 opacity-100' : 'max-h-0 opacity-0'
                  )}
                >
                  <p className="px-6 pb-5 text-dark-600 leading-relaxed">{item.answer}</p>
                </div>
              </div>
            ))}
          </div>

          {/* Still have questions? */}
          <div className="mt-10 text-center bg-dark-50 rounded-2xl p-8">
            <p className="text-dark-700 font-medium mb-4">{t.faq.stillHaveQuestions}</p>
            <div className="flex flex-col sm:flex-row items-center justify-center gap-3">
              <a
                href={formatPhoneLink(COMPANY.phone)}
                className="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-primary-700 text-white font-medium hover:bg-primary-800 transition-colors"
              >
                <Phone className="w-4 h-4" />
                {t.common.call} {COMPANY.phoneFormatted}
              </a>
              <a
                href={formatWhatsAppLink(COMPANY.phone, t.common.whatsappGreeting)}
                target="_blank"
                rel="noopener noreferrer"
                className="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-[#25D366] text-white font-medium hover:bg-[#20bd5a] transition-colors"
              >
                <WhatsAppIcon className="w-4 h-4" />
                {t.faq.whatsappUs}
              </a>
            </div>
          </div>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/FeaturedProjects.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import Image from 'next/image'
import { ArrowRight, MapPin, Clock, ChevronLeft, ChevronRight } from 'lucide-react'
import { cn } from '@/lib/utils'
import { resolveImageUrl } from '@/lib/resolve-images'
import { useTranslation, useLocale } from '@/lib/i18n/provider'

// REAL projects from crgenserv.com - Carlos's actual work
const projectImages = [
  {
    id: 'kitchen-full-renovation',
    image: resolveImageUrl('/images/2025-05/bathroom-tile-01.png'),
    beforeImage: '/images/2024-01/img_3702-780x1024.JPEG',
  },
  {
    id: 'bathroom-remodel-1',
    image: resolveImageUrl('/images/2025-05/roofing-md-01.png'),
    beforeImage: '/images/2024-01/img_0416-768x1024.JPEG',
  },
  {
    id: 'complete-renovation-1',
    image: resolveImageUrl('/images/2025-05/deck-pg-county-01.png'),
    beforeImage: '/images/2024-01/img_1506-768x1024.JPEG',
  },
  {
    id: 'deck-restoration-1',
    image: resolveImageUrl('/images/2025-fence-bowie/fence-after-01.png'),
    beforeImage: '/images/2024-06/img_2379-1024x768.JPEG',
  },
]

export function FeaturedProjects() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`

  const [activeIndex, setActiveIndex] = useState(0)
  const [showBefore, setShowBefore] = useState(false)

  // Build translated project data
  const featuredProjects = projectImages.map((proj, i) => ({
    ...proj,
    title: (t.featuredProjects as any)[`p${i}Title`] || '',
    type: (t.featuredProjects as any)[`p${i}Type`] || '',
    duration: (t.featuredProjects as any)[`p${i}Duration`] || '',
    description: (t.featuredProjects as any)[`p${i}Desc`] || '',
    location: 'DMV Area',
  }))

  const activeProject = featuredProjects[activeIndex]

  const nextProject = () => {
    setActiveIndex((prev) => (prev + 1) % featuredProjects.length)
    setShowBefore(false)
  }

  const prevProject = () => {
    setActiveIndex((prev) => (prev - 1 + featuredProjects.length) % featuredProjects.length)
    setShowBefore(false)
  }

  return (
    <section className="section-padding bg-dark-900 relative overflow-hidden">
      {/* Background elements */}
      <div className="absolute inset-0">
        <div className="absolute top-0 right-0 w-1/2 h-full bg-gradient-to-l from-primary-900/20 to-transparent" />
        <div className="absolute bottom-0 left-0 w-96 h-96 bg-gold-500/5 rounded-full blur-3xl" />
      </div>

      <div className="container-custom relative z-10">
        {/* Header */}
        <div className="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-12">
          <div>
            <span className="inline-block text-sm font-semibold text-gold-400 tracking-wider uppercase mb-4">
              {t.featuredProjects.badge}
            </span>
            <h2 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-white">
              {t.featuredProjects.title}
            </h2>
          </div>
          <p className="text-dark-300 max-w-md text-lg">
            {t.featuredProjects.description}
          </p>
        </div>

        {/* Main Content */}
        <div className="grid lg:grid-cols-2 gap-8 lg:gap-12 items-center">
          {/* Image Side */}
          <div className="relative aspect-[4/3] rounded-2xl overflow-hidden group">
            {/* Main Image */}
            <Image
              src={showBefore ? activeProject.beforeImage : activeProject.image}
              alt={activeProject.title}
              fill
              className="object-cover transition-transform duration-700 group-hover:scale-105"
            />

            {/* Before/After Toggle */}
            <button
              onClick={() => setShowBefore(!showBefore)}
              className="absolute bottom-4 left-4 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg font-medium text-sm text-dark-800 hover:bg-white transition-colors"
            >
              {showBefore ? t.featuredProjects.viewAfter : t.featuredProjects.viewBefore}
            </button>

            {/* Navigation Arrows - Desktop Only */}
            <div className="hidden md:flex absolute top-1/2 -translate-y-1/2 left-4 right-4 justify-between pointer-events-none">
              <button
                onClick={prevProject}
                className="w-12 h-12 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center text-dark-800 hover:bg-white transition-colors pointer-events-auto"
              >
                <ChevronLeft className="w-6 h-6" />
              </button>
              <button
                onClick={nextProject}
                className="w-12 h-12 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center text-dark-800 hover:bg-white transition-colors pointer-events-auto"
              >
                <ChevronRight className="w-6 h-6" />
              </button>
            </div>

            {/* Navigation Arrows - Mobile Only (Below Image) */}
            <div className="flex md:hidden gap-4 justify-center mt-4 absolute bottom-16 left-1/2 -translate-x-1/2">
              <button
                onClick={prevProject}
                className="w-12 h-12 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center text-dark-800 hover:bg-white transition-colors shadow-lg"
              >
                <ChevronLeft className="w-6 h-6" />
              </button>
              <button
                onClick={nextProject}
                className="w-12 h-12 rounded-full bg-white/90 backdrop-blur-sm flex items-center justify-center text-dark-800 hover:bg-white transition-colors shadow-lg"
              >
                <ChevronRight className="w-6 h-6" />
              </button>
            </div>

            {/* Type Badge */}
            <div className="absolute top-4 right-4 px-3 py-1.5 bg-gold-500 rounded-full text-sm font-semibold text-dark-900">
              {activeProject.type}
            </div>
          </div>

          {/* Info Side */}
          <div className="space-y-6">
            {/* Project Details */}
            <div className="flex items-center gap-4 text-dark-400">
              <div className="flex items-center gap-2">
                <MapPin className="w-4 h-4" />
                <span>{activeProject.location}</span>
              </div>
              <div className="flex items-center gap-2">
                <Clock className="w-4 h-4" />
                <span>{activeProject.duration}</span>
              </div>
            </div>

            {/* Title */}
            <h3 className="text-2xl md:text-3xl font-display font-bold text-white">
              {activeProject.title}
            </h3>

            {/* Description */}
            <p className="text-dark-300 text-lg leading-relaxed">
              {activeProject.description}
            </p>

            {/* CTA */}
            <Link
              href={lp(`/projects/${activeProject.id}`)}
              className="inline-flex items-center gap-2 text-gold-400 font-semibold hover:text-gold-300 group"
            >
              {t.featuredProjects.viewFull}
              <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform" />
            </Link>

            {/* Project Thumbnails */}
            <div className="flex gap-3 pt-6 border-t border-white/10">
              {featuredProjects.map((project, index) => (
                <button
                  key={project.id}
                  onClick={() => {
                    setActiveIndex(index)
                    setShowBefore(false)
                  }}
                  className={cn(
                    'relative w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden transition-all',
                    index === activeIndex
                      ? 'ring-2 ring-gold-500 ring-offset-2 ring-offset-dark-900'
                      : 'opacity-50 hover:opacity-80'
                  )}
                >
                  <Image
                    src={project.image}
                    alt={project.title}
                    fill
                    className="object-cover"
                  />
                </button>
              ))}
            </div>
          </div>
        </div>

        {/* View All */}
        <div className="text-center mt-12">
          <Link
            href={lp('/projects')}
            className="btn-outline-white"
          >
            {t.featuredProjects.viewAll}
            <ArrowRight className="w-4 h-4 ml-2" />
          </Link>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/Hero.tsx ---
'use client'

import { resolveImageUrl } from '@/lib/resolve-images'
import { useEffect, useState, useCallback } from 'react'
import Link from 'next/link'
import Image from 'next/image'
import { ArrowRight, Phone, Shield, Award, Languages, CheckCircle, ChevronLeft, ChevronRight } from 'lucide-react'
import { ScrollIndicator } from '@/components/ScrollIndicator'
import { cn, formatPhoneLink } from '@/lib/utils'
import { COMPANY } from '@/lib/constants'
import { useTranslation, useLocale } from '@/lib/i18n/provider'

// Slideshow images
const slideImages = [
  'https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=1920&q=80', // Modern kitchen
  'https://images.unsplash.com/photo-1552321554-5fefe8c9ef14?w=1920&q=80', // Bathroom
  'https://images.unsplash.com/photo-1503387762-592deb58ef4e?w=1920&q=80', // Construction/renovation
  'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=1920&q=80', // Living room
  'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1920&q=80', // Beautiful home exterior
  'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=1920&q=80', // Modern home
]

export function Hero() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`

  const [currentSlide, setCurrentSlide] = useState(0)
  const [isLoaded, setIsLoaded] = useState(false)
  const [isPaused, setIsPaused] = useState(false)
  const [scrollY, setScrollY] = useState(0)

  const SLIDE_DURATION = 5000 // 5 seconds per slide
  const [progress, setProgress] = useState(0)

  const slides = [
    { image: slideImages[0], tagline: t.hero.slides.s1tagline, subtitle: t.hero.slides.s1subtitle },
    { image: slideImages[1], tagline: t.hero.slides.s2tagline, subtitle: t.hero.slides.s2subtitle },
    { image: slideImages[2], tagline: t.hero.slides.s3tagline, subtitle: t.hero.slides.s3subtitle },
    { image: slideImages[3], tagline: t.hero.slides.s4tagline, subtitle: t.hero.slides.s4subtitle },
    { image: slideImages[4], tagline: t.hero.slides.s5tagline, subtitle: t.hero.slides.s5subtitle },
    { image: slideImages[5], tagline: t.hero.slides.s6tagline, subtitle: t.hero.slides.s6subtitle },
  ]

  const trustBadges = [
    { icon: Shield, label: t.hero.trustBadges.licensed, detail: t.hero.trustBadges.licensedDetail },
    { icon: Award, label: t.hero.trustBadges.years, detail: t.hero.since },
    { icon: Languages, label: t.hero.trustBadges.spanish, detail: t.hero.trustBadges.spanish },
    { icon: CheckCircle, label: t.hero.trustBadges.estimates, detail: t.hero.trustBadges.estimates },
  ]

  // Track scroll for parallax effect
  useEffect(() => {
    const handleScroll = () => {
      setScrollY(window.scrollY)
    }
    window.addEventListener('scroll', handleScroll, { passive: true })
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  // Auto-advance slideshow
  useEffect(() => {
    setIsLoaded(true)
  }, [])

  // Handle slide timing and progress bar
  useEffect(() => {
    if (isPaused) return

    // Reset progress when slide changes
    setProgress(0)

    // Progress bar animation
    const progressInterval = setInterval(() => {
      setProgress((prev) => {
        if (prev >= 100) return 100
        return prev + (100 / (SLIDE_DURATION / 50)) // Update every 50ms
      })
    }, 50)

    // Auto-advance to next slide
    const slideTimer = setTimeout(() => {
      setCurrentSlide((prev) => (prev + 1) % slides.length)
    }, SLIDE_DURATION)

    return () => {
      clearInterval(progressInterval)
      clearTimeout(slideTimer)
    }
  }, [currentSlide, isPaused])

  const goToSlide = useCallback((index: number) => {
    setProgress(0)
    setCurrentSlide(index)
  }, [])

  const nextSlide = useCallback(() => {
    setProgress(0)
    setCurrentSlide((prev) => (prev + 1) % slides.length)
  }, [])

  const prevSlide = useCallback(() => {
    setProgress(0)
    setCurrentSlide((prev) => (prev - 1 + slides.length) % slides.length)
  }, [])

  return (
    <section 
      className="relative min-h-screen flex items-center overflow-hidden"
      onMouseEnter={() => setIsPaused(true)}
      onMouseLeave={() => setIsPaused(false)}
    >
      {/* Background Slideshow */}
      <div className="absolute inset-0">
        {slides.map((slide, index) => (
          <div
            key={index}
            className={cn(
              'absolute inset-0 transition-opacity duration-1000',
              index === currentSlide ? 'opacity-100' : 'opacity-0'
            )}
          >
            {/* Image */}
            <div 
              className="absolute inset-0 bg-cover bg-center bg-no-repeat scale-105"
              style={{ backgroundImage: `url(${slide.image})` }}
            />
            {/* Overlay gradient */}
            <div className="absolute inset-0 bg-gradient-to-r from-dark-900/95 via-dark-900/80 to-dark-900/60" />
            <div className="absolute inset-0 bg-gradient-to-t from-dark-900/90 via-transparent to-dark-900/40" />
          </div>
        ))}
        
        {/* Additional design elements */}
        <div className="absolute inset-0 bg-primary-900/20 mix-blend-multiply" />
        
        {/* Subtle pattern overlay */}
        <div 
          className="absolute inset-0 opacity-[0.02]"
          style={{
            backgroundImage: `radial-gradient(circle at 1px 1px, white 1px, transparent 0)`,
            backgroundSize: '40px 40px',
          }}
        />
      </div>

      {/* Slide Navigation Arrows - Hidden on mobile, visible on desktop */}
      <button
        onClick={prevSlide}
        className="hidden md:flex absolute left-4 lg:left-8 top-1/2 -translate-y-1/2 z-20 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 items-center justify-center text-white transition-all hover:scale-110"
        aria-label="Previous slide"
      >
        <ChevronLeft className="w-6 h-6" />
      </button>
      <button
        onClick={nextSlide}
        className="hidden md:flex absolute right-4 lg:right-8 top-1/2 -translate-y-1/2 z-20 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 backdrop-blur-sm border border-white/20 items-center justify-center text-white transition-all hover:scale-110"
        aria-label="Next slide"
      >
        <ChevronRight className="w-6 h-6" />
      </button>

      {/* Content */}
      <div className="relative z-10 container-custom py-24 lg:py-32">
        <div className="max-w-4xl">
          {/* Logo - Large with parallax scroll effect */}
          <div
            className={cn(
              'mb-6 transition-all duration-700',
              isLoaded ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'
            )}
            style={{
              transform: `translateY(${scrollY * 0.3}px) scale(${Math.max(1 - scrollY * 0.001, 0.7)})`,
              opacity: Math.max(1 - scrollY * 0.003, 0),
            }}
          >
            <div className="relative h-32 sm:h-36 lg:h-44 w-auto inline-block">
              <Image
                src={resolveImageUrl("/images/logo.png")}
                alt="CR Home Pros - Complete Home Services"
                width={600}
                height={180}
                className="h-full w-auto object-contain"
                style={{ 
          maxWidth: 'none',
          filter: 'drop-shadow(0 8px 24px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 40px rgba(196, 160, 82, 0.2))',
          mixBlendMode: 'normal'
        }}
                priority
                quality={100}
                unoptimized
              />
            </div>
          </div>

          {/* Animated Tagline */}
          <div className="relative min-h-[180px] lg:min-h-[200px] mb-8">
            {slides.map((slide, index) => (
              <div
                key={index}
                className={cn(
                  'absolute top-0 left-0 transition-all duration-700',
                  index === currentSlide 
                    ? 'opacity-100 translate-y-0' 
                    : 'opacity-0 translate-y-8 pointer-events-none'
                )}
              >
                <h1 className="font-display text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-4 leading-tight">
                  {slide.tagline.split(' ').map((word, i) => (
                    <span key={i}>
                      {i === 0 || i === slide.tagline.split(' ').length - 1 ? (
                        <span className="text-transparent bg-clip-text bg-gradient-to-r from-gold-400 via-gold-300 to-gold-500">
                          {word}
                        </span>
                      ) : (
                        word
                      )}{' '}
                    </span>
                  ))}
                </h1>
                <p className="text-lg md:text-xl lg:text-2xl text-white/70 max-w-2xl leading-relaxed">
                  {slide.subtitle}
                </p>
              </div>
            ))}
          </div>

          {/* CTAs */}
          <div
            className={cn(
              'flex flex-col sm:flex-row items-start gap-4 mb-10 transition-all duration-700 delay-300',
              isLoaded ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'
            )}
          >
            <Link
              href={lp('/get-started')}
              className="group flex items-center gap-2 bg-gold-500 hover:bg-gold-400 text-dark-900 px-8 py-4 rounded-xl font-bold text-lg shadow-lg shadow-gold-500/25 hover:shadow-xl hover:shadow-gold-500/40 hover:-translate-y-1 transition-all duration-300"
            >
              {t.hero.cta}
              <ArrowRight className="w-5 h-5 group-hover:translate-x-1 transition-transform" />
            </Link>
            <a
              href={formatPhoneLink(COMPANY.phone)}
              className="flex items-center gap-3 bg-white/10 hover:bg-white/20 backdrop-blur-sm text-white px-8 py-4 rounded-xl font-semibold text-lg border border-white/20 hover:border-white/40 transition-all duration-300"
            >
              <Phone className="w-5 h-5" />
              {COMPANY.phoneFormatted}
            </a>
          </div>

          {/* Trust Badges */}
          <div
            className={cn(
              'grid grid-cols-2 lg:grid-cols-4 gap-4 transition-all duration-700 delay-400',
              isLoaded ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4'
            )}
          >
            {trustBadges.map((badge) => (
              <div
                key={badge.label}
                className="flex items-center gap-3 bg-white/5 backdrop-blur-sm border border-white/10 rounded-xl px-4 py-3"
              >
                <div className="w-10 h-10 rounded-lg bg-gold-500/20 flex items-center justify-center flex-shrink-0">
                  <badge.icon className="w-5 h-5 text-gold-400" />
                </div>
                <div>
                  <p className="text-white text-sm font-medium">{badge.label}</p>
                  <p className="text-white/50 text-xs">{badge.detail}</p>
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>

      {/* Slide Counter - shows current slide number */}
      <div className="absolute bottom-8 right-8 z-20 hidden lg:flex items-center gap-2 text-white/60 text-sm font-medium">
        <span className="text-white">{String(currentSlide + 1).padStart(2, '0')}</span>
        <span>/</span>
        <span>{String(slides.length).padStart(2, '0')}</span>
      </div>

      {/* Slide Indicators with Progress */}
      <div className="absolute bottom-8 left-1/2 -translate-x-1/2 z-20 flex items-center gap-3">
        {slides.map((_, index) => (
          <button
            key={index}
            onClick={() => goToSlide(index)}
            className="relative group"
            aria-label={`Go to slide ${index + 1}`}
          >
            {/* Background track */}
            <div className={cn(
              'h-1.5 rounded-full transition-all duration-300 overflow-hidden',
              index === currentSlide ? 'w-12 bg-white/30' : 'w-3 bg-white/20 hover:bg-white/40'
            )}>
              {/* Progress fill - only show on current slide */}
              {index === currentSlide && (
                <div 
                  className="h-full bg-gold-500 rounded-full transition-all duration-75 ease-linear"
                  style={{ width: `${progress}%` }}
                />
              )}
            </div>
          </button>
        ))}
      </div>

      {/* Bilingual Badge - floating */}
      <div className="hidden lg:block absolute top-32 right-8 z-20">
        <div className="bg-gold-500 text-dark-900 px-4 py-2 rounded-full font-bold text-sm shadow-lg animate-bounce-slow">
          {t.hero.bilingualBadge}
        </div>
      </div>

      {/* Bottom gradient for smooth transition to next section */}
      <div className="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-white to-transparent z-10" />
    </section>
  )
}


==========================================================================================

--- file: components/sections/HowWeWork.tsx ---
'use client'

import { MessageSquare, FileText, Hammer, ThumbsUp } from 'lucide-react'
import { useTranslation } from '@/lib/i18n/provider';

const stepIcons = [MessageSquare, FileText, Hammer, ThumbsUp]
const stepNumbers = ["01", "02", "03", "04"]

export function HowWeWork() {
  const t = useTranslation()

  const steps = [
    { title: t.howWeWork.steps.consult, description: t.howWeWork.steps.consultDesc },
    { title: t.howWeWork.steps.plan, description: t.howWeWork.steps.planDesc },
    { title: t.howWeWork.steps.build, description: t.howWeWork.steps.buildDesc },
    { title: t.howWeWork.steps.inspect, description: t.howWeWork.steps.inspectDesc },
  ]

  return (
    <section className="section-padding bg-dark-50">
      <div className="container-custom">
        {/* Header */}
        <div className="text-center max-w-3xl mx-auto mb-16">
          <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
            {t.howWeWork.title}
          </span>
          <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
            {t.howWeWork.title}{" "}
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-primary-700 to-primary-900">
              ‚úì
            </span>
          </h2>
          <p className="text-lg text-dark-500">
            {t.howWeWork.subtitle}
          </p>
        </div>

        {/* Steps Grid */}
        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
          {steps.map((step, index) => {
            const Icon = stepIcons[index]
            return (
              <div
                key={stepNumbers[index]}
                className="relative bg-white rounded-2xl p-8 border border-dark-100 hover:border-primary-200 hover:shadow-lg transition-all duration-300 group"
              >
                {/* Number Badge */}
                <div className="absolute -top-4 -left-4 w-12 h-12 rounded-full bg-gradient-to-br from-primary-700 to-primary-900 flex items-center justify-center shadow-lg">
                  <span className="text-white font-bold text-sm">
                    {stepNumbers[index]}
                  </span>
                </div>

                {/* Icon */}
                <div className="w-14 h-14 rounded-xl bg-primary-100 flex items-center justify-center mb-6 group-hover:bg-primary-200 transition-colors">
                  <Icon className="w-7 h-7 text-primary-600" />
                </div>

                {/* Content */}
                <h3 className="text-xl font-display font-semibold text-dark-900 mb-3">
                  {step.title}
                </h3>
                <p className="text-dark-500 leading-relaxed">
                  {step.description}
                </p>

                {/* Connector Line */}
                {index < steps.length - 1 && (
                  <div className="hidden lg:block absolute top-1/2 -right-3 w-6 h-0.5 bg-gradient-to-r from-primary-300 to-transparent" />
                )}
              </div>
            )
          })}
        </div>

        {/* Bottom Note */}
        <div className="text-center mt-12">
          <p className="text-dark-600 italic">
            {t.howWeWork.bottomNote}
          </p>
        </div>
      </div>
    </section>
  );
}


==========================================================================================

--- file: components/sections/MeetCarlos.tsx ---
'use client'

import { resolveImageUrl } from '@/lib/resolve-images'
import Image from "next/image";
import Link from "next/link";
import { ArrowRight } from "lucide-react";
import { useTranslation, useLocale } from '@/lib/i18n/provider'

export function MeetCarlos() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`

  return (
    <section className="section-padding bg-white">
      <div className="container-custom">
        <div className="grid lg:grid-cols-2 gap-12 lg:gap-16 items-center">
          {/* Image Side */}
          <div className="relative order-2 lg:order-1">
            <div className="aspect-[4/5] rounded-2xl overflow-hidden bg-dark-100 shadow-2xl">
              <Image
                src={resolveImageUrl("/images/team-carlos-01.jpg")}
                alt="Carlos Hernandez - Founder of CR Home Pros"
                fill
                className="object-cover"
              />
            </div>
            {/* Decorative Element */}
            <div className="absolute -bottom-4 -right-4 w-32 h-32 bg-gold-500/20 rounded-2xl -z-10" />
          </div>

          {/* Content Side */}
          <div className="order-1 lg:order-2">
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
              {t.about.subtitle}
            </span>
            <h2 className="text-3xl md:text-4xl font-display font-bold text-dark-900 mb-6">
              {t.about.title}
            </h2>

            <div className="space-y-4 text-lg text-dark-600 leading-relaxed mb-8">
              <p>{t.meetCarlos.intro}</p>
              <p>{t.meetCarlos.body}</p>
            </div>

            {/* Trust Indicators */}
            <div className="flex flex-wrap gap-4 mb-8">
              <div className="px-4 py-2 bg-primary-50 rounded-lg border border-primary-100">
                <p className="text-sm font-semibold text-primary-800">
                  {t.meetCarlos.badge1}
                </p>
              </div>
              <div className="px-4 py-2 bg-primary-50 rounded-lg border border-primary-100">
                <p className="text-sm font-semibold text-primary-800">
                  {t.meetCarlos.badge2}
                </p>
              </div>
              <div className="px-4 py-2 bg-primary-50 rounded-lg border border-primary-100">
                <p className="text-sm font-semibold text-primary-800">
                  {t.meetCarlos.badge3}
                </p>
              </div>
            </div>

            <Link
              href={lp('/about')}
              className="inline-flex items-center gap-2 text-primary-700 hover:text-primary-800 font-medium group"
            >
              {t.meetCarlos.learnMore}
              <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform" />
            </Link>
          </div>
        </div>

        {/* The Team */}
        <div className="mt-16 pt-12 border-t border-dark-100">
          <h3 className="text-2xl font-display font-bold text-dark-900 mb-2 text-center">
            {t.meetCarlos.teamTitle}
          </h3>
          <p className="text-dark-500 text-center mb-8 max-w-2xl mx-auto">
            {t.meetCarlos.teamDesc}
          </p>
          <div className="grid grid-cols-2 md:grid-cols-3 gap-4 max-w-3xl mx-auto">
            <div className="relative aspect-[3/4] rounded-xl overflow-hidden shadow-lg">
              <Image
                src={resolveImageUrl("/images/team-carlos-02.png")}
                alt="Carlos and team member"
                fill
                className="object-cover"
              />
              <div className="absolute bottom-0 inset-x-0 bg-gradient-to-t from-dark-900/80 to-transparent p-3">
                <p className="text-white text-sm font-semibold">{t.meetCarlos.teamLabel1}</p>
                <p className="text-white/60 text-xs">{t.meetCarlos.teamSub1}</p>
              </div>
            </div>
            <div className="relative aspect-[3/4] rounded-xl overflow-hidden shadow-lg">
              <Image
                src={resolveImageUrl("/images/team-carlos-03.png")}
                alt="Carlos and crew member painting"
                fill
                className="object-cover"
              />
              <div className="absolute bottom-0 inset-x-0 bg-gradient-to-t from-dark-900/80 to-transparent p-3">
                <p className="text-white text-sm font-semibold">{t.meetCarlos.teamLabel2}</p>
                <p className="text-white/60 text-xs">{t.meetCarlos.teamSub2}</p>
              </div>
            </div>
            <div className="relative aspect-[3/4] rounded-xl overflow-hidden shadow-lg bg-primary-100 flex items-center justify-center">
              <div className="text-center p-6">
                <p className="text-4xl mb-3">üë∑‚Äç‚ôÇÔ∏è</p>
                <p className="text-primary-800 font-bold text-lg">{t.meetCarlos.teamCount}</p>
                <p className="text-primary-600 text-sm mt-1">{t.meetCarlos.teamSpecialties}</p>
                <p className="text-primary-500 text-xs mt-3 italic">{t.meetCarlos.teamPhotoNote}</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}


==========================================================================================

--- file: components/sections/PaymentOptions.tsx ---
'use client'

import Link from 'next/link'
import { CreditCard, Smartphone, DollarSign, Clock, Shield, FileText, Percent, ArrowRight } from 'lucide-react'
import { useTranslation, useLocale } from '@/lib/i18n/provider'

const iconMap: Record<string, any> = {
  CreditCard, Smartphone, DollarSign, Clock, Shield, FileText, Percent,
}

export function PaymentOptions() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`

  const paymentMethods = [
    { name: t.payment.methods.creditCards, icon: 'CreditCard', detail: t.payment.methods.creditCardsDetail },
    { name: t.payment.methods.zelle, icon: 'Smartphone', detail: t.payment.methods.zelleDetail },
    { name: t.payment.methods.venmo, icon: 'Smartphone', detail: t.payment.methods.venmoDetail },
    { name: t.payment.methods.cashApp, icon: 'DollarSign', detail: t.payment.methods.cashAppDetail },
    { name: t.payment.methods.check, icon: 'FileText', detail: t.payment.methods.checkDetail },
    { name: t.payment.methods.klarna, icon: 'Clock', detail: t.payment.methods.klarnaDetail },
    { name: t.payment.methods.insurance, icon: 'Shield', detail: t.payment.methods.insuranceDetail, highlight: true },
    { name: t.payment.methods.financing, icon: 'Percent', detail: t.payment.methods.financingDetail, highlight: true },
  ]

  return (
    <section className="py-16 bg-dark-50">
      <div className="container-custom">
        <div className="text-center mb-10">
          <span className="inline-flex items-center gap-2 text-sm font-semibold text-primary-600 tracking-wider uppercase mb-3">
            <CreditCard className="w-4 h-4" />
            {t.payment.badge}
          </span>
          <h2 className="text-2xl md:text-3xl font-display font-bold text-dark-900 mb-3">
            {t.payment.title}
          </h2>
          <p className="text-dark-500 max-w-xl mx-auto">
            {t.payment.description}
          </p>
        </div>

        <div className="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto">
          {paymentMethods.map((method) => {
            const Icon = iconMap[method.icon] || CreditCard
            return (
              <div
                key={method.name}
                className={`p-4 rounded-xl text-center transition-all hover:shadow-md ${
                  method.highlight
                    ? 'bg-primary-50 border-2 border-primary-200'
                    : 'bg-white border border-dark-100'
                }`}
              >
                <div className={`w-10 h-10 mx-auto rounded-full flex items-center justify-center mb-3 ${
                  method.highlight ? 'bg-primary-100 text-primary-600' : 'bg-dark-100 text-dark-600'
                }`}>
                  <Icon className="w-5 h-5" />
                </div>
                <div className="font-semibold text-dark-800 text-sm">{method.name}</div>
                <div className="text-dark-400 text-xs mt-1">{method.detail}</div>
              </div>
            )
          })}
        </div>

        <div className="text-center mt-8 flex flex-wrap items-center justify-center gap-4">
          <Link href={lp('/financing')} className="text-primary-600 font-semibold hover:text-primary-700 inline-flex items-center gap-1">
            {t.payment.learnFinancing} <ArrowRight className="w-4 h-4" />
          </Link>
          <span className="text-dark-300">‚Ä¢</span>
          <Link href={lp('/services')} className="text-primary-600 font-semibold hover:text-primary-700 inline-flex items-center gap-1">
            {t.payment.insuranceClaims} <ArrowRight className="w-4 h-4" />
          </Link>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/ProjectHighlight.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import Image from 'next/image'
import { ArrowRight, MapPin, Calendar, Hammer } from 'lucide-react'
import { BeforeAfterSlider } from '@/components/ui/BeforeAfterSlider'
import { resolveImageUrl } from '@/lib/resolve-images'
import { useTranslation, useLocale } from '@/lib/i18n/provider'

const highlightImages = {
  beforeImages: [
    resolveImageUrl('/images/2025-05/basement-md-before-01.png'),
    resolveImageUrl('/images/2025-05/basement-md-before-02.png'),
  ],
  duringImage: resolveImageUrl('/images/2025-05/basement-md-during-01.png'),
  afterImages: [
    resolveImageUrl('/images/2025-05/basement-md-after-01.png'),
    resolveImageUrl('/images/2025-05/basement-md-after-02.png'),
    resolveImageUrl('/images/2025-05/basement-md-after-03.png'),
    resolveImageUrl('/images/2025-05/basement-md-after-04.png'),
  ],
}

export function ProjectHighlight() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`
  const [activeAfter, setActiveAfter] = useState(0)

  const stats = [
    { label: t.projectHighlight.projectDuration, value: t.projectHighlight.highlightDuration },
    { label: t.projectHighlight.area, value: t.projectHighlight.highlightArea },
    { label: t.projectHighlight.budgetRange, value: t.projectHighlight.highlightBudget },
  ]

  return (
    <section className="section-padding bg-white relative overflow-hidden">
      {/* Subtle background */}
      <div className="absolute top-0 right-0 w-1/3 h-full bg-gradient-to-l from-primary-50/50 to-transparent" />
      <div className="absolute bottom-0 left-0 w-64 h-64 bg-gold-100/30 rounded-full blur-3xl" />

      <div className="container-custom relative z-10">
        {/* Section Header */}
        <div className="flex flex-col lg:flex-row lg:items-end lg:justify-between gap-6 mb-12">
          <div>
            <span className="inline-flex items-center gap-2 text-sm font-semibold text-primary-600 tracking-wider uppercase mb-4">
              <Hammer className="w-4 h-4" />
              {t.projectHighlight.badge}
            </span>
            <h2 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-dark-900">
              {t.projectHighlight.title}
            </h2>
          </div>
          <Link
            href={lp('/projects')}
            className="inline-flex items-center gap-2 text-primary-600 font-semibold hover:text-primary-700 group"
          >
            {t.projectHighlight.viewAll}
            <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform" />
          </Link>
        </div>

        <div className="grid lg:grid-cols-2 gap-10 lg:gap-16 items-start">
          {/* Left: Before/After Slider */}
          <div className="space-y-6">
            <BeforeAfterSlider
              beforeImage={highlightImages.beforeImages[0]}
              afterImage={highlightImages.afterImages[activeAfter]}
              beforeLabel={t.projectHighlight.before}
              afterLabel={t.projectHighlight.after}
              className="shadow-xl"
            />

            {/* After thumbnails */}
            <div className="flex gap-3">
              {highlightImages.afterImages.map((img, i) => (
                <button
                  key={i}
                  onClick={() => setActiveAfter(i)}
                  className={`relative w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden transition-all ${
                    i === activeAfter
                      ? 'ring-2 ring-primary-500 ring-offset-2'
                      : 'opacity-60 hover:opacity-90'
                  }`}
                >
                  <Image src={img} alt={`${t.projectHighlight.after} ${i + 1}`} fill className="object-cover" />
                </button>
              ))}
              {/* During thumbnail */}
              <button
                onClick={() => {}}
                className="relative w-16 h-16 md:w-20 md:h-20 rounded-lg overflow-hidden opacity-60 hover:opacity-90 transition-all"
                title={t.projectHighlight.during}
              >
                <Image src={highlightImages.duringImage} alt={t.projectHighlight.during} fill className="object-cover" />
                <div className="absolute inset-0 bg-dark-900/40 flex items-center justify-center">
                  <span className="text-white text-2xs font-bold uppercase">{t.projectHighlight.during}</span>
                </div>
              </button>
            </div>
          </div>

          {/* Right: Project Details */}
          <div className="space-y-6 lg:sticky lg:top-32">
            {/* Badge */}
            <span className="inline-block px-3 py-1.5 bg-primary-100 text-primary-700 rounded-full text-sm font-semibold">
              {t.projectHighlight.highlightCategory}
            </span>

            <h3 className="text-2xl md:text-3xl font-display font-bold text-dark-900">
              {t.projectHighlight.highlightTitle}
            </h3>

            <div className="flex items-center gap-4 text-dark-500">
              <div className="flex items-center gap-2">
                <MapPin className="w-4 h-4" />
                <span>{t.projectHighlight.highlightLocation}</span>
              </div>
              <div className="flex items-center gap-2">
                <Calendar className="w-4 h-4" />
                <span>{t.projectHighlight.highlightDate}</span>
              </div>
            </div>

            <p className="text-dark-600 text-lg leading-relaxed">
              {t.projectHighlight.highlightDesc}
            </p>

            {/* Quick Stats */}
            <div className="grid grid-cols-3 gap-4 py-6 border-y border-dark-100">
              {stats.map((stat) => (
                <div key={stat.label}>
                  <div className="text-lg font-bold text-dark-900">{stat.value}</div>
                  <div className="text-sm text-dark-400">{stat.label}</div>
                </div>
              ))}
            </div>

            {/* CTAs */}
            <div className="flex flex-col sm:flex-row gap-4">
              <Link
                href={lp('/get-started')}
                className="btn-primary text-center"
              >
                {t.projectHighlight.startProject}
                <ArrowRight className="w-4 h-4 ml-2" />
              </Link>
              <Link
                href={lp('/estimate-cost')}
                className="btn-outline text-center"
              >
                {t.projectHighlight.getEstimate}
              </Link>
            </div>
          </div>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/ServicesPreview.tsx ---
'use client'

import Link from 'next/link'
import { ArrowRight, ChefHat, Bath, Home, Warehouse, Hammer, Grid3X3, Paintbrush, Wrench, TreeDeciduous, Fence, Building, FileText } from 'lucide-react'
import { cn } from '@/lib/utils'
import { useTranslation, useLocale } from '@/lib/i18n/provider'
import { SERVICES } from '@/lib/constants'

// Map icon names to components
const iconMap: Record<string, React.ComponentType<{ className?: string }>> = {
  ChefHat, Bath, Home, Warehouse, Hammer, Grid3X3, Paintbrush, Wrench, TreeDeciduous, Fence, Building, FileText,
}

// Map service constant IDs to dictionary keys
const serviceIdToKey: Record<string, string> = {
  'kitchen-remodeling': 'kitchen',
  'bathroom-renovation': 'bathroom',
  'basement-finishing': 'basement',
  'roofing': 'roofing',
  'concrete-driveways': 'concrete',
  'flooring': 'flooring',
  'painting': 'painting',
  'deck-outdoor': 'deck',
  'fencing': 'fencing',
  'complete-renovations': 'completeRenovations',
  'insurance-claims': 'insuranceClaims',
}

export function ServicesPreview() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`

  // Show first 8 services
  const displayServices = SERVICES.slice(0, 8)

  return (
    <section className="section-padding bg-white">
      <div className="container-custom">
        {/* Header */}
        <div className="text-center max-w-3xl mx-auto mb-16">
          <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
            {t.services.title}
          </span>
          <h2 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-dark-900 mb-6">
            {t.services.subtitle}
          </h2>
          <p className="text-lg text-dark-500 leading-relaxed">
            {t.services.description}
          </p>
        </div>

        {/* Services Grid */}
        <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6 mb-12">
          {displayServices.map((service, index) => {
            const IconComponent = iconMap[service.icon] || Home
            const dictKey = serviceIdToKey[service.id]
            const translated = dictKey ? (t.services as any)[dictKey] : null
            
            return (
              <Link
                key={service.id}
                href={lp(`/services/${service.id}`)}
                className={cn(
                  'group relative p-6 md:p-8 rounded-2xl border border-dark-100 bg-white',
                  'hover:border-primary-200 hover:shadow-xl hover:-translate-y-1',
                  'transition-all duration-300'
                )}
              >
                {/* Icon */}
                <div className="w-12 h-12 md:w-14 md:h-14 rounded-xl bg-primary-50 flex items-center justify-center mb-4 group-hover:bg-primary-100 group-hover:scale-110 transition-all duration-300">
                  <IconComponent className="w-6 h-6 md:w-7 md:h-7 text-primary-600" />
                </div>

                {/* Content */}
                <h3 className="font-display font-semibold text-dark-900 mb-2 group-hover:text-primary-800 transition-colors">
                  {translated?.name || service.name}
                </h3>
                <p className="text-sm text-dark-500 line-clamp-2">
                  {translated?.short || service.shortDescription}
                </p>

                {/* Hover arrow */}
                <div className="absolute top-6 right-6 opacity-0 group-hover:opacity-100 transition-opacity">
                  <ArrowRight className="w-5 h-5 text-primary-500" />
                </div>
              </Link>
            )
          })}
        </div>

        {/* View All CTA */}
        <div className="text-center">
          <Link
            href={lp('/services')}
            className="inline-flex items-center gap-2 text-primary-700 font-semibold hover:text-primary-800 group"
          >
            {t.services.viewAll}
            <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform" />
          </Link>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/Stats.tsx ---
'use client'

import { useEffect, useRef, useState } from 'react'
import { useTranslation } from '@/lib/i18n/provider'

export function Stats() {
  const t = useTranslation()
  const [isVisible, setIsVisible] = useState(false)
  const sectionRef = useRef<HTMLElement>(null)

  const stats = [
    { value: t.stats.years, label: t.stats.yearsLabel },
    { value: t.stats.projects, label: t.stats.projectsLabel },
    { value: t.stats.rating, label: t.stats.ratingLabel },
    { value: t.stats.satisfaction, label: t.stats.satisfactionLabel },
  ]

  useEffect(() => {
    const observer = new IntersectionObserver(
      ([entry]) => {
        if (entry.isIntersecting) {
          setIsVisible(true)
        }
      },
      { threshold: 0.3 }
    )

    if (sectionRef.current) {
      observer.observe(sectionRef.current)
    }

    return () => observer.disconnect()
  }, [])

  return (
    <section
      ref={sectionRef}
      className="py-16 md:py-20 bg-gradient-to-r from-primary-800 via-primary-900 to-primary-800 relative overflow-hidden"
    >
      {/* Background pattern */}
      <div className="absolute inset-0 opacity-10">
        <div
          className="absolute inset-0"
          style={{
            backgroundImage: `radial-gradient(circle at 2px 2px, white 1px, transparent 0)`,
            backgroundSize: '32px 32px',
          }}
        />
      </div>

      <div className="container-custom relative z-10">
        <div className="grid grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12">
          {stats.map((stat, index) => (
            <div
              key={stat.label}
              className={`text-center transition-all duration-700 ${
                isVisible
                  ? 'opacity-100 translate-y-0'
                  : 'opacity-0 translate-y-8'
              }`}
              style={{ transitionDelay: `${index * 100}ms` }}
            >
              <div className="text-4xl md:text-5xl lg:text-6xl font-display font-bold text-white mb-2">
                {stat.value}
              </div>
              <div className="text-primary-200 font-medium">{stat.label}</div>
            </div>
          ))}
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/Testimonials.tsx ---
'use client'

import { useState } from 'react'
import Link from 'next/link'
import { Star, ChevronLeft, ChevronRight, Quote, ArrowRight } from 'lucide-react'
import { cn, getInitials } from '@/lib/utils'
import { TESTIMONIALS } from '@/lib/constants'
import { useTranslation, useLocale } from '@/lib/i18n/provider'

export function Testimonials() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`
  const [activeIndex, setActiveIndex] = useState(0)

  const nextTestimonial = () => {
    setActiveIndex((prev) => (prev + 1) % TESTIMONIALS.length)
  }

  const prevTestimonial = () => {
    setActiveIndex((prev) => (prev - 1 + TESTIMONIALS.length) % TESTIMONIALS.length)
  }

  const activeTestimonial = TESTIMONIALS[activeIndex]

  return (
    <section className="section-padding bg-white">
      <div className="container-custom">
        {/* Header */}
        <div className="text-center max-w-3xl mx-auto mb-12">
          <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
            {t.testimonials.badge}
          </span>
          <h2 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-dark-900 mb-6">
            {t.testimonials.title}
          </h2>
          <p className="text-lg text-dark-500">
            {t.testimonials.description}
          </p>
        </div>

        {/* Main Testimonial */}
        <div className="max-w-4xl mx-auto">
          <div className="relative bg-dark-900 rounded-3xl p-8 md:p-12 overflow-hidden">
            {/* Background decoration */}
            <div className="absolute top-0 right-0 w-64 h-64 bg-primary-600/10 rounded-full blur-3xl" />
            <Quote className="absolute top-6 right-6 w-20 h-20 text-gold-500/20" />

            {/* Stars */}
            <div className="flex gap-1 mb-6">
              {[...Array(5)].map((_, i) => (
                <Star
                  key={i}
                  className={cn(
                    'w-5 h-5',
                    i < activeTestimonial.rating
                      ? 'text-gold-400 fill-gold-400'
                      : 'text-dark-600'
                  )}
                />
              ))}
            </div>

            {/* Quote - Keep original English since these are real customer testimonials */}
            <p className="text-lg md:text-xl text-white leading-relaxed mb-8 relative z-10">
              &quot;{activeTestimonial.text.length > 300 
                ? activeTestimonial.text.slice(0, 300) + '...' 
                : activeTestimonial.text}&quot;
            </p>

            {/* Author */}
            <div className="flex items-center justify-between">
              <div className="flex items-center gap-4">
                <div className="w-14 h-14 rounded-full bg-primary-600 flex items-center justify-center text-white font-bold text-lg">
                  {getInitials(activeTestimonial.name)}
                </div>
                <div>
                  <p className="font-semibold text-white">{activeTestimonial.name}</p>
                  <p className="text-white/70 text-sm">{activeTestimonial.location}</p>
                  <p className="text-gold-400 text-xs mt-1">{activeTestimonial.service}</p>
                </div>
              </div>

              {/* Navigation */}
              <div className="flex gap-2">
                <button
                  onClick={prevTestimonial}
                  className="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-colors"
                  aria-label="Previous testimonial"
                >
                  <ChevronLeft className="w-5 h-5" />
                </button>
                <button
                  onClick={nextTestimonial}
                  className="w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center text-white transition-colors"
                  aria-label="Next testimonial"
                >
                  <ChevronRight className="w-5 h-5" />
                </button>
              </div>
            </div>

            {/* Dots */}
            <div className="flex justify-center gap-2 mt-8">
              {TESTIMONIALS.map((_, index) => (
                <button
                  key={index}
                  onClick={() => setActiveIndex(index)}
                  className={cn(
                    'w-2 h-2 rounded-full transition-all',
                    index === activeIndex
                      ? 'w-8 bg-gold-500'
                      : 'bg-white/30 hover:bg-white/50'
                  )}
                  aria-label={`Go to testimonial ${index + 1}`}
                />
              ))}
            </div>
          </div>
        </div>

        {/* View All */}
        <div className="text-center mt-10">
          <Link
            href={lp('/reviews')}
            className="inline-flex items-center gap-2 text-primary-700 font-semibold hover:text-primary-800 group"
          >
            {t.testimonials.readAll}
            <ArrowRight className="w-4 h-4 group-hover:translate-x-1 transition-transform" />
          </Link>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/WhyChooseUs.tsx ---
'use client'

import { Award, Shield, Languages, CheckCircle } from 'lucide-react'
import { useTranslation } from '@/lib/i18n/provider'
import { COMPANY } from '@/lib/constants'

export function WhyChooseUs() {
  const t = useTranslation()

  const items = [
    { icon: Award, title: t.whyChoose.item0Title, description: t.whyChoose.item0Desc },
    { icon: Shield, title: t.whyChoose.item1Title, description: t.whyChoose.item1Desc },
    { icon: Languages, title: t.whyChoose.item2Title, description: t.whyChoose.item2Desc },
    { icon: CheckCircle, title: t.whyChoose.item3Title, description: t.whyChoose.item3Desc },
  ]

  return (
    <section className="section-padding bg-dark-50">
      <div className="container-custom">
        <div className="grid lg:grid-cols-2 gap-12 lg:gap-20 items-center">
          {/* Left - Content */}
          <div>
            <span className="inline-block text-sm font-semibold text-gold-600 tracking-wider uppercase mb-4">
              {t.services.whyChoose}
            </span>
            <h2 className="text-3xl md:text-4xl lg:text-5xl font-display font-bold text-dark-900 mb-6">
              {COMPANY.yearsInBusiness}+ {t.whyChoose.heading}{' '}
              <span className="text-primary-700">{t.whyChoose.headingAccent}</span>
            </h2>
            <p className="text-lg text-dark-500 leading-relaxed mb-8">
              {t.whyChoose.description}
            </p>

            {/* Quote */}
            <blockquote className="relative pl-6 border-l-4 border-gold-500 italic text-dark-600">
              <p className="text-lg mb-4">
                &quot;{t.whyChoose.quote}&quot;
              </p>
              <footer className="not-italic">
                <strong className="text-dark-900">{t.whyChoose.quoteAuthor}</strong>
                <span className="text-dark-400"> ‚Äî {t.whyChoose.quoteRole}</span>
              </footer>
            </blockquote>
          </div>

          {/* Right - Features Grid */}
          <div className="grid sm:grid-cols-2 gap-6">
            {items.map((item) => {
              const IconComponent = item.icon
              
              return (
                <div
                  key={item.title}
                  className="group p-6 bg-white rounded-2xl border border-dark-100 hover:border-primary-200 hover:shadow-lg transition-all duration-300"
                >
                  <div className="w-12 h-12 rounded-xl bg-primary-100 flex items-center justify-center mb-4 group-hover:bg-primary-600 group-hover:scale-110 transition-all duration-300">
                    <IconComponent className="w-6 h-6 text-primary-600 group-hover:text-white transition-colors" />
                  </div>
                  <h3 className="font-display font-semibold text-dark-900 mb-2">
                    {item.title}
                  </h3>
                  <p className="text-sm text-dark-500">
                    {item.description}
                  </p>
                </div>
              )
            })}
          </div>
        </div>
      </div>
    </section>
  )
}


==========================================================================================

--- file: components/sections/index.ts ---
export { Hero } from './Hero'
export { ServicesPreview } from './ServicesPreview'
export { FeaturedProjects } from './FeaturedProjects'
export { ProjectHighlight } from './ProjectHighlight'
export { Stats } from './Stats'
export { WhyChooseUs } from './WhyChooseUs'
export { PaymentOptions } from './PaymentOptions'
export { Testimonials } from './Testimonials'
export { MeetCarlos } from './MeetCarlos'
export { HowWeWork } from './HowWeWork'
export { CallToAction } from './CallToAction'


==========================================================================================

--- file: components/forms/ContactForm.tsx ---
'use client'

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { Send, Loader2, CheckCircle } from 'lucide-react'
import { cn } from '@/lib/utils'
import { SERVICES, COMPANY } from '@/lib/constants'
import { formatWhatsAppLink } from '@/lib/utils'
import { trackFormSubmission } from '@/lib/analytics'

const contactSchema = z.object({
  name: z.string().min(2, 'Name must be at least 2 characters'),
  email: z.string().email('Please enter a valid email'),
  phone: z.string().min(10, 'Please enter a valid phone number'),
  service: z.string().optional(),
  message: z.string().min(10, 'Message must be at least 10 characters'),
})

type ContactFormData = z.infer<typeof contactSchema>

export function ContactForm() {
  const [isSubmitting, setIsSubmitting] = useState(false)
  const [isSuccess, setIsSuccess] = useState(false)
  const [error, setError] = useState('')

  const {
    register,
    handleSubmit,
    reset,
    formState: { errors },
  } = useForm<ContactFormData>({
    resolver: zodResolver(contactSchema),
  })

  const onSubmit = async (data: ContactFormData) => {
    setIsSubmitting(true)
    setError('')

    try {
      const response = await fetch('/api/contact', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      })

      if (!response.ok) throw new Error('Failed to send message')

      // Track successful submission in GA4
      trackFormSubmission('contact')

      setIsSubmitting(false)
      setIsSuccess(true)
      reset()
      setTimeout(() => setIsSuccess(false), 10000)
    } catch (err: any) {
      setIsSubmitting(false)
      setError('Something went wrong. Please try calling us directly.')
      console.error('Contact form error:', err)
    }
  }

  if (isSuccess) {
    return (
      <div className="bg-green-50 border border-green-200 rounded-2xl p-8 text-center">
        <div className="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4">
          <CheckCircle className="w-8 h-8 text-green-600" />
        </div>
        <h3 className="text-xl font-semibold text-green-800 mb-2">Message Sent!</h3>
        <p className="text-green-700 mb-4">
          Thank you for reaching out. We'll get back to you within 24 hours.
        </p>
        <p className="text-sm text-green-600">
          Need a faster response?{' '}
          <a
            href={formatWhatsAppLink(COMPANY.phone, "Hi! I just submitted a contact form on your website.")}
            target="_blank"
            rel="noopener noreferrer"
            className="font-semibold underline"
          >
            Message us on WhatsApp ‚Üí
          </a>
        </p>
      </div>
    )
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-5">
      {error && (
        <div className="p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
          {error}
        </div>
      )}

      {/* Name */}
      <div>
        <label htmlFor="name" className="block text-sm font-medium text-dark-700 mb-1.5">
          Your Name <span className="text-red-500">*</span>
        </label>
        <input
          id="name"
          type="text"
          placeholder="John Smith"
          {...register('name')}
          className={cn(
            'w-full px-4 py-3 rounded-xl border bg-white transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500/20',
            errors.name ? 'border-red-300' : 'border-dark-200 focus:border-primary-500'
          )}
        />
        {errors.name && <p className="mt-1 text-sm text-red-500">{errors.name.message}</p>}
      </div>

      {/* Email + Phone */}
      <div className="grid md:grid-cols-2 gap-4">
        <div>
          <label htmlFor="email" className="block text-sm font-medium text-dark-700 mb-1.5">
            Email <span className="text-red-500">*</span>
          </label>
          <input
            id="email"
            type="email"
            placeholder="john@example.com"
            {...register('email')}
            className={cn(
              'w-full px-4 py-3 rounded-xl border bg-white transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500/20',
              errors.email ? 'border-red-300' : 'border-dark-200 focus:border-primary-500'
            )}
          />
          {errors.email && <p className="mt-1 text-sm text-red-500">{errors.email.message}</p>}
        </div>
        <div>
          <label htmlFor="phone" className="block text-sm font-medium text-dark-700 mb-1.5">
            Phone <span className="text-red-500">*</span>
          </label>
          <input
            id="phone"
            type="tel"
            placeholder="(555) 123-4567"
            {...register('phone')}
            className={cn(
              'w-full px-4 py-3 rounded-xl border bg-white transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500/20',
              errors.phone ? 'border-red-300' : 'border-dark-200 focus:border-primary-500'
            )}
          />
          {errors.phone && <p className="mt-1 text-sm text-red-500">{errors.phone.message}</p>}
        </div>
      </div>

      {/* Service */}
      <div>
        <label htmlFor="service" className="block text-sm font-medium text-dark-700 mb-1.5">
          Service Interested In
        </label>
        <select
          id="service"
          {...register('service')}
          className="w-full px-4 py-3 rounded-xl border border-dark-200 bg-white focus:outline-none focus:ring-2 focus:ring-primary-500/20 focus:border-primary-500"
        >
          <option value="">Select a service (optional)</option>
          {SERVICES.map((s) => (
            <option key={s.id} value={s.name}>{s.name}</option>
          ))}
        </select>
      </div>

      {/* Message */}
      <div>
        <label htmlFor="message" className="block text-sm font-medium text-dark-700 mb-1.5">
          Message <span className="text-red-500">*</span>
        </label>
        <textarea
          id="message"
          rows={5}
          placeholder="Tell us about your project..."
          {...register('message')}
          className={cn(
            'w-full px-4 py-3 rounded-xl border bg-white transition-colors focus:outline-none focus:ring-2 focus:ring-primary-500/20 resize-y',
            errors.message ? 'border-red-300' : 'border-dark-200 focus:border-primary-500'
          )}
        />
        {errors.message && <p className="mt-1 text-sm text-red-500">{errors.message.message}</p>}
      </div>

      {/* Submit */}
      <button
        type="submit"
        disabled={isSubmitting}
        className="btn-primary w-full flex items-center justify-center gap-2"
      >
        {isSubmitting ? (
          <>
            <Loader2 className="w-5 h-5 animate-spin" />
            Sending...
          </>
        ) : (
          <>
            <Send className="w-5 h-5" />
            Send Message
          </>
        )}
      </button>

      <p className="text-center text-sm text-dark-400">
        We typically respond within 24 hours.
      </p>
    </form>
  )
}


==========================================================================================

--- file: components/forms/IntakeForm.tsx ---
'use client'

import { useState, useEffect, useCallback } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { ArrowRight, ArrowLeft, Loader2, CheckCircle, Upload, X, Phone, Calendar, Mail, MessageSquare } from 'lucide-react'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { cn, formatPhoneLink } from '@/lib/utils'
import { SERVICES, BUDGET_RANGES, TIMELINE_OPTIONS, REFERRAL_SOURCES, COMPANY } from '@/lib/constants'

const intakeSchema = z.object({
  // Step 1: Contact
  firstName: z.string().min(2, 'First name is required'),
  lastName: z.string().min(2, 'Last name is required'),
  email: z.string().email('Valid email required'),
  phone: z.string().min(10, 'Valid phone required'),
  preferredContact: z.enum(['phone', 'email', 'text', 'whatsapp']),
  
  // Step 2: Location
  address: z.string().min(5, 'Address is required'),
  city: z.string().min(2, 'City is required'),
  state: z.string().min(2, 'State is required'),
  zip: z.string().min(5, 'ZIP code is required'),
  propertyType: z.enum(['single-family', 'townhouse', 'condo', 'multi-family', 'commercial']),
  
  // Step 3: Project
  services: z.array(z.string()).min(1, 'Select at least one service'),
  projectDescription: z.string().min(20, 'Please describe your project'),
  
  // Step 4: Timeline & Budget
  timeline: z.string().min(1, 'Please select a timeline'),
  budget: z.string().min(1, 'Please select a budget range'),
  flexibleBudget: z.boolean().optional(),
  
  // Step 5: Additional
  howDidYouHear: z.string().optional(),
  additionalNotes: z.string().optional(),
})

type IntakeFormData = z.infer<typeof intakeSchema>

const steps = [
  { title: 'Contact Info', description: 'How can we reach you?' },
  { title: 'Location', description: 'Where is your project?' },
  { title: 'Project Details', description: 'What do you need done?' },
  { title: 'Timeline & Budget', description: 'When and how much?' },
  { title: 'Almost Done!', description: 'Just a few more details' },
]

export function IntakeForm() {
  const [currentStep, setCurrentStep] = useState(0)
  const [isSubmitting, setIsSubmitting] = useState(false)
  const [isSuccess, setIsSuccess] = useState(false)
  const [uploadedPhotos, setUploadedPhotos] = useState<File[]>([])

  const {
    register,
    handleSubmit,
    watch,
    trigger,
    setValue,
    getValues,
    formState: { errors },
  } = useForm<IntakeFormData>({
    mode: 'onChange',
    resolver: zodResolver(intakeSchema),
    defaultValues: {
      preferredContact: 'phone',
      propertyType: 'single-family',
      services: [],
      flexibleBudget: false,
    },
  })

  // Force-sync browser autocomplete with React Hook Form
  const syncAutocomplete = useCallback(() => {
    const fields = ['firstName', 'lastName', 'email', 'phone', 'address', 'city', 'zip']
    fields.forEach(field => {
      const el = document.querySelector('[name="' + field + '"]') as HTMLInputElement
      if (el && el.value && el.value !== getValues(field as any)) {
        setValue(field as any, el.value, { shouldValidate: true, shouldDirty: true })
      }
    })
  }, [setValue, getValues])

  useEffect(() => {
    const timer1 = setTimeout(syncAutocomplete, 500)
    const timer2 = setTimeout(syncAutocomplete, 1500)
    const handler = () => setTimeout(syncAutocomplete, 100)
    document.addEventListener('input', handler, true)
    document.addEventListener('change', handler, true)
    return () => {
      clearTimeout(timer1)
      clearTimeout(timer2)
      document.removeEventListener('input', handler, true)
      document.removeEventListener('change', handler, true)
    }
  }, [currentStep, syncAutocomplete])

  const selectedServices = watch('services') || []

  const validateStep = async () => {
    const fieldsToValidate: (keyof IntakeFormData)[][] = [
      ['firstName', 'lastName', 'email', 'phone', 'preferredContact'],
      ['address', 'city', 'state', 'zip', 'propertyType'],
      ['services', 'projectDescription'],
      ['timeline', 'budget'],
      [],
    ]
    
    const result = await trigger(fieldsToValidate[currentStep])
    return result
  }

  const nextStep = async () => {
    syncAutocomplete()
    const isValid = await validateStep()
    if (isValid && currentStep < steps.length - 1) {
      setCurrentStep(currentStep + 1)
      window.scrollTo({ top: 0, behavior: 'smooth' })
    }
  }

  const prevStep = () => {
    if (currentStep > 0) {
      setCurrentStep(currentStep - 1)
      window.scrollTo({ top: 0, behavior: 'smooth' })
    }
  }

  const onSubmit = async (data: IntakeFormData) => {
    setIsSubmitting(true)
    try {
      // Convert photos to base64 for API
      const imagePromises = uploadedPhotos.map(file => {
        return new Promise<string>((resolve, reject) => {
          const reader = new FileReader()
          reader.onload = () => resolve(reader.result as string)
          reader.onerror = reject
          reader.readAsDataURL(file)
        })
      })
      const images = await Promise.all(imagePromises)

      const response = await fetch('/api/get-started', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ ...data, images }),
      })

      if (!response.ok) throw new Error('Submission failed')

      setIsSubmitting(false)
      setIsSuccess(true)
    } catch (err) {
      console.error('Lead form error:', err)
      setIsSubmitting(false)
      alert('Something went wrong. Please try calling us directly.')
    }
  }

  if (isSuccess) {
    return (
      <div className="bg-green-50 border border-green-200 rounded-2xl p-8 md:p-12 text-center">
        <div className="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-6">
          <CheckCircle className="w-10 h-10 text-green-600" />
        </div>
        <h2 className="text-2xl md:text-3xl font-display font-bold text-green-800 mb-4">
          Request Submitted!
        </h2>
        <p className="text-green-700 text-lg mb-6">
          Thank you! We've received your project details and will contact you within 24 hours 
          to schedule your free consultation.
        </p>
        <div className="flex flex-col sm:flex-row gap-4 justify-center">
          <a
            href={formatPhoneLink(COMPANY.phone)}
            className="btn bg-green-600 text-white hover:bg-green-700 w-full sm:w-auto px-6 py-3"
          >
            <Phone className="w-5 h-5 mr-2" />
            Call Us Now
          </a>
          <a
            href="/projects"
            className="btn bg-white text-green-700 border border-green-200 hover:bg-green-50 w-full sm:w-auto px-6 py-3"
          >
            Browse Our Work
          </a>
        </div>
      </div>
    )
  }

  return (
    <div className="bg-white rounded-2xl border border-dark-100 shadow-xl overflow-hidden">
      {/* Progress Bar */}
      <div className="bg-dark-50 px-6 py-4">
        <div className="flex items-center justify-between mb-2">
          <span className="text-sm font-medium text-dark-600">
            Step {currentStep + 1} of {steps.length}
          </span>
          <span className="text-sm text-dark-500">
            {Math.round(((currentStep + 1) / steps.length) * 100)}% complete
          </span>
        </div>
        <div className="h-2 bg-dark-200 rounded-full overflow-hidden">
          <div
            className="h-full bg-primary-600 rounded-full transition-all duration-500"
            style={{ width: `${((currentStep + 1) / steps.length) * 100}%` }}
          />
        </div>
      </div>

      {/* Step Header */}
      <div className="px-6 py-6 border-b border-dark-100">
        <h2 className="text-xl md:text-2xl font-display font-bold text-dark-900">
          {steps[currentStep].title}
        </h2>
        <p className="text-dark-500">{steps[currentStep].description}</p>
      </div>

      {/* Form */}
      <form onSubmit={handleSubmit(onSubmit)} onKeyDown={(e) => { if (e.key === "Enter" && (e.target as HTMLElement).tagName !== "TEXTAREA") e.preventDefault() }} className="p-6 md:p-8">
        {/* Step 1: Contact Info */}
        {currentStep === 0 && (
          <div className="space-y-6">
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <label className="label">First Name *</label>
                <input {...register('firstName')} autoComplete="given-name" className={cn('input', errors.firstName && 'border-red-500')} placeholder="John" />
                {errors.firstName && <p className="mt-1 text-sm text-red-500">{errors.firstName.message}</p>}
              </div>
              <div>
                <label className="label">Last Name *</label>
                <input {...register('lastName')} autoComplete="family-name" className={cn('input', errors.lastName && 'border-red-500')} placeholder="Smith" />
                {errors.lastName && <p className="mt-1 text-sm text-red-500">{errors.lastName.message}</p>}
              </div>
            </div>
            <div className="grid md:grid-cols-2 gap-4">
              <div>
                <label className="label">Email *</label>
                <input {...register('email')} type="email" autoComplete="email" className={cn('input', errors.email && 'border-red-500')} placeholder="john@example.com" />
                {errors.email && <p className="mt-1 text-sm text-red-500">{errors.email.message}</p>}
              </div>
              <div>
                <label className="label">Phone *</label>
                <input {...register('phone')} type="tel" autoComplete="tel" className={cn('input', errors.phone && 'border-red-500')} placeholder="(555) 123-4567" />
                {errors.phone && <p className="mt-1 text-sm text-red-500">{errors.phone.message}</p>}
              </div>
            </div>
            <div>
              <label className="label">Preferred Contact Method *</label>
              <div className="grid grid-cols-2 sm:flex gap-3 sm:gap-4">
                {[
                  { value: 'phone', icon: <Phone className="w-4 h-4" />, label: 'Phone' },
                  { value: 'email', icon: <Mail className="w-4 h-4" />, label: 'Email' },
                  { value: 'text', icon: <MessageSquare className="w-4 h-4" />, label: 'Text' },
                  { value: 'whatsapp', icon: <WhatsAppIcon className="w-4 h-4" />, label: 'WhatsApp' },
                ].map((method) => (
                  <label key={method.value} className="flex items-center gap-2 cursor-pointer bg-white border border-dark-200 rounded-lg px-3 py-2.5 hover:border-primary-400 transition-colors has-[:checked]:border-primary-600 has-[:checked]:bg-primary-50">
                    <input {...register('preferredContact')} type="radio" value={method.value} className="text-primary-600" />
                    <span className={cn('flex-shrink-0', method.value === 'whatsapp' ? 'text-green-500' : 'text-dark-500')}>{method.icon}</span>
                    <span className="text-sm font-medium">{method.label}</span>
                  </label>
                ))}
              </div>
            </div>
          </div>
        )}

        {/* Step 2: Location */}
        {currentStep === 1 && (
          <div className="space-y-6">
            <div>
              <label className="label">Street Address *</label>
              <input {...register('address')} autoComplete="street-address" className={cn('input', errors.address && 'border-red-500')} placeholder="123 Main Street" />
              {errors.address && <p className="mt-1 text-sm text-red-500">{errors.address.message}</p>}
            </div>
            <div className="grid md:grid-cols-3 gap-4">
              <div>
                <label className="label">City *</label>
                <input {...register('city')} autoComplete="address-level2" className={cn('input', errors.city && 'border-red-500')} placeholder="Bethesda" />
                {errors.city && <p className="mt-1 text-sm text-red-500">{errors.city.message}</p>}
              </div>
              <div>
                <label className="label">State *</label>
                <select {...register('state')} className={cn('input', errors.state && 'border-red-500')}>
                  <option value="">Select</option>
                  <option value="DC">Washington DC</option>
                  <option value="MD">Maryland</option>
                  <option value="VA">Virginia</option>
                </select>
                {errors.state && <p className="mt-1 text-sm text-red-500">{errors.state.message}</p>}
              </div>
              <div>
                <label className="label">ZIP Code *</label>
                <input {...register('zip')} autoComplete="postal-code" className={cn('input', errors.zip && 'border-red-500')} placeholder="20814" />
                {errors.zip && <p className="mt-1 text-sm text-red-500">{errors.zip.message}</p>}
              </div>
            </div>
            <div>
              <label className="label">Property Type *</label>
              <select {...register('propertyType')} className="input">
                <option value="single-family">Single Family Home</option>
                <option value="townhouse">Townhouse</option>
                <option value="condo">Condo / Apartment</option>
                <option value="multi-family">Multi-Family</option>
                <option value="commercial">Commercial</option>
              </select>
            </div>
          </div>
        )}

        {/* Step 3: Project Details */}
        {currentStep === 2 && (
          <div className="space-y-6">
            <div>
              <label className="label">Services Needed * (select all that apply)</label>
              <div className="grid grid-cols-2 md:grid-cols-3 gap-3 mt-2">
                {SERVICES.map((service) => (
                  <label
                    key={service.id}
                    className={cn(
                      'flex items-center gap-2 p-3 rounded-lg border cursor-pointer transition-all',
                      selectedServices.includes(service.id)
                        ? 'border-primary-500 bg-primary-50 text-primary-700'
                        : 'border-dark-200 hover:border-primary-200'
                    )}
                  >
                    <input
                      {...register('services')}
                      type="checkbox"
                      value={service.id}
                      className="text-primary-600"
                    />
                    <span className="text-sm font-medium">{service.name}</span>
                  </label>
                ))}
              </div>
              {errors.services && <p className="mt-2 text-sm text-red-500">{errors.services.message}</p>}
            </div>
            <div>
              <label className="label">Tell Us About Your Project *</label>
              <textarea
                {...register('projectDescription')}
                rows={5}
                className={cn('textarea', errors.projectDescription && 'border-red-500')}
                placeholder="Describe what you'd like done, any specific requirements, challenges, or ideas you have..."
              />
              {errors.projectDescription && <p className="mt-1 text-sm text-red-500">{errors.projectDescription.message}</p>}
            </div>
          </div>
        )}

        {/* Step 4: Timeline & Budget */}
        {currentStep === 3 && (
          <div className="space-y-6">
            <div>
              <label className="label">When Would You Like to Start? *</label>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {TIMELINE_OPTIONS.map((option) => (
                  <label
                    key={option}
                    className={cn(
                      'flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all',
                      watch('timeline') === option
                        ? 'border-primary-500 bg-primary-50'
                        : 'border-dark-200 hover:border-primary-200'
                    )}
                  >
                    <input {...register('timeline')} type="radio" value={option} className="text-primary-600" />
                    <span>{option}</span>
                  </label>
                ))}
              </div>
              {errors.timeline && <p className="mt-2 text-sm text-red-500">{errors.timeline.message}</p>}
            </div>
            <div>
              <label className="label">Estimated Budget Range *</label>
              <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                {BUDGET_RANGES.map((range) => (
                  <label
                    key={range}
                    className={cn(
                      'flex items-center gap-3 p-4 rounded-lg border cursor-pointer transition-all',
                      watch('budget') === range
                        ? 'border-primary-500 bg-primary-50'
                        : 'border-dark-200 hover:border-primary-200'
                    )}
                  >
                    <input {...register('budget')} type="radio" value={range} className="text-primary-600" />
                    <span>{range}</span>
                  </label>
                ))}
              </div>
              {errors.budget && <p className="mt-2 text-sm text-red-500">{errors.budget.message}</p>}
            </div>
            <label className="flex items-center gap-2 cursor-pointer">
              <input {...register('flexibleBudget')} type="checkbox" className="text-primary-600" />
              <span className="text-dark-600">I'm flexible on budget for the right solution</span>
            </label>
          </div>
        )}

        {/* Step 5: Additional Info */}
        {currentStep === 4 && (
          <div className="space-y-6">
            <div>
              <label className="label">How Did You Hear About Us?</label>
              <select {...register('howDidYouHear')} className="input">
                <option value="">Select (optional)</option>
                {REFERRAL_SOURCES.map((source) => (
                  <option key={source} value={source}>{source}</option>
                ))}
              </select>
            </div>
            <div>
              <label className="label">üì∏ Upload Photos of Your Project (Optional)</label>
              <p className="text-sm text-dark-500 mb-2">Help us understand your project better ‚Äî share photos of the area you want renovated.</p>
              {uploadedPhotos.length > 0 && (
                <div className="flex flex-wrap gap-2 mb-3">
                  {uploadedPhotos.map((file, i) => (
                    <div key={i} className="relative group">
                      <img
                        src={URL.createObjectURL(file)}
                        alt={`Photo ${i + 1}`}
                        className="w-20 h-20 object-cover rounded-lg border border-dark-200"
                      />
                      <button
                        type="button"
                        onClick={() => setUploadedPhotos(prev => prev.filter((_, idx) => idx !== i))}
                        className="absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity"
                      >
                        <X className="w-3 h-3" />
                      </button>
                    </div>
                  ))}
                </div>
              )}
              <label className="flex flex-col items-center justify-center gap-2 p-6 border-2 border-dashed border-dark-300 rounded-xl cursor-pointer hover:border-primary-400 hover:bg-primary-50/30 transition-colors">
                <Upload className="w-8 h-8 text-dark-400" />
                <span className="text-sm font-medium text-dark-600">Tap to upload photos</span>
                <span className="text-xs text-dark-400">JPG, PNG up to 10MB each ‚Ä¢ Max 5 photos</span>
                <input
                  type="file"
                  accept="image/*"
                  multiple
                  className="hidden"
                  onChange={(e) => {
                    const files = Array.from(e.target.files || [])
                    const total = uploadedPhotos.length + files.length
                    if (total > 5) {
                      alert('Maximum 5 photos allowed')
                      return
                    }
                    const valid = files.filter(f => f.size <= 10 * 1024 * 1024)
                    if (valid.length < files.length) {
                      alert('Some files exceeded 10MB and were skipped')
                    }
                    setUploadedPhotos(prev => [...prev, ...valid])
                    e.target.value = '' // reset input
                  }}
                />
              </label>
            </div>
            <div>
              <label className="label">Anything Else We Should Know?</label>
              <textarea
                {...register('additionalNotes')}
                rows={4}
                className="textarea"
                placeholder="Access instructions, HOA requirements, pets, scheduling preferences, etc."
              />
            </div>
            <div className="bg-gold-50 border border-gold-200 rounded-xl p-4">
              <p className="text-gold-800 text-sm">
                <strong>What happens next?</strong> We'll review your project details and contact you within 
                24 hours to schedule a free on-site consultation and provide a detailed estimate.
              </p>
            </div>
          </div>
        )}

        {/* Navigation Buttons */}
        <div className="flex flex-col-reverse sm:flex-row justify-between gap-3 mt-8 pt-6 border-t border-dark-100">
          {currentStep > 0 ? (
            <button
              type="button"
              onClick={prevStep}
              style={{ touchAction: 'manipulation' }}
              className="flex items-center justify-center gap-2 min-h-[48px] px-6 py-3 text-base font-medium text-dark-600 bg-white border-2 border-dark-200 rounded-xl hover:border-primary-400 hover:text-primary-600 active:scale-[0.98] transition-all cursor-pointer select-none"
            >
              <ArrowLeft className="w-5 h-5" />
              Back
            </button>
          ) : <div />}

          {currentStep < steps.length - 1 ? (
            <button
              type="button"
              onClick={(e) => { e.preventDefault(); syncAutocomplete(); setTimeout(nextStep, 50); }}
              style={{ touchAction: 'manipulation' }}
              className="flex items-center justify-center gap-2 min-h-[48px] px-8 py-3 text-base font-semibold text-white bg-primary-600 rounded-xl hover:bg-primary-700 active:scale-[0.98] transition-all cursor-pointer select-none shadow-md"
            >
              Continue
              <ArrowRight className="w-5 h-5" />
            </button>
          ) : (
            <button
              type="submit"
              disabled={isSubmitting}
              onClick={() => syncAutocomplete()}
              style={{ touchAction: 'manipulation' }}
              className="flex items-center justify-center gap-2 min-h-[52px] px-8 py-4 text-base font-semibold text-white bg-gradient-to-r from-gold-500 to-gold-600 rounded-xl hover:from-gold-600 hover:to-gold-700 active:scale-[0.98] transition-all cursor-pointer select-none shadow-lg disabled:opacity-50"
            >
              {isSubmitting ? (
                <>
                  <Loader2 className="w-5 h-5 animate-spin" />
                  Submitting...
                </>
              ) : (
                <>
                  <Calendar className="w-5 h-5" />
                  Request Free Estimate
                </>
              )}
            </button>
          )}
        </div>
      </form>
    </div>
  )
}


==========================================================================================

--- file: components/forms/ReferralForm.tsx ---
'use client'

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { z } from 'zod'
import { Send, Loader2, CheckCircle, Gift } from 'lucide-react'
import { cn } from '@/lib/utils'
import { SERVICES } from '@/lib/constants'

const referralSchema = z.object({
  // Referrer info
  referrerName: z.string().min(2, 'Your name is required'),
  referrerEmail: z.string().email('Please enter a valid email'),
  referrerPhone: z.string().min(10, 'Please enter a valid phone number'),
  
  // Referral info
  referralName: z.string().min(2, 'Their name is required'),
  referralPhone: z.string().min(10, 'Please enter their phone number'),
  referralEmail: z.string().email('Please enter a valid email').optional().or(z.literal('')),
  referralAddress: z.string().optional(),
  
  // Project info
  projectType: z.string().min(1, 'Please select a service'),
  projectDetails: z.string().optional(),
  
  // Payment preference
  paymentMethod: z.enum(['check', 'venmo', 'zelle', 'credit']),
})

type ReferralFormData = z.infer<typeof referralSchema>

export function ReferralForm() {
  const [isSubmitting, setIsSubmitting] = useState(false)
  const [isSuccess, setIsSuccess] = useState(false)

  const {
    register,
    handleSubmit,
    reset,
    formState: { errors },
  } = useForm<ReferralFormData>({
    resolver: zodResolver(referralSchema),
    defaultValues: {
      paymentMethod: 'check',
    },
  })

  const onSubmit = async (data: ReferralFormData) => {
    setIsSubmitting(true)
    try {
      const response = await fetch('/api/referrals', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
      })
      if (!response.ok) throw new Error('Submission failed')
      setIsSubmitting(false)
      setIsSuccess(true)
      reset()
    } catch (err) {
      console.error('Referral form error:', err)
      setIsSubmitting(false)
      alert('Something went wrong. Please try again.')
    }
  }

  if (isSuccess) {
    return (
      <div className="bg-green-50 border border-green-200 rounded-2xl p-8 text-center">
        <div className="w-16 h-16 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4">
          <Gift className="w-8 h-8 text-green-600" />
        </div>
        <h3 className="text-xl font-semibold text-green-800 mb-2">
          Referral Submitted!
        </h3>
        <p className="text-green-700 mb-4">
          Thank you! We'll reach out to your referral within 24 hours. Once their project is 
          complete, your reward will be on its way!
        </p>
        <button
          onClick={() => setIsSuccess(false)}
          className="text-green-600 font-medium hover:text-green-700"
        >
          Submit Another Referral
        </button>
      </div>
    )
  }

  return (
    <form onSubmit={handleSubmit(onSubmit)} className="space-y-8">
      {/* Your Information */}
      <div>
        <h3 className="text-lg font-semibold text-dark-900 mb-4 flex items-center gap-2">
          <span className="w-6 h-6 rounded-full bg-primary-800 text-white text-sm flex items-center justify-center">1</span>
          Your Information
        </h3>
        <div className="grid md:grid-cols-2 gap-4">
          <div className="md:col-span-2">
            <label htmlFor="referrerName" className="label">Your Name *</label>
            <input
              {...register('referrerName')}
              type="text"
              id="referrerName"
              placeholder="John Smith"
              className={cn('input', errors.referrerName && 'border-red-500')}
            />
            {errors.referrerName && <p className="mt-1 text-sm text-red-500">{errors.referrerName.message}</p>}
          </div>
          <div>
            <label htmlFor="referrerEmail" className="label">Your Email *</label>
            <input
              {...register('referrerEmail')}
              type="email"
              id="referrerEmail"
              placeholder="john@example.com"
              className={cn('input', errors.referrerEmail && 'border-red-500')}
            />
            {errors.referrerEmail && <p className="mt-1 text-sm text-red-500">{errors.referrerEmail.message}</p>}
          </div>
          <div>
            <label htmlFor="referrerPhone" className="label">Your Phone *</label>
            <input
              {...register('referrerPhone')}
              type="tel"
              id="referrerPhone"
              placeholder="(555) 123-4567"
              className={cn('input', errors.referrerPhone && 'border-red-500')}
            />
            {errors.referrerPhone && <p className="mt-1 text-sm text-red-500">{errors.referrerPhone.message}</p>}
          </div>
        </div>
      </div>

      {/* Referral Information */}
      <div>
        <h3 className="text-lg font-semibold text-dark-900 mb-4 flex items-center gap-2">
          <span className="w-6 h-6 rounded-full bg-primary-800 text-white text-sm flex items-center justify-center">2</span>
          Who Are You Referring?
        </h3>
        <div className="grid md:grid-cols-2 gap-4">
          <div>
            <label htmlFor="referralName" className="label">Their Name *</label>
            <input
              {...register('referralName')}
              type="text"
              id="referralName"
              placeholder="Jane Doe"
              className={cn('input', errors.referralName && 'border-red-500')}
            />
            {errors.referralName && <p className="mt-1 text-sm text-red-500">{errors.referralName.message}</p>}
          </div>
          <div>
            <label htmlFor="referralPhone" className="label">Their Phone *</label>
            <input
              {...register('referralPhone')}
              type="tel"
              id="referralPhone"
              placeholder="(555) 987-6543"
              className={cn('input', errors.referralPhone && 'border-red-500')}
            />
            {errors.referralPhone && <p className="mt-1 text-sm text-red-500">{errors.referralPhone.message}</p>}
          </div>
          <div>
            <label htmlFor="referralEmail" className="label">Their Email (optional)</label>
            <input
              {...register('referralEmail')}
              type="email"
              id="referralEmail"
              placeholder="jane@example.com"
              className="input"
            />
          </div>
          <div>
            <label htmlFor="referralAddress" className="label">Project Address (optional)</label>
            <input
              {...register('referralAddress')}
              type="text"
              id="referralAddress"
              placeholder="123 Main St, City, State"
              className="input"
            />
          </div>
        </div>
      </div>

      {/* Project Details */}
      <div>
        <h3 className="text-lg font-semibold text-dark-900 mb-4 flex items-center gap-2">
          <span className="w-6 h-6 rounded-full bg-primary-800 text-white text-sm flex items-center justify-center">3</span>
          What Do They Need?
        </h3>
        <div className="space-y-4">
          <div>
            <label htmlFor="projectType" className="label">Service Needed *</label>
            <select
              {...register('projectType')}
              id="projectType"
              className={cn('input', errors.projectType && 'border-red-500')}
            >
              <option value="">Select a service</option>
              {SERVICES.map((service) => (
                <option key={service.id} value={service.id}>
                  {service.name}
                </option>
              ))}
              <option value="other">Other / Not Sure</option>
            </select>
            {errors.projectType && <p className="mt-1 text-sm text-red-500">{errors.projectType.message}</p>}
          </div>
          <div>
            <label htmlFor="projectDetails" className="label">Additional Details (optional)</label>
            <textarea
              {...register('projectDetails')}
              id="projectDetails"
              rows={3}
              placeholder="Any details about their project that might help us..."
              className="textarea"
            />
          </div>
        </div>
      </div>

      {/* Payment Preference */}
      <div>
        <h3 className="text-lg font-semibold text-dark-900 mb-4 flex items-center gap-2">
          <span className="w-6 h-6 rounded-full bg-primary-800 text-white text-sm flex items-center justify-center">4</span>
          How Would You Like to Be Paid?
        </h3>
        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
          {[
            { value: 'check', label: 'Check' },
            { value: 'venmo', label: 'Venmo' },
            { value: 'zelle', label: 'Zelle' },
            { value: 'credit', label: 'Project Credit' },
          ].map((option) => (
            <label
              key={option.value}
              className="flex items-center gap-2 p-3 bg-white rounded-lg border border-dark-200 cursor-pointer hover:border-primary-300 has-[:checked]:border-primary-500 has-[:checked]:bg-primary-50"
            >
              <input
                {...register('paymentMethod')}
                type="radio"
                value={option.value}
                className="text-primary-600"
              />
              <span className="text-sm font-medium text-dark-700">{option.label}</span>
            </label>
          ))}
        </div>
      </div>

      {/* Submit */}
      <div className="pt-4">
        <button
          type="submit"
          disabled={isSubmitting}
          className="btn-gold w-full btn-lg"
        >
          {isSubmitting ? (
            <>
              <Loader2 className="w-5 h-5 animate-spin" />
              Submitting...
            </>
          ) : (
            <>
              <Send className="w-5 h-5" />
              Submit Referral
            </>
          )}
        </button>
        <p className="text-sm text-dark-400 text-center mt-4">
          We'll reach out to your referral within 24 hours and keep you updated on the status.
        </p>
      </div>
    </form>
  )
}


==========================================================================================

--- file: components/forms/index.ts ---
export { ContactForm } from './ContactForm'
export { ReferralForm } from './ReferralForm'
export { IntakeForm } from './IntakeForm'


==========================================================================================

--- file: components/layout/FloatingContact.tsx ---
'use client'

import { useState, useEffect } from 'react'
import { Phone, X, ArrowUp } from "lucide-react"
import { WhatsAppIcon } from "@/components/ui/WhatsAppIcon"
import { cn, formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'
import { COMPANY } from '@/lib/constants'

export function FloatingContact() {
  const [isVisible, setIsVisible] = useState(false)
  const [isExpanded, setIsExpanded] = useState(false)
  const [showBackToTop, setShowBackToTop] = useState(false)

  useEffect(() => {
    const handleScroll = () => {
      setIsVisible(window.scrollY > 300)
      setShowBackToTop(window.scrollY > 800)
    }
    window.addEventListener('scroll', handleScroll)
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  const scrollToTop = () => {
    window.scrollTo({ top: 0, behavior: 'smooth' })
  }

  return (
    <>
      {/* Back to Top - bottom left */}
      <button
        onClick={scrollToTop}
        className={cn(
          'fixed bottom-6 left-6 z-40 w-12 h-12 rounded-full bg-dark-800/80 backdrop-blur-sm text-white flex items-center justify-center shadow-lg hover:bg-dark-700 transition-all duration-500 border border-white/10',
          showBackToTop ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'
        )}
        aria-label="Back to top"
      >
        <ArrowUp className="w-5 h-5" />
      </button>

      {/* Contact FAB - bottom right */}
      <div
        className={cn(
          'fixed bottom-6 right-6 z-40 flex flex-col items-end gap-3 transition-all duration-500',
          isVisible ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-10 pointer-events-none'
        )}
      >
        {/* Expanded options */}
        <div
          className={cn(
            'flex flex-col gap-3 transition-all duration-300',
            isExpanded ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-4 pointer-events-none'
          )}
        >
          {/* WhatsApp */}
          <a
            href={formatWhatsAppLink(COMPANY.phone, "Hi! I'm interested in your services.")}
            target="_blank"
            rel="noopener noreferrer"
            className="group flex items-center gap-3"
          >
            <span className="px-3 py-1.5 bg-white rounded-lg shadow-lg text-sm font-medium text-dark-700 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
              WhatsApp Us
            </span>
            <div className="w-14 h-14 rounded-full bg-[#25D366] text-white flex items-center justify-center shadow-lg hover:scale-110 hover:shadow-xl transition-all whatsapp-pulse">
              <WhatsAppIcon className="w-6 h-6" />
            </div>
          </a>

          {/* Phone */}
          <a
            href={formatPhoneLink(COMPANY.phone)}
            className="group flex items-center gap-3"
          >
            <span className="px-3 py-1.5 bg-white rounded-lg shadow-lg text-sm font-medium text-dark-700 opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap">
              {COMPANY.phoneFormatted}
            </span>
            <div className="w-14 h-14 rounded-full bg-primary-600 text-white flex items-center justify-center shadow-lg hover:scale-110 hover:shadow-xl transition-all">
              <Phone className="w-6 h-6" />
            </div>
          </a>
        </div>

        {/* Main toggle button */}
        <button
          onClick={() => setIsExpanded(!isExpanded)}
          className={cn(
            'w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all duration-300',
            isExpanded
              ? 'bg-dark-800 text-white rotate-0'
              : 'bg-gold-500 text-dark-900 hover:bg-gold-400'
          )}
          aria-label={isExpanded ? 'Close contact options' : 'Open contact options'}
        >
          {isExpanded ? (
            <X className="w-6 h-6" />
          ) : (
            <Phone className="w-6 h-6" />
          )}
        </button>
      </div>
    </>
  )
}


==========================================================================================

--- file: components/layout/Footer.tsx ---
'use client'

import { resolveImageUrl } from '@/lib/resolve-images'
import Link from 'next/link'
import Image from 'next/image'
import {
  Phone,
  Mail,
  MapPin,
  Clock,
  Facebook,
  Instagram,
} from 'lucide-react'
import { COMPANY, HOURS, SERVICES, SOCIAL, SERVICE_AREAS } from '@/lib/constants'
import { formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { useTranslation, useLocale } from '@/lib/i18n/provider'

// TikTok icon (not in Lucide)
const TikTokIcon = ({ className }: { className?: string }) => (
  <svg className={className} viewBox="0 0 24 24" fill="currentColor">
    <path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z" />
  </svg>
)

// Map service IDs to dictionary keys
const serviceIdToKey: Record<string, string> = {
  'kitchen-remodeling': 'kitchen',
  'bathroom-renovation': 'bathroom',
  'basement-finishing': 'basement',
  'roofing': 'roofing',
  'concrete-driveways': 'concrete',
  'flooring': 'flooring',
  'painting': 'painting',
  'deck-outdoor': 'deck',
  'fencing': 'fencing',
  'complete-renovations': 'completeRenovations',
  'insurance-claims': 'insuranceClaims',
}

// Nav link definitions with dictionary key mapping
const NAV_ITEMS: { key: string; href: string; badge?: string }[] = [
  { key: 'home', href: '/' },
  { key: 'services', href: '/services' },
  { key: 'projects', href: '/projects' },
  { key: 'green', href: '/green' },
  { key: 'pricing', href: '/pricing' },
  { key: 'blog', href: '/blog' },
  { key: 'reviews', href: '/reviews' },
  { key: 'referrals', href: '/referrals' },
  { key: 'contact', href: '/contact' },
]

export function Footer() {
  const t = useTranslation()
  const { locale } = useLocale()
  const lp = (path: string) => `/${locale}${path}`
  const currentYear = new Date().getFullYear()

  const quickServices = SERVICES.slice(0, 6)

  return (
    <footer className="bg-dark-900 text-white">
      {/* Main Footer */}
      <div className="container-custom py-16 lg:py-20">
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-10 lg:gap-8">
          {/* Company Info */}
          <div className="lg:col-span-1">
            <div className="mb-6">
              <Image
                src={resolveImageUrl("/images/logo.png")}
                alt="CR Home Pros"
                width={220}
                height={70}
                className="h-20 w-auto object-contain"
                quality={100}
                unoptimized
              />
            </div>
            <p className="text-dark-300 text-sm leading-relaxed mb-6">
              {t.footer.description}
            </p>
            {/* Social Links */}
            <div className="flex items-center gap-3">
              <a
                href={SOCIAL.facebook}
                target="_blank"
                rel="noopener noreferrer"
                className="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors"
                aria-label="Facebook"
              >
                <Facebook className="w-5 h-5" />
              </a>
              <a
                href={SOCIAL.instagram}
                target="_blank"
                rel="noopener noreferrer"
                className="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors"
                aria-label="Instagram"
              >
                <Instagram className="w-5 h-5" />
              </a>
              <a
                href={SOCIAL.tiktok}
                target="_blank"
                rel="noopener noreferrer"
                className="w-10 h-10 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors"
                aria-label="TikTok"
              >
                <TikTokIcon className="w-5 h-5" />
              </a>
            </div>
          </div>

          {/* Quick Links */}
          <div>
            <h4 className="font-display font-semibold text-lg mb-5">{t.footer.quickLinks}</h4>
            <ul className="space-y-3">
              {NAV_ITEMS.map((item) => (
                <li key={item.href}>
                  <Link
                    href={lp(item.href)}
                    className="text-dark-300 hover:text-white hover:pl-1 transition-all duration-200"
                  >
                    {(t.nav as Record<string, string>)[item.key] || item.key}
                  </Link>
                </li>
              ))}
              <li>
                <Link
                  href={lp('/get-started')}
                  className="text-gold-400 hover:text-gold-300 font-medium hover:pl-1 transition-all duration-200"
                >
                  {t.nav.getEstimate}
                </Link>
              </li>
            </ul>
          </div>

          {/* Services */}
          <div>
            <h4 className="font-display font-semibold text-lg mb-5">{t.services.title}</h4>
            <ul className="space-y-3">
              {quickServices.map((service) => {
                const dictKey = serviceIdToKey[service.id]
                const translated = dictKey ? (t.services as any)[dictKey] : null
                return (
                  <li key={service.id}>
                    <Link
                      href={lp(`/services/${service.id}`)}
                      className="text-dark-300 hover:text-white hover:pl-1 transition-all duration-200"
                    >
                      {translated?.name || service.name}
                    </Link>
                  </li>
                )
              })}
              <li>
                <Link
                  href={lp('/services')}
                  className="text-primary-400 hover:text-primary-300 font-medium hover:pl-1 transition-all duration-200"
                >
                  {t.services.viewAll} ‚Üí
                </Link>
              </li>
            </ul>
          </div>

          {/* Contact Info */}
          <div>
            <h4 className="font-display font-semibold text-lg mb-5">{t.footer.contactUs}</h4>
            <ul className="space-y-4">
              <li>
                <a
                  href={formatPhoneLink(COMPANY.phone)}
                  className="flex items-start gap-3 text-dark-300 hover:text-white transition-colors group"
                >
                  <Phone className="w-5 h-5 mt-0.5 text-gold-500 group-hover:scale-110 transition-transform" />
                  <div>
                    <p className="font-medium text-white">{COMPANY.phoneFormatted}</p>
                    <p className="text-sm">{t.footer.emergencyOnCall}</p>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href={formatWhatsAppLink(COMPANY.phone, t.common.whatsappGreeting)}
                  target="_blank"
                  rel="noopener noreferrer"
                  className="flex items-start gap-3 text-dark-300 hover:text-white transition-colors group"
                >
                  <WhatsAppIcon className="w-5 h-5 mt-0.5 text-[#25D366] group-hover:scale-110 transition-transform" />
                  <div>
                    <p className="font-medium text-white">WhatsApp</p>
                    <p className="text-sm">{t.footer.tapToMessage}</p>
                  </div>
                </a>
              </li>
              <li>
                <a
                  href={`mailto:${COMPANY.email}`}
                  className="flex items-start gap-3 text-dark-300 hover:text-white transition-colors group"
                >
                  <Mail className="w-5 h-5 mt-0.5 text-gold-500 group-hover:scale-110 transition-transform" />
                  <span>{COMPANY.email}</span>
                </a>
              </li>
              <li>
                <div className="flex items-start gap-3 text-dark-300">
                  <MapPin className="w-5 h-5 mt-0.5 text-gold-500" />
                  <div>
                    <p>{t.contact.info.serving}</p>
                    <p className="text-sm">{COMPANY.address.city}, {COMPANY.address.state}</p>
                  </div>
                </div>
              </li>
              <li>
                <div className="flex items-start gap-3 text-dark-300">
                  <Clock className="w-5 h-5 mt-0.5 text-gold-500" />
                  <div>
                    <p>{HOURS.weekday}</p>
                    <p className="text-sm">{t.footer.monSat}</p>
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>
      </div>

      {/* Trust Badges */}
      <div className="border-t border-white/10 bg-white/5">
        <div className="container-custom py-8">
          <div className="flex flex-wrap justify-center items-center gap-6 md:gap-12">
            <div className="text-center">
              <p className="text-2xl font-bold text-gold-400">{t.stats.years}</p>
              <p className="text-sm text-dark-300">{t.footer.yearsServingDMV}</p>
            </div>
            <div className="hidden md:block w-px h-12 bg-white/10" />
            <div className="text-center">
              <p className="text-2xl font-bold text-gold-400">{t.stats.projects}</p>
              <p className="text-sm text-dark-300">{t.stats.projectsLabel}</p>
            </div>
            <div className="hidden md:block w-px h-12 bg-white/10" />
            <div className="text-center">
              <p className="text-2xl font-bold text-gold-400">{COMPANY.license}</p>
              <p className="text-sm text-dark-300">{t.common.licensedInsured}</p>
            </div>
            <div className="hidden md:block w-px h-12 bg-white/10" />
            <div className="text-center">
              <p className="text-2xl font-bold text-gold-400">{t.stats.satisfaction}</p>
              <p className="text-sm text-dark-300">{t.stats.satisfactionLabel}</p>
            </div>
          </div>
        </div>
      </div>

      {/* Service Areas Bar */}
      <div className="border-t border-white/10">
        <div className="container-custom py-6">
          <p className="text-center text-sm text-dark-300">
            <span className="text-white font-semibold">{t.common.servingAreas}: </span>
            {SERVICE_AREAS.slice(0, 8).join(' ‚Ä¢ ')}
            <span className="text-gold-400 font-medium"> {t.common.surroundingAreas}</span>
          </p>
        </div>
      </div>

      {/* Payment & Sustainability */}
      <div className="border-t border-white/10">
        <div className="container-custom py-5">
          <div className="flex flex-col md:flex-row items-center justify-between gap-3 text-sm text-dark-300">
            <div className="flex items-center gap-3 flex-wrap justify-center">
              <span className="font-semibold text-white">{t.footer.weAccept}:</span>
              <span>{t.payment.methods.creditCards}</span>
              <span className="text-dark-500">‚Ä¢</span>
              <span>{t.payment.methods.zelle}</span>
              <span className="text-dark-500">‚Ä¢</span>
              <span>{t.payment.methods.venmo}</span>
              <span className="text-dark-500">‚Ä¢</span>
              <span>{t.payment.methods.check}</span>
              <span className="text-dark-500">‚Ä¢</span>
              <span>{t.payment.methods.klarna}</span>
              <span className="text-dark-500">‚Ä¢</span>
              <span className="text-gold-400 font-medium">{t.payment.methods.insurance}</span>
            </div>
            <Link href={lp('/green')} className="flex items-center gap-1.5 text-emerald-400 hover:text-emerald-300 transition-colors font-medium">
              <span>üåø</span>
              {t.footer.ecoFriendly}
            </Link>
          </div>
        </div>
      </div>

      {/* Bottom Bar */}
      <div className="border-t border-white/10 bg-dark-950">
        <div className="container-custom py-5">
          <div className="flex flex-col md:flex-row items-center justify-between gap-4 text-sm text-dark-300">
            <div className="flex flex-wrap items-center justify-center gap-x-4 gap-y-2">
              <p>¬© {currentYear} {COMPANY.legalName}</p>
              <span className="hidden md:inline text-dark-500">‚Ä¢</span>
              <p className="font-medium">{COMPANY.license}</p>
            </div>
            <div className="flex items-center gap-6">
              <Link href={lp('/privacy')} className="hover:text-white transition-colors">
                {t.common.privacyPolicy}
              </Link>
              <Link href={lp('/terms')} className="hover:text-white transition-colors">
                {t.common.termsOfService}
              </Link>
            </div>
          </div>
        </div>
      </div>
    </footer>
  )
}


==========================================================================================

--- file: components/layout/Navbar.tsx ---
'use client'

import { useState, useEffect } from 'react'
import { EmergencyModal } from '@/components/EmergencyModal'
import Link from 'next/link'
import Image from 'next/image'
import { usePathname } from 'next/navigation'
import { Menu, X, Phone, ChevronDown, Globe, AlertTriangle } from 'lucide-react'
import { cn, formatPhoneLink, formatWhatsAppLink } from '@/lib/utils'
import { COMPANY, NAV_LINKS } from '@/lib/constants'
import { WhatsAppIcon } from '@/components/ui/WhatsAppIcon'
import { LanguageSwitcher } from '@/lib/i18n/link'
import { resolveImageUrl } from '@/lib/resolve-images'

export function Navbar() {
  const [isOpen, setIsOpen] = useState(false)
  const [showEmergencyModal, setShowEmergencyModal] = useState(false)
  const [scrollProgress, setScrollProgress] = useState(0)
  const pathname = usePathname()

  useEffect(() => {
    const handleScroll = () => {
      const progress = Math.min(window.scrollY / 150, 1)
      setScrollProgress(progress)
    }
    window.addEventListener('scroll', handleScroll)
    return () => window.removeEventListener('scroll', handleScroll)
  }, [])

  const isScrolled = scrollProgress > 0.1

  useEffect(() => {
    setIsOpen(false)
  }, [pathname])

  useEffect(() => {
    if (isOpen) {
      document.body.style.overflow = 'hidden'
    } else {
      document.body.style.overflow = ''
    }
    return () => {
      document.body.style.overflow = ''
    }
  }, [isOpen])

  const isActive = (href: string) => {
    if (href === '/') return pathname === '/'
    return pathname.startsWith(href)
  }

  const logoHeight = 80 - (scrollProgress * 40)
  const logoOpacity = 1 - (scrollProgress * 0.3)
  const logoScale = 1 - (scrollProgress * 0.2)

  return (
    <>
      <header
        className={cn(
          'fixed top-0 left-0 right-0 z-50 transition-all duration-300',
          isScrolled
            ? 'bg-dark-900/95 backdrop-blur-lg shadow-lg shadow-black/20 py-2'
            : 'bg-dark-900/80 backdrop-blur-sm py-4'
        )}
      >
        <div className="container-custom">
          <nav className="flex items-center justify-between">
            {/* Logo ‚Äî blended with gold glow */}
            <Link href="/" className="flex items-center group">
              <div
                className="relative transition-all duration-150 ease-out px-4 py-3 -ml-2"
                style={{
                  height: `${logoHeight}px`,
                  opacity: logoOpacity,
                  transform: `scale(${logoScale})`,
                  transformOrigin: 'left center',
                }}
              >
                <Image
                  src={resolveImageUrl("/images/logo.png")}
                  alt="CR Home Pros - Complete Home Services"
                  width={300}
                  height={80}
                  className="h-full w-auto object-contain drop-shadow-[0_0_8px_rgba(196,164,95,0.3)]"
                  style={{
                    maxWidth: 'none',
                    filter: 'brightness(1.15) contrast(0.9)',
                    mixBlendMode: 'screen',
                  }}
                  priority
                  quality={100}
                  unoptimized
                />
              </div>
            </Link>

            {/* Desktop Navigation */}
            <div className="hidden lg:flex items-center gap-1">
              {NAV_LINKS.map((link) => (
                <Link
                  key={link.href}
                  href={link.href}
                  className={cn(
                    'px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200 flex items-center gap-1.5',
                    isActive(link.href)
                      ? 'bg-white/20 text-white'
                      : 'text-white/80 hover:text-white hover:bg-white/10'
                  )}
                >
                  {link.label}
                  {'badge' in link && link.badge && (
                    <span className="text-[10px] font-bold px-1.5 py-0.5 bg-gold-500 text-dark-900 rounded-full animate-pulse">
                      {link.badge}
                    </span>
                  )}
                </Link>
              ))}
            </div>

            {/* Desktop CTA */}
            <div className="hidden lg:flex items-center gap-2 ml-2">
              <button
                onClick={() => setShowEmergencyModal(true)}
                className="flex items-center gap-1.5 px-3 py-2 rounded-lg text-sm font-bold transition-all duration-300 bg-red-600/90 text-white hover:bg-red-600 hover:shadow-lg hover:shadow-red-500/25 animate-pulse hover:animate-none whitespace-nowrap"
              >
                <AlertTriangle className="w-3.5 h-3.5" />
                Emergency?
              </button>

              <LanguageSwitcher
                className="text-sm font-medium px-3 py-1.5 rounded-full bg-gold-500/20 text-gold-300 border border-gold-500/30 whitespace-nowrap hover:bg-gold-500/30 transition-all"
              />

              <a
                href={formatWhatsAppLink(COMPANY.phone, "Hi! I'm interested in your services.")}
                target="_blank"
                rel="noopener noreferrer"
                className="flex items-center gap-2 px-3 py-2.5 rounded-xl font-medium transition-all duration-300 bg-[#25D366] text-white hover:bg-[#20bd5a] hover:shadow-lg"
                aria-label="WhatsApp"
              >
                <WhatsAppIcon className="w-4 h-4" />
              </a>

              <a
                href={formatPhoneLink(COMPANY.phone)}
                className="flex items-center gap-2 px-4 py-2.5 rounded-xl font-medium transition-all duration-300 bg-white text-primary-800 hover:bg-white/90 hover:shadow-lg whitespace-nowrap"
              >
                <Phone className="w-4 h-4" />
                {COMPANY.phoneFormatted}
              </a>
            </div>

            {/* Mobile Menu Button */}
            <button
              onClick={() => setIsOpen(!isOpen)}
              className="lg:hidden p-2 rounded-xl transition-colors text-white hover:bg-white/10"
              aria-label={isOpen ? 'Close menu' : 'Open menu'}
            >
              {isOpen ? <X className="w-6 h-6" /> : <Menu className="w-6 h-6" />}
            </button>
          </nav>
        </div>
      </header>

      {/* Mobile Menu Overlay */}
      <div
        className={cn(
          'fixed inset-0 z-40 lg:hidden transition-all duration-300',
          isOpen
            ? 'opacity-100 pointer-events-auto'
            : 'opacity-0 pointer-events-none'
        )}
      >
        <div
          className="absolute inset-0 bg-dark-900/60 backdrop-blur-sm"
          onClick={() => setIsOpen(false)}
        />

        <div
          className={cn(
            'absolute top-0 right-0 w-full max-w-sm h-full bg-white shadow-2xl transition-transform duration-300 ease-out',
            isOpen ? 'translate-x-0' : 'translate-x-full'
          )}
        >
          <div className="flex flex-col h-full">
            {/* Header */}
            <div className="flex items-center justify-between p-5 border-b border-dark-100">
              <div className="relative h-14 w-auto">
                <Image
                  src={resolveImageUrl("/images/logo.png")}
                  alt="CR Home Pros"
                  width={180}
                  height={56}
                  className="h-full w-auto object-contain"
                  quality={100}
                  unoptimized
                />
              </div>
              <button
                onClick={() => setIsOpen(false)}
                className="p-2 rounded-xl hover:bg-dark-100 transition-colors"
              >
                <X className="w-5 h-5" />
              </button>
            </div>

            {/* Navigation Links */}
            <nav className="flex-1 overflow-y-auto p-5 relative">
              <ul className="space-y-1">
                {NAV_LINKS.map((link) => (
                  <li key={link.href}>
                    <Link
                      href={link.href}
                      className={cn(
                        'flex items-center justify-between px-4 py-3 rounded-xl text-lg font-medium transition-all',
                        isActive(link.href)
                          ? 'bg-primary-100 text-primary-800'
                          : 'text-dark-600 hover:bg-dark-50 hover:text-dark-900'
                      )}
                    >
                      {link.label}
                      {'badge' in link && link.badge && (
                        <span className="text-xs font-bold px-2 py-1 bg-gold-500 text-dark-900 rounded-full">
                          {link.badge}
                        </span>
                      )}
                    </Link>
                  </li>
                ))}
              </ul>

              {/* Mobile CTAs */}
              <div className="mt-6 pt-6 border-t border-dark-100 space-y-3">
                <button
                  onClick={() => { setShowEmergencyModal(true); setIsOpen(false); }}
                  className="flex items-center justify-center gap-2 w-full py-3 rounded-xl bg-red-600 text-white font-bold text-lg"
                >
                  <AlertTriangle className="w-5 h-5" />
                  Got an Emergency?
                </button>

                <Link
                  href="/get-started"
                  className="btn-gold w-full text-center text-lg block"
                >
                  Get Free Estimate
                </Link>
              </div>

              {/* Scroll fade hint ‚Äî tells user there's more below */}
              <div className="sticky bottom-0 left-0 right-0 pointer-events-none mt-4">
                <div className="h-10 bg-gradient-to-t from-white to-transparent" />
                <div className="absolute bottom-1 left-1/2 -translate-x-1/2 animate-bounce">
                  <svg className="w-5 h-5 text-dark-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 9l-7 7-7-7" />
                  </svg>
                </div>
              </div>
            </nav>

            {/* Footer */}
            <div className="p-5 border-t border-dark-100 bg-dark-50 space-y-3">
              <a
                href={formatPhoneLink(COMPANY.phone)}
                className="flex items-center justify-center gap-2 w-full py-3 rounded-xl bg-primary-800 text-white font-medium"
              >
                <Phone className="w-5 h-5" />
                Call {COMPANY.phoneFormatted}
              </a>
              <a
                href={formatWhatsAppLink(COMPANY.phone, "Hi! I'm interested in your services.")}
                target="_blank"
                rel="noopener noreferrer"
                className="flex items-center justify-center gap-2 w-full py-3 rounded-xl bg-[#25D366] text-white font-medium"
              >
                <WhatsAppIcon className="w-5 h-5" />
                WhatsApp Us
              </a>
              <LanguageSwitcher
                className="block text-center text-sm font-medium text-primary-700 bg-primary-50 py-2.5 rounded-xl hover:bg-primary-100 transition-all"
              />
            </div>
          </div>
        </div>
      </div>

      <EmergencyModal isOpen={showEmergencyModal} onClose={() => setShowEmergencyModal(false)} />
    </>
  )
}


==========================================================================================

--- file: components/layout/PromoBanner.tsx ---
'use client'

import { useState, createContext, useContext, useEffect } from 'react'
import Link from 'next/link'
import { X } from 'lucide-react'

// ============================================================
// PROMOTIONAL BANNER CONFIGURATION
// ============================================================
const BANNER_ENABLED = true

const BANNER_CONFIG = {
  text: 'Winter Prep Special: 15% off roof inspections',
  subtext: 'Beat inflation with locked-in pricing',
  href: '/get-started',
  linkText: 'Claim Offer',
  style: 'gold' as const,
}
// ============================================================

// Context so Navbar can read banner height
const BannerContext = createContext({ bannerHeight: 0 })
export const useBannerHeight = () => useContext(BannerContext)

const styleMap = {
  gold: 'bg-gradient-to-r from-gold-600 to-gold-500 text-dark-900',
  blue: 'bg-gradient-to-r from-primary-800 to-primary-700 text-white',
  gradient: 'bg-gradient-to-r from-primary-900 via-primary-800 to-gold-600 text-white',
}

export function BannerProvider({ children }: { children: React.ReactNode }) {
  const [visible, setVisible] = useState(BANNER_ENABLED)
  const [bannerHeight, setBannerHeight] = useState(BANNER_ENABLED ? 40 : 0)

  useEffect(() => {
    if (!visible) {
      setBannerHeight(0)
      return
    }
    // Responsive banner height
    const updateHeight = () => {
      setBannerHeight(window.innerWidth < 640 ? 64 : 40)
    }
    updateHeight()
    window.addEventListener('resize', updateHeight)
    return () => window.removeEventListener('resize', updateHeight)
  }, [visible])

  return (
    <BannerContext.Provider value={{ bannerHeight }}>
      {BANNER_ENABLED && visible && (
        <div
          className={`fixed top-0 left-0 right-0 z-[60] ${styleMap[BANNER_CONFIG.style]} py-2 sm:py-2.5 px-4 text-center text-sm font-medium`}
          style={{ minHeight: bannerHeight }}
        >
          <div className="container-custom flex flex-col sm:flex-row items-center justify-center gap-1 sm:gap-3 pr-6">
            <span className="font-semibold text-xs sm:text-sm">{BANNER_CONFIG.text}</span>
            <span className="hidden sm:inline opacity-60">‚Äî</span>
            <span className="hidden sm:inline opacity-80">{BANNER_CONFIG.subtext}</span>
            {BANNER_CONFIG.href && (
              <Link
                href={BANNER_CONFIG.href}
                className="inline-flex items-center gap-1 px-3 py-0.5 sm:py-1 bg-dark-900 text-white rounded-full text-xs font-semibold hover:bg-dark-800 transition-colors"
              >
                {BANNER_CONFIG.linkText} ‚Üí
              </Link>
            )}
          </div>
          <button
            onClick={() => setVisible(false)}
            className="absolute right-3 top-1/2 -translate-y-1/2 p-1 hover:bg-black/10 rounded-full transition-colors"
            aria-label="Dismiss banner"
          >
            <X className="w-4 h-4" />
          </button>
        </div>
      )}
      {children}
    </BannerContext.Provider>
  )
}

// Backward compat
export function PromoBanner() { return null }


==========================================================================================

--- file: components/layout/index.ts ---
export { Navbar } from './Navbar'
export { Footer } from './Footer'
export { FloatingContact } from './FloatingContact'
export { PromoBanner } from './PromoBanner'


==========================================================================================

--- file: __tests__/suite.test.ts ---
// ============================================
// CR Home Pros ‚Äî Test Suite
// Run: npm test
// ============================================

import { describe, it, expect, vi } from 'vitest'

// ============================================
// 1. CONSTANTS & DATA INTEGRITY
// ============================================

describe('Constants', () => {
  it('should export COMPANY with required fields', async () => {
    const { COMPANY } = await import('@/lib/constants')
    expect(COMPANY.name).toBe('CR Home Pros')
    expect(COMPANY.phone).toBeTruthy()
    expect(COMPANY.email).toBeTruthy()
    expect(COMPANY.address).toBeTruthy()
    expect(COMPANY.license).toBeTruthy()
  })

  it('should have correct branding ‚Äî no C&R General Services', async () => {
    const { COMPANY } = await import('@/lib/constants')
    expect(COMPANY.legalName).not.toContain('C&R')
    expect(COMPANY.legalName).not.toContain('C & R')
    expect(COMPANY.legalName).toContain('CR Home Pros')
  })

  it('should have valid NAV_LINKS with no dead ends', async () => {
    const { NAV_LINKS } = await import('@/lib/constants')
    expect(NAV_LINKS.length).toBeGreaterThanOrEqual(6)
    
    for (const link of NAV_LINKS) {
      expect(link.label).toBeTruthy()
      expect(link.href).toMatch(/^\//)
    }
    
    // No duplicate hrefs
    const hrefs = NAV_LINKS.map((l: any) => l.href)
    expect(new Set(hrefs).size).toBe(hrefs.length)
  })

  it('should have SERVICES with required fields', async () => {
    const { SERVICES } = await import('@/lib/constants')
    expect(SERVICES.length).toBeGreaterThanOrEqual(8)
    
    for (const service of SERVICES) {
      expect(service.id).toBeTruthy()
      expect(service.name).toBeTruthy()
      expect(service.shortDescription).toBeTruthy()
      expect(service.icon).toBeTruthy()
      expect(service.priceRange).toBeTruthy()
      expect(service.duration).toBeTruthy()
    }
    
    // No duplicate IDs
    const ids = SERVICES.map((s: any) => s.id)
    expect(new Set(ids).size).toBe(ids.length)
  })

  it('should include fencing as a service', async () => {
    const { SERVICES } = await import('@/lib/constants')
    const fencing = SERVICES.find((s: any) => s.id === 'fencing')
    expect(fencing).toBeTruthy()
    expect(fencing!.name).toBe('Fencing')
  })

  it('should have valid PAYMENT_METHODS', async () => {
    const { PAYMENT_METHODS } = await import('@/lib/constants')
    expect(PAYMENT_METHODS.length).toBeGreaterThanOrEqual(4)
    for (const method of PAYMENT_METHODS) {
      expect(method.id).toBeTruthy()
      expect(method.name).toBeTruthy()
      expect(method.nameEs).toBeTruthy()
    }
  })
})

// ============================================
// 2. UTILITY FUNCTIONS
// ============================================

describe('Utilities', () => {
  it('should format phone links correctly', async () => {
    const { formatPhoneLink } = await import('@/lib/utils')
    const link = formatPhoneLink('3016022553')
    expect(link).toContain('tel:')
    expect(link).toContain('3016022553')
  })

  it('should format WhatsApp links correctly', async () => {
    const { formatWhatsAppLink } = await import('@/lib/utils')
    const link = formatWhatsAppLink('3016022553', 'Hello')
    expect(link).toContain('wa.me')
    expect(link).toContain('Hello')
  })

  it('should merge class names with cn()', async () => {
    const { cn } = await import('@/lib/utils')
    expect(cn('foo', 'bar')).toBe('foo bar')
    expect(cn('foo', false && 'bar')).toBe('foo')
    expect(cn('foo', undefined, 'baz')).toBe('foo baz')
  })
})

// ============================================
// 3. GALLERY DATA
// ============================================

describe('Gallery Data', () => {
  it('should have gallery categories', async () => {
    const { GALLERY_CATEGORIES } = await import('@/lib/gallery-data')
    expect(GALLERY_CATEGORIES).toContain('All')
    expect(GALLERY_CATEGORIES).toContain('Kitchen')
    expect(GALLERY_CATEGORIES).toContain('Bathroom')
    expect(GALLERY_CATEGORIES).toContain('Fencing')
    expect(GALLERY_CATEGORIES).toContain('Basement')
  })

  it('should have gallery projects with valid data', async () => {
    const { GALLERY_PROJECTS } = await import('@/lib/gallery-data')
    expect(GALLERY_PROJECTS.length).toBeGreaterThanOrEqual(20)

    for (const project of GALLERY_PROJECTS) {
      expect(project.id).toBeTruthy()
      expect(project.title).toBeTruthy()
      expect(project.category).toBeTruthy()
      expect(project.images.length).toBeGreaterThan(0)
    }
  })

  it('should have fence and basement projects', async () => {
    const { GALLERY_PROJECTS } = await import('@/lib/gallery-data')
    const fenceProjects = GALLERY_PROJECTS.filter((p: any) => p.category === 'Fencing')
    const basementProjects = GALLERY_PROJECTS.filter((p: any) => p.category === 'Basement')
    expect(fenceProjects.length).toBeGreaterThanOrEqual(1)
    expect(basementProjects.length).toBeGreaterThanOrEqual(1)
  })

  it('should not have duplicate project IDs', async () => {
    const { GALLERY_PROJECTS } = await import('@/lib/gallery-data')
    const ids = GALLERY_PROJECTS.map((p: any) => p.id)
    expect(new Set(ids).size).toBe(ids.length)
  })
})

// ============================================
// 4. BLOG POSTS
// ============================================

describe('Blog Posts', () => {
  it('should have blog posts with required fields', async () => {
    const { BLOG_POSTS } = await import('@/lib/blog-posts')
    expect(BLOG_POSTS.length).toBeGreaterThanOrEqual(15)

    for (const post of BLOG_POSTS) {
      expect(post.slug).toBeTruthy()
      expect(post.title).toBeTruthy()
      expect(post.category).toBeTruthy()
      expect(post.author).toBeTruthy()
      expect(post.date).toMatch(/^\d{4}-\d{2}-\d{2}$/)
      expect(post.readTime).toBeTruthy()
      expect(post.image).toBeTruthy()
      expect(post.excerpt.length).toBeGreaterThan(20)
      expect(post.content.length).toBeGreaterThan(200)
    }
  })

  it('should not have duplicate slugs', async () => {
    const { BLOG_POSTS } = await import('@/lib/blog-posts')
    const slugs = BLOG_POSTS.map((p: any) => p.slug)
    expect(new Set(slugs).size).toBe(slugs.length)
  })

  it('should have sustainability and seasonal posts', async () => {
    const { BLOG_POSTS } = await import('@/lib/blog-posts')
    const sustainability = BLOG_POSTS.filter((p: any) => p.category === 'Sustainability')
    const seasonal = BLOG_POSTS.filter((p: any) => p.category === 'Seasonal')
    expect(sustainability.length).toBeGreaterThanOrEqual(2)
    expect(seasonal.length).toBeGreaterThanOrEqual(1)
  })

  it('should have SEO-focused tax credits post', async () => {
    const { getPostBySlug } = await import('@/lib/blog-posts')
    const post = getPostBySlug('federal-tax-credits-home-energy-2025-2026')
    expect(post).toBeTruthy()
    expect(post!.content).toContain('heat pump')
    expect(post!.content).toContain('tax credit')
  })

  it('getPostsByCategory should filter correctly', async () => {
    const { getPostsByCategory, BLOG_POSTS } = await import('@/lib/blog-posts')
    const all = getPostsByCategory('All')
    expect(all.length).toBe(BLOG_POSTS.length)

    const tips = getPostsByCategory('Tips & Advice')
    expect(tips.every((p: any) => p.category === 'Tips & Advice')).toBe(true)
  })

  it('getRecentPosts should return limited results', async () => {
    const { getRecentPosts } = await import('@/lib/blog-posts')
    const recent = getRecentPosts(3)
    expect(recent.length).toBe(3)
  })
})

// ============================================
// 5. PRICING DATA
// ============================================

describe('Pricing Data', () => {
  it('should have service pricing with valid tiers', async () => {
    const { SERVICE_PRICING } = await import('@/lib/pricing-data')
    expect(SERVICE_PRICING.length).toBeGreaterThanOrEqual(8)

    for (const service of SERVICE_PRICING) {
      expect(service.id).toBeTruthy()
      expect(service.name).toBeTruthy()
      expect(service.nameEs).toBeTruthy()
      expect(service.icon).toBeTruthy()
      expect(service.tiers.length).toBeGreaterThanOrEqual(2)

      for (const tier of service.tiers) {
        expect(tier.label).toBeTruthy()
        expect(tier.labelEs).toBeTruthy()
        expect(tier.min).toBeGreaterThan(0)
        expect(tier.max).toBeGreaterThan(tier.min)
      }
    }
  })

  it('should include fencing in pricing', async () => {
    const { SERVICE_PRICING } = await import('@/lib/pricing-data')
    const fencing = SERVICE_PRICING.find((s: any) => s.id === 'fencing')
    expect(fencing).toBeTruthy()
    expect(fencing!.tiers.length).toBeGreaterThanOrEqual(3)
  })

  it('should have emergency rates', async () => {
    const { EMERGENCY_RATES } = await import('@/lib/pricing-data')
    expect(EMERGENCY_RATES).toBeTruthy()
    expect(EMERGENCY_RATES.categories.length).toBeGreaterThanOrEqual(5)
    expect(EMERGENCY_RATES.calloutFee.min).toBeGreaterThan(0)
  })

  it('pricing tiers should have valid min/max ranges', async () => {
    const { SERVICE_PRICING } = await import('@/lib/pricing-data')
    for (const service of SERVICE_PRICING) {
      for (const tier of service.tiers) {
        expect(tier.min).toBeLessThan(tier.max)
        expect(tier.min).toBeGreaterThanOrEqual(0)
      }
    }
  })
})

// ============================================
// 6. i18n COMPLETENESS
// ============================================

describe('Internationalization', () => {
  it('should have matching keys in en and es', async () => {
    const en = (await import('@/lib/i18n/en')).default
    const es = (await import('@/lib/i18n/es')).default

    // Check top-level keys match
    const enKeys = Object.keys(en)
    const esKeys = Object.keys(es)
    
    for (const key of enKeys) {
      expect(esKeys).toContain(key)
    }
  })

  it('should have emergency nav key in both languages', async () => {
    const en = (await import('@/lib/i18n/en')).default
    const es = (await import('@/lib/i18n/es')).default
    expect(en.nav.emergency).toBeTruthy()
    expect(es.nav.emergency).toBeTruthy()
  })

  it('should have nav keys in both languages', async () => {
    const en = (await import('@/lib/i18n/en')).default
    const es = (await import('@/lib/i18n/es')).default
    
    const enNavKeys = Object.keys(en.nav)
    const esNavKeys = Object.keys(es.nav)
    
    for (const key of enNavKeys) {
      expect(esNavKeys).toContain(key)
    }
  })
})

// ============================================
// 7. FORM VALIDATION SCHEMAS
// ============================================

describe('Form Validation', () => {
  it('should validate intake form data', async () => {
    const { z } = await import('zod')

    const intakeSchema = z.object({
      firstName: z.string().min(2),
      lastName: z.string().min(2),
      email: z.string().email(),
      phone: z.string().min(10),
      preferredContact: z.enum(['phone', 'email', 'text', 'whatsapp']),
      address: z.string().min(5),
      city: z.string().min(2),
      state: z.string().min(2),
      zip: z.string().min(5),
      services: z.array(z.string()).min(1),
      projectDescription: z.string().min(20),
      timeline: z.string().min(1),
      budget: z.string().min(1),
    })

    // Happy path
    const validData = {
      firstName: 'John',
      lastName: 'Smith',
      email: 'john@example.com',
      phone: '3015551234',
      preferredContact: 'whatsapp' as const,
      address: '123 Main Street',
      city: 'Bethesda',
      state: 'MD',
      zip: '20814',
      services: ['kitchen-remodeling'],
      projectDescription: 'I want to remodel my kitchen with new countertops and cabinets.',
      timeline: 'within-3-months',
      budget: '$15,000 - $30,000',
    }

    const result = intakeSchema.safeParse(validData)
    expect(result.success).toBe(true)
  })

  it('should reject invalid email', async () => {
    const { z } = await import('zod')
    const schema = z.string().email()
    expect(schema.safeParse('notanemail').success).toBe(false)
    expect(schema.safeParse('valid@email.com').success).toBe(true)
  })

  it('should reject empty services array', async () => {
    const { z } = await import('zod')
    const schema = z.array(z.string()).min(1)
    expect(schema.safeParse([]).success).toBe(false)
    expect(schema.safeParse(['kitchen']).success).toBe(true)
  })

  it('should validate contact preference enum', async () => {
    const { z } = await import('zod')
    const schema = z.enum(['phone', 'email', 'text', 'whatsapp'])
    expect(schema.safeParse('whatsapp').success).toBe(true)
    expect(schema.safeParse('pigeon').success).toBe(false)
  })

  it('should reject short project descriptions', async () => {
    const { z } = await import('zod')
    const schema = z.string().min(20)
    expect(schema.safeParse('fix sink').success).toBe(false)
    expect(schema.safeParse('I need to remodel my entire kitchen including countertops').success).toBe(true)
  })
})

// ============================================
// 8. GOOGLE DRIVE SERVICE
// ============================================

describe('Google Drive Service', () => {
  it('should report unconfigured when no env vars', async () => {
    const { isDriveConfigured } = await import('@/lib/google-drive')
    // Without env vars set, should return false
    const configured = isDriveConfigured()
    // This will be false in test env since no env vars
    expect(typeof configured).toBe('boolean')
  })

  it('should export all required functions', async () => {
    const drive = await import('@/lib/google-drive')
    expect(typeof drive.getAuthUrl).toBe('function')
    expect(typeof drive.getTokensFromCode).toBe('function')
    expect(typeof drive.createLeadInDrive).toBe('function')
    expect(typeof drive.createReferralInDrive).toBe('function')
    expect(typeof drive.logContactInDrive).toBe('function')
    expect(typeof drive.isDriveConfigured).toBe('function')
    expect(typeof drive.initializeFolderStructure).toBe('function')
  })
})

// ============================================
// 9. API ROUTE VALIDATION
// ============================================

describe('API Route Validation Logic', () => {
  it('should require firstName, lastName, email, phone, address, services for leads', () => {
    const requiredFields = ['firstName', 'lastName', 'email', 'phone', 'address', 'services']

    // Test missing each field
    for (const field of requiredFields) {
      const data: Record<string, any> = {
        firstName: 'John',
        lastName: 'Smith',
        email: 'j@e.com',
        phone: '3015551234',
        address: '123 Main St',
        services: ['kitchen'],
      }
      delete data[field]

      const hasAll = requiredFields.every(f => {
        if (f === 'services') return data[f]?.length > 0
        return !!data[f]
      })
      expect(hasAll).toBe(false)
    }
  })

  it('should generate correct contact tags', () => {
    const getTag = (pref?: string) => pref ? `[${pref.toUpperCase()}]` : '[PHONE]'
    
    expect(getTag('whatsapp')).toBe('[WHATSAPP]')
    expect(getTag('email')).toBe('[EMAIL]')
    expect(getTag('text')).toBe('[TEXT]')
    expect(getTag('phone')).toBe('[PHONE]')
    expect(getTag()).toBe('[PHONE]')
    expect(getTag(undefined)).toBe('[PHONE]')
  })

  it('should handle base64 image conversion', () => {
    const fakeBase64 = 'data:image/jpeg;base64,/9j/4AAQSkZJRg=='
    const cleaned = fakeBase64.replace(/^data:image\/\w+;base64,/, '')
    expect(cleaned).toBe('/9j/4AAQSkZJRg==')
    
    const buffer = Buffer.from(cleaned, 'base64')
    expect(buffer).toBeInstanceOf(Buffer)
    expect(buffer.length).toBeGreaterThan(0)
  })

  it('should detect image type from base64 prefix', () => {
    const jpegPrefix = 'data:image/jpeg;base64,abc'
    const pngPrefix = 'data:image/png;base64,abc'
    
    expect(jpegPrefix.startsWith('data:image/png')).toBe(false)
    expect(pngPrefix.startsWith('data:image/png')).toBe(true)
  })
})

// ============================================
// 10. EDGE CASES
// ============================================

describe('Edge Cases', () => {
  it('should handle empty strings gracefully in contact tags', () => {
    const getTag = (pref?: string) => pref ? `[${pref.toUpperCase()}]` : '[PHONE]'
    expect(getTag('')).toBe('[PHONE]') // empty string is falsy
  })

  it('should handle phone numbers with various formats', () => {
    const phones = [
      '3015551234',
      '(301) 555-1234',
      '301-555-1234',
      '+1 301 555 1234',
    ]
    // All should be at least 10 chars
    for (const phone of phones) {
      expect(phone.length).toBeGreaterThanOrEqual(10)
    }
  })

  it('should handle services array with multiple items', () => {
    const services = ['kitchen-remodeling', 'bathroom-renovation', 'fencing']
    expect(services.join(', ')).toBe('kitchen-remodeling, bathroom-renovation, fencing')
    expect(services[0]).toBe('kitchen-remodeling')
  })

  it('should sanitize invoice number format', () => {
    const year = new Date().getFullYear()
    const invoiceNum = `INV-${year}-${String(Date.now()).slice(-4)}`
    expect(invoiceNum).toMatch(/^INV-\d{4}-\d{4}$/)
  })

  it('should calculate invoice totals correctly', () => {
    const items = [
      { quantity: 1, unitPrice: 5000 },
      { quantity: 2, unitPrice: 1500 },
      { quantity: 1, unitPrice: 750 },
    ]
    const subtotal = items.reduce((sum, item) => sum + item.quantity * item.unitPrice, 0)
    expect(subtotal).toBe(8750)

    const taxRate = 6
    const tax = subtotal * (taxRate / 100)
    expect(tax).toBe(525)

    const total = subtotal + tax
    expect(total).toBe(9275)
  })

  it('should handle missing optional fields without crashing', () => {
    const leadData = {
      firstName: 'Jane',
      lastName: 'Doe',
      email: 'jane@example.com',
      phone: '2025551234',
      address: '456 Oak Ave',
      city: 'Silver Spring',
      state: 'MD',
      services: ['painting'],
      projectDescription: 'Need to paint the whole house interior',
      // All optional fields omitted
    }

    expect(leadData.firstName).toBeTruthy()
    expect((leadData as any).additionalNotes).toBeUndefined()
    expect((leadData as any).howDidYouHear).toBeUndefined()
    expect((leadData as any).preferredContact || 'phone').toBe('phone')
  })

  it('should resolve image paths for both Firebase and local', async () => {
    const { resolveImageUrl } = await import('@/lib/resolve-images')
    
    // Local images should return as-is or with /images/ prefix
    const localPath = '/images/2025-fence-bowie/fence-after-01.png'
    const resolved = resolveImageUrl(localPath)
    expect(resolved).toBeTruthy()
    expect(typeof resolved).toBe('string')
  })
})


==========================================================================================

--- file: scripts/cleanup-local-images.js ---
#!/usr/bin/env node
// ============================================
// üßπ Post-Migration Cleanup
// ============================================
// Run AFTER upload-images.js succeeds and you've confirmed
// images load from Firebase in the browser.
//
// This script:
//   1. Verifies a sample Firebase URL actually works
//   2. Uncomments image dirs in .gitignore
//   3. Removes local image folders from the repo (git rm)
//   4. Keeps logo.png and og-image.jpg locally (needed for build)
//
// Usage:
//   node scripts/cleanup-local-images.js
//   node scripts/cleanup-local-images.js --dry-run   # preview only

const fs = require('fs');
const path = require('path');
const https = require('https');
const { execSync } = require('child_process');

const DRY_RUN = process.argv.includes('--dry-run');
const PROJECT_ROOT = path.join(__dirname, '..');
const IMAGES_DIR = path.join(PROJECT_ROOT, 'public', 'images');
const GITIGNORE = path.join(PROJECT_ROOT, '.gitignore');

// Folders to remove from git (these are now on Firebase)
const FOLDERS_TO_REMOVE = ['2024-01', '2024-06', '2025-05'];

// Files to KEEP locally (needed at build time or for favicon etc.)
const KEEP_FILES = ['logo.png', 'og-image.jpg'];

function testFirebaseUrl() {
  return new Promise((resolve) => {
    const url = 'https://firebasestorage.googleapis.com/v0/b/crhomepros.firebasestorage.app/o/projects%2F2025-05%2Fkitchen-pg-county-01.png?alt=media';
    console.log('  üîç Testing Firebase URL...');
    console.log(`     ${url}`);
    
    https.get(url, (res) => {
      if (res.statusCode === 200) {
        console.log(`  ‚úÖ Firebase responding (HTTP ${res.statusCode})\n`);
        resolve(true);
      } else {
        console.error(`  ‚ùå Firebase returned HTTP ${res.statusCode}`);
        console.error('     Make sure Storage is enabled and rules allow public reads.');
        resolve(false);
      }
      res.destroy();
    }).on('error', (err) => {
      console.error(`  ‚ùå Can't reach Firebase: ${err.message}`);
      resolve(false);
    });
  });
}

function updateGitignore() {
  if (!fs.existsSync(GITIGNORE)) {
    console.log('  ‚ö†Ô∏è  No .gitignore found, skipping');
    return;
  }

  let content = fs.readFileSync(GITIGNORE, 'utf-8');
  
  // Uncomment the image directory lines
  const before = content;
  content = content.replace(/^# public\/images\/2024-01\/$/m, 'public/images/2024-01/');
  content = content.replace(/^# public\/images\/2024-06\/$/m, 'public/images/2024-06/');
  content = content.replace(/^# public\/images\/2025-05\/$/m, 'public/images/2025-05/');

  // If they weren't commented out, add them
  if (!content.includes('public/images/2024-01/')) {
    content += '\n# Firebase-hosted images (no longer tracked in git)\npublic/images/2024-01/\npublic/images/2024-06/\npublic/images/2025-05/\n';
  }

  if (content !== before) {
    if (!DRY_RUN) fs.writeFileSync(GITIGNORE, content);
    console.log('  ‚úÖ Updated .gitignore to exclude image folders');
  } else {
    console.log('  ‚è≠Ô∏è  .gitignore already excludes image folders');
  }
}

function removeImageFolders() {
  for (const folder of FOLDERS_TO_REMOVE) {
    const fullPath = path.join(IMAGES_DIR, folder);
    if (!fs.existsSync(fullPath)) {
      console.log(`  ‚è≠Ô∏è  ${folder}/ ‚Äî already removed`);
      continue;
    }

    const files = fs.readdirSync(fullPath);
    const sizeMB = files.reduce((sum, f) => {
      const stat = fs.statSync(path.join(fullPath, f));
      return sum + stat.size;
    }, 0) / 1024 / 1024;

    console.log(`  üóëÔ∏è  ${folder}/ ‚Äî ${files.length} files (${sizeMB.toFixed(1)} MB)`);
    
    if (!DRY_RUN) {
      // Try git rm first (removes from tracking + disk)
      try {
        execSync(`git rm -rf "public/images/${folder}"`, { cwd: PROJECT_ROOT, stdio: 'pipe' });
      } catch {
        // Not a git repo or not tracked ‚Äî just delete
        fs.rmSync(fullPath, { recursive: true, force: true });
      }
    }
  }
}

function showSavings() {
  let totalSize = 0;
  let totalFiles = 0;
  for (const folder of FOLDERS_TO_REMOVE) {
    const fullPath = path.join(IMAGES_DIR, folder);
    if (!fs.existsSync(fullPath)) continue;
    const files = fs.readdirSync(fullPath);
    totalFiles += files.length;
    totalSize += files.reduce((sum, f) => sum + fs.statSync(path.join(fullPath, f)).size, 0);
  }
  return { totalFiles, totalMB: (totalSize / 1024 / 1024).toFixed(1) };
}

async function main() {
  console.log('');
  console.log('  üßπ Post-Migration Cleanup');
  console.log('  =========================');
  if (DRY_RUN) console.log('  üìã DRY RUN ‚Äî no changes will be made\n');
  else console.log('');

  // Step 1: Verify Firebase is working
  const firebaseOk = await testFirebaseUrl();
  if (!firebaseOk) {
    console.error('  ‚õî Firebase verification failed. Fix that first, then re-run.');
    process.exit(1);
  }

  // Show what we're about to clean
  const { totalFiles, totalMB } = showSavings();
  console.log(`  üìä Cleaning up: ${totalFiles} files (${totalMB} MB)\n`);

  // Step 2: Update .gitignore
  updateGitignore();

  // Step 3: Remove image folders
  removeImageFolders();

  // Step 4: Verify kept files
  console.log('');
  for (const file of KEEP_FILES) {
    const exists = fs.existsSync(path.join(IMAGES_DIR, file));
    console.log(`  ${exists ? '‚úÖ' : '‚ö†Ô∏è '} ${file} ‚Äî ${exists ? 'kept locally' : 'MISSING (may need to restore)'}`);
  }

  console.log('');
  if (DRY_RUN) {
    console.log('  üìã Dry run complete. Run without --dry-run to execute.');
  } else {
    console.log('  üéâ Cleanup complete!');
    console.log(`  üíæ Repo is now ${totalMB} MB lighter`);
    console.log('');
    console.log('  Next: git add -A && git commit -m "Move images to Firebase Storage"');
  }
  console.log('');
}

main().catch(err => { console.error('Fatal:', err); process.exit(1); });


==========================================================================================

--- file: scripts/firebase-service-account.json ---
{
  "type": "service_account",
  "project_id": "crhomepros",
  "private_key_id": "1629e75eba6309f978f9eb6f9b395d572be35eeb",
  "private_key": "-----BEGIN PRIVATE KEY-----\nMIIEvgIBADANBgkqhkiG9w0BAQEFAASCBKgwggSkAgEAAoIBAQDVGBAiUv7kt/HP\n6c0+TxTwwXeZnQdkpectdFzNV8Q9Hrovva4BWiwr48mdqB1bTei5d5nMhTNjHWpd\n4LO/OqcPoXJhjn4HeN9kxTlyD+z2LMmnrHU/8EuikemH/QviT/7baJYY6z+LwsG6\nW6ALluhFytZKzF6rKlHua/Ib9xGnEAvX/CNKHGijV2EW6OwaoBBrGPGuEbQkpBw0\nqEmoEWJsAGSldo46xxZu5A9TknbdxJ6jgUUDHb1m/E1niD7y8z1/IxGPt84AvH/H\n6BBGVv+MOuHl0syVcKMvzPJMuoHJONUy1Mv1ZGYRSvzEqjrShQcvXarYQroRGIyn\nbgbk5kVVAgMBAAECggEAVAHvBmEa3LdJrNI62DgcBMf4qwYVbo/bAffwSAG0OvY8\np2qLSTwv0sOz7aPjouWlfEySxOa0OfxUPRtDMX3hc4+NxLkEpVR5GUSJX5a4r9o7\nS495D9JfNwF4A+T2BOvNiNkD52ICxMnsTtglUbxV6IHNFmLYZXlDII/MvEqcWnQH\npUo8zb0xpLYAuhy0Ah8SzJivgOuTZ3Kn2hCsE/GWFZDyWarl7Si1FJVYTHhiTEah\n83varJa6rNtpN1vgjlRoTJYtRcmMZG5TLC/XlZOEb3n3/Fqp49uoA20M2p8EeKF8\n+lavhkPFH0kaHtlljt3GVVfr1W/BGjm9+zcJkHEXNwKBgQD+vbsVLfa1tBfJdGWw\nRV5qQMkw6yf3uYULwnuIaDfPzwzhJ8rOwn2vwNJL+sLBOfe1dgsKnhYq3cn0IUU3\nuoo+3l2DeV6p23mMaeib9y0eFHIlE5d5XyP+hmPBECHB+7IATwkZjJcfOanzYfis\nrbP0GTgYijwAOmR/A7AF01s9UwKBgQDWJaUidlB1yRHUqO8bIH7cAZU8Lh3qbFbp\nCvVH60yia6gEVZ+VmJycKHMVzVF2kOGDZEmLWOwiHRgwjY6nx61NY/QruKzlSVYJ\nzMEoOlhL++PA3Zmn+U1sG7+9b084+hckb8puE386mEq8ITVX+0bxky3bsXd73cyh\nEWx6wm/1twKBgDdRzIbU7HaZHXFKLasR5Wb9mrNc3dkWGKZtHZaJy1T9ibZ7hbdQ\n1SqNnR2S3yhHBlwJvmwX2IiGkYzKjNWFVPBCKdybRstsNgEgHrt/+fRGTGNw1bwt\nxQtI8/DBKBOQLR+UCk3aEhdd1mJcLDyTnDiuIVhy7ITAKYLLsjYRqAaxAoGBAKG5\nsGrEW6N4hITMSDd+ZRAWCfR3B5TA2SoKYo87/pYzI6KSX4EEzlGIotF2S+11ITqv\nhHM+Zqakvl38qh2/yPvHXuGeCMToi5e/EKkm1wQbaTeAo8idmIDqu/V+mJ/5D30v\nB/v1sYI4/Ufy9GxLkppigqGF9yyOpzmFBR34tcElAoGBAIIQrfndGfZUwxH8b4D4\nonGYXbUqutole6TRNdyGmuew2xUXF+H5BgQwAnRFQTrl7ZHbx7iagZzuhvXiQSEP\nt22LdkoB431t6E9I9D8pvO/A1yW+pkMzQLi8MAph/BoLtAkmQJoidbMjSuMeeyye\n6xM5g6QBx+8vhBx2Eirs+rJF\n-----END PRIVATE KEY-----\n",
  "client_email": "firebase-adminsdk-fbsvc@crhomepros.iam.gserviceaccount.com",
  "client_id": "102042452160082582663",
  "auth_uri": "https://accounts.google.com/o/oauth2/auth",
  "token_uri": "https://oauth2.googleapis.com/token",
  "auth_provider_x509_cert_url": "https://www.googleapis.com/oauth2/v1/certs",
  "client_x509_cert_url": "https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-fbsvc%40crhomepros.iam.gserviceaccount.com",
  "universe_domain": "googleapis.com"
}


==========================================================================================

--- file: scripts/upload-images.js ---
#!/usr/bin/env node
// ============================================
// üî• Upload All Images to Firebase Storage
// ============================================
// Run from project root:
//   node scripts/upload-images.js
//
// Prerequisites:
//   1. npm install firebase-admin (already in package.json)
//   2. Place your service account JSON at: scripts/firebase-service-account.json
//      (Get from: Firebase Console ‚Üí Project Settings ‚Üí Service Accounts ‚Üí Generate New Private Key)
//   3. Make sure Firebase Storage is enabled in the console
//
// After running:
//   - All images from /public/images/ are now on Firebase CDN
//   - The site auto-resolves to Firebase URLs when NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET is set
//   - You can uncomment the image dirs in .gitignore to stop tracking them in git

const admin = require('firebase-admin');
const fs = require('fs');
const path = require('path');

// ===== CONFIG =====
const SERVICE_ACCOUNT_PATH = path.join(__dirname, 'firebase-service-account.json');
const STORAGE_BUCKET = 'crhomepros.firebasestorage.app';
const IMAGES_DIR = path.join(__dirname, '..', 'public', 'images');
const ALLOWED_EXTENSIONS = ['.jpg', '.jpeg', '.png', '.webp', '.gif', '.svg'];

// ===== CHECK SERVICE ACCOUNT =====
if (!fs.existsSync(SERVICE_ACCOUNT_PATH)) {
  console.error('‚ùå Service account not found at:', SERVICE_ACCOUNT_PATH);
  console.error('');
  console.error('   Download it from Firebase Console:');
  console.error('   ‚Üí Project Settings ‚Üí Service Accounts ‚Üí Generate New Private Key');
  console.error('   ‚Üí Save as: scripts/firebase-service-account.json');
  process.exit(1);
}

// ===== INIT FIREBASE =====
const serviceAccount = require(SERVICE_ACCOUNT_PATH);
admin.initializeApp({
  credential: admin.credential.cert(serviceAccount),
  storageBucket: STORAGE_BUCKET
});
const bucket = admin.storage().bucket();

// ===== HELPERS =====
function getAllImages(dir) {
  const results = [];
  if (!fs.existsSync(dir)) return results;
  for (const entry of fs.readdirSync(dir, { withFileTypes: true })) {
    const full = path.join(dir, entry.name);
    if (entry.isDirectory()) results.push(...getAllImages(full));
    else if (ALLOWED_EXTENSIONS.includes(path.extname(entry.name).toLowerCase())) results.push(full);
  }
  return results;
}

function getContentType(file) {
  const ext = path.extname(file).toLowerCase();
  return { '.jpg': 'image/jpeg', '.jpeg': 'image/jpeg', '.png': 'image/png', '.webp': 'image/webp', '.gif': 'image/gif', '.svg': 'image/svg+xml' }[ext] || 'application/octet-stream';
}

// ===== MAIN =====
async function main() {
  console.log('');
  console.log('  üî• Firebase Storage ‚Äî Image Upload');
  console.log('  ===================================');
  console.log(`  Bucket: ${STORAGE_BUCKET}`);
  console.log(`  Source: ${IMAGES_DIR}`);
  console.log('');

  // Gather all image files
  const allFiles = [];

  // Project images (subdirectories)
  for (const subdir of fs.readdirSync(IMAGES_DIR, { withFileTypes: true })) {
    if (subdir.isDirectory()) {
      const images = getAllImages(path.join(IMAGES_DIR, subdir.name));
      for (const img of images) {
        allFiles.push({
          local: img,
          remote: `projects/${path.relative(IMAGES_DIR, img)}`,
          size: fs.statSync(img).size,
        });
      }
    }
  }

  // Site assets (logo, og-image at root of images/)
  for (const file of ['logo.png', 'og-image.jpg']) {
    const local = path.join(IMAGES_DIR, file);
    if (fs.existsSync(local)) {
      allFiles.push({
        local,
        remote: `site/${file}`,
        size: fs.statSync(local).size,
      });
    }
  }

  const totalMB = (allFiles.reduce((s, f) => s + f.size, 0) / 1024 / 1024).toFixed(1);
  console.log(`  üìÅ ${allFiles.length} files found (${totalMB} MB)\n`);

  let uploaded = 0, skipped = 0, errors = 0;

  for (const file of allFiles) {
    try {
      // Check if already uploaded
      const dest = bucket.file(file.remote);
      const [exists] = await dest.exists();
      if (exists) {
        console.log(`  ‚è≠Ô∏è  ${file.remote} (already uploaded)`);
        skipped++;
        continue;
      }

      // Upload with cache headers
      await bucket.upload(file.local, {
        destination: file.remote,
        metadata: {
          contentType: getContentType(file.local),
          cacheControl: 'public, max-age=31536000', // 1 year CDN cache
        },
      });

      // Make publicly readable
      await dest.makePublic();

      const kb = (file.size / 1024).toFixed(0);
      console.log(`  ‚úÖ ${file.remote} (${kb} KB)`);
      uploaded++;
    } catch (err) {
      console.error(`  ‚ùå ${file.remote}: ${err.message}`);
      errors++;
    }
  }

  console.log('');
  console.log('  ===================================');
  console.log(`  ‚úÖ Uploaded: ${uploaded}`);
  console.log(`  ‚è≠Ô∏è  Skipped: ${skipped} (already existed)`);
  if (errors) console.log(`  ‚ùå Errors:   ${errors}`);
  console.log(`  üìä Total:    ${allFiles.length}`);

  if (uploaded > 0 || skipped > 0) {
    const sample = allFiles[0];
    console.log('');
    console.log('  üéâ Done! Test a URL in your browser:');
    console.log(`  https://${STORAGE_BUCKET}/o/${encodeURIComponent(sample.remote)}?alt=media`);
    console.log('');
    console.log('  Next steps:');
    console.log('  1. Make sure .env.local has: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=crhomepros.firebasestorage.app');
    console.log('  2. Run `npm run dev` and check that images load from Firebase');
    console.log('  3. Uncomment image dirs in .gitignore to stop tracking in git');
    console.log('');
  }
}

main().catch(err => {
  console.error('Fatal error:', err);
  process.exit(1);
});


==========================================================================================

--- file: scripts/upload-images.ts ---
#!/usr/bin/env node
// ============================================
// Migrate Local Images to Firebase Storage
// ============================================
// 
// Run this ONCE to upload all images from /public/images/ to Firebase Storage.
// After migration, images are served from Firebase CDN instead of the repo.
//
// Prerequisites:
//   1. Firebase project created
//   2. .env.local populated with Firebase credentials
//   3. Firebase Storage rules set to allow reads:
//      rules_version = '2';
//      service firebase.storage {
//        match /b/{bucket}/o {
//          match /{allPaths=**} {
//            allow read: if true;
//            allow write: if request.auth != null;
//          }
//        }
//      }
//
// Usage:
//   npx tsx scripts/upload-images.ts
//   npx tsx scripts/upload-images.ts --dry-run    # preview without uploading
//

const { initializeApp, cert } = require('firebase-admin/app')
const { getStorage } = require('firebase-admin/storage')
const fs = require('fs')
const path = require('path')
const dotenv = require('dotenv')

// Load environment variables
dotenv.config({ path: '.env.local' })

const DRY_RUN = process.argv.includes('--dry-run')
const IMAGES_DIR = path.join(__dirname, '..', 'public', 'images')
const ALLOWED_EXTENSIONS = ['.jpg', '.jpeg', '.png', '.webp', '.gif', '.svg']

// Image directories to upload
const IMAGE_FOLDERS = ['2024-01', '2024-06', '2025-05']

// Firebase Admin init
function initFirebase() {
  const projectId = process.env.FIREBASE_ADMIN_PROJECT_ID
  const clientEmail = process.env.FIREBASE_ADMIN_CLIENT_EMAIL
  const privateKey = process.env.FIREBASE_ADMIN_PRIVATE_KEY?.replace(/\\n/g, '\n')
  const storageBucket = process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET

  if (!projectId || !storageBucket) {
    console.error('‚ùå Missing Firebase credentials in .env.local')
    console.error('   Required: FIREBASE_ADMIN_PROJECT_ID, NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET')
    console.error('   Optional: FIREBASE_ADMIN_CLIENT_EMAIL, FIREBASE_ADMIN_PRIVATE_KEY')
    process.exit(1)
  }

  try {
    const app = initializeApp({
      credential: cert({ projectId, clientEmail, privateKey }),
      storageBucket,
    })
    return getStorage(app).bucket()
  } catch (err) {
    console.error('‚ùå Failed to initialize Firebase:', err.message)
    process.exit(1)
  }
}

// Get all image files recursively
function getImageFiles(dir) {
  const files = []
  if (!fs.existsSync(dir)) return files

  const entries = fs.readdirSync(dir, { withFileTypes: true })
  for (const entry of entries) {
    const fullPath = path.join(dir, entry.name)
    if (entry.isDirectory()) {
      files.push(...getImageFiles(fullPath))
    } else if (ALLOWED_EXTENSIONS.includes(path.extname(entry.name).toLowerCase())) {
      files.push(fullPath)
    }
  }
  return files
}

// Determine content type from extension
function getContentType(filename) {
  const ext = path.extname(filename).toLowerCase()
  const types = {
    '.jpg': 'image/jpeg',
    '.jpeg': 'image/jpeg',
    '.png': 'image/png',
    '.webp': 'image/webp',
    '.gif': 'image/gif',
    '.svg': 'image/svg+xml',
  }
  return types[ext] || 'application/octet-stream'
}

async function main() {
  console.log('üî• Firebase Storage Image Migration')
  console.log('===================================')
  if (DRY_RUN) console.log('üìã DRY RUN ‚Äî no files will be uploaded\n')

  // Collect all images
  const allFiles = []
  for (const folder of IMAGE_FOLDERS) {
    const dir = path.join(IMAGES_DIR, folder)
    const files = getImageFiles(dir)
    allFiles.push(...files.map(f => ({
      localPath: f,
      storagePath: `projects/${path.relative(IMAGES_DIR, f)}`,
      size: fs.statSync(f).size,
    })))
  }

  // Also upload site assets
  const siteAssets = ['logo.png', 'og-image.jpg'].filter(f =>
    fs.existsSync(path.join(IMAGES_DIR, f))
  )
  for (const asset of siteAssets) {
    const localPath = path.join(IMAGES_DIR, asset)
    allFiles.push({
      localPath,
      storagePath: `site/${asset}`,
      size: fs.statSync(localPath).size,
    })
  }

  // Also upload recommendation PDFs
  const docsDir = path.join(__dirname, '..', 'public', 'docs')
  if (fs.existsSync(docsDir)) {
    const docs = fs.readdirSync(docsDir).filter(f => f.endsWith('.pdf'))
    for (const doc of docs) {
      const localPath = path.join(docsDir, doc)
      allFiles.push({
        localPath,
        storagePath: `docs/${doc}`,
        size: fs.statSync(localPath).size,
      })
    }
  }

  const totalSize = allFiles.reduce((sum, f) => sum + f.size, 0)
  console.log(`üìÅ Found ${allFiles.length} files (${(totalSize / 1024 / 1024).toFixed(1)} MB)\n`)

  if (DRY_RUN) {
    console.log('Files to upload:')
    allFiles.forEach(f => {
      console.log(`  ${f.storagePath} (${(f.size / 1024).toFixed(0)} KB)`)
    })
    console.log(`\n‚úÖ Dry run complete. Run without --dry-run to upload.`)
    return
  }

  // Initialize Firebase and upload
  const bucket = initFirebase()
  let uploaded = 0
  let skipped = 0
  let errors = 0

  for (const file of allFiles) {
    try {
      const destFile = bucket.file(file.storagePath)
      
      // Check if already exists
      const [exists] = await destFile.exists()
      if (exists) {
        console.log(`  ‚è≠Ô∏è  ${file.storagePath} (already exists)`)
        skipped++
        continue
      }

      // Upload
      await bucket.upload(file.localPath, {
        destination: file.storagePath,
        metadata: {
          contentType: getContentType(file.localPath),
          cacheControl: 'public, max-age=31536000', // 1 year cache
        },
      })

      // Make public
      await destFile.makePublic()

      console.log(`  ‚úÖ ${file.storagePath} (${(file.size / 1024).toFixed(0)} KB)`)
      uploaded++
    } catch (err) {
      console.error(`  ‚ùå ${file.storagePath}: ${err.message}`)
      errors++
    }
  }

  console.log('\n===================================')
  console.log(`‚úÖ Uploaded: ${uploaded}`)
  console.log(`‚è≠Ô∏è  Skipped: ${skipped}`)
  console.log(`‚ùå Errors: ${errors}`)
  console.log(`üìä Total: ${allFiles.length}`)
  
  if (uploaded > 0) {
    console.log('\nüéâ Migration complete!')
    console.log('Next steps:')
    console.log('  1. Set NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET in your .env.local')
    console.log('  2. Deploy ‚Äî images will now load from Firebase Storage')
    console.log('  3. Once verified, you can remove /public/images/ folders from the repo')
    console.log('  4. Add /public/images/2024-* and /public/images/2025-* to .gitignore')
  }
}

main().catch(console.error)


==========================================================================================

--- file: lib/analytics.ts ---
// Google Analytics 4 event tracking
// Usage: import { trackEvent } from '@/lib/analytics'

export const GA_ID = 'G-N9HJY6JHEC'

// Core gtag function
export const gtag = (...args: any[]) => {
  if (typeof window !== 'undefined' && (window as any).gtag) {
    ;(window as any).gtag(...args)
  }
}

// Track custom events
export const trackEvent = (action: string, params?: Record<string, any>) => {
  gtag('event', action, params)
}

// === Pre-built events for CR Home Pros ===

// Phone call clicks
export const trackPhoneClick = (location: string) => {
  trackEvent('phone_click', {
    event_category: 'contact',
    event_label: location, // e.g. 'navbar', 'footer', 'hero', 'floating'
  })
}

// WhatsApp clicks
export const trackWhatsAppClick = (location: string) => {
  trackEvent('whatsapp_click', {
    event_category: 'contact',
    event_label: location,
  })
}

// Form submissions
export const trackFormSubmission = (formName: string) => {
  trackEvent('form_submission', {
    event_category: 'lead',
    event_label: formName, // e.g. 'contact', 'intake', 'referral'
  })
}

// Service interest (clicked a service card)
export const trackServiceClick = (serviceId: string) => {
  trackEvent('service_click', {
    event_category: 'engagement',
    event_label: serviceId,
  })
}

// CTA clicks
export const trackCTAClick = (ctaName: string, location: string) => {
  trackEvent('cta_click', {
    event_category: 'engagement',
    event_label: `${ctaName}_${location}`,
  })
}

// Language switch
export const trackLanguageSwitch = (from: string, to: string) => {
  trackEvent('language_switch', {
    event_category: 'engagement',
    event_label: `${from}_to_${to}`,
  })
}

// Project gallery views
export const trackProjectView = (projectId: string) => {
  trackEvent('project_view', {
    event_category: 'engagement',
    event_label: projectId,
  })
}

// Emergency button clicks
export const trackEmergencyClick = () => {
  trackEvent('emergency_click', {
    event_category: 'contact',
    event_label: 'emergency_modal',
  })
}


==========================================================================================

--- file: lib/blog-posts.ts ---
export const BLOG_CATEGORIES = [
  "Team & Culture",
  "Tips & Advice",
  "Kitchen",
  "Bathroom",
  "Basement",
  "Outdoor",
] as const;

export type BlogCategory = (typeof BLOG_CATEGORIES)[number];

export interface BlogPost {
  slug: string;
  title: string;
  category: BlogCategory;
  author: string;
  date: string;
  readTime: string;
  image: string;
  excerpt: string;
  content: string;
}

export const BLOG_POSTS: BlogPost[] = [
  {
    slug: "why-respect-matters-on-every-job",
    title: "Why Respect and Pride in Our Work Matter on Every Job",
    category: "Team & Culture",
    author: "Carlos Hernandez",
    date: "2025-10-15",
    readTime: "6 min",
    image:
      "/images/blog/team-working.png",
    excerpt:
      "When homeowners invite us into their homes, they're trusting us with more than just a project. Here's why respect, communication, and pride guide everything we do.",
    content: `
When homeowners invite a contractor into their home, they are doing more than hiring someone to fix or build something. They are trusting a group of people with their personal space, their routine, and often their sense of comfort. I have always believed that this matters just as much as the quality of the work itself.

I started CR Home Pros with a simple mindset: do the job right, treat people with respect, and take pride in the work we leave behind. That philosophy guides every project we take on, whether it is a small repair or a full renovation.

## Respect Starts Before We Pick Up a Tool

Respect shows in how we communicate, how we schedule, and how we show up. Being on time, explaining what the day will look like, and answering questions clearly all help reduce stress for homeowners. Renovation work can feel disruptive, especially when people are living in the home during the project. We never forget that.

I am proud of the team I work with. These are people who care about their craft and about how they represent themselves in someone else's home. We treat each other with respect, and that carries over into how the job runs. A crew that works well together produces better results, stays organized, and solves problems calmly when something unexpected comes up.

## Small Details Matter

On job sites, small details matter. Keeping the work area clean. Protecting floors and furniture. Making sure tools are stored properly at the end of the day. These things may not show up in photos, but homeowners notice them immediately. They signal professionalism and consideration.

I also believe strongly that everyone should enjoy the work they do. Construction is hard work, but it should not feel chaotic or tense. When people feel respected and supported, they take more pride in their work. That pride shows in clean lines, careful finishes, and thoughtful decisions.

## Communication Is Essential

Communication plays a big role in this. I encourage homeowners to ask questions at any point in the process. There are no bad questions. Understanding what is happening helps people feel more comfortable and confident. It also builds trust, which is essential for a successful project.

Over the years, I have seen how poor communication and rushed work can lead to frustration on both sides. That is not how we operate. If something changes or an issue comes up, we address it directly and explain the options. Transparency prevents misunderstandings and keeps projects moving forward.

## More Than Meeting Expectations

For us, delivering a job well done is not just about meeting expectations. It is about leaving homeowners feeling respected, informed, and satisfied with the experience from start to finish. When a project is complete, I want customers to feel confident recommending us to friends or calling us again in the future.

Many of the homes we work in throughout the DMV are lived-in, personal spaces. Families are juggling work, school, and daily routines while renovations are happening. Being mindful of that reality shapes how we approach every job.

At the end of the day, our work is about more than construction. It is about relationships, trust, and pride in doing things the right way. That mindset has guided every project we take on, and it is the standard we hold ourselves to on every job, big or small.
`,
  },

  {
    slug: "building-team-that-cares",
    title: "Building a Team That Actually Cares About the Work",
    category: "Team & Culture",
    author: "Carlos Hernandez",
    date: "2025-11-22",
    readTime: "5 min",
    image:
      "/images/blog/consultation.png",
    excerpt:
      "The people you work with make all the difference. Here's what I look for when building a team and why it matters for homeowners.",
    content: `
People often ask me what makes a good contractor. The answer is not just about skills with tools or years of experience. It is about the people who show up to the job site every day and how they approach their work.

## Finding the Right People

When I hire someone for CR Home Pros, I look for more than technical ability. I want people who care about doing things right, who communicate well, and who understand that we are guests in someone's home. Those qualities matter as much as knowing how to frame a wall or install tile.

A strong team works together smoothly. They anticipate each other's needs, solve problems together, and maintain a positive atmosphere even when challenges come up. That kind of teamwork does not happen by accident. It comes from mutual respect and shared values.

## Why Team Culture Matters for Homeowners

Homeowners can feel the difference between a crew that respects each other and one that does not. When people enjoy working together, they show up on time, stay focused, and take pride in the results. There is less tension, fewer mistakes, and better problem-solving when issues arise.

I have worked on projects where the crew operated like a well-oiled machine, and I have seen projects where poor team dynamics led to delays and frustration. The difference is night and day, and it always shows in the final product.

## Creating an Environment People Want to Work In

Construction is physically demanding work. I believe people should feel good about what they do. That means treating everyone fairly, listening to their input, and making sure they have what they need to do their job well. When someone feels valued, they take more pride in their work.

I also encourage open communication on job sites. If someone sees a potential problem or has a better idea for how to approach something, I want to hear about it. The best solutions often come from the people doing the hands-on work.

## The Long-Term View

Building a strong team takes time. You cannot rush it. But the investment pays off in consistent quality, satisfied customers, and a reputation that speaks for itself. When homeowners trust us with their projects, they are trusting the entire team, not just me. That trust is something we earn together, one job at a time.

At CR Home Pros, our team is our foundation. Every person plays a role in making sure projects run smoothly and homeowners feel confident in their decision to work with us. That is something I am proud of, and it is something I will always prioritize.
`,
  },

  {
    slug: "lessons-learned-fifteen-years-contracting",
    title: "Lessons Learned from 15 Years in Home Contracting",
    category: "Tips & Advice",
    author: "Carlos Hernandez",
    date: "2025-12-08",
    readTime: "7 min",
    image:
      "/images/blog/home-exterior.png",
    excerpt:
      "After 15 years in this business, here are the most important lessons I've learned about doing quality work and building lasting relationships.",
    content: `
Fifteen years in the home improvement business teaches you a lot. Some lessons come from successes, others from mistakes. All of them have shaped how I run CR Home Pros today.

## Quality Takes Time

Early in my career, I felt pressure to move fast and take on as many projects as possible. I learned quickly that rushing leads to problems. Shortcuts always catch up with you, whether it is a callback for a repair or a homeowner who feels disappointed with the result.

Now, I focus on doing fewer projects well rather than many projects quickly. Quality work takes the time it takes. Homeowners appreciate thoroughness, even if it means waiting a bit longer for the right result.

## Communication Prevents Most Problems

Most conflicts or misunderstandings in this business come from poor communication. When expectations are not clear, people make assumptions, and assumptions lead to frustration.

I learned to over-communicate rather than under-communicate. Explain the plan before starting. Give updates as the project progresses. Address concerns immediately when they come up. It sounds simple, but it makes a huge difference.

## Not Every Job Is the Right Job

I used to think I should take every project that came my way. But some projects are not a good fit, either because of timing, scope, or expectations. Learning to say no when something does not feel right has saved me from headaches and allowed me to focus on work I can deliver well.

Being selective is not about turning people away. It is about being honest with myself and with homeowners about what I can realistically deliver.

## People Remember How You Made Them Feel

Homeowners will forget small details about the project over time, but they will always remember how you made them feel during the process. Were you respectful? Did you listen? Did you treat their home with care?

I have gotten more referrals from how we treated people than from the specific work we did. That taught me that relationships matter more than transactions.

## Invest in Your Team

The people you work with determine the quality of your business. I learned to invest time in finding the right people, training them well, and treating them with respect. A strong team makes everything easier and produces better results.

When your team feels valued, they take pride in their work. That pride shows up in every detail of the finished project.

## Stay Humble and Keep Learning

No matter how much experience you have, there is always something new to learn. Materials change, techniques improve, and customer expectations evolve. Staying curious and willing to adapt has kept our work relevant and our customers satisfied.

I also learned to admit when I do not know something. Homeowners respect honesty more than someone pretending to have all the answers.

## Final Thoughts

Fifteen years in, I feel more confident in what we do at CR Home Pros, but I also feel more aware of how much effort goes into doing it right. These lessons have shaped how we operate, and I am grateful for every project that taught me something valuable. The learning never stops, and that is what keeps this work interesting.
`,
  },
  {
    slug: "hvac-system-dying-signs",
    title:
      "5 Signs Your HVAC System Is Dying (And Why Replacing It Now Saves You Money)",
    category: "Tips & Advice",
    author: "Carlos Hernandez",
    date: "2026-02-05",
    readTime: "8 min",
    image:
      "/images/blog/hvac-unit.png",
    excerpt:
      "Your heating and cooling system is trying to tell you something. Ignore these warning signs, and you could face emergency replacements at the worst possible time and the highest possible cost.",
    content: `
Last summer, I got a call from a homeowner in Silver Spring at 3 PM on a 95-degree day. Their AC had just died. Completely. They had noticed it struggling for months but kept putting off the service call. Now they needed an emergency replacement, their house was unbearable, and they were looking at premium pricing because every HVAC company was slammed.

They paid $3,000 more than they would have if they had addressed the problem proactively. And they suffered through three days of miserable heat while waiting for installation.

This happens all the time. HVAC systems give you warning signs, but most people ignore them until it is too late. Let me show you what to watch for and why acting now instead of waiting saves you serious money.

## The True Cost of Emergency HVAC Replacement

Here is what most homeowners do not realize about waiting until your system completely dies:

**Peak Season Pricing**: When your AC dies in July or your furnace quits in January, you are competing with everyone else in crisis mode. Contractors charge more because demand is high. You could pay 20-40% more than off-season pricing.

**Limited Options**: When it is an emergency, you take what is available. You cannot shop around, compare quotes, or wait for sales. You are stuck with whatever system the contractor has in stock.

**Rushed Decisions**: Making a $8,000-$15,000 decision while your house is freezing or sweltering leads to choices you might regret. No time to research, compare efficiency ratings, or consider financing options.

**Temporary Solutions**: Some homeowners rent portable units or run up massive electric bills using space heaters while waiting for installation. That is $200-500 you will never get back.

**Property Damage**: A furnace dying in winter can lead to frozen pipes ($5,000-$10,000 in damage). An AC dying in summer can damage electronics, warp wood floors, and create mold conditions.

## The 5 Warning Signs Your HVAC System Is Failing

After working on hundreds of homes, condos, and townhouses in the DMV, I can tell you exactly what to watch for:

### 1. Age and Frequent Repairs

**The Sign**: Your system is 12-15+ years old and you are calling for repairs more than once a year.

**What It Means**: HVAC systems typically last 15-20 years. If yours is in that range and needs frequent attention, you are throwing money at a dying system.

**The Math**: That $400 repair call might seem cheaper than a new system, but if you are doing it 3-4 times a year, you are spending $1,200-$1,600 on a system that will die anyway. Put that money toward a replacement.

**What To Do Now**: If your system is 12+ years old and needed two or more repairs in the past year, start planning for replacement. You still have time to shop around, get multiple quotes, and wait for off-season pricing.

### 2. Rising Energy Bills

**The Sign**: Your heating or cooling costs have increased significantly even though your usage has not changed.

**What It Means**: The system is working harder to achieve the same result. Components are wearing out. Efficiency is dropping. You are wasting money every month.

**The Math**: If your bills are up $50-100/month, that is $600-$1,200 per year. A new, efficient system could cut your costs by 20-40%. Over 5 years, you could save $3,000-$6,000 in energy costs alone.

**What To Do Now**: Compare your bills from this year to last year. If you see a 20% increase or more without a clear reason, have a professional assess your system. You might need replacement sooner than you think.

### 3. Uneven Heating or Cooling

**The Sign**: Some rooms are always too hot or too cold. The system runs constantly but never quite gets comfortable.

**What It Means**: Your system is struggling. It might be undersized for your home, failing components, or ductwork issues. Either way, it is not doing its job and you are paying for poor performance.

**Why It Matters in Condos/Townhouses**: In multi-level townhouses, this is especially common. If your first floor is fine but upstairs is an oven in summer, your system is not keeping up. This puts stress on the entire system and accelerates failure.

**What To Do Now**: Have a load calculation done. You might need a larger system or better zoning. Planning this now means you can budget for it and do it right.

### 4. Strange Noises or Smells

**The Sign**: Grinding, squealing, banging noises. Burning smells when it kicks on. Musty odors from vents.

**What It Means**:
- **Grinding/Squealing**: Bearings are failing, belts are wearing out
- **Banging**: Loose or broken components
- **Burning Smell**: Electrical issues or dust buildup (fire hazard)
- **Musty Smell**: Mold in ductwork or drain pan issues

**The Danger**: Some of these are safety issues. Electrical problems can cause fires. Mold affects your health. These are not problems to ignore.

**What To Do Now**: Get it inspected immediately. Even if the repair is manageable now, you will know the system's condition and can plan accordingly.

### 5. Constant Cycling or Runs Non-Stop

**The Sign**: The system turns on and off repeatedly every few minutes, or it runs continuously without reaching the target temperature.

**What It Means**: The thermostat, compressor, or other critical components are failing. The system cannot regulate properly. This wastes enormous amounts of energy and puts stress on every component.

**Why This Kills Your System Fast**: Constant cycling is like stop-and-go traffic for your car. It is the worst operating condition. Your system will die much faster.

**What To Do Now**: This needs immediate professional attention. It might be a simple thermostat issue, or it might indicate imminent system failure. Either way, running it in this condition is expensive and destructive.

## Why Replacing Now Beats Emergency Replacement

Let me give you real numbers from projects we have done in the DMV area:

**Proactive Replacement (Off-Season)**:
- Shop multiple contractors: Save 15-25% by comparing
- Off-season pricing: Save another 10-20%
- Time to research efficiency: Save $500-1000/year on energy
- Financing options: Get better rates with time to apply
- Rebates and incentives: Time to research and apply
- **Total savings**: $2,000-$4,000 compared to emergency replacement

**Emergency Replacement (Peak Season)**:
- Accept first available contractor
- Pay peak season premium
- No time to research options
- Take whatever system is in stock
- Pay whatever financing rate you can get
- Miss rebate deadlines
- **Extra costs**: $2,000-$4,000 more than planned replacement

## What You Should Do This Week

If you recognized any of those warning signs, here is your action plan:

**If your system is 10+ years old**: Get a professional assessment now. Even if it is working fine, know its condition and start budgeting for eventual replacement.

**If you have 2+ warning signs**: Start getting quotes. You likely have 6-12 months before failure. Use that time wisely.

**If you have 3+ warning signs**: Plan to replace within 3-6 months. Seriously. You are on borrowed time.

**If you are in a condo or townhouse**: Factor in additional complexity. HVAC work in multi-unit buildings often requires HOA approval, specialized equipment for access, and coordination with neighbors. This adds time you need to account for.

## The Smart Money Move

Replacing an HVAC system is never fun. It is expensive. It is disruptive. But replacing it on your timeline instead of your system's timeline saves you thousands of dollars and massive stress.

I have seen too many homeowners in homes, condos, and townhouses throughout the DMV end up in crisis mode because they ignored the warning signs. Do not let that be you.

At CR Home Pros, we work with trusted HVAC partners throughout the DMV. If you are seeing any of these warning signs, call us for an honest assessment. We will tell you if you need replacement now, if you can wait, and what your options are.

The worst HVAC decision you can make is no decision at all. Those warning signs only get worse, and waiting only costs you more money.
`,
  },
  {
    slug: "water-damage-hidden-cost-waiting",
    title: "Water Damage: The Hidden Cost of Waiting Just One More Month",
    category: "Tips & Advice",
    author: "Carlos Hernandez",
    date: "2026-01-28",
    readTime: "7 min",
    image:
      "/images/blog/mold-damage.png",
    excerpt:
      "That small leak or water stain might seem harmless now, but waiting to fix it could cost you thousands. Here is why water damage demands immediate attention.",
    content: `
I have seen it countless times: a homeowner notices a small water stain on the ceiling, a damp spot on the wall, or a minor leak under the sink. They think, "I will get to that next month." Then next month becomes three months, and by the time they call, what could have been a $500 repair has turned into a $15,000 nightmare.

Water damage does not wait. It compounds every single day you ignore it.

## The Real Cost of "Just One More Month"

Let me walk you through what actually happens when water sits in your home:

**Week 1-2**: That ceiling stain you see? Behind it, drywall is absorbing water like a sponge. Wood framing starts to soften. If you fix it now, you are looking at replacing some drywall and finding the source. Maybe $800-$1,500 total.

**Month 1**: Mold spores begin growing. You cannot see them yet, but they are there. The wood framing is now compromised. Insulation is saturated. What was drywall replacement is now mold remediation, structural repairs, and insulation replacement. Cost jumps to $3,000-$5,000.

**Month 2-3**: Mold is visible. The musty smell starts. Structural damage spreads to adjacent areas. Electrical wiring may be affected. Now you are looking at $8,000-$15,000 or more, depending on the extent.

**Month 4+**: Major structural repairs needed. Possible electrical rewiring. Professional mold remediation required by law in many areas. Potential health issues for your family. You could be looking at $20,000-$40,000+.

I am not exaggerating. I have done the repairs at every stage, and I can tell you with certainty that the homeowners who called early saved tens of thousands of dollars.

## Common Sources That Seem "Small"

These are the issues I see homeowners put off that end up causing the most damage:

**Slow Sink or Toilet Leaks**: That puddle that only appears sometimes? It is soaking into your subfloor every time it happens. In condos and townhouses, this can leak into the unit below, and now you are liable for their damage too.

**Roof Leaks**: Even small roof leaks allow water into attic insulation and framing. By the time you see a ceiling stain, significant damage has already occurred above it.

**Bathroom Grout and Caulking**: Cracked grout or missing caulk in showers lets water behind tiles and into walls. This is especially common in townhouses with shared walls where the damage can spread.

**Basement Moisture**: "It only gets damp when it rains hard." That dampness is creating the perfect environment for mold and destroying your foundation slowly.

**HVAC Condensation**: AC units produce water. If the drain line is clogged or the drip pan is cracked, water pools in hidden areas until you have a major problem.

## Why Homeowners Wait (And Why They Regret It)

In my 20 years doing this work, I have heard every reason for waiting:

"I thought it would dry out on its own" - It will not. Water finds new places to go and new materials to damage.

"I wanted to save up money first" - Understandable, but you will need 5-10 times more money if you wait.

"I was not sure if it was serious" - If you see water where it should not be, it is serious. Always.

"I was too busy to deal with it" - I get it. But water damage does not care about your schedule. It gets worse 24/7.

"My landlord kept putting me off" - If you rent a condo or townhouse, document everything and escalate. The longer you wait, the worse it gets for everyone.

## The Condo and Townhouse Warning

If you live in a condo or townhouse, water damage is even more urgent. Why?

**Shared Walls and Floors**: Water does not respect property lines. A leak on your side can travel to your neighbor's unit. Now you are potentially liable for damage to multiple properties.

**HOA Complications**: Determining who is responsible for what gets messy. The longer damage exists, the harder it is to prove when it started and who should pay.

**Structural Issues**: In multi-unit buildings, water damage can affect shared structural elements. This can trigger mandatory repairs that affect entire buildings.

I have seen homeowners in townhouses face $30,000+ in repairs because a slow shower leak went unaddressed for six months and damaged three units.

## What You Should Do Right Now

If you have noticed ANY of these signs, do not wait another day:

- Water stains on ceilings or walls (even if they seem dry now)
- Musty smells in bathrooms, basements, or closets
- Peeling paint or bubbling wallpaper
- Soft spots in floors
- Visible mold or mildew
- Increased water bills (sign of hidden leaks)
- Damp carpets or mysterious puddles

Call a professional to assess it. Even if it turns out to be minor, you will have peace of mind. And if it is serious, you will save thousands by catching it early.

## The Bottom Line

I am not trying to scare anyone. I am trying to save you money and stress based on what I have seen over and over in homes, condos, and townhouses throughout the DMV.

That water spot you are looking at right now? It is costing you money every single day you wait. The repair cost is growing. The damage is spreading. The longer you put it off, the worse it gets.

At CR Home Pros, we offer free assessments for water damage concerns. Even if you are not ready to fix it today, at least know what you are dealing with. The worst decision is the decision to wait and hope it goes away.

Water damage never goes away on its own. It only gets worse.

If you are in the DMV area and you have any concerns about water damage, call us. Let me take a look, give you an honest assessment, and help you understand your options. The sooner we catch it, the less it will cost you.
`,
  },
  {
    slug: "what-homeowners-should-ask-before-hiring",
    title: "What Homeowners Should Ask Before Hiring a Contractor",
    category: "Tips & Advice",
    author: "Carlos Hernandez",
    date: "2026-01-12",
    readTime: "6 min",
    image:
      "/images/blog/living-room.png",
    excerpt:
      "Not sure what to ask when vetting contractors? Here are the questions that will help you make a confident decision.",
    content: `
Hiring a contractor feels like a big decision because it is. You are inviting someone into your home and trusting them with a significant investment. Knowing what questions to ask can make the process less stressful and help you find the right fit.

## Are You Licensed and Insured?

This should be the first question. A licensed contractor meets the legal requirements to operate in your area. Insurance protects you if something goes wrong during the project. Do not skip this step.

If a contractor hesitates or avoids answering, that is a red flag. Legitimate contractors will provide this information without issue.

## Can You Provide References or Examples of Past Work?

Ask to see completed projects, especially ones similar to what you are planning. Photos are helpful, but talking to past customers gives you insight into what it is like to work with them.

When you contact references, ask about communication, professionalism, and whether the project stayed on schedule and budget. Those details matter as much as the finished product.

## What Is Your Timeline and Availability?

A contractor who is booked out for months might be in demand, but that also means your project could face delays if something comes up. On the other hand, someone available immediately might not have steady work for a reason.

Ask realistic questions about start dates, project duration, and whether they work on multiple projects at once. A clear timeline helps you plan around the renovation.

## How Do You Handle Changes or Unexpected Issues?

Every project encounters something unexpected. How a contractor handles those situations tells you a lot about how they operate. Do they communicate changes clearly? Do they present options? Do they try to work within your budget?

A good contractor will explain how they address surprises and will keep you informed throughout the process.

## What Does Your Contract Include?

A detailed contract protects both you and the contractor. It should outline the scope of work, materials, timeline, payment schedule, and what happens if changes are needed.

If a contractor is vague about contracts or wants to work without one, walk away. Clear agreements prevent misunderstandings and give you recourse if something goes wrong.

## How Do You Communicate During the Project?

Some contractors prefer text, others prefer phone calls or in-person updates. Find out how often you will receive updates and who your main point of contact will be. Good communication makes the entire process smoother.

If communication feels difficult during the hiring process, it will likely be difficult during the project.

## What Is Your Payment Structure?

Be cautious of contractors who ask for large upfront payments or want cash only. A standard payment structure might include a deposit, progress payments tied to milestones, and a final payment upon completion.

Clear payment terms protect you from financial risk and ensure the contractor stays motivated to finish the job well.

## Final Thoughts

Hiring a contractor is not just about finding someone who can do the work. It is about finding someone you feel comfortable with, who communicates clearly, and who respects your home and budget. Taking the time to ask these questions up front can save you stress, time, and money down the road.

At CR Home Pros, we welcome these questions because we know that informed homeowners make better partners in the process. If you are starting a project, do not hesitate to ask anything that helps you feel confident in your decision.
`,
  },

  {
    slug: "kitchen-renovation-costs-dmv-2025",
    title: "Kitchen Renovation Costs in the DMV: What to Expect in 2025",
    category: "Kitchen",
    author: "Carlos Hernandez",
    date: "2025-09-20",
    readTime: "8 min",
    image:
      "/images/blog/painting.png",
    excerpt:
      "Planning a kitchen remodel in Maryland, DC, or Virginia? Here's what drives costs and how to budget realistically.",
    content: `
Kitchen remodels are one of the most common projects we take on at CR Home Pros, and they are also one of the most complex. Costs can vary widely depending on the scope of work, materials, and the condition of the existing space. Here is what homeowners in the DMV should know when planning a kitchen renovation.

## What Drives Kitchen Renovation Costs?

Several factors influence the final price of a kitchen remodel. Understanding these helps you budget realistically and avoid surprises.

**Layout Changes**: Moving plumbing, electrical, or gas lines adds cost. If you are keeping the same layout, you will save significantly compared to relocating the sink, stove, or refrigerator.

**Cabinets**: Cabinetry is often the largest expense. Stock cabinets are the most affordable, semi-custom offers more flexibility, and fully custom cabinets provide the most design options but at a higher price.

**Countertops**: Material choice matters. Laminate is budget-friendly, quartz is popular for its durability and low maintenance, and natural stone like granite or marble offers unique aesthetics but requires more upkeep.

**Appliances**: Basic appliances are functional and affordable. High-end or smart appliances increase costs but may offer energy savings and convenience over time.

**Flooring**: Vinyl is cost-effective, tile offers durability and style, and hardwood adds value but requires maintenance.

**Labor**: Skilled labor ensures quality work. Cutting corners on installation often leads to problems later.

## Hidden Costs to Prepare For

Older homes in the DMV often have hidden issues that do not appear until demolition begins. Outdated electrical systems, plumbing that does not meet current code, or water damage behind walls can add unexpected expenses.

Setting aside a contingency budget of 10-15% helps cover these surprises without derailing the project.

## Where to Invest and Where to Save

Every homeowner has a different budget. Here is where investing more tends to pay off and where you can save without sacrificing quality.

**Worth Investing In**:
- Durable countertops that handle daily use
- Quality cabinet hardware and soft-close mechanisms
- Proper lighting, including task and ambient lighting
- A good range hood for ventilation

**Where You Can Save**:
- Stock or semi-custom cabinets instead of fully custom
- Mid-range appliances that offer reliability without premium features
- Backsplash materials like ceramic tile instead of natural stone

## Realistic Budget Ranges for the DMV

For a mid-range kitchen remodel in Maryland, DC, or Virginia, homeowners typically spend between $25,000 and $50,000. This includes new cabinets, countertops, appliances, flooring, and labor.

A high-end remodel with custom features, premium materials, and significant layout changes can exceed $75,000.

Smaller updates, such as painting cabinets, replacing hardware, and updating lighting, can refresh a kitchen for under $10,000.

## Final Thoughts

A kitchen remodel is a significant investment, but it also adds value and improves daily life. Taking time to plan, understand costs, and work with a contractor you trust makes the process smoother and the results more satisfying.

At CR Home Pros, we work with homeowners to balance their vision with their budget. If you are planning a kitchen renovation, we are happy to walk through your options and provide a clear, detailed estimate.
`,
  },

  {
    slug: "bathroom-water-damage-what-to-look-for",
    title: "Bathroom Water Damage: What to Look For Before It's Too Late",
    category: "Bathroom",
    author: "Carlos Hernandez",
    date: "2025-11-05",
    readTime: "6 min",
    image:
      "/images/blog/mold-damage.png",
    excerpt:
      "Water damage in bathrooms often hides until it becomes a bigger problem. Here's what to watch for and how to address it.",
    content: `
Bathrooms are wet environments by design, but that also makes them vulnerable to water damage. Left unchecked, small leaks or poor waterproofing can lead to expensive repairs. Here is what homeowners should watch for and how to address issues before they escalate.

## Common Signs of Water Damage

Water damage in bathrooms does not always announce itself. Sometimes it builds slowly over months or years. Here are signs that something might be wrong.

**Soft or Discolored Flooring**: If the floor near the toilet, tub, or shower feels soft or spongy, water may be seeping into the subfloor. Discoloration or staining is another indicator.

**Peeling Paint or Bubbling Walls**: Moisture behind walls causes paint to peel or drywall to bubble. This often happens around showers and tubs where waterproofing has failed.

**Musty Odors**: A persistent musty smell, even after cleaning, suggests hidden moisture or mold growth.

**Loose Tiles**: Tiles that shift or feel loose may indicate water damage to the underlying surface. Grout that cracks or crumbles is another warning sign.

**Stains on Ceilings Below**: If you have a bathroom on an upper floor, check the ceiling below for water stains. This often points to a leaking drain or pipe.

## Where Water Damage Starts

Understanding where leaks commonly occur helps you catch problems early.

**Shower and Tub Enclosures**: Poorly sealed corners, cracked caulking, or missing grout allow water to seep behind walls. Over time, this damages framing and drywall.

**Toilet Base**: The wax ring that seals the toilet to the floor can fail, allowing water to leak onto the subfloor with every flush.

**Sink and Vanity Areas**: Leaks from supply lines or drain pipes under the sink can go unnoticed until the cabinet or floor shows damage.

**Exhaust Fans and Ventilation**: Poor ventilation traps humidity, leading to mold growth and moisture damage over time.

## How to Address Water Damage

If you notice signs of water damage, address them quickly. Waiting only makes the problem worse and more expensive to fix.

**Small Repairs**: Recaulking around tubs and showers, regrouting tiles, and replacing a toilet wax ring are relatively simple fixes that prevent bigger issues.

**Larger Repairs**: If water has damaged the subfloor, framing, or drywall, those materials need to be removed and replaced. This is where working with a professional ensures the job is done correctly.

**Waterproofing**: Proper waterproofing systems, like cement board and waterproof membranes, protect the structure behind tile and prevent future damage.

## Prevention Is Easier Than Repair

Most water damage is preventable with regular maintenance and attention to detail.

**Inspect Caulking and Grout**: Check seals around showers, tubs, and sinks annually. Recaulk or regrout as needed.

**Run the Exhaust Fan**: Use the exhaust fan during and after showers to reduce humidity.

**Fix Leaks Immediately**: A small drip under the sink or around the toilet seems minor, but it adds up over time.

**Monitor for Soft Spots**: Periodically check the floor around the toilet and tub for soft areas that might indicate water damage.

## Final Thoughts

Water damage in bathrooms is common, but it is also preventable. Catching problems early and addressing them properly protects your home and saves money in the long run. If you are not sure whether something is an issue, it is worth having it checked.

At CR Home Pros, we handle bathroom repairs and renovations throughout the DMV. Whether you are dealing with water damage or planning a full remodel, we make sure the work is done right the first time.
`,
  },

  {
    slug: "basement-finishing-older-dmv-homes",
    title: "Basement Finishing in Older DMV Homes: What You Need to Know",
    category: "Basement",
    author: "Carlos Hernandez",
    date: "2025-10-28",
    readTime: "7 min",
    image:
      "/images/blog/basement.png",
    excerpt:
      "Finishing a basement in an older home comes with unique challenges. Here's what to consider before starting your project.",
    content: `
Finishing a basement adds valuable living space, but older homes in Maryland, DC, and Virginia require special consideration. Issues that do not exist in newer construction can affect cost, timeline, and the final result. Here is what homeowners should know before starting a basement finishing project.

## Moisture Control Is Critical

Older basements often struggle with moisture. Whether it is minor dampness or occasional flooding, addressing water issues before finishing the space is essential.

**Check for Active Leaks**: Inspect walls and floors for signs of water infiltration. Look for staining, efflorescence (white mineral deposits), or damp spots after rain.

**Install or Repair Drainage**: A functioning sump pump and proper exterior drainage keep water away from the foundation. If your home does not have these, adding them before finishing the basement protects your investment.

**Use Moisture-Resistant Materials**: Mold-resistant drywall, sealed concrete floors, and proper vapor barriers reduce the risk of moisture damage.

## Ceiling Height and Code Compliance

Many older basements have lower ceilings than modern builds. Code requirements typically mandate a minimum ceiling height of 7 feet for finished living spaces.

If your basement does not meet this requirement, finishing may not be an option, or it may require expensive excavation work. Measuring ceiling height early saves time and avoids disappointment.

## Electrical and Plumbing Upgrades

Older basements were often built without modern electrical systems or plumbing rough-ins. Finishing the space may require adding outlets, lighting, and potentially a bathroom.

**Electrical**: Modern code requires GFCI outlets in basements. Adding circuits and proper wiring ensures safety and functionality.

**Plumbing**: If you plan to add a bathroom or wet bar, plumbing rough-ins need to be installed. This may involve breaking concrete to access sewer lines.

**HVAC**: Extending heating and cooling to the basement keeps the space comfortable year-round.

## Insulation and Comfort

Unfinished basements are often cold and drafty. Proper insulation improves comfort and energy efficiency.

**Wall Insulation**: Rigid foam insulation on foundation walls provides thermal resistance and moisture protection.

**Floor Insulation**: If installing a subfloor, adding insulation underneath improves warmth.

**Sealing Air Leaks**: Gaps around windows, doors, and rim joists should be sealed to prevent drafts.

## Permits and Inspections

Finishing a basement typically requires permits and inspections. This ensures the work meets building codes and is done safely.

Skipping permits can create problems when selling your home or filing insurance claims. Working with a licensed contractor who handles permitting simplifies the process.

## Common Uses for Finished Basements

Homeowners finish basements for different reasons. Here are some of the most common uses we see.

**Family Rooms and Entertainment Spaces**: A comfortable space for relaxing, watching TV, or hosting guests.

**Home Offices**: Quiet, separate work areas that keep professional life away from main living spaces.

**Guest Suites**: A bedroom and bathroom for visitors or extended family.

**Exercise Rooms**: Dedicated fitness spaces with room for equipment.

**Storage and Utility**: Organized areas for household storage, laundry, and mechanical systems.

## Final Thoughts

Finishing a basement in an older home requires planning and attention to issues that newer homes do not face. Moisture control, code compliance, and proper upgrades ensure the space is comfortable, functional, and built to last.

At CR Home Pros, we have experience finishing basements throughout the DMV. If you are considering a basement project, we can assess the space, address potential challenges, and help you create a realistic plan and budget.
`,
  },

  {
    slug: "deck-maintenance-tips-dmv-climate",
    title: "Deck Maintenance Tips for the DMV Climate",
    category: "Outdoor",
    author: "Carlos Hernandez",
    date: "2025-12-18",
    readTime: "5 min",
    image:
      "/images/blog/deck.png",
    excerpt:
      "The DMV's weather can be tough on decks. Here's how to keep yours in good shape year-round.",
    content: `
Decks in the DMV face a range of weather conditions throughout the year. Hot, humid summers, cold winters, and plenty of rain take a toll on wood and composite materials. Regular maintenance extends the life of your deck and keeps it looking good.

## Annual Inspection

Start each season by inspecting your deck for signs of wear or damage. Catching small problems early prevents bigger repairs later.

**Check for Rot and Decay**: Press on boards with a screwdriver. Soft spots indicate rot and need to be replaced.

**Look for Loose Fasteners**: Screws and nails can work loose over time. Tighten or replace them as needed.

**Inspect Railings and Posts**: Make sure railings are secure and posts have not shifted or rotted at the base.

**Examine Flashing**: Where the deck attaches to the house, flashing prevents water damage. Make sure it is intact and sealed properly.

## Cleaning and Sealing

Dirt, mildew, and algae build up on decks, especially in shaded or damp areas. Regular cleaning keeps the surface safe and attractive.

**Sweep Regularly**: Remove leaves and debris that trap moisture and cause staining.

**Wash Annually**: Use a deck cleaner or mild detergent and a scrub brush. A pressure washer works but use low pressure to avoid damaging wood.

**Seal or Stain Every Few Years**: Wood decks need sealing or staining to protect against moisture and UV damage. Composite decks require less maintenance but benefit from occasional cleaning.

## Addressing Common Problems

**Splintering Wood**: Sand down rough areas and apply a fresh coat of stain or sealer.

**Popped Nails**: Replace with deck screws for a more secure hold.

**Mold and Mildew**: Use a deck cleaner designed to remove mold. Improve drainage and airflow to prevent recurrence.

**Gaps Between Boards**: Small gaps are normal as wood expands and contracts. Large gaps may indicate structural issues.

## Seasonal Considerations

**Spring**: Clean the deck after winter and inspect for damage from snow and ice. Reseal if needed.

**Summer**: Check for UV damage and reapply protective coatings as needed.

**Fall**: Clear leaves and debris regularly to prevent staining and moisture buildup.

**Winter**: Shovel snow carefully to avoid damaging the surface. Avoid using salt or harsh chemicals that can damage wood or composite materials.

## When to Call a Professional

Some maintenance tasks are straightforward, but structural issues or extensive rot require professional attention. If you notice sagging, shifting, or widespread decay, have the deck inspected.

Replacing damaged boards, reinforcing posts, or adding proper flashing protects your investment and ensures the deck is safe to use.

## Final Thoughts

A well-maintained deck provides years of enjoyment and adds value to your home. Regular inspections, cleaning, and timely repairs keep your deck in great shape despite the DMV's challenging weather.

At CR Home Pros, we build and maintain decks throughout Maryland, DC, and Virginia. Whether you need repairs, maintenance, or a new deck installation, we make sure the work is done right.
`,
  },

  {
    slug: "concrete-driveway-preparation-matters",
    title: "Why Preparation Matters More Than the Pour for Concrete Driveways",
    category: "Outdoor",
    author: "Carlos Hernandez",
    date: "2026-01-20",
    readTime: "6 min",
    image:
      "/images/blog/concrete-work.png",
    excerpt:
      "Most concrete failures start below the surface. Here's why proper preparation is critical for a driveway that lasts.",
    content: `
Homeowners often focus on the concrete pour itself, but the real work happens before any concrete is mixed. Proper preparation determines whether a driveway lasts decades or starts cracking within a few years.

## Why Preparation Matters

Concrete is only as good as the base it sits on. A solid, well-prepared base distributes weight evenly and prevents settling, cracking, and other common problems.

Skipping steps or rushing through preparation saves time upfront but leads to expensive repairs later. Here is what proper preparation involves and why each step matters.

## Excavation and Grading

The first step is removing existing material and creating a level surface. This ensures proper drainage and provides a stable foundation.

**Remove Existing Material**: Old pavement, roots, and organic material must be removed. Organic material decomposes over time, creating voids that cause settling.

**Establish Proper Grade**: The driveway should slope away from the house to direct water runoff. Poor drainage leads to water pooling, which accelerates deterioration.

**Compact the Subgrade**: The native soil must be compacted to prevent settling. Loose or soft soil will compress under the weight of vehicles, causing cracks.

## Base Layer Installation

A well-constructed base layer provides stability and drainage.

**Crushed Stone or Gravel**: A layer of crushed stone, typically 4-6 inches thick, creates a stable base. The stone should be compacted in lifts for maximum density.

**Compaction Is Critical**: Each layer of base material must be compacted using a plate compactor or roller. Proper compaction prevents future settling.

**Drainage Considerations**: The base layer should allow water to drain away from the concrete. Poor drainage leads to freeze-thaw damage in winter.

## Formwork and Reinforcement

Formwork defines the shape of the driveway and holds the concrete in place during the pour. Reinforcement adds strength.

**Straight and Level Forms**: Forms should be level and securely staked. Uneven forms result in uneven concrete.

**Rebar or Wire Mesh**: Reinforcement reduces cracking by holding the concrete together. Rebar is stronger and recommended for driveways that support heavy vehicles.

**Control Joints**: Planned control joints guide where cracks occur. Concrete will crack; control joints ensure cracks happen in planned locations where they are less visible.

## Common Preparation Mistakes

**Skipping Compaction**: Loose soil or base material will settle over time, causing the concrete to crack.

**Inadequate Base Thickness**: A thin base layer cannot support the weight of vehicles and leads to early failure.

**Poor Drainage**: Water that pools under or around the driveway causes freeze-thaw damage and undermines the base.

**Using Poor-Quality Fill**: Recycled asphalt or mixed materials may not compact properly or provide adequate drainage.

## The Pour Itself

Once preparation is complete, the pour is straightforward. Fresh concrete is placed, leveled, and finished. But even the best concrete will fail if the preparation was inadequate.

## Long-Term Results

A properly prepared driveway lasts 20-30 years or more with minimal maintenance. A poorly prepared driveway may show cracks and settling within a few years.

The extra time and cost invested in preparation pays off in durability and reduced maintenance over the life of the driveway.

## Final Thoughts

Concrete work is as much about what happens below the surface as what you see on top. Proper excavation, grading, base installation, and compaction ensure a driveway that stands up to years of use and weather.

At CR Home Pros, we do not cut corners on preparation. If you are planning a new driveway or need repairs, we make sure the work is done right from the ground up.
`,
  },

  {
    slug: "why-clear-communication-prevents-project-problems",
    title: "Why Clear Communication Prevents Most Project Problems",
    category: "Tips & Advice",
    author: "Carlos Hernandez",
    date: "2026-02-01",
    readTime: "5 min",
    image:
      "/images/blog/consultation.png",
    excerpt:
      "Most conflicts and delays in home improvement projects come from poor communication. Here's how we avoid that.",
    content: `
After years of running CR Home Pros, I have learned that most problems on job sites do not come from bad materials or lack of skill. They come from poor communication. When expectations are not clear, misunderstandings happen, and those misunderstandings lead to frustration on both sides.

Here is how we approach communication and why it makes such a big difference.

## Set Clear Expectations From the Start

Before we start any project, we walk through the scope of work with the homeowner. What are we doing? What materials are we using? How long will it take? What will it cost?

This conversation prevents surprises later. If a homeowner expects one thing and we deliver another, even if the work is good, they will be unhappy. Clear expectations from the beginning align everyone.

## Provide Regular Updates

Once a project is underway, we keep homeowners informed. If something changes, if we encounter an unexpected issue, or if we are ahead of schedule, we communicate it.

Homeowners do not like being left in the dark. Even small updates like "we finished framing today and will start drywall tomorrow" help people feel connected to the process.

## Address Problems Immediately

When something goes wrong, and it will on any project, we address it right away. Waiting or hoping the issue resolves itself only makes things worse.

If we find water damage during demolition, we explain what we found, what it means, and what options the homeowner has. Transparency builds trust, even when the news is not what anyone wanted to hear.

## Listen to Concerns

Communication is not just about us talking. It is about listening. If a homeowner has a concern, we take it seriously. Even if we think it is minor, if it matters to them, it matters to us.

Sometimes a simple explanation resolves the concern. Other times, we need to adjust our approach. Either way, listening and responding respectfully keeps the relationship strong.

## Use the Right Communication Method

Everyone has a preferred way to communicate. Some people like text updates, others prefer phone calls, and some want face-to-face conversations. We ask upfront how homeowners prefer to stay in touch and adapt to that.

Matching communication style to what works for the homeowner makes the process smoother for everyone.

## Avoid Assumptions

Assumptions are where communication breaks down. We do not assume the homeowner knows what we are doing or why. We explain it. We also do not assume we understand what the homeowner wants without asking.

If there is any uncertainty, we ask questions. That takes more time upfront but prevents mistakes later.

## Be Honest About Timelines and Challenges

If a delay happens, we are upfront about it. If a material is back-ordered or if weather affects the schedule, we let the homeowner know as soon as possible.

Honesty builds trust. Even when the news is not ideal, people appreciate knowing what is happening and being treated with respect.

## Final Thoughts

Good communication does not guarantee a project will be perfect, but it makes problems easier to solve and keeps everyone on the same page. At CR Home Pros, we prioritize communication because we know it is just as important as the quality of the work itself.

If you are planning a project, ask your contractor how they communicate. Their answer will tell you a lot about how the project will go.
`,
  },
];

// Helper function to get posts by category
export function getPostsByCategory(category: BlogCategory | "All"): BlogPost[] {
  if (category === "All") return BLOG_POSTS;
  return BLOG_POSTS.filter((post) => post.category === category);
}

// Helper function to get a post by slug
export function getPostBySlug(slug: string): BlogPost | undefined {
  return BLOG_POSTS.find((post) => post.slug === slug);
}

// Helper function to get recent posts
export function getRecentPosts(limit: number = 3): BlogPost[] {
  return BLOG_POSTS.slice(0, limit);
}


==========================================================================================

--- file: lib/constants.ts ---
// ===== COMPANY INFO =====
export const COMPANY = {
  name: 'CR Home Pros',
  legalName: 'CR Home Pros LLC',
  tagline: 'Crafting Your Ideal Home Space',
  description: 'Guiding you from design to completion, we aim to exceed your expectations. Our twenty plus years of expertise ensure exceptional, tailored results.',
  founderQuote: `My team and I are dedicated to bringing your home's potential to life, one improvement at a time. With a passion for craftsmanship and a commitment to quality, we're not just renovating spaces‚Äîwe're here to help you build the dream space you've always envisioned. Let's create something beautiful together.`,
  phone: '5712377164',
  phoneFormatted: '(571) 237-7164',
  whatsapp: 'https://wa.me/15712377164?text=Hi%20Carlos!%20I%27m%20interested%20in%20your%20home%20improvement%20services.',
  email: 'crhomepros@gmail.com',
  emailCarlos: 'crhomepros@gmail.com',
  address: {
    street: '6509 Perry Ct',
    city: 'Hyattsville',
    state: 'MD',
    zip: '20784',
    full: '6509 Perry Ct, Hyattsville, MD 20784',
  },
  license: 'MHIC #05-132359',
  license2: 'MHIC #109350',
  established: 2004,
  yearsInBusiness: 20,
  teamSize: 6,
  projectsCompleted: '500+',
  hours: {
    weekdays: '9:00 AM - 5:00 PM',
    saturday: 'Closed',
    sunday: 'Closed',
    display: 'Mon‚ÄìFri: 9AM‚Äì5PM',
  },
} as const

// ===== FOUNDER INFO =====
export const FOUNDER = {
  name: 'Carlos Hernandez',
  title: 'Founder',
  bio: `With over two decades of hands-on experience in home improvement, Carlos Hernandez has built CR Home Pros on a foundation of trust, quality, and personalized attention. What started as a passion for craftsmanship has grown into a full-service renovation company that treats every home like it's their own.

Carlos and his skilled team specialize in transforming spaces‚Äîfrom complete kitchen renovations to emergency repairs. They've earned a reputation throughout the DMV area for showing up on time, communicating clearly, and delivering results that exceed expectations.

Whether it's a small repair or a major renovation, Carlos approaches every project with the same dedication: understanding your vision, solving problems proactively, and ensuring your complete satisfaction.`,
  shortBio: `My team and I are dedicated to bringing your home's potential to life, one improvement at a time. With a passion for craftsmanship and a commitment to quality, we're not just renovating spaces‚Äîwe're here to help you build the dream space you've always envisioned.`,
} as const

// ===== HOURS =====
export const HOURS = {
  weekday: '8:00 AM - 7:00 PM',
  saturday: '8:00 AM - 7:00 PM',
  sunday: 'By Appointment',
  emergency: 'On Call 24/7 for Emergencies',
} as const

// ===== SERVICE AREAS =====
export const SERVICE_AREAS = [
  'Washington DC',
  'Maryland',
  'Virginia',
  'Bethesda',
  'Silver Spring',
  'Rockville',
  'Arlington',
  'Alexandria',
  'Hyattsville',
  'College Park',
  'Chevy Chase',
  'Potomac',
  'Georgetown',
] as const

// ===== SOCIAL MEDIA =====
// URLs are placeholder until Carlos creates each profile.
// Toggle SOCIAL_ACTIVE flags to show/hide in the UI.
export const SOCIAL = {
  facebook: 'https://facebook.com/crhomepros',
  instagram: 'https://www.instagram.com/crhomepros/',
  tiktok: 'https://www.tiktok.com/@crhomepro',
  google: 'https://g.page/crhomepros',
  yelp: 'https://biz.yelp.com/biz_info/-Py44m6S_fcOmE3RLTY31A',
  youtube: 'https://youtube.com/@crhomepros',
} as const

// Set to true once each profile actually exists
export const SOCIAL_ACTIVE: Record<keyof typeof SOCIAL, boolean> = {
  facebook: false,
  instagram: true,
  tiktok: true,
  google: true,
  yelp: true,
  youtube: false,
}

// ===== NAVIGATION =====
export const NAV_LINKS = [
  { label: 'Home', href: '/' },
  { label: 'Services', href: '/services' },
  { label: 'Projects', href: '/projects' },
  { label: 'Green', href: '/green', badge: 'üåø' },
  { label: 'Pricing', href: '/pricing' },
  { label: 'Blog', href: '/blog' },
  { label: 'Reviews', href: '/reviews' },
  { label: 'Referrals', href: '/referrals', badge: '$$$' },
  { label: 'Contact', href: '/contact' },
] as const

// ===== SERVICES =====
export const SERVICES = [
  {
    id: 'kitchen-remodeling',
    name: 'Kitchen Remodeling',
    shortDescription: 'Transform your kitchen into the heart of your home.',
    icon: 'ChefHat',
    priceRange: '$15,000 - $75,000+',
    duration: '4-8 weeks',
  },
  {
    id: 'bathroom-renovation',
    name: 'Bathroom Renovation',
    shortDescription: 'Create spa-worthy retreats with premium materials.',
    icon: 'Bath',
    priceRange: '$10,000 - $50,000+',
    duration: '3-6 weeks',
  },
  {
    id: 'basement-finishing',
    name: 'Basement Finishing',
    shortDescription: 'Unlock your home\'s hidden potential below grade.',
    icon: 'Home',
    priceRange: '$20,000 - $80,000+',
    duration: '6-12 weeks',
  },
  {
    id: 'roofing',
    name: 'Roofing',
    shortDescription: 'Protect your home with quality roofing solutions.',
    icon: 'Warehouse',
    priceRange: '$8,000 - $25,000+',
    duration: '1-2 weeks',
  },
  {
    id: 'concrete-driveways',
    name: 'Concrete & Driveways',
    shortDescription: 'Durable concrete work built to last decades.',
    icon: 'Hammer',
    priceRange: '$5,000 - $20,000+',
    duration: '1-2 weeks',
  },
  {
    id: 'flooring',
    name: 'Flooring & Tiling',
    shortDescription: 'Beautiful floors that transform any space.',
    icon: 'Grid3X3',
    priceRange: '$3,000 - $15,000+',
    duration: '1-3 weeks',
  },
  {
    id: 'painting',
    name: 'Interior & Exterior Painting',
    shortDescription: 'Professional painting with meticulous attention to detail.',
    icon: 'Paintbrush',
    priceRange: '$2,000 - $15,000+',
    duration: '3-7 days',
  },
  {
    id: 'deck-outdoor',
    name: 'Decks & Outdoor Living',
    shortDescription: 'Extend your living space into the outdoors.',
    icon: 'TreeDeciduous',
    priceRange: '$10,000 - $40,000+',
    duration: '2-4 weeks',
  },
  {
    id: 'fencing',
    name: 'Fencing',
    shortDescription: 'Privacy fencing, vinyl, wood, and chain-link installation & repair.',
    icon: 'Fence',
    priceRange: '$3,000 - $15,000+',
    duration: '1-3 days',
  },
  {
    id: 'complete-renovations',
    name: 'Complete Renovations',
    shortDescription: 'Full home transformations from start to finish.',
    icon: 'Building',
    priceRange: '$50,000 - $200,000+',
    duration: '3-6 months',
  },
  {
    id: 'insurance-claims',
    name: 'Insurance Claims',
    shortDescription: 'We work directly with your insurance company.',
    icon: 'FileText',
    priceRange: 'Varies',
    duration: 'Varies',
  },
] as const

// ===== STATS =====
export const STATS = [
  { value: '20+', label: 'Years Experience' },
  { value: '500+', label: 'Projects Completed' },
  { value: '6', label: 'Skilled Craftsmen' },
  { value: '100%', label: 'Satisfaction Focus' },
] as const

// ===== PAYMENT METHODS =====
export const PAYMENT_METHODS = [
  { id: 'check', name: 'Check', nameEs: 'Cheque', icon: 'FileText', description: 'Personal or business checks accepted', descriptionEs: 'Se aceptan cheques personales o de empresa' },
  { id: 'credit-card', name: 'Credit & Debit Cards', nameEs: 'Tarjetas de Cr√©dito y D√©bito', icon: 'CreditCard', description: 'Visa, Mastercard, American Express, Discover', descriptionEs: 'Visa, Mastercard, American Express, Discover' },
  { id: 'zelle', name: 'Zelle', nameEs: 'Zelle', icon: 'Smartphone', description: 'Instant bank-to-bank transfers', descriptionEs: 'Transferencias bancarias instant√°neas' },
  { id: 'venmo', name: 'Venmo', nameEs: 'Venmo', icon: 'Smartphone', description: 'Quick mobile payments', descriptionEs: 'Pagos m√≥viles r√°pidos' },
  { id: 'cash-app', name: 'Cash App', nameEs: 'Cash App', icon: 'DollarSign', description: 'Mobile payment transfers', descriptionEs: 'Transferencias de pago m√≥vil' },
  { id: 'klarna', name: 'Klarna', nameEs: 'Klarna', icon: 'Clock', description: 'Buy now, pay later ‚Äî split into 4 interest-free payments', descriptionEs: 'Compre ahora, pague despu√©s ‚Äî divida en 4 pagos sin intereses' },
  { id: 'insurance', name: 'Insurance Claims', nameEs: 'Reclamos de Seguro', icon: 'Shield', description: 'We work directly with your insurance company to handle claims', descriptionEs: 'Trabajamos directamente con su compa√±√≠a de seguros para manejar reclamos' },
  { id: 'financing', name: 'Financing Available', nameEs: 'Financiamiento Disponible', icon: 'Percent', description: 'Flexible payment plans for larger projects', descriptionEs: 'Planes de pago flexibles para proyectos m√°s grandes' },
] as const

// ===== WHY CHOOSE US =====
export const WHY_CHOOSE_US = [
  {
    title: '20+ Years Experience',
    description: 'Two decades of trusted craftsmanship serving the DMV area.',
    icon: 'Award',
  },
  {
    title: 'Licensed & Insured',
    description: 'Fully licensed (MHIC #05-132359) and insured for your protection.',
    icon: 'Shield',
  },
  {
    title: 'Bilingual Team',
    description: 'Fluent in English and Spanish. ¬°Hablamos Espa√±ol!',
    icon: 'Languages',
  },
  {
    title: 'Quality Guaranteed',
    description: 'We stand behind our work with pride and accountability.',
    icon: 'CheckCircle',
  },
] as const

// ===== TESTIMONIALS (From his actual website) =====
export const TESTIMONIALS = [
  {
    id: 1,
    name: 'Marneik',
    location: 'Silver Spring, MD',
    rating: 5,
    text: 'C & R General Services, Inc. has worked for me for several years. They provide a wide range of services such as painting, drywall, tile, roofing, gutter repairs, concrete work, animal removal and anything that I could not get a contractor to do. They always showed up when scheduled, explained hidden damages and were very professional. All work was done satisfactory and guaranteed. You definitely get what you pay for and it is worth it!!',
    service: 'Multiple Services',
  },
  {
    id: 2,
    name: 'Ketty',
    location: 'Woodbridge, VA',
    rating: 5,
    text: 'Carlos was the best technician you could have sent to inspect my furnace. I was pleased to see he came on time and was very helpful in answering all my questions. He was patient, friendly, and most importantly knowledgeable. He explained in detail what repair needed to be done and what would be involved. I am sold on C&R GENERAL SERVICES INC. and would not hesitate to recommend it to anyone!!!',
    service: 'HVAC Repair',
  },
  {
    id: 3,
    name: 'Alice',
    location: 'Temple Hills, MD',
    rating: 5,
    text: 'We highly recommend that you contact C&R General Services if you are considering home improvements that is A+ in customer service, materials, workers, and follow through. We selected C&R General Services because Mr. Hernandez advised us that it would not be necessary to replace the entire deck. He replaced some boards, reinforced some boards, cleaned and stained the deck. It still looks beautiful and new after 3 years.',
    service: 'Deck Restoration',
  },
  {
    id: 4,
    name: 'Reginald',
    location: 'Washington, DC',
    rating: 5,
    text: 'I manage a high end multi-unit property in Washington, DC. I came to know Carlos under the worse circumstances, whereas several unit sustained extensive water damage. After the remediation process was complete, Carlos came and completed the restoration process. The scope of work included restoring structural elements such as walls, flooring, and required the removal of large wall sections drywall and wood baseboards. I was really impressed with his work ethic and the speed in which they worked.',
    service: 'Water Damage Restoration',
  },
  {
    id: 5,
    name: 'Anna R. Heyden',
    location: 'Rockville, MD',
    rating: 5,
    text: 'I would like to highly recommend Carlos Hernandez of C&R General Services Inc. He is honest, professional, intelligent, talented, and hard working. He can do anything you ask of him. He has completely renovated my basement, bathroom, and bedroom with amazing results. Carlos has gone above and beyond any expectations. No one should hesitate to call him.',
    service: 'Complete Renovation',
  },
  {
    id: 6,
    name: 'Larry',
    location: 'Fort Washington, MD',
    rating: 5,
    text: 'I have used C&R General Services for more than ten years to do home improvement projects. A friend told her about a contractor that had completed work for her and she was very satisfied with the work he did. We had Mr. Carlos Hernandez remodel our two bathrooms and some minor electrical work and were very pleased with the finished product. After having worked with Mr. Hernandez and C&R General Services for over ten years, I highly recommend them to all my friends.',
    service: 'Long-term Client',
  },
  {
    id: 7,
    name: 'Todd',
    location: 'Capitol Hill, Washington DC',
    rating: 5,
    text: 'We manage several apartment buildings in the Capitol Hill neighborhood, and have had our fair share of emergency repairs that C&R General Services have tackled. Carlos and his crew have always been available to step in and take care of repairs after surprise leaks and even a collapsed ceiling! All work was done quickly, cleanly, and professionally. We\'re happy to have C&R on our list of preferred contractors.',
    service: 'Emergency Repairs',
  },
  {
    id: 8,
    name: 'Jeffrey',
    location: 'Oxon Hill, MD',
    rating: 5,
    text: 'C&R General Services / Carlos completed a half bath in my home last year. They did excellent work, showed up on time, and cleaned up after themselves. I was so pleased with their work I recommended them to my mother-in-law.',
    service: 'Bathroom Remodel',
  },
  {
    id: 9,
    name: 'Ms. Chambers',
    location: 'Silver Spring, MD',
    rating: 5,
    text: 'C & R General Services, Inc. has worked for me for several years. They provide a wide range of services such as painting, drywall, tile, roofing, gutter repairs, concrete work, animal removal and anything that I could not get a contractor to do. They always showed up when scheduled, explained hidden damages and were very professional. Although they were not always the cheapest labor in town, all work was done satisfactory and guaranteed. You definitely get what you pay for and it is worth it!!',
    service: 'Multiple Services',
  },
] as const

// ===== BUDGET RANGES =====
export const BUDGET_RANGES = [
  'Under $10,000',
  '$10,000 - $25,000',
  '$25,000 - $50,000',
  '$50,000 - $100,000',
  '$100,000+',
  'Not sure yet',
] as const

// ===== TIMELINE OPTIONS =====
export const TIMELINE_OPTIONS = [
  'ASAP - Emergency',
  'Within 1-3 months',
  '3-6 months',
  '6+ months',
  'Just exploring options',
] as const

// ===== HOW DID YOU HEAR =====
export const REFERRAL_SOURCES = [
  'Google Search',
  'Friend/Family Referral',
  'Saw Our Truck',
  'Social Media',
  'Yelp',
  'Home Advisor',
  'Drove By a Job Site',
  'Repeat Client',
  'Other',
] as const

// ===== META =====
// Referral Program
export const REFERRAL_TIERS = [
  { minProject: 0, maxProject: 5000, reward: 100, label: 'Small Projects' },
  { minProject: 5000, maxProject: 15000, reward: 250, label: 'Medium Projects' },
  { minProject: 15000, maxProject: 50000, reward: 500, label: 'Large Projects' },
  { minProject: 50000, maxProject: Infinity, reward: 750, label: 'Major Projects' },
]

export const META = {
  title: 'CR Home Pros | Kitchen & Bath Remodeling | DC, MD, VA',
  description: 'Your Home. Our Expertise. 20+ years of trusted craftsmanship serving Washington DC, Maryland & Virginia. Kitchen remodeling, bathroom renovation, basement finishing, roofing & more. Licensed (MHIC #05-132359) & insured. Free estimates! Call (571) 237-7164.',
  keywords: [
    // Primary services
    'kitchen remodeling',
    'bathroom renovation', 
    'basement finishing',
    'home remodeling contractor',
    'general contractor',
    // Location-based
    'contractor Bethesda MD',
    'kitchen remodel Silver Spring',
    'bathroom renovation Rockville',
    'home improvement DC',
    'contractor Arlington VA',
    'remodeling contractor Hyattsville',
    'home renovation Maryland',
    'contractor DMV area',
    'Washington DC contractor',
    'Montgomery County contractor',
    'Prince Georges County contractor',
    // Service-specific
    'roofing contractor',
    'flooring installation',
    'deck building',
    'painting contractor',
    'tile installation',
    'concrete work',
    // Spanish keywords
    'contratista en espa√±ol',
    'remodelaci√≥n de cocina',
    'renovaci√≥n de ba√±o',
  ].join(', '),
  url: 'https://crhomepros.com',
  image: '/images/og-image.jpg',
} as const

// ===== FAQ (From old site) =====
export const FAQ = [
  {
    question: 'What kind of home improvement services do you offer?',
    answer: 'We specialize in a wide range of services including kitchen and bathroom remodels, flooring installations, painting, roofing, concrete work, deck building, and much more. We also handle insurance claims. If you have a specific project in mind, feel free to reach out to us for more detailed information.',
  },
  {
    question: 'Are you licensed and insured?',
    answer: 'Yes, we are fully licensed (MHIC #05-132359) and insured. We adhere to all industry standards and regulations to ensure the highest quality of work and peace of mind for our clients.',
  },
  {
    question: 'Do you help with design and material selection?',
    answer: 'Absolutely! Our team can assist you in selecting the right materials and designs that suit your taste and functionality needs. We\'re here to guide you through every step of the decision-making process.',
  },
  {
    question: 'How do I get a quote for my project?',
    answer: 'Simply use our "Get Started" form or give us a call at (571) 237-7164. We\'ll discuss your project needs, preferences, and schedule a site visit if necessary, to provide you with an accurate and transparent quote.',
  },
  {
    question: 'How long does a typical project take to complete?',
    answer: 'The duration depends on the project\'s complexity and scope. We strive to complete all projects in a timely manner without compromising on quality. After our initial consultation, we\'ll give you an estimated timeline for your specific project.',
  },
  {
    question: 'What measures do you take to ensure the project area is safe and clean?',
    answer: 'Your safety and comfort are our top priorities. We take extensive measures to keep the work area safe and clean, including regular cleanups, dust barriers, and following all safety protocols.',
  },
  {
    question: 'Do you work with insurance claims?',
    answer: 'Yes! We have extensive experience working with insurance companies on damage claims. We can help document the damage, provide detailed estimates, and work directly with your insurance adjuster to streamline the process.',
  },
  {
    question: 'Do you offer emergency repair services?',
    answer: 'Yes, we\'re on call for emergencies. Whether it\'s a collapsed ceiling, water damage, or urgent repairs, we can respond quickly to help minimize damage and get your home back to normal.',
  },
  {
    question: 'What payment methods do you accept?',
    answer: 'We accept credit and debit cards (Visa, Mastercard, Amex, Discover), Zelle, Venmo, Cash App, personal or business checks, and Klarna (buy now, pay later ‚Äî split into 4 interest-free payments). We also work directly with insurance companies on covered claims.',
  },
  {
    question: 'Do you offer financing for larger projects?',
    answer: 'Yes! For larger projects like kitchen renovations, basement finishing, or whole-home remodels, we offer flexible financing options including Klarna. This lets you break payments into manageable installments while we get started on your project right away.',
  },
  {
    question: 'What areas do you serve?',
    answer: 'We serve the entire DMV (DC, Maryland, Virginia) area including Washington DC, Hyattsville, Silver Spring, Bethesda, Rockville, College Park, Bowie, Laurel, Columbia, Arlington, Alexandria, Falls Church, Fairfax, and surrounding communities. If you\'re unsure whether we cover your area, just give us a call.',
  },
  {
    question: 'Do you speak Spanish? / ¬øHablan espa√±ol?',
    answer: '¬°S√≠! Our entire team is bilingual in English and Spanish. We want every homeowner to feel comfortable communicating about their project in the language they prefer. Our website is also available in Spanish.',
  },
  {
    question: 'Do you offer eco-friendly or green renovation options?',
    answer: 'Yes. We use low-VOC and zero-VOC paints, LED lighting, and Energy Star appliances as standard practice. We also offer sustainable materials like bamboo flooring, reclaimed wood, and recycled countertops. We recycle construction waste and donate usable materials to organizations like Habitat for Humanity ReStore.',
  },
  {
    question: 'How does your referral program work?',
    answer: 'When you refer a friend, family member, or neighbor who books a project with us, you earn a referral reward. Just fill out our referral form with their contact info, and once their project is completed, we\'ll send you your reward via your preferred payment method (check, Zelle, Venmo, or credit).',
  },
  {
    question: 'Can I see examples of your past work?',
    answer: 'Absolutely! Visit our Projects page to browse our gallery of completed projects with before-and-after photos. You can also check out our Instagram (@crhomepros) and TikTok (@crhomepro) for recent project videos and updates.',
  },
] as const

// ===== ALL SERVICES LIST (From old site - 27 services) =====
export const ALL_SERVICES_LIST = [
  'ADA Compliant and Special Needs Remodeling',
  'Basement Remodeling and Renovations',
  'Asphalt Sealing',
  'Bathroom Remodeling and Renovations',
  'Carpentry',
  'Ceilings/Collapsed Ceilings',
  'Complete Remodeling and Renovations',
  'Concrete Work and Repair',
  'Concrete-Driveway and Curb',
  'Deck (Custom Design and Repairs)',
  'Drywall',
  'Electricity',
  'Flooring and Tiling',
  'Framing',
  'Gutter Cleaning and Repairs',
  'Insulation',
  'Insurance Claims',
  'Kitchen Remodeling and Renovations',
  'Painting',
  'Power Washing',
  'Retaining Walls',
  'Roofing',
  'Staining',
  'Waterproofing',
] as const

// ===== POPULAR SERVICES (for footer) =====
export const POPULAR_SERVICES = [
  'Insurance Claims',
  'Kitchen Remodeling',
  'Bathroom Remodeling',
  'Concrete Jobs',
  'Painting',
  'Roofing',
  'Flooring',
] as const


==========================================================================================

--- file: lib/email.ts ---
// ============================================
// Email Service using Resend
// ============================================
import { Resend } from 'resend'

const RESEND_KEY = process.env.RESEND_API_KEY || ''

function getResend() {
  if (!RESEND_KEY || RESEND_KEY.length < 5) {
    throw new Error('RESEND_API_KEY not configured')
  }
  return new Resend(RESEND_KEY)
}

const FROM_EMAIL = process.env.EMAIL_FROM || 'CR Home Pros <onboarding@resend.dev>'
const CARLOS_EMAIL = process.env.EMAIL_TO_LEADS || 'crhomepros@gmail.com'

// ============================================
// Interfaces
// ============================================

interface LeadEmailData {
  firstName: string
  lastName: string
  email: string
  phone: string
  address: string
  city: string
  state: string
  services: string[]
  projectDescription: string
  timeline: string
  budget: string
  preferredContact?: string
  contactTag?: string
  additionalNotes?: string
  driveFolderUrl?: string
  driveFolderName?: string
  attachments?: { filename: string; content: Buffer }[]
}

interface ReferralEmailData {
  referrerName: string
  referrerEmail: string
  referrerPhone: string
  referralName: string
  referralPhone: string
  projectType: string
  projectDetails?: string
}

interface ContactEmailData {
  name: string
  email: string
  phone: string
  message: string
  service?: string
}

// ============================================
// Helper: Check if email is configured
// ============================================

export function isEmailConfigured(): boolean {
  return !!(RESEND_KEY && RESEND_KEY.length > 5 && RESEND_KEY !== 'placeholder_key')
}

// ============================================
// Send Functions
// ============================================

export async function sendNewLeadNotification(lead: LeadEmailData): Promise<boolean> {
  if (!isEmailConfigured()) {
    console.error('‚ùå Email not configured ‚Äî RESEND_API_KEY is missing or placeholder')
    return false
  }

  try {
    const tag = lead.contactTag || '[PHONE]'
    const contactMethodLabel = (lead.preferredContact || 'phone').toUpperCase()
    const contactMethodEmoji: Record<string, string> = {
      PHONE: 'üìû',
      EMAIL: '‚úâÔ∏è',
      TEXT: 'üí¨',
      WHATSAPP: 'üü¢',
    }
    const emoji = contactMethodEmoji[contactMethodLabel] || 'üìû'

    const driveSection = lead.driveFolderUrl
      ? `
      <div style="background: #ecfdf5; padding: 16px; margin-top: 16px; border-radius: 8px; border: 2px solid #10b981;">
        <p style="margin: 0 0 8px; font-size: 16px; font-weight: bold; color: #065f46;">üìÅ Google Drive Folder Created</p>
        <p style="margin: 0 0 4px; color: #047857; font-size: 14px;">
          <strong>Location:</strong> CR Home Pros ‚Üí Project Leads ‚Üí ${lead.driveFolderName || 'New Lead'}
        </p>
        <a href="${lead.driveFolderUrl}" style="display: inline-block; margin-top: 8px; padding: 10px 20px; background: #059669; color: white; text-decoration: none; border-radius: 6px; font-weight: bold;">
          üóÇÔ∏è Open Folder in Drive
        </a>
      </div>`
      : ''

    const result = await getResend().emails.send({
      from: FROM_EMAIL,
      to: CARLOS_EMAIL,
      subject: `üî• ${tag} New Lead: ${lead.firstName} ${lead.lastName} - ${lead.services.join(', ')}`,
      attachments: lead.attachments?.map(a => ({
        filename: a.filename,
        content: a.content,
      })),
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #1e40af, #0f172a); padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">üè† New Project Lead!</h1>
            <p style="color: #c4a052; margin: 8px 0 0; font-size: 16px; font-weight: bold;">
              ${emoji} Preferred Contact: ${contactMethodLabel}
            </p>
          </div>

          <div style="padding: 20px; background: #f8fafc;">
            ${driveSection}

            <h2 style="color: #1e40af; margin-top: 20px;">Contact Information</h2>
            <table style="width: 100%; border-collapse: collapse;">
              <tr><td style="padding: 8px; font-weight: bold;">Name:</td><td style="padding: 8px;">${lead.firstName} ${lead.lastName}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Phone:</td><td style="padding: 8px;"><a href="tel:${lead.phone}">${lead.phone}</a></td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Email:</td><td style="padding: 8px;"><a href="mailto:${lead.email}">${lead.email}</a></td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Address:</td><td style="padding: 8px;">${lead.address}, ${lead.city}, ${lead.state}</td></tr>
            </table>

            <h2 style="color: #1e40af; margin-top: 20px;">Project Details</h2>
            <table style="width: 100%; border-collapse: collapse;">
              <tr><td style="padding: 8px; font-weight: bold;">Services:</td><td style="padding: 8px;">${lead.services.join(', ')}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Timeline:</td><td style="padding: 8px;">${lead.timeline}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Budget:</td><td style="padding: 8px;">${lead.budget}</td></tr>
            </table>

            <div style="background: white; padding: 15px; margin-top: 20px; border-radius: 8px; border-left: 4px solid #c4a052;">
              <p style="margin: 0; font-weight: bold;">Project Description:</p>
              <p style="margin: 10px 0 0 0;">${lead.projectDescription}</p>
            </div>

            ${lead.additionalNotes ? `
            <div style="background: white; padding: 15px; margin-top: 12px; border-radius: 8px; border-left: 4px solid #94a3b8;">
              <p style="margin: 0; font-weight: bold;">Additional Notes:</p>
              <p style="margin: 10px 0 0 0;">${lead.additionalNotes}</p>
            </div>` : ''}

            ${lead.attachments && lead.attachments.length > 0 ? `
            <div style="background: #fef3c7; padding: 12px; margin-top: 12px; border-radius: 8px; text-align: center;">
              <p style="margin: 0; font-size: 14px; color: #92400e;">üì∏ ${lead.attachments.length} photo(s) attached below</p>
            </div>` : ''}
          </div>

          <div style="background: #c4a052; padding: 15px; text-align: center;">
            ${contactMethodLabel === 'WHATSAPP'
              ? `<a href="https://wa.me/${lead.phone.replace(/\\D/g, '')}" style="color: #0f172a; font-weight: bold; font-size: 18px; text-decoration: none;">üü¢ Reply via WhatsApp</a>`
              : `<a href="tel:${lead.phone}" style="color: #0f172a; font-weight: bold; font-size: 18px; text-decoration: none;">üìû Call Now: ${lead.phone}</a>`
            }
          </div>
        </div>
      `,
    })

    if (result.error) { console.error('‚ùå Lead email error:', JSON.stringify(result.error)); return false; } console.log('üìß Lead notification sent:', result.data?.id)
    return true
  } catch (error: any) {
    console.error('‚ùå Failed to send lead notification:', error?.message || error)
    return false
  }
}

export async function sendLeadConfirmation(customerEmail: string, firstName: string): Promise<boolean> {
  if (!isEmailConfigured()) {
    console.error('‚ùå Email not configured ‚Äî skipping customer confirmation')
    return false
  }

  try {
    const result = await getResend().emails.send({
      from: FROM_EMAIL,
      to: customerEmail,
      subject: '‚úÖ CR Home Pros ‚Äî We Received Your Request!',
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #1e40af, #0f172a); padding: 30px; text-align: center;">
            <h1 style="color: white; margin: 0;">Thank You, ${firstName}!</h1>
          </div>
          <div style="padding: 30px; background: #f8fafc;">
            <p style="font-size: 16px; color: #334155;">We've received your project details and our team is reviewing them now.</p>
            <div style="background: white; padding: 20px; border-radius: 8px; border-left: 4px solid #c4a052; margin: 20px 0;">
              <p style="margin: 0; font-weight: bold; color: #1e40af;">What Happens Next:</p>
              <ul style="margin: 10px 0 0; padding-left: 20px; color: #475569;">
                <li>We'll review your project details within 24 hours</li>
                <li>A team member will contact you to schedule a free on-site consultation</li>
                <li>You'll receive a detailed written estimate</li>
              </ul>
            </div>
            <p style="color: #64748b; font-size: 14px;">
              Need to reach us sooner? Call <a href="tel:+15712377164" style="color: #1e40af;">(571) 237-7164</a>
            </p>
          </div>
          <div style="background: #0f172a; padding: 15px; text-align: center;">
            <p style="color: #94a3b8; margin: 0; font-size: 12px;">CR Home Pros | Licensed (MHIC #05-132359) & Insured | crhomepros.com</p>
          </div>
        </div>
      `,
    })

    if (result.error) { console.error('‚ùå Confirmation email error:', JSON.stringify(result.error)); return false; } console.log('üìß Confirmation email sent to', customerEmail, result.data?.id)
    return true
  } catch (error: any) {
    console.error('‚ùå Failed to send confirmation email:', error?.message || error)
    return false
  }
}

export async function sendReferralNotification(referral: ReferralEmailData): Promise<boolean> {
  if (!isEmailConfigured()) {
    console.error('‚ùå Email not configured ‚Äî skipping referral notification')
    return false
  }

  try {
    await getResend().emails.send({
      from: FROM_EMAIL,
      to: CARLOS_EMAIL,
      subject: `ü§ù New Referral from ${referral.referrerName}: ${referral.referralName}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #059669, #0f172a); padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">ü§ù New Referral!</h1>
          </div>
          <div style="padding: 20px; background: #f8fafc;">
            <h2 style="color: #059669;">Referred By</h2>
            <table style="width: 100%; border-collapse: collapse;">
              <tr><td style="padding: 8px; font-weight: bold;">Name:</td><td style="padding: 8px;">${referral.referrerName}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Email:</td><td style="padding: 8px;">${referral.referrerEmail}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Phone:</td><td style="padding: 8px;">${referral.referrerPhone}</td></tr>
            </table>
            <h2 style="color: #1e40af; margin-top: 20px;">Referred Person</h2>
            <table style="width: 100%; border-collapse: collapse;">
              <tr><td style="padding: 8px; font-weight: bold;">Name:</td><td style="padding: 8px;">${referral.referralName}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Phone:</td><td style="padding: 8px;">${referral.referralPhone}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Project:</td><td style="padding: 8px;">${referral.projectType}</td></tr>
            </table>
            ${referral.projectDetails ? `
            <div style="background: white; padding: 15px; margin-top: 12px; border-radius: 8px; border-left: 4px solid #059669;">
              <p style="margin: 0; font-weight: bold;">Details:</p>
              <p style="margin: 10px 0 0 0;">${referral.projectDetails}</p>
            </div>` : ''}
          </div>
          <div style="background: #059669; padding: 15px; text-align: center;">
            <a href="tel:${referral.referralPhone}" style="color: white; font-weight: bold; font-size: 18px; text-decoration: none;">üìû Call ${referral.referralName}: ${referral.referralPhone}</a>
          </div>
        </div>
      `,
    })
    return true
  } catch (error: any) {
    console.error('‚ùå Failed to send referral notification:', error?.message || error)
    return false
  }
}

export async function sendContactFormNotification(data: ContactEmailData): Promise<boolean> {
  if (!isEmailConfigured()) {
    console.error('‚ùå Email not configured ‚Äî skipping contact notification')
    return false
  }

  try {
    await getResend().emails.send({
      from: FROM_EMAIL,
      to: CARLOS_EMAIL,
      subject: `üí¨ New Message from ${data.name}`,
      html: `
        <div style="font-family: Arial, sans-serif; max-width: 600px; margin: 0 auto;">
          <div style="background: linear-gradient(135deg, #1e40af, #0f172a); padding: 20px; text-align: center;">
            <h1 style="color: white; margin: 0;">üí¨ New Contact Message</h1>
          </div>
          <div style="padding: 20px; background: #f8fafc;">
            <table style="width: 100%; border-collapse: collapse;">
              <tr><td style="padding: 8px; font-weight: bold;">Name:</td><td style="padding: 8px;">${data.name}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Email:</td><td style="padding: 8px;">${data.email}</td></tr>
              <tr><td style="padding: 8px; font-weight: bold;">Phone:</td><td style="padding: 8px;">${data.phone}</td></tr>
              ${data.service ? `<tr><td style="padding: 8px; font-weight: bold;">Service:</td><td style="padding: 8px;">${data.service}</td></tr>` : ''}
            </table>
            <div style="background: white; padding: 15px; margin-top: 12px; border-radius: 8px; border-left: 4px solid #1e40af;">
              <p style="margin: 0; font-weight: bold;">Message:</p>
              <p style="margin: 10px 0 0 0;">${data.message}</p>
            </div>
          </div>
          <div style="background: #c4a052; padding: 15px; text-align: center;">
            <a href="tel:${data.phone}" style="color: #0f172a; font-weight: bold; font-size: 18px; text-decoration: none;">üìû Call: ${data.phone}</a>
          </div>
        </div>
      `,
    })
    return true
  } catch (error: any) {
    console.error('‚ùå Failed to send contact notification:', error?.message || error)
    return false
  }
}


==========================================================================================

--- file: lib/firebase-admin.ts ---
// ============================================
// Firebase Admin Configuration (Server-side)
// ============================================
// This is for server-side operations (API routes)
// NEVER import this in client components!

import { initializeApp, getApps, cert, App } from 'firebase-admin/app'
import { getFirestore, Firestore } from 'firebase-admin/firestore'
import { getAuth, Auth } from 'firebase-admin/auth'
import { getStorage, Storage } from 'firebase-admin/storage'

// Parse the private key (handle escaped newlines)
const privateKey = process.env.FIREBASE_ADMIN_PRIVATE_KEY?.replace(/\\n/g, '\n')

// Admin configuration
const adminConfig = {
  credential: cert({
    projectId: process.env.FIREBASE_ADMIN_PROJECT_ID,
    clientEmail: process.env.FIREBASE_ADMIN_CLIENT_EMAIL,
    privateKey: privateKey,
  }),
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
}

// Initialize Firebase Admin (prevent re-initialization)
let adminApp: App
let adminDb: Firestore
let adminAuth: Auth
let adminStorage: Storage

if (getApps().length === 0) {
  adminApp = initializeApp(adminConfig)
} else {
  adminApp = getApps()[0]
}

// Initialize admin services
adminDb = getFirestore(adminApp)
adminAuth = getAuth(adminApp)
adminStorage = getStorage(adminApp)

// Export admin services
export { adminApp, adminDb, adminAuth, adminStorage }
export default adminApp


==========================================================================================

--- file: lib/firebase-auth.ts ---
// ============================================
// Firebase Auth ‚Äî Client-Side Configuration
// ============================================
// Provides Firebase Auth for the admin portal.
// Carlos authenticates via email/password or Google.
// Only the configured admin email can access /admin.
// ============================================

import { initializeApp, getApps, getApp } from 'firebase/app'
import {
  getAuth,
  signInWithEmailAndPassword,
  signInWithPopup,
  GoogleAuthProvider,
  signOut,
  onAuthStateChanged,
  type User,
  type Auth,
} from 'firebase/auth'
import {
  getFirestore,
  collection,
  doc,
  setDoc,
  getDoc,
  getDocs,
  deleteDoc,
  query,
  orderBy,
  where,
  serverTimestamp,
  type Timestamp,
  type Firestore,
} from 'firebase/firestore'
import {
  getStorage,
  ref,
  uploadBytes,
  getDownloadURL,
  type FirebaseStorage,
} from 'firebase/storage'

// Firebase config from env
const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || '',
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || '',
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || '',
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || '',
  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || '',
  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || '',
}

// ‚îÄ‚îÄ Lazy Firebase Initialization ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
// Nothing initializes at module load time.
// Each getter creates the instance on first call, then caches it.
let _app: ReturnType<typeof initializeApp> | null = null
let _auth: Auth | null = null
let _db: Firestore | null = null
let _storage: FirebaseStorage | null = null

function ensureApp() {
  if (_app) return _app
  if (getApps().length) { _app = getApp(); return _app }
  if (!firebaseConfig.apiKey) return null
  try {
    _app = initializeApp(firebaseConfig)
    return _app
  } catch (e) {
    console.error('Firebase init failed:', e)
    return null
  }
}

function ensureAuth(): Auth | null {
  if (_auth) return _auth
  const app = ensureApp()
  if (!app) return null
  try {
    _auth = getAuth(app)
    return _auth
  } catch (e) {
    console.error('Firebase Auth init failed:', e)
    return null
  }
}

function ensureDb(): Firestore | null {
  if (_db) return _db
  const app = ensureApp()
  if (!app) return null
  try {
    _db = getFirestore(app)
    return _db
  } catch (e) {
    console.error('Firestore init failed:', e)
    return null
  }
}

function ensureStorage(): FirebaseStorage | null {
  if (_storage) return _storage
  const app = ensureApp()
  if (!app) return null
  try {
    _storage = getStorage(app)
    return _storage
  } catch (e) {
    console.error('Firebase Storage init failed:', e)
    return null
  }
}

const googleProvider = new GoogleAuthProvider()

const ADMIN_EMAIL = process.env.NEXT_PUBLIC_ADMIN_EMAIL || 'crhomepros@gmail.com'

// Helper: throw if Firebase not ready
function requireAuth(): Auth {
  const auth = ensureAuth()
  if (!auth) throw new Error('Firebase not configured. Add NEXT_PUBLIC_FIREBASE_API_KEY to .env.local (see .env.example)')
  return auth
}

function requireDb(): Firestore {
  const db = ensureDb()
  if (!db) throw new Error('Firebase not configured. Add NEXT_PUBLIC_FIREBASE_API_KEY to .env.local')
  return db
}

function requireStorage(): FirebaseStorage {
  const s = ensureStorage()
  if (!s) throw new Error('Firebase Storage not configured. Check .env.local')
  return s
}

// ‚îÄ‚îÄ Auth Functions ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

export async function loginWithEmail(email: string, password: string) {
  const auth = requireAuth()
  const cred = await signInWithEmailAndPassword(auth, email, password)
  if (cred.user.email?.toLowerCase() !== ADMIN_EMAIL.toLowerCase()) {
    await signOut(auth)
    throw new Error('Unauthorized. This account is not an admin.')
  }
  return cred.user
}

export async function loginWithGoogle() {
  const auth = requireAuth()
  const result = await signInWithPopup(auth, googleProvider)
  if (result.user.email?.toLowerCase() !== ADMIN_EMAIL.toLowerCase()) {
    await signOut(auth)
    throw new Error('Unauthorized. This Google account is not an admin.')
  }
  return result.user
}

export async function logout() {
  const auth = ensureAuth()
  if (!auth) return
  return signOut(auth)
}

export function onAuthChange(callback: (user: User | null) => void) {
  const auth = ensureAuth()
  if (!auth) {
    // Firebase not configured ‚Äî treat as logged out, redirect to login
    callback(null)
    return () => {} // no-op unsubscribe
  }
  return onAuthStateChanged(auth, callback)
}

export function isAdmin(user: User | null): boolean {
  return user?.email?.toLowerCase() === ADMIN_EMAIL.toLowerCase()
}

export const isFirebaseConfigured = () => !!firebaseConfig.apiKey

// ‚îÄ‚îÄ Firestore ‚Äî Documents ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

export interface DocumentRecord {
  id?: string
  type: 'invoice' | 'change-order' | 'contract'
  number: string
  clientName: string
  clientEmail: string
  clientPhone: string
  clientAddress: string
  propertyAddress?: string
  projectName: string
  date: string
  dueDate?: string
  items: Array<{
    id: string
    description: string
    quantity: number
    unitPrice: number
  }>
  freeformDescription?: string
  notes: string
  subtotal: number
  tax: number
  taxRate: number
  total: number
  paymentStructure?: string
  contractTerms?: string
  signatureData: string | null
  status: 'draft' | 'sent' | 'signed' | 'paid'
  signedFileUrl?: string
  signedFileName?: string
  emailSubject?: string
  emailBody?: string
  createdAt?: Timestamp | any
  updatedAt?: Timestamp | any
}

const DOCS_COLLECTION = 'admin_documents'

export async function saveDocument(docData: DocumentRecord): Promise<string> {
  const db = requireDb()
  const docRef = docData.id
    ? doc(db, DOCS_COLLECTION, docData.id)
    : doc(collection(db, DOCS_COLLECTION))

  const payload = {
    ...docData,
    id: docRef.id,
    updatedAt: serverTimestamp(),
    ...(docData.id ? {} : { createdAt: serverTimestamp() }),
  }

  await setDoc(docRef, payload, { merge: true })
  return docRef.id
}

export async function getDocument(id: string): Promise<DocumentRecord | null> {
  const db = requireDb()
  const snap = await getDoc(doc(db, DOCS_COLLECTION, id))
  return snap.exists() ? (snap.data() as DocumentRecord) : null
}

export async function getDocumentsByType(type: DocumentRecord['type']): Promise<DocumentRecord[]> {
  const db = requireDb()
  const q = query(
    collection(db, DOCS_COLLECTION),
    where('type', '==', type),
    orderBy('createdAt', 'desc')
  )
  const snap = await getDocs(q)
  return snap.docs.map(d => ({ ...d.data(), id: d.id } as DocumentRecord))
}

export async function getAllDocuments(): Promise<DocumentRecord[]> {
  const db = requireDb()
  const q = query(collection(db, DOCS_COLLECTION), orderBy('createdAt', 'desc'))
  const snap = await getDocs(q)
  return snap.docs.map(d => ({ ...d.data(), id: d.id } as DocumentRecord))
}

export async function deleteDocument(id: string): Promise<void> {
  const db = requireDb()
  await deleteDoc(doc(db, DOCS_COLLECTION, id))
}

// ‚îÄ‚îÄ Storage ‚Äî Signature & Signed Documents ‚îÄ‚îÄ‚îÄ

export async function getSavedSignatureUrl(): Promise<string | null> {
  const s = ensureStorage()
  if (!s) return null
  try {
    const storageRef = ref(s, 'admin/signature/carlos-default.png')
    return await getDownloadURL(storageRef)
  } catch {
    return null // No saved signature yet
  }
}

export async function uploadSignedDocument(
  file: File,
  documentId: string,
  type: string
): Promise<string> {
  const s = requireStorage()
  const db = requireDb()
  const ext = file.name.split('.').pop() || 'pdf'
  const path = `signed-documents/${type}/${documentId}.${ext}`
  const storageRef = ref(s, path)
  await uploadBytes(storageRef, file)
  const url = await getDownloadURL(storageRef)

  await setDoc(doc(db, DOCS_COLLECTION, documentId), {
    signedFileUrl: url,
    signedFileName: file.name,
    status: 'signed',
    updatedAt: serverTimestamp(),
  }, { merge: true })

  return url
}

// Export
export { ADMIN_EMAIL, ensureAuth, ensureDb, ensureStorage }


==========================================================================================

--- file: lib/firebase-services.ts ---
// ============================================
// Firebase Services - Database Operations
// ============================================

import {
  collection,
  doc,
  addDoc,
  getDoc,
  getDocs,
  updateDoc,
  deleteDoc,
  query,
  where,
  orderBy,
  limit,
  startAfter,
  Timestamp,
  DocumentData,
  QueryConstraint,
} from 'firebase/firestore'
import { ref, uploadBytes, getDownloadURL, deleteObject } from 'firebase/storage'
import { getDb, getFirebaseStorage, Lead, Referral, FieldNote, Project, Review } from './firebase'

function requireDb() {
  const d = getDb()
  if (!d) throw new Error('Firebase is not configured. Set NEXT_PUBLIC_FIREBASE_API_KEY env var.')
  return d
}

function requireStorage() {
  const s = getFirebaseStorage()
  if (!s) throw new Error('Firebase Storage is not configured.')
  return s
}

// ============================================
// LEADS
// ============================================

export async function createLead(leadData: Omit<Lead, 'id' | 'createdAt' | 'updatedAt' | 'status'>): Promise<string> {
  const lead = {
    ...leadData,
    status: 'new' as const,
    createdAt: Timestamp.now(),
    updatedAt: Timestamp.now(),
  }
  
  const docRef = await addDoc(collection(requireDb(), 'leads'), lead)
  return docRef.id
}

export async function getLead(id: string): Promise<Lead | null> {
  const docRef = doc(requireDb(), 'leads', id)
  const docSnap = await getDoc(docRef)
  
  if (docSnap.exists()) {
    return { id: docSnap.id, ...docSnap.data() } as Lead
  }
  return null
}

export async function getLeads(options?: {
  status?: Lead['status']
  limit?: number
  startAfter?: DocumentData
}): Promise<Lead[]> {
  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]
  
  if (options?.status) {
    constraints.unshift(where('status', '==', options.status))
  }
  if (options?.limit) {
    constraints.push(limit(options.limit))
  }
  if (options?.startAfter) {
    constraints.push(startAfter(options.startAfter))
  }
  
  const q = query(collection(requireDb(), 'leads'), ...constraints)
  const snapshot = await getDocs(q)
  
  return snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() } as Lead))
}

export async function updateLeadStatus(id: string, status: Lead['status']): Promise<void> {
  const docRef = doc(requireDb(), 'leads', id)
  await updateDoc(docRef, {
    status,
    updatedAt: Timestamp.now(),
  })
}

// ============================================
// REFERRALS
// ============================================

export async function createReferral(referralData: Omit<Referral, 'id' | 'createdAt' | 'updatedAt' | 'status'>): Promise<string> {
  const referral = {
    ...referralData,
    status: 'pending' as const,
    createdAt: Timestamp.now(),
    updatedAt: Timestamp.now(),
  }
  
  const docRef = await addDoc(collection(requireDb(), 'referrals'), referral)
  return docRef.id
}

export async function getReferrals(options?: {
  status?: Referral['status']
  referrerEmail?: string
}): Promise<Referral[]> {
  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]
  
  if (options?.status) {
    constraints.unshift(where('status', '==', options.status))
  }
  if (options?.referrerEmail) {
    constraints.unshift(where('referrerEmail', '==', options.referrerEmail))
  }
  
  const q = query(collection(requireDb(), 'referrals'), ...constraints)
  const snapshot = await getDocs(q)
  
  return snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() } as Referral))
}

export async function updateReferralStatus(
  id: string,
  status: Referral['status'],
  reward?: number
): Promise<void> {
  const docRef = doc(requireDb(), 'referrals', id)
  const updates: any = {
    status,
    updatedAt: Timestamp.now(),
  }
  if (reward !== undefined) {
    updates.reward = reward
  }
  await updateDoc(docRef, updates)
}

// ============================================
// FIELD NOTES
// ============================================

export async function createFieldNote(
  noteData: Omit<FieldNote, 'id' | 'createdAt' | 'updatedAt'>,
  userId: string
): Promise<string> {
  const note = {
    ...noteData,
    createdBy: userId,
    createdAt: Timestamp.now(),
    updatedAt: Timestamp.now(),
  }
  
  const docRef = await addDoc(collection(requireDb(), 'fieldNotes'), note)
  return docRef.id
}

export async function getFieldNotes(userId?: string): Promise<FieldNote[]> {
  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]
  
  if (userId) {
    constraints.unshift(where('createdBy', '==', userId))
  }
  
  const q = query(collection(requireDb(), 'fieldNotes'), ...constraints)
  const snapshot = await getDocs(q)
  
  return snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() } as FieldNote))
}

export async function updateFieldNote(id: string, updates: Partial<FieldNote>): Promise<void> {
  const docRef = doc(requireDb(), 'fieldNotes', id)
  await updateDoc(docRef, {
    ...updates,
    updatedAt: Timestamp.now(),
  })
}

// ============================================
// PROJECTS
// ============================================

export async function getProjects(options?: {
  type?: string
  featured?: boolean
  published?: boolean
  limit?: number
}): Promise<Project[]> {
  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]
  
  if (options?.type) {
    constraints.unshift(where('type', '==', options.type))
  }
  if (options?.featured !== undefined) {
    constraints.unshift(where('featured', '==', options.featured))
  }
  if (options?.published !== undefined) {
    constraints.unshift(where('published', '==', options.published))
  }
  if (options?.limit) {
    constraints.push(limit(options.limit))
  }
  
  const q = query(collection(requireDb(), 'projects'), ...constraints)
  const snapshot = await getDocs(q)
  
  return snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() } as Project))
}

export async function getProjectBySlug(slug: string): Promise<Project | null> {
  const q = query(collection(requireDb(), 'projects'), where('slug', '==', slug), limit(1))
  const snapshot = await getDocs(q)
  
  if (snapshot.empty) return null
  
  const doc = snapshot.docs[0]
  return { id: doc.id, ...doc.data() } as Project
}

export async function createProject(projectData: Omit<Project, 'id' | 'createdAt' | 'updatedAt'>): Promise<string> {
  const project = {
    ...projectData,
    createdAt: Timestamp.now(),
    updatedAt: Timestamp.now(),
  }
  
  const docRef = await addDoc(collection(requireDb(), 'projects'), project)
  return docRef.id
}

// ============================================
// REVIEWS
// ============================================

export async function createReview(reviewData: Omit<Review, 'id' | 'createdAt' | 'approved'>): Promise<string> {
  const review = {
    ...reviewData,
    approved: false,
    createdAt: Timestamp.now(),
  }
  
  const docRef = await addDoc(collection(requireDb(), 'reviews'), review)
  return docRef.id
}

export async function getReviews(options?: {
  approved?: boolean
  limit?: number
}): Promise<Review[]> {
  const constraints: QueryConstraint[] = [orderBy('createdAt', 'desc')]
  
  if (options?.approved !== undefined) {
    constraints.unshift(where('approved', '==', options.approved))
  }
  if (options?.limit) {
    constraints.push(limit(options.limit))
  }
  
  const q = query(collection(requireDb(), 'reviews'), ...constraints)
  const snapshot = await getDocs(q)
  
  return snapshot.docs.map((doc) => ({ id: doc.id, ...doc.data() } as Review))
}

export async function approveReview(id: string): Promise<void> {
  const docRef = doc(requireDb(), 'reviews', id)
  await updateDoc(docRef, { approved: true })
}

// ============================================
// FILE UPLOAD
// ============================================

export async function uploadFile(
  file: File,
  path: string,
  onProgress?: (progress: number) => void
): Promise<string> {
  const storageRef = ref(requireStorage(), path)
  
  // Upload file
  const snapshot = await uploadBytes(storageRef, file)
  
  // Get download URL
  const downloadURL = await getDownloadURL(snapshot.ref)
  
  return downloadURL
}

export async function uploadMultipleFiles(
  files: File[],
  basePath: string
): Promise<string[]> {
  const uploadPromises = files.map((file, index) => {
    const path = `${basePath}/${Date.now()}_${index}_${file.name}`
    return uploadFile(file, path)
  })
  
  return Promise.all(uploadPromises)
}

export async function deleteFile(path: string): Promise<void> {
  const storageRef = ref(requireStorage(), path)
  await deleteObject(storageRef)
}


==========================================================================================

--- file: lib/firebase.ts ---
// ============================================
// Firebase Client Configuration
// ============================================
// This initializes Firebase for client-side use

import { initializeApp, getApps, FirebaseApp } from 'firebase/app'
import { getFirestore, Firestore } from 'firebase/firestore'
import { getAuth, Auth } from 'firebase/auth'
import { getStorage, FirebaseStorage } from 'firebase/storage'
import { getAnalytics, Analytics, isSupported } from 'firebase/analytics'

// Firebase configuration from environment variables
const firebaseConfig = {
  apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,
  authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,
  projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,
  storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,
  messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,
  appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,
}

// Initialize Firebase only when API key is available
let app: FirebaseApp | null = null
let db: Firestore | null = null
let auth: Auth | null = null
let storage: FirebaseStorage | null = null
let analytics: Analytics | null = null

function getFirebaseApp(): FirebaseApp | null {
  if (!firebaseConfig.apiKey) return null
  if (app) return app
  if (getApps().length === 0) {
    app = initializeApp(firebaseConfig)
  } else {
    app = getApps()[0]
  }
  return app
}

function getDb(): Firestore | null {
  if (db) return db
  const a = getFirebaseApp()
  if (!a) return null
  db = getFirestore(a)
  return db
}

function getFirebaseAuth(): Auth | null {
  if (auth) return auth
  const a = getFirebaseApp()
  if (!a) return null
  auth = getAuth(a)
  return auth
}

function getFirebaseStorage(): FirebaseStorage | null {
  if (storage) return storage
  const a = getFirebaseApp()
  if (!a) return null
  storage = getStorage(a)
  return storage
}

// Initialize Analytics (only in browser and if supported)
if (typeof window !== 'undefined' && firebaseConfig.apiKey) {
  const a = getFirebaseApp()
  if (a) {
    isSupported().then((supported) => {
      if (supported) {
        analytics = getAnalytics(a)
      }
    })
  }
}

// Export lazy getters and values
export { getFirebaseApp as getApp, getDb, getFirebaseAuth, getFirebaseStorage, analytics }
export { app, db, auth, storage }
export default app

// ============================================
// Helper Types
// ============================================

export interface Lead {
  id?: string
  firstName: string
  lastName: string
  email: string
  phone: string
  preferredContact?: 'phone' | 'email' | 'text' | 'whatsapp'
  address: string
  city: string
  state: string
  zip: string
  services: string[]
  projectDescription: string
  timeline: string
  budget: string
  howDidYouHear?: string
  additionalNotes?: string
  status: 'new' | 'contacted' | 'quoted' | 'won' | 'lost'
  createdAt: Date
  updatedAt: Date
}

export interface Referral {
  id?: string
  referrerName: string
  referrerEmail: string
  referrerPhone: string
  referralName: string
  referralPhone: string
  referralEmail?: string
  projectType: string
  projectDetails?: string
  paymentMethod: 'check' | 'venmo' | 'zelle' | 'credit'
  status: 'pending' | 'contacted' | 'converted' | 'paid'
  reward?: number
  createdAt: Date
  updatedAt: Date
}

export interface FieldNote {
  id?: string
  projectName: string
  clientName: string
  address: string
  serviceType: string
  notes: string
  measurements?: string
  materialsNeeded?: string
  estimatedCost?: string
  nextSteps?: string
  photos: string[]
  status: 'draft' | 'complete'
  createdAt: Date
  updatedAt: Date
  createdBy: string
}

export interface Project {
  id?: string
  title: string
  slug: string
  description: string
  location: string
  type: string
  duration: string
  year: number
  images: string[]
  beforeImage?: string
  afterImage?: string
  featured: boolean
  published: boolean
  createdAt: Date
  updatedAt: Date
}

export interface Review {
  id?: string
  name: string
  email?: string
  location: string
  rating: number
  text: string
  service: string
  approved: boolean
  createdAt: Date
}


==========================================================================================

--- file: lib/gallery-data.ts ---
// All project images organized by category
// Images stored locally in /public/images/

const BASE_01 = '/images/2024-01'
const BASE_06 = '/images/2024-06'
const BASE_2025_05 = '/images/2025-05'
const BASE_FENCE_BOWIE = '/images/2025-fence-bowie'
const BASE_BASEMENT_GREENBELT = '/images/2025-basement-greenbelt'

export interface GalleryProject {
  id: string
  title: string
  category: string
  description?: string
  images: string[]
  beforeImages?: string[]
  featured?: boolean
  completedDate?: string
}

export const GALLERY_PROJECTS: GalleryProject[] = [
  // ===== KITCHEN PROJECTS =====
  {
    id: 'kitchen-full-renovation',
    title: 'Full Kitchen Renovation',
    category: 'Kitchen',
    description: 'Complete kitchen transformation in Silver Spring ‚Äî New custom cabinets, quartz countertops, stainless steel appliances, and modern lighting.',
    featured: true,
    images: [
      `${BASE_01}/img_3700-1024x746.JPEG`,
      `${BASE_01}/img_3701-1-1024x748.JPEG`,
      `${BASE_01}/img_3702-780x1024.JPEG`,
    ],
  },
  {
    id: 'kitchen-renovation-2',
    title: 'Kitchen Renovation',
    category: 'Kitchen',
    description: 'Modern kitchen update in Hyattsville ‚Äî Updated cabinets, new backsplash, and improved functionality.',
    images: [
      `${BASE_01}/img_1607-1024x614.JPEG`,
      `${BASE_01}/img_1608-1024x614.JPEG`,
      `${BASE_01}/img_1609-1024x614.JPEG`,
      `${BASE_01}/img_1611-1024x614.JPEG`,
    ],
  },
  {
    id: 'kitchen-tiling',
    description: 'Custom tile work and flooring installation ‚Äî Gorgeous backsplash and durable, stylish flooring.',
    title: 'Kitchen Tiling Renovation',
    category: 'Kitchen',
    images: [
      `${BASE_01}/img_2016-768x1024.JPEG`,
      `${BASE_01}/img_2017-768x1024.JPEG`,
      `${BASE_01}/img_2018-768x1024.JPEG`,
      `${BASE_01}/img_2020-768x1024.JPEG`,
      `${BASE_01}/img_2021-768x1024.JPEG`,
      `${BASE_01}/img_2022-768x1024.JPEG`,
      `${BASE_01}/img_2023-1024x768.JPEG`,
    ],
  },
  {
    id: 'kitchen-pg-county',
    title: 'Kitchen Remodel ‚Äî Prince George\'s County',
    category: 'Kitchen',
    description: 'Full kitchen renovation in PG County, MD ‚Äî Dark espresso shaker cabinets with brushed nickel hardware, calacatta quartz countertops, subway tile backsplash, wood-look porcelain tile flooring, and stainless steel appliances. Part of a whole-home remodel including roof replacement, all handled through insurance.',
    featured: true,
    images: [
      `${BASE_2025_05}/kitchen-pg-county-01.png`,
    ],
  },

  // ===== BATHROOM PROJECTS =====
  {
    id: 'bathroom-1',
    description: 'Spa-like bathroom renovation in College Park ‚Äî Walk-in shower, new vanity, elegant tile work, and modern fixtures.',
    title: 'Modern Bathroom Remodel',
    category: 'Bathroom',
    featured: true,
    images: [
      `${BASE_06}/img_3497-1-768x1024.JPEG`,
      `${BASE_06}/img_3464-1-768x1024.JPEG`,
      `${BASE_06}/img_2733-1-1024x768.JPEG`,
      `${BASE_06}/img_2732-1-768x1024.JPEG`,
      `${BASE_06}/img_2728-1-1024x768.JPEG`,
      `${BASE_06}/img_2719-1-768x1024.JPEG`,
    ],
  },
  {
    id: 'bathroom-2',
    description: 'Full bathroom transformation ‚Äî New tub/shower combo, custom vanity, premium tile work, and updated plumbing.',
    title: 'Complete Bathroom Renovation',
    category: 'Bathroom',
    images: [
      `${BASE_01}/img_0416-768x1024.JPEG`,
      `${BASE_01}/img_0423-768x1024.JPEG`,
      `${BASE_01}/img_0491-768x1024.JPEG`,
      `${BASE_01}/img_0496-1024x768.JPEG`,
      `${BASE_01}/img_0497-768x1024.JPEG`,
      `${BASE_01}/img_0498-768x1024.JPEG`,
      `${BASE_01}/img_0500-768x1024.JPEG`,
      `${BASE_01}/img_0501-1024x768.JPEG`,
    ],
  },
  {
    id: 'bathroom-walk-in-shower',
    title: 'Walk-In Shower Remodel ‚Äî Marble Tile',
    category: 'Bathroom',
    description: 'Custom walk-in shower build with calacatta marble-look porcelain tile, gray glass accent stripe, pebble mosaic shower floor, corner marble shelf, chrome handheld showerhead with slide bar, grab bar for accessibility, and precision tile work throughout. Clean, modern, spa-quality finish.',
    featured: true,
    images: [
      `${BASE_2025_05}/bathroom-tile-02.png`,
      `${BASE_2025_05}/bathroom-tile-03.png`,
      `${BASE_2025_05}/bathroom-tile-01.png`,
    ],
  },

  // ===== COMPLETE RENOVATION PROJECTS =====
  {
    id: 'renovation-1',
    description: 'Full home renovation in Takoma Park ‚Äî Kitchen, bathrooms, flooring, paint, lighting, and structural improvements throughout.',
    title: 'Whole Home Transformation',
    category: 'Complete Renovation',
    featured: true,
    images: [
      `${BASE_01}/img_1551-1024x768.JPEG`,
      `${BASE_01}/img_1550-1024x768.JPEG`,
      `${BASE_01}/img_1548-1024x768.JPEG`,
      `${BASE_01}/img_1548-2-1024x768.JPEG`,
      `${BASE_01}/img_1546-1024x768.JPEG`,
      `${BASE_01}/img_1545-768x1024.JPEG`,
      `${BASE_01}/img_1537-768x1024.JPEG`,
      `${BASE_01}/img_1532-768x1024.JPEG`,
      `${BASE_01}/img_1531-1024x768.JPEG`,
      `${BASE_01}/img_1530-1024x768.JPEG`,
      `${BASE_01}/img_1509-1024x768.JPEG`,
      `${BASE_01}/img_1508-768x1024.JPEG`,
      `${BASE_01}/img_1507-1024x768.JPEG`,
      `${BASE_01}/img_1506-768x1024.JPEG`,
      `${BASE_01}/img_1423-1024x768.JPEG`,
    ],
  },
  {
    id: 'renovation-2',
    description: 'Complete property makeover ‚Äî Multiple rooms renovated, new finishes, updated systems, and modernized living spaces.',
    title: 'Full Property Renovation',
    category: 'Complete Renovation',
    images: [
      `${BASE_01}/img_0580-1024x768.JPEG`,
      `${BASE_01}/img_0591-1024x768.JPEG`,
      `${BASE_01}/img_0596-1024x768.JPEG`,
      `${BASE_01}/img_0597-1024x768.JPEG`,
      `${BASE_01}/img_0623-1024x768.JPEG`,
      `${BASE_01}/img_0624-1024x768.JPEG`,
      `${BASE_01}/img_0709-1024x768.JPEG`,
      `${BASE_01}/img_0710-1024x768.JPEG`,
      `${BASE_01}/img_0712-1024x768.JPEG`,
    ],
  },

  // ===== CONCRETE & DRIVEWAY PROJECTS =====
  {
    id: 'driveway-projects',
    description: 'Professional concrete driveway installation ‚Äî Durable, properly graded, and finished to perfection.',
    title: 'Driveway Installation',
    category: 'Concrete',
    featured: true,
    images: [
      `${BASE_06}/img_3167-1-765x1024.JPEG`,
      `${BASE_06}/img_3276-1-1024x765.JPEG`,
      `${BASE_01}/img_1338-768x1024.JPEG`,
      `${BASE_01}/img_1337-768x1024.JPEG`,
      `${BASE_01}/img_1335-768x1024.JPEG`,
    ],
  },
  {
    id: 'concrete-walls',
    description: 'Structural retaining wall construction ‚Äî Engineered for stability and built to last.',
    title: 'Concrete Retaining Walls',
    category: 'Concrete',
    images: [
      `${BASE_01}/img_0050-768x1024.JPEG`,
      `${BASE_01}/img_0046-768x1024.JPEG`,
      `${BASE_01}/img_0028-768x1024.JPEG`,
    ],
  },

  // ===== FLAT ROOFING PROJECTS =====
  {
    id: 'roof-replacement-clarksburg',
    title: 'Full Roof Replacement ‚Äî Clarksburg, MD',
    category: 'Roofing',
    description: 'Complete tear-off and roof replacement on a two-story colonial in Clarksburg, MD ‚Äî Stripped old shingles down to bare decking, inspected and repaired sheathing, installed synthetic underlayment with ice & water shield at valleys and eaves, then finished with premium architectural shingles and new ridge vents. Clean, professional install completed March 2022.',
    featured: true,
    images: [
      `${BASE_2025_05}/roof-md-05-house.png`,
      `${BASE_2025_05}/roof-md-01-decking.png`,
      `${BASE_2025_05}/roof-md-02-underlayment.png`,
      `${BASE_2025_05}/roof-md-03-shingles.png`,
      `${BASE_2025_05}/roof-md-04-finished.png`,
    ],
  },
  {
    id: 'flat-roof-install',
    description: 'Professional flat roof replacement ‚Äî rubber roofing for superior waterproofing and longevity.',
    title: 'Flat Roof Installation',
    category: 'Roofing',
    images: [
      `${BASE_01}/img_0806.JPEG`,
      `${BASE_01}/img_0867-576x1024.PNG`,
      `${BASE_01}/img_0815-576x1024.PNG`,
      `${BASE_01}/img_0862-1024x768.JPEG`,
    ],
  },
  {
    id: 'roof-replacement-pg-county',
    title: 'Full Shingle Roof Replacement ‚Äî Insurance Claim',
    category: 'Roofing',
    description: 'Complete roof tear-off and replacement on a two-story single-family home in Prince George\'s County, MD. Old shingles stripped to decking, underlayment inspected and replaced, new architectural shingles installed with ridge vents, flashing, and drip edge. Handled as an insurance claim after storm damage.',
    featured: true,
    images: [
      `${BASE_2025_05}/roofing-md-01.png`,
      `${BASE_2025_05}/roofing-md-02.png`,
    ],
  },
  {
    id: 'roof-replacement-clarksburg-colonial',
    title: 'Complete Roof Replacement',
    category: 'Roofing',
    description: 'Full shingle roof tear-off and replacement in Clarksburg, MD ‚Äî Stripped old shingles down to bare deck, inspected and repaired sheathing, installed synthetic underlayment with ice and water shield at valleys and edges, then laid new architectural shingles with proper ridge ventilation. Clean finished roofline on a two-story colonial. Completed March 2022.',
    featured: true,
    images: [
      `${BASE_2025_05}/roof-md-05-house.png`,
      `${BASE_2025_05}/roof-md-01-tearoff.png`,
      `${BASE_2025_05}/roof-md-02-underlayment.png`,
      `${BASE_2025_05}/roof-md-03-shingles.png`,
      `${BASE_2025_05}/roof-md-04-finished.png`,
    ],
  },

  // ===== DECK PROJECTS =====
  {
    id: 'deck-1',
    description: 'Beautiful custom deck construction ‚Äî Quality materials, expert craftsmanship, perfect for outdoor entertaining.',
    title: 'Custom Deck Build',
    category: 'Deck',
    featured: true,
    images: [
      `${BASE_06}/img_2379-1024x768.JPEG`,
      `${BASE_06}/img_2380-768x1024.JPEG`,
      `${BASE_06}/img_2386-1024x768.JPEG`,
      `${BASE_06}/img_2387-768x1024.JPEG`,
    ],
  },
  {
    id: 'deck-2',
    description: 'Deck restoration and professional staining ‚Äî Revitalized outdoor space with weather-resistant finish.',
    title: 'Deck Renovation & Staining',
    category: 'Deck',
    images: [
      `${BASE_01}/img_0941-768x1024.JPEG`,
      `${BASE_01}/img_0942-768x1024.JPEG`,
      `${BASE_01}/img_0947-768x1024.JPEG`,
      `${BASE_01}/img_0948-768x1024.JPEG`,
      `${BASE_01}/img_0949-768x1024.JPEG`,
      `${BASE_01}/img_0950-768x1024.JPEG`,
      `${BASE_01}/img_1095-768x1024.JPEG`,
    ],
  },
  {
    id: 'deck-composite-bowie',
    title: 'Composite Deck Build ‚Äî Insurance Claim',
    category: 'Deck',
    description: 'Full composite deck replacement in Bowie, MD ‚Äî Handled through homeowner\'s insurance claim. Installed premium gray composite decking with white vinyl posts, black aluminum balusters, and custom-built stairs. Fascia wrapped in protective flashing for long-term durability. Covered under insurance after storm damage to the original structure.',
    featured: true,
    images: [
      `${BASE_2025_05}/deck-pg-county-01.png`,
      `${BASE_2025_05}/deck-pg-county-02.png`,
      `${BASE_2025_05}/deck-pg-county-03.png`,
    ],
  },
  {
    id: 'deck-staining-va',
    title: 'Elevated Deck Staining ‚Äî Virginia',
    category: 'Deck',
    description: 'Complete deck restoration and staining in Northern Virginia ‚Äî Elevated second-story deck stripped, sanded, and finished with a rich hunter green solid stain. Stairs, railings, balusters, and support posts all coated for uniform weather protection. Brick patio underneath preserved. Before and after transformation.',
    featured: true,
    beforeImages: [
      `${BASE_2025_05}/deck-va-before-01.png`,
    ],
    images: [
      `${BASE_2025_05}/deck-va-after-01.png`,
    ],
  },

  // ===== PAINTING PROJECTS =====
  {
    id: 'exterior-painting-dc',
    title: 'Exterior Painting ‚Äî Historic Rowhouse',
    category: 'Painting',
    description: 'Full exterior repaint of a four-story historic rowhouse in Washington, D.C. ‚Äî Thorough power washing, scraping, priming, and two coats of premium exterior paint. Trim, cornices, window frames, and entryway detailed by hand to preserve the building\'s classic architectural character.',
    completedDate: 'May 2025',
    featured: true,
    images: [
      `${BASE_2025_05}/exterior-painting-dc-01.png`,
    ],
  },
  {
    id: 'basement-painting-md',
    title: 'Basement Finish & Paint',
    category: 'Painting',
    description: 'Complete basement renovation and painting in Laurel, MD ‚Äî Took a raw, unfinished space with exposed joists and concrete floors and transformed it into a fully finished living area. Drywall installed throughout, recessed lighting added, tile flooring laid, and walls finished in a clean blue-gray palette with a bold accent wall. Includes a dedicated laundry nook with fresh trim and built-in storage.',
    completedDate: 'October 2024',
    featured: true,
    beforeImages: [
      `${BASE_2025_05}/basement-md-before-01.png`,
      `${BASE_2025_05}/basement-md-before-02.png`,
      `${BASE_2025_05}/basement-md-during-01.png`,
    ],
    images: [
      `${BASE_2025_05}/basement-md-after-01.png`,
      `${BASE_2025_05}/basement-md-after-02.png`,
      `${BASE_2025_05}/basement-md-after-03.png`,
      `${BASE_2025_05}/basement-md-after-04.png`,
    ],
  },
  {
    id: 'renovation-painting-va',
    title: 'Interior Renovation & Paint ‚Äî Virginia',
    category: 'Complete Renovation',
    description: 'Full interior renovation in Northern Virginia ‚Äî New luxury vinyl plank flooring throughout, fresh drywall, recessed lighting, and a custom lavender paint finish. Open-concept living space transformed with new electrical, trim work, and a clean modern palette. Space prepped for move-in ready condition.',
    featured: true,
    images: [
      `${BASE_2025_05}/renovation-va-01.png`,
      `${BASE_2025_05}/renovation-va-02.png`,
    ],
  },

  // ===== FENCING PROJECTS =====
  {
    id: 'fence-vinyl-bowie',
    title: 'Vinyl Privacy Fence Installation',
    category: 'Fencing',
    description: 'Complete fence replacement in Bowie, MD ‚Äî Removed deteriorating wooden privacy fence and installed new white vinyl privacy fencing with decorative lattice top accents and matching gate. Clean, maintenance-free solution that transformed the backyard.',
    featured: true,
    completedDate: 'January 2025',
    beforeImages: [
      `${BASE_FENCE_BOWIE}/fence-before-01.png`,
    ],
    images: [
      `${BASE_FENCE_BOWIE}/fence-after-01.png`,
      `${BASE_FENCE_BOWIE}/fence-after-02.png`,
      `${BASE_FENCE_BOWIE}/fence-after-03.png`,
      `${BASE_FENCE_BOWIE}/fence-after-04.png`,
    ],
  },

  // ===== BASEMENT PROJECTS =====
  {
    id: 'basement-remodel-greenbelt',
    title: 'Basement Remodel ‚Äî Flooring & Painting',
    category: 'Basement',
    description: 'Full basement remodel in Greenbelt, MD ‚Äî Installed beautiful wood-look porcelain tile flooring throughout, fresh lavender accent walls, recessed LED lighting, and clean white ceiling and trim. Transformed a dated basement into a bright, modern living space.',
    featured: true,
    completedDate: 'January 2025',
    beforeImages: [
      `${BASE_BASEMENT_GREENBELT}/basement-before-01.png`,
    ],
    images: [
      `${BASE_BASEMENT_GREENBELT}/basement-after-01.png`,
      `${BASE_BASEMENT_GREENBELT}/basement-after-02.png`,
    ],
  },
]

export const GALLERY_CATEGORIES = [
  'All',
  'Kitchen',
  'Bathroom',
  'Basement',
  'Complete Renovation',
  'Fencing',
  'Concrete',
  'Roofing',
  'Deck',
  'Painting',
] as const

export type GalleryCategory = typeof GALLERY_CATEGORIES[number]

// Helper function to get all images for a category
export function getImagesByCategory(category: GalleryCategory): GalleryProject[] {
  if (category === 'All') return GALLERY_PROJECTS
  return GALLERY_PROJECTS.filter(p => p.category === category)
}

// Helper function to get featured projects
export function getFeaturedProjects(): GalleryProject[] {
  return GALLERY_PROJECTS.filter(p => p.featured)
}

// Get total image count
export function getTotalImageCount(): number {
  return GALLERY_PROJECTS.reduce((acc, p) => acc + p.images.length, 0)
}


==========================================================================================

--- file: lib/google-drive.ts ---
// ============================================
// Google Drive Service ‚Äî Lead Management
// ============================================
// Creates folders, generates lead docs, uploads images
// directly to Carlos's Google Drive via OAuth2 refresh token.
//
// SETUP:
// 1. Carlos authorizes via /admin/connect-drive (one-time)
// 2. Refresh token stored in GOOGLE_DRIVE_REFRESH_TOKEN env
// 3. All form submissions auto-create folders in Drive
//
// FOLDER STRUCTURE:
// CR Home Pros/
//   ‚îú‚îÄ‚îÄ Leads/
//   ‚îÇ   ‚îî‚îÄ‚îÄ [2026-02-13] John Smith - Kitchen/
//   ‚îÇ       ‚îú‚îÄ‚îÄ Lead-Details.docx
//   ‚îÇ       ‚îî‚îÄ‚îÄ photos/
//   ‚îú‚îÄ‚îÄ In Progress/
//   ‚îî‚îÄ‚îÄ Completed/
// ============================================

import { google } from 'googleapis'
import { Readable } from 'stream'

const SCOPES = [
  'https://www.googleapis.com/auth/drive.file',
  'https://www.googleapis.com/auth/drive',
]

const CLIENT_ID = process.env.GOOGLE_DRIVE_CLIENT_ID || ''
const CLIENT_SECRET = process.env.GOOGLE_DRIVE_CLIENT_SECRET || ''
const REDIRECT_URI = process.env.GOOGLE_DRIVE_REDIRECT_URI || 'https://crhomepros.com/api/auth/google/callback'
const REFRESH_TOKEN = process.env.GOOGLE_DRIVE_REFRESH_TOKEN || ''

// Root folder names
const ROOT_FOLDER_NAME = 'CR Home Pros'
const LEADS_FOLDER_NAME = 'Leads'
const IN_PROGRESS_FOLDER_NAME = 'In Progress'
const COMPLETED_FOLDER_NAME = 'Completed'

// ============================================
// OAuth2 Client
// ============================================

function getOAuth2Client() {
  const oauth2Client = new google.auth.OAuth2(CLIENT_ID, CLIENT_SECRET, REDIRECT_URI)

  if (REFRESH_TOKEN) {
    oauth2Client.setCredentials({ refresh_token: REFRESH_TOKEN })
  }

  return oauth2Client
}

function getDrive() {
  return google.drive({ version: 'v3', auth: getOAuth2Client() })
}

/**
 * Generate the authorization URL for Carlos to grant access (one-time setup)
 */
export function getAuthUrl(): string {
  const oauth2Client = getOAuth2Client()
  return oauth2Client.generateAuthUrl({
    access_type: 'offline',
    scope: SCOPES,
    prompt: 'consent',
  })
}

/**
 * Exchange authorization code for tokens (callback handler)
 */
export async function getTokensFromCode(code: string) {
  const oauth2Client = getOAuth2Client()
  const { tokens } = await oauth2Client.getToken(code)
  return tokens
}

// ============================================
// Folder Management
// ============================================

/**
 * Find or create a folder by name under a parent folder
 */
async function findOrCreateFolder(name: string, parentId?: string): Promise<string> {
  const drive = getDrive()

  // Search for existing folder
  let query = `name='${name}' and mimeType='application/vnd.google-apps.folder' and trashed=false`
  if (parentId) {
    query += ` and '${parentId}' in parents`
  }

  const search = await drive.files.list({
    q: query,
    fields: 'files(id, name)',
    spaces: 'drive',
  })

  if (search.data.files && search.data.files.length > 0) {
    return search.data.files[0].id!
  }

  // Create folder
  const folder = await drive.files.create({
    requestBody: {
      name,
      mimeType: 'application/vnd.google-apps.folder',
      parents: parentId ? [parentId] : undefined,
    },
    fields: 'id',
  })

  return folder.data.id!
}

/**
 * Initialize the CR Home Pros folder structure in Drive
 */
export async function initializeFolderStructure(): Promise<{
  rootId: string
  leadsId: string
  inProgressId: string
  completedId: string
}> {
  const rootId = await findOrCreateFolder(ROOT_FOLDER_NAME)
  const leadsId = await findOrCreateFolder(LEADS_FOLDER_NAME, rootId)
  const inProgressId = await findOrCreateFolder(IN_PROGRESS_FOLDER_NAME, rootId)
  const completedId = await findOrCreateFolder(COMPLETED_FOLDER_NAME, rootId)

  return { rootId, leadsId, inProgressId, completedId }
}

// ============================================
// Lead Folder Creation
// ============================================

export interface LeadData {
  firstName: string
  lastName: string
  email: string
  phone: string
  preferredContact?: string
  address: string
  city: string
  state: string
  zip?: string
  services: string[]
  projectDescription: string
  timeline?: string
  budget?: string
  additionalNotes?: string
  howDidYouHear?: string
}

/**
 * Create a lead folder with all details in Google Drive
 * Returns the folder URL for Carlos to access
 */
export async function createLeadInDrive(lead: LeadData, images?: Buffer[]): Promise<{
  folderId: string
  folderUrl: string
  docId?: string
}> {
  const drive = getDrive()

  // Get or create the Leads folder
  const { leadsId } = await initializeFolderStructure()

  // Create lead-specific folder
  const date = new Date().toISOString().split('T')[0]
  const folderName = `[${date}] ${lead.firstName} ${lead.lastName} - ${lead.services[0] || 'General'}`
  const folderId = await findOrCreateFolder(folderName, leadsId)

  // Create the lead details document (plain text for reliability)
  const contactTag = lead.preferredContact ? `[${lead.preferredContact.toUpperCase()}]` : '[PHONE]'
  const docContent = buildLeadDocument(lead, contactTag, date)

  const docFile = await drive.files.create({
    requestBody: {
      name: `Lead-Details-${lead.firstName}-${lead.lastName}.txt`,
      parents: [folderId],
      mimeType: 'text/plain',
    },
    media: {
      mimeType: 'text/plain',
      body: docContent,
    },
    fields: 'id',
  })

  // Upload images if provided
  if (images && images.length > 0) {
    const photosId = await findOrCreateFolder('photos', folderId)

    for (let i = 0; i < images.length; i++) {

      await drive.files.create({
        requestBody: {
          name: `project-photo-${i + 1}.jpg`,
          parents: [photosId],
        },
        media: {
          mimeType: 'image/jpeg',
          body: Readable.from(images[i]),
        },
        fields: 'id',
      })
    }
  }

  const folderUrl = `https://drive.google.com/drive/folders/${folderId}`

  return {
    folderId,
    folderUrl,
    docId: docFile.data.id || undefined,
  }
}

/**
 * Build a formatted lead details document
 */
function buildLeadDocument(lead: LeadData, contactTag: string, date: string): string {
  const contactEmoji: Record<string, string> = {
    phone: 'üìû', email: '‚úâÔ∏è', text: 'üí¨', whatsapp: 'üü¢',
  }
  const emoji = contactEmoji[lead.preferredContact || 'phone'] || 'üìû'

  return `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CR HOME PROS ‚Äî NEW LEAD
   ${date}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

${emoji} PREFERRED CONTACT: ${(lead.preferredContact || 'phone').toUpperCase()} ${contactTag}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
CONTACT INFORMATION
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Name:       ${lead.firstName} ${lead.lastName}
Phone:      ${lead.phone}
Email:      ${lead.email}
Address:    ${lead.address}
City:       ${lead.city}, ${lead.state} ${lead.zip || ''}

‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
PROJECT DETAILS
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
Services:   ${lead.services.join(', ')}
Timeline:   ${lead.timeline || 'Not specified'}
Budget:     ${lead.budget || 'Not specified'}

Description:
${lead.projectDescription}

${lead.additionalNotes ? `Additional Notes:\n${lead.additionalNotes}\n` : ''}
${lead.howDidYouHear ? `How They Found Us: ${lead.howDidYouHear}\n` : ''}
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
STATUS: NEW ‚Äî Awaiting contact
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ

CR Home Pros | (301) 602-2553
Licensed & Insured ‚Äî MHIC #05-132359
crhomepros.com
`.trim()
}

// ============================================
// Referral Folder Creation
// ============================================

export interface ReferralData {
  referrerName: string
  referrerEmail: string
  referrerPhone: string
  referralName: string
  referralPhone: string
  referralEmail?: string
  projectType: string
  projectDetails?: string
  paymentMethod: string
}

export async function createReferralInDrive(referral: ReferralData): Promise<{
  folderId: string
  folderUrl: string
}> {
  const drive = getDrive()
  const { leadsId } = await initializeFolderStructure()

  const date = new Date().toISOString().split('T')[0]
  const folderName = `[${date}] REFERRAL - ${referral.referralName} (by ${referral.referrerName})`
  const folderId = await findOrCreateFolder(folderName, leadsId)

  const docContent = `
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   CR HOME PROS ‚Äî REFERRAL
   ${date}
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

REFERRED BY:
  Name:   ${referral.referrerName}
  Phone:  ${referral.referrerPhone}
  Email:  ${referral.referrerEmail}
  Pay via: ${referral.paymentMethod}

REFERRED PERSON:
  Name:   ${referral.referralName}
  Phone:  ${referral.referralPhone}
  ${referral.referralEmail ? `Email:  ${referral.referralEmail}` : ''}

PROJECT:
  Type:    ${referral.projectType}
  ${referral.projectDetails ? `Details: ${referral.projectDetails}` : ''}

STATUS: PENDING ‚Äî Awaiting contact
`.trim()

  await drive.files.create({
    requestBody: {
      name: `Referral-${referral.referralName}.txt`,
      parents: [folderId],
      mimeType: 'text/plain',
    },
    media: {
      mimeType: 'text/plain',
      body: docContent,
    },
    fields: 'id',
  })

  return {
    folderId,
    folderUrl: `https://drive.google.com/drive/folders/${folderId}`,
  }
}

// ============================================
// Contact Message (simpler ‚Äî just append to a log)
// ============================================

export async function logContactInDrive(contact: {
  name: string
  email: string
  phone: string
  message: string
  service?: string
}): Promise<void> {
  const drive = getDrive()
  const { leadsId } = await initializeFolderStructure()

  const date = new Date().toISOString().split('T')[0]
  const time = new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' })

  await drive.files.create({
    requestBody: {
      name: `[${date}] Contact - ${contact.name}.txt`,
      parents: [leadsId],
      mimeType: 'text/plain',
    },
    media: {
      mimeType: 'text/plain',
      body: `CONTACT MESSAGE ‚Äî ${date} ${time}\n\nName: ${contact.name}\nEmail: ${contact.email}\nPhone: ${contact.phone}\nService: ${contact.service || 'General'}\n\nMessage:\n${contact.message}`,
    },
    fields: 'id',
  })
}

/**
 * Check if Google Drive is configured (has refresh token)
 */
export function isDriveConfigured(): boolean {
  return !!(CLIENT_ID && CLIENT_SECRET && REFRESH_TOKEN)
}


==========================================================================================

--- file: lib/image-storage.ts ---
// ============================================
// Image Storage Utility
// ============================================
// Resolves project images from Firebase Storage (production)
// with automatic fallback to local /public/images/ (dev)
//
// Firebase Storage structure:
//   gs://<bucket>/projects/<category>/<project-id>/<filename>
//   gs://<bucket>/site/og-image.jpg
//   gs://<bucket>/site/carlos-headshot.jpg
//
// Usage:
//   const url = getImageUrl('projects/kitchen/kitchen-pg-county/01.jpg')
//   const url = getProjectImageUrl('kitchen-pg-county', '01.jpg')

const STORAGE_BUCKET = process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET

/**
 * Get a Firebase Storage download URL for a given path.
 * Falls back to local /images/ path if Firebase is not configured.
 */
export function getStorageUrl(path: string): string {
  if (!STORAGE_BUCKET) {
    return `/images/${path}`
  }

  const encodedPath = encodeURIComponent(path)
  return `https://firebasestorage.googleapis.com/v0/b/${STORAGE_BUCKET}/o/${encodedPath}?alt=media`
}

/**
 * Get image URL for a project photo.
 * @param projectId - e.g. 'kitchen-pg-county'
 * @param filename - e.g. '01.jpg'
 */
export function getProjectImageUrl(projectId: string, filename: string): string {
  return getStorageUrl(`projects/${projectId}/${filename}`)
}

/**
 * Get image URL for a site asset (logo, og-image, headshot, etc.)
 */
export function getSiteImageUrl(filename: string): string {
  return getStorageUrl(`site/${filename}`)
}

/**
 * Storage path constants for organized uploads
 */
export const STORAGE_PATHS = {
  projects: 'projects',
  site: 'site',
  testimonials: 'testimonials',
  docs: 'docs',
} as const

/**
 * Map of local image paths to Firebase Storage paths.
 * Used by the migration script and for URL resolution.
 */
export function localPathToStoragePath(localPath: string): string {
  // /images/2024-01/img_1234.JPEG ‚Üí projects/legacy-2024-01/img_1234.JPEG
  // /images/2025-05/kitchen-pg-county-01.png ‚Üí projects/kitchen-pg-county/01.png
  return localPath
    .replace(/^\/images\//, '')
    .replace(/^\//, '')
}


==========================================================================================

--- file: lib/pricing-data.ts ---
// Price ranges by service and size tier (DMV area typical pricing)
// These are estimates only ‚Äî adjust as market changes

export interface PriceTier {
  label: string
  labelEs: string
  description: string
  descriptionEs: string
  min: number
  max: number
}

export interface ServicePricing {
  id: string
  name: string
  nameEs: string
  icon: string
  tiers: PriceTier[]
}

export const SERVICE_PRICING: ServicePricing[] = [
  {
    id: 'kitchen',
    name: 'Kitchen Remodeling',
    nameEs: 'Remodelaci√≥n de Cocina',
    icon: 'üç≥',
    tiers: [
      { label: 'Minor Update', labelEs: 'Actualizaci√≥n Menor', description: 'Paint, hardware swap, backsplash', descriptionEs: 'Pintura, cambio de tiradores, backsplash', min: 3000, max: 7000 },
      { label: 'Small', labelEs: 'Peque√±a', description: 'Countertops + backsplash + paint', descriptionEs: 'Mesones + backsplash + pintura', min: 8000, max: 15000 },
      { label: 'Medium', labelEs: 'Mediana', description: 'Cabinets, countertops, flooring', descriptionEs: 'Gabinetes, mesones, pisos', min: 15000, max: 30000 },
      { label: 'Large', labelEs: 'Grande', description: 'Full gut renovation', descriptionEs: 'Renovaci√≥n completa', min: 30000, max: 50000 },
      { label: 'Premium', labelEs: 'Premium', description: 'High-end finishes, layout changes, appliances', descriptionEs: 'Acabados de alta gama, cambios de distribuci√≥n, electrodom√©sticos', min: 50000, max: 85000 },
    ],
  },
  {
    id: 'bathroom',
    name: 'Bathroom Renovation',
    nameEs: 'Remodelaci√≥n de Ba√±o',
    icon: 'üöø',
    tiers: [
      { label: 'Refresh', labelEs: 'Actualizaci√≥n', description: 'Fixtures, paint, accessories', descriptionEs: 'Accesorios, pintura, grifer√≠as', min: 2000, max: 5000 },
      { label: 'Small', labelEs: 'Peque√±o', description: 'Tile, vanity, fixtures', descriptionEs: 'Azulejos, lavamanos, grifer√≠as', min: 5000, max: 12000 },
      { label: 'Medium', labelEs: 'Mediano', description: 'Full remodel, shower/tub', descriptionEs: 'Remodelaci√≥n completa, ducha/ba√±era', min: 12000, max: 25000 },
      { label: 'Large', labelEs: 'Grande', description: 'Luxury remodel, custom tile', descriptionEs: 'Remodelaci√≥n de lujo, azulejo personalizado', min: 25000, max: 40000 },
      { label: 'Master Suite', labelEs: 'Suite Principal', description: 'Full master bath transformation', descriptionEs: 'Transformaci√≥n completa del ba√±o principal', min: 35000, max: 60000 },
    ],
  },
  {
    id: 'basement',
    name: 'Basement Finishing',
    nameEs: 'Terminaci√≥n de S√≥tano',
    icon: 'üè†',
    tiers: [
      { label: 'Basic', labelEs: 'B√°sico', description: 'Drywall, paint, basic flooring', descriptionEs: 'Drywall, pintura, piso b√°sico', min: 10000, max: 20000 },
      { label: 'Standard', labelEs: 'Est√°ndar', description: 'Full finish with bathroom', descriptionEs: 'Terminaci√≥n completa con ba√±o', min: 20000, max: 40000 },
      { label: 'Premium', labelEs: 'Premium', description: 'Custom design, wet bar, theater', descriptionEs: 'Dise√±o personalizado, barra, sala de cine', min: 40000, max: 70000 },
    ],
  },
  {
    id: 'painting',
    name: 'Painting',
    nameEs: 'Pintura',
    icon: 'üé®',
    tiers: [
      { label: 'Single Room', labelEs: 'Habitaci√≥n Individual', description: '1 room interior', descriptionEs: '1 habitaci√≥n interior', min: 300, max: 800 },
      { label: 'Multiple Rooms', labelEs: 'Varias Habitaciones', description: '3-5 rooms interior', descriptionEs: '3-5 habitaciones interior', min: 1500, max: 4000 },
      { label: 'Whole Interior', labelEs: 'Interior Completo', description: 'Full house interior', descriptionEs: 'Interior de casa completa', min: 4000, max: 10000 },
      { label: 'Exterior', labelEs: 'Exterior', description: 'Full exterior paint', descriptionEs: 'Pintura exterior completa', min: 3000, max: 12000 },
      { label: 'Commercial', labelEs: 'Comercial', description: 'Multi-story / large building', descriptionEs: 'Multi-piso / edificio grande', min: 8000, max: 30000 },
    ],
  },
  {
    id: 'roofing',
    name: 'Roofing',
    nameEs: 'Techos',
    icon: 'üèóÔ∏è',
    tiers: [
      { label: 'Repair', labelEs: 'Reparaci√≥n', description: 'Patch, leak fix, minor repair', descriptionEs: 'Parche, reparaci√≥n de filtraci√≥n', min: 500, max: 2000 },
      { label: 'Partial', labelEs: 'Parcial', description: 'Section replacement', descriptionEs: 'Reemplazo de secci√≥n', min: 2000, max: 6000 },
      { label: 'Full Replacement', labelEs: 'Reemplazo Completo', description: 'Complete roof replacement', descriptionEs: 'Reemplazo completo de techo', min: 8000, max: 20000 },
      { label: 'Flat Roof', labelEs: 'Techo Plano', description: 'Flat rubber roof system', descriptionEs: 'Sistema de techo plano de caucho', min: 5000, max: 15000 },
    ],
  },
  {
    id: 'concrete',
    name: 'Concrete & Masonry',
    nameEs: 'Concreto y Alba√±iler√≠a',
    icon: 'üß±',
    tiers: [
      { label: 'Small Repair', labelEs: 'Reparaci√≥n Menor', description: 'Crack repair, patching', descriptionEs: 'Reparaci√≥n de grietas', min: 500, max: 2000 },
      { label: 'Walkway/Patio', labelEs: 'Camino/Patio', description: 'New walkway or patio slab', descriptionEs: 'Nuevo camino o losa de patio', min: 2000, max: 6000 },
      { label: 'Driveway', labelEs: 'Entrada', description: 'Full driveway pour', descriptionEs: 'Entrada de concreto completa', min: 5000, max: 15000 },
      { label: 'Retaining Wall', labelEs: 'Muro de Contenci√≥n', description: 'Structural retaining wall', descriptionEs: 'Muro de contenci√≥n estructural', min: 3000, max: 12000 },
    ],
  },
  {
    id: 'deck',
    name: 'Decks & Patios',
    nameEs: 'Decks y Patios',
    icon: 'ü™µ',
    tiers: [
      { label: 'Repair/Stain', labelEs: 'Reparaci√≥n/Te√±ido', description: 'Deck repair and staining', descriptionEs: 'Reparaci√≥n y te√±ido de deck', min: 800, max: 3000 },
      { label: 'Small Deck', labelEs: 'Deck Peque√±o', description: 'Up to 200 sq ft', descriptionEs: 'Hasta 200 pies cuadrados', min: 5000, max: 12000 },
      { label: 'Large Deck', labelEs: 'Deck Grande', description: '200-500 sq ft, multi-level', descriptionEs: '200-500 pies cuadrados, multi-nivel', min: 12000, max: 30000 },
    ],
  },
  {
    id: 'power-washing',
    name: 'Power Washing',
    nameEs: 'Lavado a Presi√≥n',
    icon: 'üíß',
    tiers: [
      { label: 'Driveway', labelEs: 'Entrada', description: 'Driveway or walkway', descriptionEs: 'Entrada o camino', min: 150, max: 400 },
      { label: 'Deck/Patio', labelEs: 'Deck/Patio', description: 'Deck or patio area', descriptionEs: '√Årea de deck o patio', min: 200, max: 500 },
      { label: 'Full Exterior', labelEs: 'Exterior Completo', description: 'House siding + driveway', descriptionEs: 'Revestimiento de casa + entrada', min: 400, max: 1200 },
    ],
  },
  {
    id: 'general',
    name: 'General Repairs & Handyman',
    nameEs: 'Reparaciones Generales',
    icon: 'üîß',
    tiers: [
      { label: 'Quick Fix', labelEs: 'Reparaci√≥n R√°pida', description: '1-2 hour job', descriptionEs: 'Trabajo de 1-2 horas', min: 150, max: 400 },
      { label: 'Half Day', labelEs: 'Medio D√≠a', description: 'Multiple small repairs', descriptionEs: 'M√∫ltiples reparaciones peque√±as', min: 400, max: 1000 },
      { label: 'Full Day+', labelEs: 'D√≠a Completo+', description: 'Larger repair projects', descriptionEs: 'Proyectos de reparaci√≥n m√°s grandes', min: 1000, max: 3000 },
    ],
  },
  {
    id: 'asphalt-sealing',
    name: 'Asphalt Sealing',
    nameEs: 'Sellado de Asfalto',
    icon: 'üõ£Ô∏è',
    tiers: [
      { label: 'Small Driveway', labelEs: 'Entrada Peque√±a', description: 'Up to 500 sq ft', descriptionEs: 'Hasta 500 pies cuadrados', min: 200, max: 500 },
      { label: 'Standard Driveway', labelEs: 'Entrada Est√°ndar', description: '500-1000 sq ft', descriptionEs: '500-1000 pies cuadrados', min: 400, max: 900 },
      { label: 'Large / Parking', labelEs: 'Grande / Estacionamiento', description: '1000+ sq ft or commercial', descriptionEs: '1000+ pies cuadrados o comercial', min: 800, max: 2500 },
    ],
  },
  {
    id: 'flooring',
    name: 'Flooring Installation',
    nameEs: 'Instalaci√≥n de Pisos',
    icon: 'ü™µ',
    tiers: [
      { label: 'Single Room', labelEs: 'Una Habitaci√≥n', description: 'LVP, laminate, or tile ‚Äî up to 200 sq ft', descriptionEs: 'LVP, laminado o azulejo ‚Äî hasta 200 pies cuadrados', min: 1500, max: 3500 },
      { label: 'Multiple Rooms', labelEs: 'Varias Habitaciones', description: '500-1000 sq ft, includes transitions', descriptionEs: '500-1000 pies cuadrados, incluye transiciones', min: 4000, max: 9000 },
      { label: 'Whole Home', labelEs: 'Casa Completa', description: '1000+ sq ft, hardwood or premium tile', descriptionEs: '1000+ pies cuadrados, madera o azulejo premium', min: 8000, max: 20000 },
      { label: 'Custom / Specialty', labelEs: 'Personalizado / Especial', description: 'Herringbone, patterned tile, heated floors', descriptionEs: 'Espiga, azulejo con patr√≥n, pisos calefaccionados', min: 15000, max: 35000 },
    ],
  },
  {
    id: 'complete-renovation',
    name: 'Complete Home Renovation',
    nameEs: 'Renovaci√≥n Completa del Hogar',
    icon: 'üè†',
    tiers: [
      { label: 'Cosmetic Refresh', labelEs: 'Actualizaci√≥n Cosm√©tica', description: 'Paint, flooring, fixtures throughout', descriptionEs: 'Pintura, pisos, accesorios en toda la casa', min: 15000, max: 40000 },
      { label: 'Mid-Range Remodel', labelEs: 'Remodelaci√≥n Media', description: 'Kitchen + bath + flooring + paint', descriptionEs: 'Cocina + ba√±o + pisos + pintura', min: 40000, max: 80000 },
      { label: 'Full Gut Renovation', labelEs: 'Renovaci√≥n Total', description: 'Everything down to studs, layout changes', descriptionEs: 'Todo hasta los montantes, cambios de distribuci√≥n', min: 80000, max: 200000 },
      { label: 'Luxury / Addition', labelEs: 'Lujo / Ampliaci√≥n', description: 'High-end finishes, additions, structural', descriptionEs: 'Acabados de lujo, ampliaciones, estructural', min: 150000, max: 400000 },
    ],
  },
  {
    id: 'fencing',
    name: 'Fencing',
    nameEs: 'Cercas',
    icon: 'üèóÔ∏è',
    tiers: [
      { label: 'Repair / Patch', labelEs: 'Reparaci√≥n', description: 'Fix damaged sections, replace boards', descriptionEs: 'Reparar secciones da√±adas, reemplazar tablas', min: 300, max: 1500 },
      { label: 'Small Yard', labelEs: 'Patio Peque√±o', description: 'Up to 100 linear feet, wood or vinyl', descriptionEs: 'Hasta 100 pies lineales, madera o vinilo', min: 2000, max: 5000 },
      { label: 'Standard Yard', labelEs: 'Patio Est√°ndar', description: '100-200 linear feet, privacy fence', descriptionEs: '100-200 pies lineales, cerca de privacidad', min: 4000, max: 10000 },
      { label: 'Large / Custom', labelEs: 'Grande / Personalizado', description: '200+ linear feet, decorative or commercial', descriptionEs: '200+ pies lineales, decorativa o comercial', min: 8000, max: 20000 },
    ],
  },
]

// ============================================
// Emergency On-Call Rates
// ============================================
// Toggle visibility via admin - this gives Carlos extra revenue for after-hours work
export const EMERGENCY_RATES = {
  enabled: true, // Toggle to show/hide on site
  calloutFee: { min: 150, max: 250, description: 'Emergency dispatch fee (applied to first hour)' },
  hourlyRate: { min: 125, max: 200, description: 'Per hour after first hour' },
  categories: [
    { name: 'Burst Pipes / Water Damage', nameEs: 'Tuber√≠as Rotas / Da√±o por Agua', rate: '$150-250/hr', icon: 'üíß' },
    { name: 'Roof Leak / Storm Damage', nameEs: 'Goteras / Da√±o por Tormenta', rate: '$150-250/hr', icon: 'üåßÔ∏è' },
    { name: 'Electrical Emergency', nameEs: 'Emergencia El√©ctrica', rate: '$175-275/hr', icon: '‚ö°' },
    { name: 'Broken Window / Door', nameEs: 'Ventana / Puerta Rota', rate: '$125-200/hr', icon: 'ü™ü' },
    { name: 'Collapsed Ceiling / Structural', nameEs: 'Techo Colapsado / Estructural', rate: '$200-300/hr', icon: 'üèöÔ∏è' },
    { name: 'Flooding / Sump Pump Failure', nameEs: 'Inundaci√≥n / Falla de Bomba', rate: '$150-250/hr', icon: 'üåä' },
  ],
}


==========================================================================================

--- file: lib/recommendations-data.ts ---
export interface RecommendationLetter {
  id: string
  author: string
  service: string
  serviceEs: string
  quote: string
  quoteEs: string
  fullText: string
  fullTextEs: string
  pdfPath?: string
}

export const RECOMMENDATION_LETTERS: RecommendationLetter[] = [
  {
    id: 'elizabeth-amed',
    author: 'Elizabeth Amed',
    service: 'Retaining Wall & Fence',
    serviceEs: 'Muro de Contenci√≥n y Cerca',
    quote: 'You and your staff have renewed our faith in the right way of conducting business by a professional company.',
    quoteEs: 'Usted y su personal han renovado nuestra fe en la forma correcta de hacer negocios por parte de una empresa profesional.',
    fullText: 'Your company CR Home Pros recently re constructed a retaining wall and also replaced a wooden fence for us. I would like to thank you and your employees for the good job my husband and I are really happy with the work done by your crew and we would like to express our appreciation to you and your staff. Four years ago, we had a bad experience with a roofing contractor, thanks to a friend your company was recommended to us. You and your staff have renewed our faith in the right way of conducting business by a professional company. Again, thank you very much for a job well done.',
    fullTextEs: 'Su empresa CR Home Pros recientemente reconstruy√≥ un muro de contenci√≥n y tambi√©n reemplaz√≥ una cerca de madera para nosotros. Me gustar√≠a agradecerle a usted y a sus empleados por el buen trabajo, mi esposo y yo estamos muy contentos con el trabajo realizado por su equipo. Hace cuatro a√±os tuvimos una mala experiencia con un contratista de techos, gracias a un amigo nos recomendaron su empresa. Usted y su personal han renovado nuestra fe en la forma correcta de hacer negocios.',
    pdfPath: '/docs/recommendation-elizabeth-amed.pdf',
  },
  // Add more letters here as Carlos provides them
]


==========================================================================================

--- file: lib/resolve-images.ts ---
// ============================================
// Image URL Resolver
// ============================================
// Converts local image paths to Firebase Storage CDN URLs.
// Gallery data uses paths like '/images/2025-05/kitchen.png'
// This resolver maps them to the correct Firebase Storage location.

const BUCKET = 'crhomepros.firebasestorage.app'

/**
 * Map local /images/ paths to Firebase Storage paths.
 * 
 * Firebase Storage structure:
 *   blog/           ‚Üê blog images
 *   projects/       ‚Üê all project images (2024-01, 2024-06, 2025-05, fence, basement)
 *   site/           ‚Üê logo, og-image
 *   team/           ‚Üê team photos
 */
function toStoragePath(localPath: string): string {
  // Strip leading /images/
  const rel = localPath.replace(/^\/images\//, '')

  // Blog images: /images/blog/x.png ‚Üí blog/x.png
  if (rel.startsWith('blog/')) return rel

  // Team photos: /images/team-carlos-01.png ‚Üí team/team-carlos-01.png
  if (rel.startsWith('team-')) return `team/${rel}`

  // Logo & site assets: /images/logo.png ‚Üí site/logo.png
  if (rel === 'logo.png' || rel === 'og-image.jpg') return `site/${rel}`

  // Everything else (project folders): /images/2025-05/x.png ‚Üí projects/2025-05/x.png
  return `projects/${rel}`
}

/**
 * Resolve an image path to Firebase Storage CDN URL.
 */
export function resolveImageUrl(localPath: string): string {
  // Already a full URL? Return as-is
  if (localPath.startsWith('http://') || localPath.startsWith('https://')) {
    return localPath
  }

  const storagePath = toStoragePath(localPath)
  const encoded = encodeURIComponent(storagePath)
  return `https://firebasestorage.googleapis.com/v0/b/${BUCKET}/o/${encoded}?alt=media`
}

/**
 * Resolve all images in a gallery project.
 */
export function resolveProjectImages<T extends { images: string[]; beforeImages?: string[] }>(
  project: T
): T {
  return {
    ...project,
    images: project.images.map(resolveImageUrl),
    ...(project.beforeImages && {
      beforeImages: project.beforeImages.map(resolveImageUrl),
    }),
  }
}

/**
 * Get Firebase Storage URL for a specific file.
 */
export function getStorageUrl(storagePath: string): string {
  const encoded = encodeURIComponent(storagePath)
  return `https://firebasestorage.googleapis.com/v0/b/${BUCKET}/o/${encoded}?alt=media`
}

export function getProjectImageUrl(folder: string, filename: string): string {
  return getStorageUrl(`projects/${folder}/${filename}`)
}

export function getSiteImageUrl(filename: string): string {
  return getStorageUrl(`site/${filename}`)
}

export const STORAGE_PATHS = {
  projects: 'projects',
  blog: 'blog',
  site: 'site',
  team: 'team',
} as const


==========================================================================================

--- file: lib/utils.ts ---
import { type ClassValue, clsx } from 'clsx'
import { twMerge } from 'tailwind-merge'

/**
 * Merge Tailwind CSS classes with clsx
 */
export function cn(...inputs: ClassValue[]) {
  return twMerge(clsx(inputs))
}

/**
 * Format phone number for display
 */
export function formatPhone(phone: string): string {
  const cleaned = phone.replace(/\D/g, '')
  const match = cleaned.match(/^(\d{3})(\d{3})(\d{4})$/)
  if (match) {
    return `(${match[1]}) ${match[2]}-${match[3]}`
  }
  return phone
}

/**
 * Format phone number for tel: links
 */
export function formatPhoneLink(phone: string): string {
  return `tel:+1${phone.replace(/\D/g, '')}`
}

/**
 * Format for WhatsApp links
 */
export function formatWhatsAppLink(phone: string, message?: string): string {
  const cleaned = phone.replace(/\D/g, '')
  const base = `https://wa.me/1${cleaned}`
  if (message) {
    return `${base}?text=${encodeURIComponent(message)}`
  }
  return base
}

/**
 * Slugify a string
 */
export function slugify(str: string): string {
  return str
    .toLowerCase()
    .replace(/[^\w\s-]/g, '')
    .replace(/[\s_-]+/g, '-')
    .replace(/^-+|-+$/g, '')
}

/**
 * Truncate text with ellipsis
 */
export function truncate(str: string, length: number): string {
  if (str.length <= length) return str
  return str.slice(0, length).trim() + '...'
}

/**
 * Generate initials from name
 */
export function getInitials(name: string): string {
  return name
    .split(' ')
    .map((n) => n[0])
    .join('')
    .toUpperCase()
    .slice(0, 2)
}

/**
 * Format currency
 */
export function formatCurrency(amount: number): string {
  return new Intl.NumberFormat('en-US', {
    style: 'currency',
    currency: 'USD',
    minimumFractionDigits: 0,
    maximumFractionDigits: 0,
  }).format(amount)
}

/**
 * Format date
 */
export function formatDate(date: Date | string): string {
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(new Date(date))
}

/**
 * Delay helper for animations
 */
export function delay(ms: number): Promise<void> {
  return new Promise((resolve) => setTimeout(resolve, ms))
}

/**
 * Check if we're on the client side
 */
export const isClient = typeof window !== 'undefined'

/**
 * Check if we're on mobile
 */
export function isMobile(): boolean {
  if (!isClient) return false
  return window.innerWidth < 768
}


==========================================================================================

--- file: lib/i18n/config.ts ---
export const i18n = {
  defaultLocale: 'en',
  locales: ['en', 'es'],
} as const

export type Locale = (typeof i18n)['locales'][number]

export function isValidLocale(locale: string): locale is Locale {
  return i18n.locales.includes(locale as Locale)
}


==========================================================================================

--- file: lib/i18n/dictionaries.ts ---
import type { Locale } from './config'
import type { Dictionary } from './en'
import en from './en'
import es from './es'

const dicts: Record<Locale, Dictionary> = { en, es }

export async function getDictionary(locale: Locale): Promise<Dictionary> {
  return dicts[locale]
}

export function getDictionarySync(locale: Locale): Dictionary {
  return dicts[locale]
}


==========================================================================================

--- file: lib/i18n/en.ts ---
const en = {
  // Navigation
  nav: {
    home: 'Home',
    services: 'Services',
    projects: 'Projects',
    about: 'About',
    blog: 'Blog',
    reviews: 'Reviews',
    contact: 'Contact',
    referrals: 'Referrals $$$',
    getEstimate: 'Get Free Estimate',
    hablamos: '¬°Hablamos Espa√±ol!',
    whatsappUs: 'WhatsApp Us',
    financing: 'Financing',
    emergency: 'Got an Emergency?',
    green: 'Green',
    pricing: 'Pricing',
  },

  // Hero
  hero: {
    badge: 'Trusted DMV Contractor ‚Äî 20+ Years',
    title: 'Your Home.',
    titleAccent: 'Our Expertise.',
    subtitle: 'From kitchens and bathrooms to roofing and concrete ‚Äî we deliver quality craftsmanship with honest pricing. Serving DC, Maryland & Virginia.',
    cta: 'Get Your Free Estimate',
    ctaSecondary: 'View Our Work',
    bilingualBadge: '¬°Hablamos Espa√±ol!',
    since: 'Since 2004',
    trustBadges: {
      years: '20+ Years Experience',
      licensed: 'Licensed & Insured',
      licensedDetail: 'MHIC #05-132359',
      estimates: 'Free Estimates',
      spanish: '¬°Hablamos Espa√±ol!',
    },
    slides: {
      s1tagline: 'One Call Fixes It All',
      s1subtitle: 'From leaky faucets to full renos‚Äîprecision, care, and zero hassle.',
      s2tagline: 'Your Home, Handled',
      s2subtitle: 'Minor repairs to major makeovers: We handle every detail so you don\'t have to.',
      s3tagline: 'Built to Last, Designed to Wow',
      s3subtitle: 'Skilled pros turning your house into the home you\'ve always imagined.',
      s4tagline: 'From Fix to Finish',
      s4subtitle: 'Every project, every scale‚Äîdelivered with expertise and a perfect touch.',
      s5tagline: 'We Transform Houses into Homes',
      s5subtitle: 'Seamless service from the smallest tweak to the biggest dream.',
      s6tagline: 'No Job Too Small. No Vision Too Big.',
      s6subtitle: 'Your trusted team for every home improvement need.',
    },
  },

  // Services
  services: {
    title: 'Our Services',
    subtitle: 'Complete Home Improvement Solutions',
    description: 'From minor repairs to full renovations, we have the skills and experience to transform your home.',
    viewAll: 'View All Services',
    getEstimate: 'Get Free Estimate',
    callNow: 'Call Now',
    whyChoose: 'Why Choose CR Home Pros',
    kitchen: {
      name: 'Kitchen Remodeling',
      description: 'Custom cabinets, countertops, backsplash, flooring, lighting, and complete kitchen transformations.',
      short: 'Transform your kitchen into the heart of your home.',
    },
    bathroom: {
      name: 'Bathroom Renovation',
      description: 'Walk-in showers, tub replacements, vanities, tile work, and full bathroom remodels.',
      short: 'Create spa-worthy retreats with premium materials.',
    },
    basement: {
      name: 'Basement Finishing',
      description: 'Transform unused space into living areas, home offices, entertainment rooms, or rental units.',
      short: 'Unlock your home\'s hidden potential below grade.',
    },
    roofing: {
      name: 'Roofing',
      description: 'Roof repairs, replacements, flat roofing, and leak detection.',
      short: 'Protect your home with quality roofing solutions.',
    },
    painting: {
      name: 'Interior & Exterior Painting',
      description: 'Interior and exterior painting, power washing, staining, and surface preparation.',
      short: 'Professional painting with meticulous attention to detail.',
    },
    concrete: {
      name: 'Concrete & Driveways',
      description: 'Driveways, patios, retaining walls, foundations, and decorative concrete work.',
      short: 'Durable concrete work built to last decades.',
    },
    deck: {
      name: 'Decks & Outdoor Living',
      description: 'Custom deck building, restoration, staining, and outdoor living spaces.',
      short: 'Extend your living space into the outdoors.',
    },
    flooring: {
      name: 'Flooring & Tiling',
      description: 'Hardwood, tile, vinyl, and laminate installation for every room.',
      short: 'Beautiful floors that transform any space.',
    },
    fencing: {
      name: 'Fencing',
      description: 'Privacy fencing, vinyl, wood, and chain-link installation and repair.',
      short: 'Privacy fencing, vinyl, wood, and chain-link installation & repair.',
    },
    completeRenovations: {
      name: 'Complete Renovations',
      description: 'Full home transformations from concept to completion.',
      short: 'Full home transformations from start to finish.',
    },
    insuranceClaims: {
      name: 'Insurance Claims',
      description: 'We handle the paperwork and work directly with your insurance company.',
      short: 'We work directly with your insurance company.',
    },
    powerWashing: {
      name: 'Power Washing',
      description: 'Driveways, siding, decks, fences, and exterior surface cleaning.',
      short: 'Professional exterior surface cleaning.',
    },
    general: {
      name: 'General Repairs',
      description: 'Drywall, flooring, doors, windows, plumbing, electrical, and handyman services.',
      short: 'Drywall, doors, windows, plumbing, and more.',
    },
  },

  // About
  about: {
    title: 'About CR Home Pros',
    subtitle: 'Meet Carlos',
    story: 'With over 20 years of hands-on experience in home improvement, Carlos Hernandez has built CR Home Pros on a foundation of quality craftsmanship, honest pricing, and genuine care for every client.',
    mission: 'Our mission is simple: treat every home like it\'s our own. We show up on time, communicate clearly, and deliver results that last.',
    values: {
      quality: 'Quality Craftsmanship',
      qualityDesc: 'Every detail matters. We use premium materials and proven techniques.',
      honest: 'Honest Pricing',
      honestDesc: 'No hidden fees, no surprises. You get a clear quote upfront.',
      reliable: 'Reliable Service',
      reliableDesc: 'We show up when we say we will and finish on schedule.',
      licensed: 'Licensed & Insured',
      licensedDesc: 'Fully licensed (MHIC #05-132359) and insured for your protection.',
    },
  },

  // Projects
  projects: {
    title: 'Our Projects',
    subtitle: 'See Our Work',
    description: 'Browse our portfolio of completed projects across the DMV area.',
    filterAll: 'All',
    viewProject: 'View Project',
    categories: {
      kitchen: 'Kitchen',
      bathroom: 'Bathroom',
      renovation: 'Complete Renovation',
      concrete: 'Concrete',
      roofing: 'Roofing',
      deck: 'Deck',
      painting: 'Painting',
    },
  },

  // Contact
  contact: {
    title: 'Contact Us',
    subtitle: 'Get in Touch',
    description: 'Ready to start your project? Contact us for a free estimate. We respond within 24 hours.',
    form: {
      name: 'Your Name',
      email: 'Email Address',
      phone: 'Phone Number',
      service: 'Service Needed',
      message: 'Tell us about your project',
      submit: 'Send Message',
      sending: 'Sending...',
      success: 'Message sent! We\'ll get back to you within 24 hours.',
      error: 'Something went wrong. Please call us directly.',
    },
    info: {
      phone: 'Phone',
      email: 'Email',
      whatsapp: 'WhatsApp',
      whatsappCta: 'Tap to message us',
      address: 'Address',
      serving: 'Serving DC, MD & VA',
      hours: 'Hours',
      hoursDetail: 'Mon-Sat 7AM-7PM',
      emergency: '24/7 Emergency Available',
    },
  },

  // Reviews
  reviews: {
    title: 'Client Reviews',
    subtitle: 'What Our Clients Say',
    description: 'Don\'t just take our word for it ‚Äî hear from homeowners who trusted us with their projects.',
    leaveReview: 'Leave a Review',
    googleReviews: 'See Our Google Reviews',
    yelpReviews: 'See Our Yelp Reviews',
  },

  // Referrals
  referrals: {
    title: 'Referral Program',
    subtitle: 'Share the Rewards',
    description: 'Earn cash rewards for every friend or neighbor you refer to CR Home Pros.',
    earnUp: 'Earn up to',
    perReferral: 'per referral',
    howItWorks: 'How It Works',
    rewardStructure: 'Reward Structure',
    biggerProject: 'The bigger the project your referral completes, the bigger your reward.',
    bestValue: 'BEST VALUE',
    giftCard: 'Gift Card',
    steps: {
      share: 'Share Our Info',
      shareDesc: 'Tell your friends, family, or neighbors about CR Home Pros.',
      connect: 'They Connect With Us',
      connectDesc: 'Your referral contacts us and mentions your name.',
      complete: 'Project Completed',
      completeDesc: 'Once we complete their project, you earn your referral reward.',
      getPaid: 'Get Paid',
      getPaidDesc: 'Receive your reward via check, Venmo, Zelle, gift card, or credit toward your next project.',
    },
  },

  // Blog
  blog: {
    title: 'Blog',
    subtitle: 'Home Improvement Tips & Insights',
    description: 'Expert advice, project guides, and industry insights from the CR Home Pros team.',
    readMore: 'Read More ‚Üí',
    backToBlog: '‚Üê Back to Blog',
  },

  // Estimate / Get Started
  estimate: {
    title: 'Get Your Free Estimate',
    subtitle: 'Start Your Project Today',
    description: 'Tell us about your project and we\'ll provide a free, no-obligation estimate within 24 hours.',
    step1: 'Project Details',
    step2: 'Your Information',
    step3: 'Schedule',
    next: 'Next',
    back: 'Back',
    submit: 'Submit Request',
    success: 'Request submitted! We\'ll contact you within 24 hours.',
  },

  // Financing
  financing: {
    title: 'Financing Options',
    subtitle: 'Renovate Today, Pay Over Time',
    description: 'Don\'t let budget hold back your dream renovation. We offer flexible financing to make home improvements affordable.',
    whyFinance: 'Why Finance Your Project?',
    benefits: {
      noWait: 'Don\'t Wait for Repairs',
      noWaitDesc: 'Leaks, structural issues, and outdated systems get worse (and more expensive) over time.',
      preserve: 'Preserve Your Savings',
      preserveDesc: 'Keep your emergency fund intact while still upgrading your home.',
      increase: 'Increase Home Value',
      increaseDesc: 'Most renovations pay for themselves in added property value.',
      flexible: 'Flexible Payments',
      flexibleDesc: 'Choose a payment plan that fits your monthly budget.',
    },
    options: {
      title: 'Available Options',
      zeroInterest: '0% Interest Plans',
      zeroInterestDesc: 'Qualified buyers can finance up to 18 months interest-free.',
      lowMonthly: 'Low Monthly Payments',
      lowMonthlyDesc: 'Spread costs over 24-60 months with competitive rates.',
      noMoney: 'No Money Down',
      noMoneyDesc: 'Start your project without any upfront payment on approved credit.',
      quickApproval: 'Quick Approval',
      quickApprovalDesc: 'Get approved in minutes ‚Äî not days.',
    },
    calculator: {
      title: 'Payment Estimator',
      projectCost: 'Project Cost',
      term: 'Loan Term',
      months: 'months',
      rate: 'APR',
      estimated: 'Estimated Monthly Payment',
      disclaimer: 'This is an estimate only. Actual terms depend on credit approval. Contact us to discuss financing options for your specific project.',
    },
    cta: 'Ask About Financing',
    ctaDesc: 'Call us or request an estimate and mention financing ‚Äî we\'ll walk you through your options.',
  },

  // Quote Estimator
  quoteEstimator: {
    title: 'Project Cost Estimator',
    subtitle: 'Get a Ballpark Estimate',
    description: 'Use our calculator for a rough idea of what your project might cost. For an exact quote, contact us for a free in-home estimate.',
    selectService: 'Select a Service',
    selectSize: 'Project Size',
    sizes: {
      xs: 'Extra Small',
      small: 'Small',
      medium: 'Medium',
      large: 'Large',
      xl: 'Extra Large',
    },
    estimatedRange: 'Estimated Cost Range',
    disclaimer: 'These are approximate ranges based on typical projects in the DMV area. Actual costs vary based on materials, scope, and site conditions. Contact us for a free, accurate quote.',
    getExactQuote: 'Get an Exact Quote ‚Äî Free',
    callForDetails: 'Call to Discuss Your Project',
  },

  // Common
  common: {
    freeEstimate: 'Free Estimate',
    callUs: 'Call Us',
    call: 'Call',
    learnMore: 'Learn More',
    viewAll: 'View All',
    readMore: 'Read More',
    back: 'Back',
    next: 'Next',
    submit: 'Submit',
    loading: 'Loading...',
    error: 'Something went wrong',
    servingAreas: 'Serving',
    surroundingAreas: '& surrounding areas',
    projectsCompleted: 'Projects Completed',
    yearsExperience: 'Years Experience',
    satisfactionFocus: 'Satisfaction Focus',
    licensedInsured: 'Licensed & Insured',
    licensedContractor: 'Licensed Contractor/Salesman',
    copyright: '¬©',
    privacyPolicy: 'Privacy Policy',
    termsOfService: 'Terms of Service',
    whatsappGreeting: 'Hi! I\'m interested in your services.',
  },

  // Footer
  footer: {
    description: 'Professional home improvement services serving Washington DC, Maryland & Virginia. Licensed, insured, and committed to excellence.',
    quickLinks: 'Quick Links',
    contactUs: 'Contact Us',
    tapToMessage: 'Tap to message us',
    emergencyOnCall: 'Emergency on-call 24/7',
    monSat: 'Mon - Sat',
    yearsServingDMV: 'Years Serving the DMV',
    weAccept: 'We Accept',
    ecoFriendly: 'Eco-Friendly Options',
  },

  // CTA Section
  cta: {
    title: 'Ready to Transform Your Home?',
    subtitle: 'Get your free estimate today ‚Äî no obligation, no pressure.',
    button: 'Get Free Estimate',
    orCall: 'Or call us at',
    orWhatsApp: 'Or message us on WhatsApp',
    callNow: 'Call Now',
    noObligation: 'No obligation ‚Äî Just honest advice',
    letsDiscuss: 'Let\'s discuss your project',
    proudlyServing: 'Proudly Serving',
    andSurrounding: '& surrounding areas',
  },

  // How We Work
  howWeWork: {
    title: 'How We Work',
    subtitle: 'Simple, Transparent Process',
    bottomNote: 'Every project is unique, but our commitment to quality and communication never changes.',
    steps: {
      consult: 'Free Consultation',
      consultDesc: 'We visit your home, listen to your vision, and assess the scope of work.',
      plan: 'Detailed Plan & Quote',
      planDesc: 'You receive a clear, written estimate with no hidden fees.',
      build: 'Expert Execution',
      buildDesc: 'Our skilled team completes your project on time and on budget.',
      inspect: 'Final Walkthrough',
      inspectDesc: 'We walk through every detail together until you\'re 100% satisfied.',
    },
  },

  // Meet Carlos / About section on homepage
  meetCarlos: {
    intro: 'Hi, I am Carlos. For over 20 years, my team and I have been helping DMV homeowners bring their renovation ideas to life.',
    body: 'We treat every home like our own and believe quality work starts with clear communication and genuine care. Whether it is a complete kitchen transformation or a quick repair, we are here to make the process smooth and the results exceptional.',
    badge1: '20+ Years Serving the DMV',
    badge2: '500+ Projects Completed',
    badge3: 'MHIC Licensed & Insured',
    learnMore: 'Learn more about our story',
    teamTitle: 'The CR Home Pros Team',
    teamDesc: 'A tight-knit crew of skilled craftsmen who take pride in every project. Each member brings years of hands-on experience in their specialty.',
    teamLabel1: 'Carlos & Team',
    teamSub1: 'The crew',
    teamLabel2: 'On the Job',
    teamSub2: 'Painting crew',
    teamCount: '6 Skilled Craftsmen',
    teamSpecialties: 'Painters, carpenters, roofers, tile & more',
    teamPhotoNote: 'Team photos coming soon ‚Äî new CR Home Pros tees on the way!',
  },

  // Why Choose Us section
  whyChoose: {
    heading: 'Years of Building',
    headingAccent: 'Trust',
    description: 'When you choose CR Home Pros, you\'re choosing a team that treats your home like our own. We\'re not just contractors‚Äîwe\'re craftsmen committed to excellence, communication, and lasting relationships with our clients.',
    quote: 'My team and I are dedicated to bringing your home\'s potential to life, one improvement at a time. We\'re not just renovating spaces‚Äîwe\'re helping you build the dream home you\'ve always wanted.',
    quoteAuthor: 'Carlos Hernandez',
    quoteRole: 'Founder',
    item0Title: '20+ Years Experience',
    item0Desc: 'Two decades of trusted craftsmanship serving the DMV area.',
    item1Title: 'Licensed & Insured',
    item1Desc: 'Fully licensed (MHIC #05-132359) and insured for your protection.',
    item2Title: 'Bilingual Team',
    item2Desc: 'Fluent in English and Spanish. ¬°Hablamos Espa√±ol!',
    item3Title: 'Quality Guaranteed',
    item3Desc: 'We stand behind our work with pride and accountability.',
  },

  // Testimonials
  testimonials: {
    badge: 'Testimonials',
    title: 'What Our Clients Say',
    description: 'Don\'t just take our word for it‚Äîhear from homeowners who\'ve experienced the CR Home Pros difference.',
    readAll: 'Read All Reviews',
  },

  // Featured Projects
  featuredProjects: {
    badge: 'Our Portfolio',
    title: 'Featured Projects',
    description: 'See the quality of our craftsmanship. Every project completed with precision and pride.',
    viewBefore: 'View Before',
    viewAfter: 'View After',
    viewFull: 'View Full Project',
    viewAll: 'View All Projects',
    p0Title: 'Full Kitchen Renovation',
    p0Type: 'Kitchen',
    p0Duration: '6 weeks',
    p0Desc: 'Complete kitchen transformation featuring custom cabinetry, premium countertops, modern appliances, and expert tiling work.',
    p1Title: 'Modern Bathroom Remodel',
    p1Type: 'Bathroom',
    p1Duration: '4 weeks',
    p1Desc: 'Luxurious bathroom renovation with custom tile work, modern fixtures, and premium finishes throughout.',
    p2Title: 'Complete Home Renovation',
    p2Type: 'Renovation',
    p2Duration: '12 weeks',
    p2Desc: 'Full property transformation including structural work, flooring, walls, and complete interior refinishing.',
    p3Title: 'Custom Deck Build',
    p3Type: 'Deck',
    p3Duration: '3 weeks',
    p3Desc: 'Beautiful deck construction with quality lumber, expert craftsmanship, and professional staining for long-lasting beauty.',
  },

  // Project Highlight
  projectHighlight: {
    badge: 'Recent Project Spotlight',
    title: 'See the Transformation',
    viewAll: 'View All Projects',
    before: 'Before',
    after: 'After',
    during: 'During',
    startProject: 'Start Your Project',
    getEstimate: 'Get an Estimate',
    projectDuration: 'Project Duration',
    area: 'Area',
    budgetRange: 'Budget Range',
    highlightTitle: 'Complete Basement Transformation',
    highlightCategory: 'Basement Finishing',
    highlightLocation: 'Laurel, MD',
    highlightDate: 'October 2024',
    highlightDesc: 'From raw, unfinished space to a beautiful finished living area. Drywall installed throughout, recessed lighting, tile flooring, and a clean blue-gray palette with a bold accent wall. Includes a dedicated laundry nook with fresh trim and built-in storage.',
    highlightDuration: '3 weeks',
    highlightArea: '~800 sq ft',
    highlightBudget: '$20K‚Äì$40K',
  },

  // FAQ Section
  faq: {
    badge: 'FAQ',
    title: 'Frequently Asked Questions',
    description: 'Quick answers to the questions we hear most from DMV homeowners.',
    stillHaveQuestions: 'Still have questions? We\'re happy to help.',
    whatsappUs: 'WhatsApp Us',
    q0: 'What kind of home improvement services do you offer?',
    a0: 'We specialize in a wide range of services including kitchen and bathroom remodels, flooring installations, painting, roofing, concrete work, deck building, and much more. We also handle insurance claims. If you have a specific project in mind, feel free to reach out to us for more detailed information.',
    q1: 'Are you licensed and insured?',
    a1: 'Yes, we are fully licensed (MHIC #05-132359) and insured. We adhere to all industry standards and regulations to ensure the highest quality of work and peace of mind for our clients.',
    q2: 'Do you help with design and material selection?',
    a2: 'Absolutely! Our team can assist you in selecting the right materials and designs that suit your taste and functionality needs. We\'re here to guide you through every step of the decision-making process.',
    q3: 'How do I get a quote for my project?',
    a3: 'Simply use our "Get Started" form or give us a call at (571) 237-7164. We\'ll discuss your project needs, preferences, and schedule a site visit if necessary, to provide you with an accurate and transparent quote.',
    q4: 'How long does a typical project take to complete?',
    a4: 'The duration depends on the project\'s complexity and scope. We strive to complete all projects in a timely manner without compromising on quality. After our initial consultation, we\'ll give you an estimated timeline for your specific project.',
    q5: 'What measures do you take to ensure the project area is safe and clean?',
    a5: 'Your safety and comfort are our top priorities. We take extensive measures to keep the work area safe and clean, including regular cleanups, dust barriers, and following all safety protocols.',
    q6: 'Do you work with insurance claims?',
    a6: 'Yes! We have extensive experience working with insurance companies on damage claims. We can help document the damage, provide detailed estimates, and work directly with your insurance adjuster to streamline the process.',
    q7: 'Do you offer emergency repair services?',
    a7: 'Yes, we\'re on call for emergencies. Whether it\'s a collapsed ceiling, water damage, or urgent repairs, we can respond quickly to help minimize damage and get your home back to normal.',
    q8: 'What payment methods do you accept?',
    a8: 'We accept credit and debit cards (Visa, Mastercard, Amex, Discover), Zelle, Venmo, Cash App, personal or business checks, and Klarna (buy now, pay later ‚Äî split into 4 interest-free payments). We also work directly with insurance companies on covered claims.',
    q9: 'Do you offer financing for larger projects?',
    a9: 'Yes! For larger projects like kitchen renovations, basement finishing, or whole-home remodels, we offer flexible financing options including Klarna. This lets you break payments into manageable installments while we get started on your project right away.',
    q10: 'What areas do you serve?',
    a10: 'We serve the entire DMV (DC, Maryland, Virginia) area including Washington DC, Hyattsville, Silver Spring, Bethesda, Rockville, College Park, Bowie, Laurel, Columbia, Arlington, Alexandria, Falls Church, Fairfax, and surrounding communities. If you\'re unsure whether we cover your area, just give us a call.',
    q11: 'Do you speak Spanish? / ¬øHablan espa√±ol?',
    a11: '¬°S√≠! Our entire team is bilingual in English and Spanish. We want every homeowner to feel comfortable communicating about their project in the language they prefer. Our website is also available in Spanish.',
    q12: 'Do you offer eco-friendly or green renovation options?',
    a12: 'Yes. We use low-VOC and zero-VOC paints, LED lighting, and Energy Star appliances as standard practice. We also offer sustainable materials like bamboo flooring, reclaimed wood, and recycled countertops. We recycle construction waste and donate usable materials to organizations like Habitat for Humanity ReStore.',
    q13: 'How does your referral program work?',
    a13: 'When you refer a friend, family member, or neighbor who books a project with us, you earn a referral reward. Just fill out our referral form with their contact info, and once their project is completed, we\'ll send you your reward via your preferred payment method (check, Zelle, Venmo, or credit).',
    q14: 'Can I see examples of your past work?',
    a14: 'Absolutely! Visit our Projects page to browse our gallery of completed projects with before-and-after photos. You can also check out our Instagram (@crhomepros) and TikTok (@crhomepro) for recent project videos and updates.',
  },

  // Payment Options
  payment: {
    badge: 'Flexible Payment',
    title: 'Payment Options That Work for You',
    description: 'We accept multiple payment methods and work directly with insurance companies. Financing available for larger projects.',
    learnFinancing: 'Learn about financing',
    insuranceClaims: 'Insurance claims info',
    methods: {
      creditCards: 'Credit & Debit Cards',
      creditCardsDetail: 'Visa, Mastercard, Amex, Discover',
      zelle: 'Zelle',
      zelleDetail: 'Instant bank transfers',
      venmo: 'Venmo',
      venmoDetail: 'Quick mobile payments',
      cashApp: 'Cash App',
      cashAppDetail: 'Mobile transfers',
      check: 'Check',
      checkDetail: 'Personal or business',
      klarna: 'Klarna',
      klarnaDetail: 'Split into 4 payments',
      insurance: 'Insurance Claims',
      insuranceDetail: 'We work with your insurer',
      financing: 'Financing',
      financingDetail: 'Flexible payment plans',
    },
  },

  // Stats
  stats: {
    projects: '500+',
    projectsLabel: 'Projects Completed',
    years: '20+',
    yearsLabel: 'Years Experience',
    rating: '4.9',
    ratingLabel: 'Star Rating',
    satisfaction: '100%',
    satisfactionLabel: 'Satisfaction Focus',
  },
} as const

export default en

// Recursive type that preserves structure but allows any strings
type DeepStringify<T> = {
  [K in keyof T]: T[K] extends string ? string : DeepStringify<T[K]>
}

export type Dictionary = DeepStringify<typeof en>


==========================================================================================

--- file: lib/i18n/es.ts ---
import type { Dictionary } from './en'

const es: Dictionary = {
  // Navegaci√≥n
  nav: {
    home: 'Inicio',
    services: 'Servicios',
    projects: 'Proyectos',
    about: 'Nosotros',
    blog: 'Blog',
    reviews: 'Rese√±as',
    contact: 'Contacto',
    referrals: 'Referidos $$$',
    getEstimate: 'Estimado Gratis',
    hablamos: '¬°Hablamos Espa√±ol!',
    whatsappUs: 'Escr√≠benos por WhatsApp',
    financing: 'Financiamiento',
    emergency: '¬øEmergencia?',
    green: 'Ecol√≥gico',
    pricing: 'Precios',
  },

  // Hero
  hero: {
    badge: 'Contratista de Confianza en DMV ‚Äî 20+ A√±os',
    title: 'Tu Hogar.',
    titleAccent: 'Nuestra Experiencia.',
    subtitle: 'Desde cocinas y ba√±os hasta techos y concreto ‚Äî ofrecemos trabajo de calidad con precios honestos. Sirviendo DC, Maryland y Virginia.',
    cta: 'Solicita Tu Estimado Gratis',
    ctaSecondary: 'Ver Nuestro Trabajo',
    bilingualBadge: '¬°Hablamos Espa√±ol!',
    since: 'Desde 2004',
    trustBadges: {
      years: '20+ A√±os de Experiencia',
      licensed: 'Licenciado y Asegurado',
      licensedDetail: 'MHIC #05-132359',
      estimates: 'Estimados Gratis',
      spanish: '¬°Hablamos Espa√±ol!',
    },
    slides: {
      s1tagline: 'Una Llamada Lo Resuelve Todo',
      s1subtitle: 'Desde grifos con fugas hasta remodelaciones completas ‚Äî precisi√≥n, cuidado y cero complicaciones.',
      s2tagline: 'Tu Hogar, En Buenas Manos',
      s2subtitle: 'Reparaciones menores o grandes transformaciones: nosotros nos encargamos de cada detalle.',
      s3tagline: 'Hecho para Durar, Dise√±ado para Impresionar',
      s3subtitle: 'Profesionales expertos convirtiendo tu casa en el hogar que siempre so√±aste.',
      s4tagline: 'De Principio a Fin',
      s4subtitle: 'Cada proyecto, a cualquier escala ‚Äî entregado con experiencia y un toque perfecto.',
      s5tagline: 'Transformamos Casas en Hogares',
      s5subtitle: 'Servicio impecable desde el ajuste m√°s peque√±o hasta el sue√±o m√°s grande.',
      s6tagline: 'Ning√∫n Trabajo Es Muy Peque√±o. Ninguna Visi√≥n Es Muy Grande.',
      s6subtitle: 'Tu equipo de confianza para cada necesidad de mejora del hogar.',
    },
  },

  // Servicios
  services: {
    title: 'Nuestros Servicios',
    subtitle: 'Soluciones Completas para Tu Hogar',
    description: 'Desde reparaciones menores hasta remodelaciones completas, tenemos la experiencia para transformar tu hogar.',
    viewAll: 'Ver Todos los Servicios',
    getEstimate: 'Estimado Gratis',
    callNow: 'Llamar Ahora',
    whyChoose: 'Por Qu√© Elegir CR Home Pros',
    kitchen: {
      name: 'Remodelaci√≥n de Cocina',
      description: 'Gabinetes a medida, mesones, backsplash, pisos, iluminaci√≥n y transformaciones completas de cocina.',
      short: 'Transforma tu cocina en el coraz√≥n de tu hogar.',
    },
    bathroom: {
      name: 'Renovaci√≥n de Ba√±o',
      description: 'Duchas, reemplazo de ba√±eras, lavamanos, trabajos de azulejos y remodelaciones completas de ba√±o.',
      short: 'Crea retiros dignos de spa con materiales premium.',
    },
    basement: {
      name: 'Terminaci√≥n de S√≥tano',
      description: 'Transforma espacios sin usar en √°reas de estar, oficinas, salas de entretenimiento o unidades de alquiler.',
      short: 'Desbloquea el potencial oculto de tu hogar.',
    },
    roofing: {
      name: 'Techos',
      description: 'Reparaci√≥n y reemplazo de techos, techos planos y detecci√≥n de filtraciones.',
      short: 'Protege tu hogar con soluciones de techo de calidad.',
    },
    painting: {
      name: 'Pintura Interior y Exterior',
      description: 'Pintura interior y exterior, lavado a presi√≥n, te√±ido y preparaci√≥n de superficies.',
      short: 'Pintura profesional con atenci√≥n meticulosa al detalle.',
    },
    concrete: {
      name: 'Concreto y Entradas',
      description: 'Entradas, patios, muros de contenci√≥n, cimientos y trabajo decorativo en concreto.',
      short: 'Trabajo de concreto duradero hecho para durar d√©cadas.',
    },
    deck: {
      name: 'Decks y Espacios Exteriores',
      description: 'Construcci√≥n personalizada de decks, restauraci√≥n, te√±ido y espacios al aire libre.',
      short: 'Extiende tu espacio de vida al aire libre.',
    },
    flooring: {
      name: 'Pisos y Azulejos',
      description: 'Instalaci√≥n de madera, azulejo, vinilo y laminado para cada habitaci√≥n.',
      short: 'Pisos hermosos que transforman cualquier espacio.',
    },
    fencing: {
      name: 'Cercas',
      description: 'Cercas de privacidad, vinilo, madera e instalaci√≥n y reparaci√≥n de malla.',
      short: 'Cercas de privacidad, vinilo, madera e instalaci√≥n y reparaci√≥n.',
    },
    completeRenovations: {
      name: 'Remodelaciones Completas',
      description: 'Transformaciones completas del hogar de concepto a finalizaci√≥n.',
      short: 'Transformaciones completas del hogar de principio a fin.',
    },
    insuranceClaims: {
      name: 'Reclamaciones de Seguro',
      description: 'Manejamos el papeleo y trabajamos directamente con tu compa√±√≠a de seguros.',
      short: 'Trabajamos directamente con tu compa√±√≠a de seguros.',
    },
    powerWashing: {
      name: 'Lavado a Presi√≥n',
      description: 'Entradas, revestimientos, decks, cercas y limpieza de superficies exteriores.',
      short: 'Limpieza profesional de superficies exteriores.',
    },
    general: {
      name: 'Reparaciones Generales',
      description: 'Drywall, pisos, puertas, ventanas, plomer√≠a, electricidad y servicios de mantenimiento.',
      short: 'Drywall, puertas, ventanas, plomer√≠a y m√°s.',
    },
  },

  // Nosotros
  about: {
    title: 'Sobre CR Home Pros',
    subtitle: 'Conoce a Carlos',
    story: 'Con m√°s de 20 a√±os de experiencia pr√°ctica en mejoras del hogar, Carlos Hern√°ndez ha construido CR Home Pros sobre una base de trabajo de calidad, precios honestos y cuidado genuino por cada cliente.',
    mission: 'Nuestra misi√≥n es simple: tratar cada hogar como si fuera el nuestro. Llegamos a tiempo, nos comunicamos claramente y entregamos resultados que duran.',
    values: {
      quality: 'Trabajo de Calidad',
      qualityDesc: 'Cada detalle importa. Usamos materiales premium y t√©cnicas comprobadas.',
      honest: 'Precios Honestos',
      honestDesc: 'Sin cargos ocultos, sin sorpresas. Recibes un presupuesto claro desde el principio.',
      reliable: 'Servicio Confiable',
      reliableDesc: 'Llegamos cuando decimos que llegaremos y terminamos a tiempo.',
      licensed: 'Licenciado y Asegurado',
      licensedDesc: 'Completamente licenciado (MHIC #05-132359) y asegurado para tu protecci√≥n.',
    },
  },

  // Proyectos
  projects: {
    title: 'Nuestros Proyectos',
    subtitle: 'Mira Nuestro Trabajo',
    description: 'Explora nuestro portafolio de proyectos completados en el √°rea de DMV.',
    filterAll: 'Todos',
    viewProject: 'Ver Proyecto',
    categories: {
      kitchen: 'Cocina',
      bathroom: 'Ba√±o',
      renovation: 'Remodelaci√≥n Completa',
      concrete: 'Concreto',
      roofing: 'Techos',
      deck: 'Deck',
      painting: 'Pintura',
    },
  },

  // Contacto
  contact: {
    title: 'Cont√°ctanos',
    subtitle: 'Comun√≠cate con Nosotros',
    description: '¬øListo para comenzar tu proyecto? Cont√°ctanos para un estimado gratis. Respondemos en 24 horas.',
    form: {
      name: 'Tu Nombre',
      email: 'Correo Electr√≥nico',
      phone: 'N√∫mero de Tel√©fono',
      service: 'Servicio Necesitado',
      message: 'Cu√©ntanos sobre tu proyecto',
      submit: 'Enviar Mensaje',
      sending: 'Enviando...',
      success: '¬°Mensaje enviado! Te responderemos en 24 horas.',
      error: 'Algo sali√≥ mal. Por favor ll√°manos directamente.',
    },
    info: {
      phone: 'Tel√©fono',
      email: 'Correo',
      whatsapp: 'WhatsApp',
      whatsappCta: 'Toca para escribirnos',
      address: 'Direcci√≥n',
      serving: 'Sirviendo DC, MD y VA',
      hours: 'Horario',
      hoursDetail: 'Lun-S√°b 7AM-7PM',
      emergency: 'Emergencias 24/7',
    },
  },

  // Rese√±as
  reviews: {
    title: 'Rese√±as de Clientes',
    subtitle: 'Lo Que Dicen Nuestros Clientes',
    description: 'No solo conf√≠es en nuestra palabra ‚Äî escucha a los due√±os de casa que nos confiaron sus proyectos.',
    leaveReview: 'Dejar una Rese√±a',
    googleReviews: 'Ver Rese√±as en Google',
    yelpReviews: 'Ver Rese√±as en Yelp',
  },

  // Referidos
  referrals: {
    title: 'Programa de Referidos',
    subtitle: 'Comparte las Recompensas',
    description: 'Gana recompensas en efectivo por cada amigo o vecino que refieras a CR Home Pros.',
    earnUp: 'Gana hasta',
    perReferral: 'por referido',
    howItWorks: 'C√≥mo Funciona',
    rewardStructure: 'Estructura de Recompensas',
    biggerProject: 'Entre m√°s grande el proyecto que complete tu referido, mayor ser√° tu recompensa.',
    bestValue: 'MEJOR VALOR',
    giftCard: 'Tarjeta de Regalo',
    steps: {
      share: 'Comparte Nuestra Info',
      shareDesc: 'Cu√©ntale a tus amigos, familiares o vecinos sobre CR Home Pros.',
      connect: 'Ellos Nos Contactan',
      connectDesc: 'Tu referido nos contacta y menciona tu nombre.',
      complete: 'Proyecto Completado',
      completeDesc: 'Una vez completado el proyecto, ganas tu recompensa de referido.',
      getPaid: 'Recibe Tu Pago',
      getPaidDesc: 'Recibe tu recompensa por cheque, Venmo, Zelle, tarjeta de regalo o cr√©dito para tu pr√≥ximo proyecto.',
    },
  },

  // Blog
  blog: {
    title: 'Blog',
    subtitle: 'Consejos e Ideas para Tu Hogar',
    description: 'Consejos de expertos, gu√≠as de proyectos e ideas del equipo de CR Home Pros.',
    readMore: 'Leer M√°s ‚Üí',
    backToBlog: '‚Üê Volver al Blog',
  },

  // Estimado
  estimate: {
    title: 'Solicita Tu Estimado Gratis',
    subtitle: 'Comienza Tu Proyecto Hoy',
    description: 'Cu√©ntanos sobre tu proyecto y te daremos un estimado gratis, sin compromiso, en 24 horas.',
    step1: 'Detalles del Proyecto',
    step2: 'Tu Informaci√≥n',
    step3: 'Agenda',
    next: 'Siguiente',
    back: 'Atr√°s',
    submit: 'Enviar Solicitud',
    success: '¬°Solicitud enviada! Te contactaremos en 24 horas.',
  },

  // Financiamiento
  financing: {
    title: 'Opciones de Financiamiento',
    subtitle: 'Remodela Hoy, Paga a Tu Ritmo',
    description: 'No dejes que el presupuesto detenga la remodelaci√≥n de tus sue√±os. Ofrecemos financiamiento flexible para hacer las mejoras del hogar accesibles.',
    whyFinance: '¬øPor Qu√© Financiar Tu Proyecto?',
    benefits: {
      noWait: 'No Esperes para Reparar',
      noWaitDesc: 'Las filtraciones, problemas estructurales y sistemas obsoletos empeoran (y se encarecen) con el tiempo.',
      preserve: 'Protege Tus Ahorros',
      preserveDesc: 'Mant√©n tu fondo de emergencia intacto mientras mejoras tu hogar.',
      increase: 'Aumenta el Valor de Tu Casa',
      increaseDesc: 'La mayor√≠a de las remodelaciones se pagan solas con el valor agregado a la propiedad.',
      flexible: 'Pagos Flexibles',
      flexibleDesc: 'Elige un plan de pago que se ajuste a tu presupuesto mensual.',
    },
    options: {
      title: 'Opciones Disponibles',
      zeroInterest: 'Planes 0% de Inter√©s',
      zeroInterestDesc: 'Compradores calificados pueden financiar hasta 18 meses sin inter√©s.',
      lowMonthly: 'Pagos Mensuales Bajos',
      lowMonthlyDesc: 'Distribuye los costos en 24-60 meses con tasas competitivas.',
      noMoney: 'Sin Enganche',
      noMoneyDesc: 'Comienza tu proyecto sin pago inicial con cr√©dito aprobado.',
      quickApproval: 'Aprobaci√≥n R√°pida',
      quickApprovalDesc: 'Aprobado en minutos ‚Äî no en d√≠as.',
    },
    calculator: {
      title: 'Calculadora de Pagos',
      projectCost: 'Costo del Proyecto',
      term: 'Plazo del Pr√©stamo',
      months: 'meses',
      rate: 'Tasa APR',
      estimated: 'Pago Mensual Estimado',
      disclaimer: 'Esto es solo un estimado. Los t√©rminos reales dependen de la aprobaci√≥n de cr√©dito. Cont√°ctanos para discutir opciones de financiamiento para tu proyecto.',
    },
    cta: 'Pregunta por Financiamiento',
    ctaDesc: 'Ll√°manos o solicita un estimado y menciona financiamiento ‚Äî te explicaremos tus opciones.',
  },

  // Estimador de Costos
  quoteEstimator: {
    title: 'Estimador de Costos',
    subtitle: 'Obt√©n un Estimado Aproximado',
    description: 'Usa nuestra calculadora para tener una idea aproximada del costo de tu proyecto. Para un presupuesto exacto, cont√°ctanos para un estimado gratis a domicilio.',
    selectService: 'Selecciona un Servicio',
    selectSize: 'Tama√±o del Proyecto',
    sizes: {
      xs: 'Extra Peque√±o',
      small: 'Peque√±o',
      medium: 'Mediano',
      large: 'Grande',
      xl: 'Extra Grande',
    },
    estimatedRange: 'Rango de Costo Estimado',
    disclaimer: 'Estos son rangos aproximados basados en proyectos t√≠picos en el √°rea de DMV. Los costos reales var√≠an seg√∫n materiales, alcance y condiciones del sitio. Cont√°ctanos para un presupuesto preciso y gratuito.',
    getExactQuote: 'Obt√©n un Presupuesto Exacto ‚Äî Gratis',
    callForDetails: 'Llama para Discutir Tu Proyecto',
  },

  // Com√∫n
  common: {
    freeEstimate: 'Estimado Gratis',
    callUs: 'Ll√°manos',
    call: 'Llamar',
    learnMore: 'Saber M√°s',
    viewAll: 'Ver Todo',
    readMore: 'Leer M√°s',
    back: 'Atr√°s',
    next: 'Siguiente',
    submit: 'Enviar',
    loading: 'Cargando...',
    error: 'Algo sali√≥ mal',
    servingAreas: 'Sirviendo',
    surroundingAreas: 'y √°reas cercanas',
    projectsCompleted: 'Proyectos Completados',
    yearsExperience: 'A√±os de Experiencia',
    satisfactionFocus: 'Enfoque en Satisfacci√≥n',
    licensedInsured: 'Licenciado y Asegurado',
    licensedContractor: 'Contratista Licenciado',
    copyright: '¬©',
    privacyPolicy: 'Pol√≠tica de Privacidad',
    termsOfService: 'T√©rminos de Servicio',
    whatsappGreeting: '¬°Hola! Me interesan sus servicios de mejoras del hogar.',
  },

  // Footer
  footer: {
    description: 'Servicios profesionales de mejoras del hogar sirviendo Washington DC, Maryland y Virginia. Licenciado, asegurado y comprometido con la excelencia.',
    quickLinks: 'Enlaces R√°pidos',
    contactUs: 'Cont√°ctanos',
    tapToMessage: 'Toca para escribirnos',
    emergencyOnCall: 'Emergencias 24/7',
    monSat: 'Lun - S√°b',
    yearsServingDMV: 'A√±os Sirviendo el DMV',
    weAccept: 'Aceptamos',
    ecoFriendly: 'Opciones Ecol√≥gicas',
  },

  // CTA
  cta: {
    title: '¬øListo para Transformar Tu Hogar?',
    subtitle: 'Solicita tu estimado gratis hoy ‚Äî sin compromiso, sin presi√≥n.',
    button: 'Estimado Gratis',
    orCall: 'O ll√°manos al',
    orWhatsApp: 'O escr√≠benos por WhatsApp',
    callNow: 'Llamar Ahora',
    noObligation: 'Sin compromiso ‚Äî Solo consejos honestos',
    letsDiscuss: 'Hablemos de tu proyecto',
    proudlyServing: 'Sirviendo con Orgullo',
    andSurrounding: 'y √°reas cercanas',
  },

  // C√≥mo Trabajamos
  howWeWork: {
    title: 'C√≥mo Trabajamos',
    subtitle: 'Proceso Simple y Transparente',
    bottomNote: 'Cada proyecto es √∫nico, pero nuestro compromiso con la calidad y la comunicaci√≥n nunca cambia.',
    steps: {
      consult: 'Consulta Gratis',
      consultDesc: 'Visitamos tu hogar, escuchamos tu visi√≥n y evaluamos el alcance del trabajo.',
      plan: 'Plan y Presupuesto Detallado',
      planDesc: 'Recibes un estimado claro y por escrito, sin cargos ocultos.',
      build: 'Ejecuci√≥n Profesional',
      buildDesc: 'Nuestro equipo experto completa tu proyecto a tiempo y dentro del presupuesto.',
      inspect: 'Revisi√≥n Final',
      inspectDesc: 'Revisamos cada detalle juntos hasta que est√©s 100% satisfecho.',
    },
  },

  // Conoce a Carlos
  meetCarlos: {
    intro: 'Hola, soy Carlos. Por m√°s de 20 a√±os, mi equipo y yo hemos ayudado a propietarios del DMV a hacer realidad sus ideas de remodelaci√≥n.',
    body: 'Tratamos cada hogar como si fuera el nuestro y creemos que el trabajo de calidad comienza con comunicaci√≥n clara y cuidado genuino. Ya sea una transformaci√≥n completa de cocina o una reparaci√≥n r√°pida, estamos aqu√≠ para hacer el proceso fluido y los resultados excepcionales.',
    badge1: '20+ A√±os Sirviendo el DMV',
    badge2: '500+ Proyectos Completados',
    badge3: 'MHIC Licenciado y Asegurado',
    learnMore: 'Conoce m√°s sobre nuestra historia',
    teamTitle: 'El Equipo de CR Home Pros',
    teamDesc: 'Un equipo unido de artesanos expertos que se enorgullecen de cada proyecto. Cada miembro aporta a√±os de experiencia pr√°ctica en su especialidad.',
    teamLabel1: 'Carlos y Equipo',
    teamSub1: 'La cuadrilla',
    teamLabel2: 'En Acci√≥n',
    teamSub2: 'Equipo de pintura',
    teamCount: '6 Artesanos Expertos',
    teamSpecialties: 'Pintores, carpinteros, techeros, azulejistas y m√°s',
    teamPhotoNote: 'Fotos del equipo pr√≥ximamente ‚Äî ¬°nuevas camisetas de CR Home Pros en camino!',
  },

  // Por Qu√© Elegirnos
  whyChoose: {
    heading: 'A√±os Construyendo',
    headingAccent: 'Confianza',
    description: 'Cuando eliges CR Home Pros, eliges un equipo que trata tu hogar como el suyo. No somos solo contratistas ‚Äî somos artesanos comprometidos con la excelencia, la comunicaci√≥n y las relaciones duraderas con nuestros clientes.',
    quote: 'Mi equipo y yo estamos dedicados a dar vida al potencial de tu hogar, una mejora a la vez. No solo estamos remodelando espacios ‚Äî estamos ayud√°ndote a construir el hogar de tus sue√±os.',
    quoteAuthor: 'Carlos Hernandez',
    quoteRole: 'Fundador',
    item0Title: '20+ A√±os de Experiencia',
    item0Desc: 'Dos d√©cadas de artesan√≠a de confianza sirviendo el √°rea del DMV.',
    item1Title: 'Licenciado y Asegurado',
    item1Desc: 'Completamente licenciado (MHIC #05-132359) y asegurado para tu protecci√≥n.',
    item2Title: 'Equipo Biling√ºe',
    item2Desc: 'Fluido en ingl√©s y espa√±ol. ¬°Hablamos Espa√±ol!',
    item3Title: 'Calidad Garantizada',
    item3Desc: 'Respaldamos nuestro trabajo con orgullo y responsabilidad.',
  },

  // Testimonios
  testimonials: {
    badge: 'Testimonios',
    title: 'Lo Que Dicen Nuestros Clientes',
    description: 'No solo conf√≠es en nuestra palabra ‚Äî escucha a los propietarios que experimentaron la diferencia de CR Home Pros.',
    readAll: 'Ver Todas las Rese√±as',
  },

  // Proyectos Destacados
  featuredProjects: {
    badge: 'Nuestro Portafolio',
    title: 'Proyectos Destacados',
    description: 'Mira la calidad de nuestro trabajo. Cada proyecto completado con precisi√≥n y orgullo.',
    viewBefore: 'Ver Antes',
    viewAfter: 'Ver Despu√©s',
    viewFull: 'Ver Proyecto Completo',
    viewAll: 'Ver Todos los Proyectos',
    p0Title: 'Remodelaci√≥n Completa de Cocina',
    p0Type: 'Cocina',
    p0Duration: '6 semanas',
    p0Desc: 'Transformaci√≥n completa de cocina con gabinetes a medida, mesones premium, electrodom√©sticos modernos y trabajo experto de azulejos.',
    p1Title: 'Remodelaci√≥n Moderna de Ba√±o',
    p1Type: 'Ba√±o',
    p1Duration: '4 semanas',
    p1Desc: 'Renovaci√≥n lujosa de ba√±o con azulejos personalizados, accesorios modernos y acabados premium en todo.',
    p2Title: 'Renovaci√≥n Completa del Hogar',
    p2Type: 'Renovaci√≥n',
    p2Duration: '12 semanas',
    p2Desc: 'Transformaci√≥n total de la propiedad incluyendo trabajo estructural, pisos, paredes y acabado interior completo.',
    p3Title: 'Construcci√≥n de Deck Personalizado',
    p3Type: 'Deck',
    p3Duration: '3 semanas',
    p3Desc: 'Hermosa construcci√≥n de deck con madera de calidad, artesan√≠a experta y te√±ido profesional para belleza duradera.',
  },

  // Proyecto Destacado
  projectHighlight: {
    badge: 'Proyecto Reciente',
    title: 'Mira la Transformaci√≥n',
    viewAll: 'Ver Todos los Proyectos',
    before: 'Antes',
    after: 'Despu√©s',
    during: 'Durante',
    startProject: 'Comienza Tu Proyecto',
    getEstimate: 'Solicita un Estimado',
    projectDuration: 'Duraci√≥n del Proyecto',
    area: '√Årea',
    budgetRange: 'Rango de Presupuesto',
    highlightTitle: 'Transformaci√≥n Completa de S√≥tano',
    highlightCategory: 'Terminaci√≥n de S√≥tano',
    highlightLocation: 'Laurel, MD',
    highlightDate: 'Octubre 2024',
    highlightDesc: 'De un espacio sin terminar a una hermosa √°rea habitable. Drywall instalado, iluminaci√≥n empotrada, piso de azulejo y una paleta azul-gris con pared de acento. Incluye √°rea de lavander√≠a con molduras y almacenamiento integrado.',
    highlightDuration: '3 semanas',
    highlightArea: '~74 m¬≤',
    highlightBudget: '$20K‚Äì$40K',
  },

  // Preguntas Frecuentes
  faq: {
    badge: 'Preguntas Frecuentes',
    title: 'Preguntas Frecuentes',
    description: 'Respuestas r√°pidas a las preguntas que m√°s escuchamos de los propietarios del DMV.',
    stillHaveQuestions: '¬øA√∫n tienes preguntas? Estamos felices de ayudar.',
    whatsappUs: 'Escr√≠benos por WhatsApp',
    q0: '¬øQu√© tipo de servicios de mejoras del hogar ofrecen?',
    a0: 'Nos especializamos en una amplia gama de servicios incluyendo remodelaci√≥n de cocinas y ba√±os, instalaci√≥n de pisos, pintura, techos, trabajo de concreto, construcci√≥n de decks y mucho m√°s. Tambi√©n manejamos reclamaciones de seguro. Si tienes un proyecto espec√≠fico en mente, no dudes en contactarnos para informaci√≥n m√°s detallada.',
    q1: '¬øEst√°n licenciados y asegurados?',
    a1: 'S√≠, estamos completamente licenciados (MHIC #05-132359) y asegurados. Cumplimos con todos los est√°ndares y regulaciones de la industria para garantizar la m√°s alta calidad de trabajo y tranquilidad para nuestros clientes.',
    q2: '¬øAyudan con el dise√±o y la selecci√≥n de materiales?',
    a2: '¬°Por supuesto! Nuestro equipo puede ayudarte a seleccionar los materiales y dise√±os correctos que se adapten a tu gusto y necesidades funcionales. Estamos aqu√≠ para guiarte en cada paso del proceso de decisi√≥n.',
    q3: '¬øC√≥mo obtengo un presupuesto para mi proyecto?',
    a3: 'Simplemente usa nuestro formulario "Comenzar" o ll√°manos al (571) 237-7164. Discutiremos las necesidades de tu proyecto, preferencias y programaremos una visita si es necesario, para darte un presupuesto preciso y transparente.',
    q4: '¬øCu√°nto tiempo toma un proyecto t√≠pico?',
    a4: 'La duraci√≥n depende de la complejidad y alcance del proyecto. Nos esforzamos por completar todos los proyectos de manera oportuna sin comprometer la calidad. Despu√©s de nuestra consulta inicial, te daremos un tiempo estimado para tu proyecto espec√≠fico.',
    q5: '¬øQu√© medidas toman para mantener el √°rea del proyecto segura y limpia?',
    a5: 'Tu seguridad y comodidad son nuestras principales prioridades. Tomamos medidas extensivas para mantener el √°rea de trabajo segura y limpia, incluyendo limpiezas regulares, barreras de polvo y siguiendo todos los protocolos de seguridad.',
    q6: '¬øTrabajan con reclamaciones de seguro?',
    a6: '¬°S√≠! Tenemos amplia experiencia trabajando con compa√±√≠as de seguros en reclamaciones de da√±os. Podemos ayudar a documentar el da√±o, proporcionar estimados detallados y trabajar directamente con tu ajustador de seguros para agilizar el proceso.',
    q7: '¬øOfrecen servicios de reparaci√≥n de emergencia?',
    a7: 'S√≠, estamos disponibles para emergencias. Ya sea un techo colapsado, da√±o por agua o reparaciones urgentes, podemos responder r√°pidamente para minimizar el da√±o y devolver tu hogar a la normalidad.',
    q8: '¬øQu√© m√©todos de pago aceptan?',
    a8: 'Aceptamos tarjetas de cr√©dito y d√©bito (Visa, Mastercard, Amex, Discover), Zelle, Venmo, Cash App, cheques personales o empresariales y Klarna (compra ahora, paga despu√©s ‚Äî divide en 4 pagos sin intereses). Tambi√©n trabajamos directamente con compa√±√≠as de seguros en reclamaciones cubiertas.',
    q9: '¬øOfrecen financiamiento para proyectos grandes?',
    a9: '¬°S√≠! Para proyectos grandes como renovaciones de cocina, terminaci√≥n de s√≥tanos o remodelaciones completas del hogar, ofrecemos opciones flexibles de financiamiento incluyendo Klarna. Esto te permite dividir los pagos en cuotas manejables mientras comenzamos tu proyecto de inmediato.',
    q10: '¬øQu√© √°reas sirven?',
    a10: 'Servimos toda el √°rea del DMV (DC, Maryland, Virginia) incluyendo Washington DC, Hyattsville, Silver Spring, Bethesda, Rockville, College Park, Bowie, Laurel, Columbia, Arlington, Alexandria, Falls Church, Fairfax y comunidades cercanas. Si no est√°s seguro de si cubrimos tu √°rea, solo ll√°manos.',
    q11: '¬øHablan espa√±ol? / Do you speak Spanish?',
    a11: '¬°S√≠! Todo nuestro equipo es biling√ºe en ingl√©s y espa√±ol. Queremos que cada propietario se sienta c√≥modo comunic√°ndose sobre su proyecto en el idioma que prefiera. Nuestro sitio web tambi√©n est√° disponible en espa√±ol.',
    q12: '¬øOfrecen opciones de renovaci√≥n ecol√≥gicas o verdes?',
    a12: 'S√≠. Usamos pinturas de bajo VOC y cero VOC, iluminaci√≥n LED y electrodom√©sticos Energy Star como pr√°ctica est√°ndar. Tambi√©n ofrecemos materiales sostenibles como pisos de bamb√∫, madera reciclada y mesones de material reciclado. Reciclamos residuos de construcci√≥n y donamos materiales utilizables a organizaciones como Habitat for Humanity ReStore.',
    q13: '¬øC√≥mo funciona su programa de referidos?',
    a13: 'Cuando refieres a un amigo, familiar o vecino que contrata un proyecto con nosotros, ganas una recompensa de referido. Solo llena nuestro formulario de referido con su informaci√≥n de contacto, y una vez completado su proyecto, te enviaremos tu recompensa por tu m√©todo de pago preferido (cheque, Zelle, Venmo o cr√©dito).',
    q14: '¬øPuedo ver ejemplos de trabajos anteriores?',
    a14: '¬°Por supuesto! Visita nuestra p√°gina de Proyectos para explorar nuestra galer√≠a de proyectos completados con fotos de antes y despu√©s. Tambi√©n puedes ver nuestro Instagram (@crhomepros) y TikTok (@crhomepro) para videos recientes de proyectos y actualizaciones.',
  },

  // Opciones de Pago
  payment: {
    badge: 'Pagos Flexibles',
    title: 'Opciones de Pago a Tu Medida',
    description: 'Aceptamos m√∫ltiples m√©todos de pago y trabajamos directamente con compa√±√≠as de seguros. Financiamiento disponible para proyectos grandes.',
    learnFinancing: 'Conoce el financiamiento',
    insuranceClaims: 'Info de reclamaciones de seguro',
    methods: {
      creditCards: 'Tarjetas de Cr√©dito/D√©bito',
      creditCardsDetail: 'Visa, Mastercard, Amex, Discover',
      zelle: 'Zelle',
      zelleDetail: 'Transferencias bancarias instant√°neas',
      venmo: 'Venmo',
      venmoDetail: 'Pagos m√≥viles r√°pidos',
      cashApp: 'Cash App',
      cashAppDetail: 'Transferencias m√≥viles',
      check: 'Cheque',
      checkDetail: 'Personal o empresarial',
      klarna: 'Klarna',
      klarnaDetail: 'Divide en 4 pagos',
      insurance: 'Reclamaciones de Seguro',
      insuranceDetail: 'Trabajamos con tu aseguradora',
      financing: 'Financiamiento',
      financingDetail: 'Planes de pago flexibles',
    },
  },

  // Estad√≠sticas
  stats: {
    projects: '500+',
    projectsLabel: 'Proyectos Completados',
    years: '20+',
    yearsLabel: 'A√±os de Experiencia',
    rating: '4.9',
    ratingLabel: 'Calificaci√≥n',
    satisfaction: '100%',
    satisfactionLabel: 'Enfoque en Satisfacci√≥n',
  },
}

export default es


==========================================================================================

--- file: lib/i18n/link.tsx ---
'use client'

import Link from 'next/link'
import { useLocale } from './provider'
import type { Locale } from './config'

// Hook to get locale-prefixed path
export function useLocalePath() {
  const { locale } = useLocale()
  return (path: string) => {
    if (locale === 'en') return path // English uses clean URLs via rewrite
    return `/${locale}${path}`
  }
}

// Component for locale-aware links
export function LocaleLink({
  href,
  children,
  ...props
}: { href: string } & Omit<React.ComponentProps<typeof Link>, 'href'>) {
  const localePath = useLocalePath()
  return (
    <Link href={localePath(href)} {...props}>
      {children}
    </Link>
  )
}

// Language switcher component
export function LanguageSwitcher({ className }: { className?: string }) {
  const { locale } = useLocale()

  // Get current path without locale prefix
  const getToggleHref = () => {
    if (typeof window === 'undefined') return locale === 'en' ? '/es' : '/'
    const path = window.location.pathname
    const cleanPath = path.replace(/^\/(en|es)/, '') || '/'
    return locale === 'en' ? `/es${cleanPath}` : cleanPath
  }

  return (
    <a
      href={locale === 'en' ? '/es' : '/'}
      className={className}
    >
      {locale === 'en' ? 'üåê Espa√±ol' : 'üåê English'}
    </a>
  )
}


==========================================================================================

--- file: lib/i18n/provider.tsx ---
'use client'

import { createContext, useContext } from 'react'
import type { Locale } from './config'
import type { Dictionary } from './en'
import { getDictionarySync } from './dictionaries'

interface LocaleContextType {
  locale: Locale
  t: Dictionary
}

const LocaleContext = createContext<LocaleContextType>({
  locale: 'en',
  t: getDictionarySync('en'),
})

export function LocaleProvider({
  locale,
  children,
}: {
  locale: Locale
  children: React.ReactNode
}) {
  const t = getDictionarySync(locale)
  return (
    <LocaleContext.Provider value={{ locale, t }}>
      {children}
    </LocaleContext.Provider>
  )
}

export function useLocale() {
  return useContext(LocaleContext)
}

export function useTranslation() {
  const { t } = useContext(LocaleContext)
  return t
}


==========================================================================================

